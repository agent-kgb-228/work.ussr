if(window.Ya&&Ya.Rum){Ya.Rum.sendTimeMark("2095.2154");}window.home=window.home||{},home.bundles=home.bundles||{},home.bundles.staticURL=home.bundles.staticURL||{},home.bundles.staticURL["user-points"]={js:"//yastatic.net/s3/home-static/_/x/H/qYraXYXe2NAFrtzq8gTwyWVvY.js",css:"//yastatic.net/s3/home-static/_/a/o/zXTCBgav-9E07XI987Dd-UKjA.css","css.webp":"//yastatic.net/s3/home-static/_/s/S/stJUwCt7Oy5kBPfe_6kusYXH0.css","js.gen":"//yastatic.net/s3/home-static/_/W/W/XUz3yqgECKu4oBGllnPcPAF5w.js","css.gen":"//yastatic.net/s3/home-static/_/a/o/zXTCBgav-9E07XI987Dd-UKjA.css","css.gen.webp":"//yastatic.net/s3/home-static/_/s/S/stJUwCt7Oy5kBPfe_6kusYXH0.css"},home.bundles.staticURL.keyboard={js:"//yastatic.net/s3/home-static/_/O/1/ed_2TrZLsFwx3XGShhb0gPfK0.js",css:"//yastatic.net/s3/home-static/_/A/J/DqRmoQIfnm-6JmkihauIYTL_Y.css","css.webp":"//yastatic.net/s3/home-static/_/g/R/DWEydnoEz9U2zI2xUWoQtnPI8.css","js.gen":"//yastatic.net/s3/home-static/_/o/7/fyCSeBINPaNGyaoXBwKakyvkY.js","css.gen":"//yastatic.net/s3/home-static/_/A/J/DqRmoQIfnm-6JmkihauIYTL_Y.css","css.gen.webp":"//yastatic.net/s3/home-static/_/g/R/DWEydnoEz9U2zI2xUWoQtnPI8.css"},home.bundles.staticURL["direct-invertion"]={js:"//yastatic.net/s3/home-static/_/8/5/QmuYJSepCZRyZ9xjBYUHunK2g.js",css:"//yastatic.net/s3/home-static/_/6/x/NRAjtHA3NSr1QFrlyjrA2qBWU.css","css.webp":"//yastatic.net/s3/home-static/_/6/x/NRAjtHA3NSr1QFrlyjrA2qBWU.css","js.gen":"//yastatic.net/s3/home-static/_/n/3/rG1vYmvd-cWbKXk7HdFaFJgqQ.js","css.gen":"//yastatic.net/s3/home-static/_/B/p/UrD768jPzU8k9jkIddqlxyR28.css","css.gen.webp":"//yastatic.net/s3/home-static/_/B/p/UrD768jPzU8k9jkIddqlxyR28.css"},home.bundles.staticURL["direct-new-design"]={js:"//yastatic.net/s3/home-static/_/f/6/p80Id7v8WxGuxbBGa97VXoec0.js",css:"//yastatic.net/s3/home-static/_/p/w/Ablw3kInL3Go00QgddteKv3jY.css","css.webp":"//yastatic.net/s3/home-static/_/p/w/Ablw3kInL3Go00QgddteKv3jY.css","js.gen":"//yastatic.net/s3/home-static/_/h/o/aDtp1aTgk6QphnVjhZMjf9zJY.js","css.gen":"//yastatic.net/s3/home-static/_/Q/d/ZAvdcFWEN4nZ7HNrPc9wJB-XQ.css","css.gen.webp":"//yastatic.net/s3/home-static/_/Q/d/ZAvdcFWEN4nZ7HNrPc9wJB-XQ.css"},home.bundles.staticURL["b-themes-catalog"]={js:"//yastatic.net/s3/home-static/_/x/4/zbvXjgqZbxTs8XYjmaUzI-pi0.js",css:"//yastatic.net/s3/home-static/_/e/a/BcjBww2Kzc0r522GFSYpgi5NM.css","css.webp":"//yastatic.net/s3/home-static/_/7/V/yeZihFTxe9STu1MCqhbMibMiw.css","js.gen":"//yastatic.net/s3/home-static/_/D/y/N31mDLS1GgdEI38JFjEtkv5jQ.js","css.gen":"//yastatic.net/s3/home-static/_/e/a/BcjBww2Kzc0r522GFSYpgi5NM.css","css.gen.webp":"//yastatic.net/s3/home-static/_/7/V/yeZihFTxe9STu1MCqhbMibMiw.css"},home.bundles.staticURL["media-event"]={js:"//yastatic.net/s3/home-static/_/y/I/WU5QduHMZBOrIaBf3WH7_3ems.js",css:"//yastatic.net/s3/home-static/_/a/t/eEdYL9UymkaSrjB786etTmkwo.css","css.webp":"//yastatic.net/s3/home-static/_/3/r/PIMOdfvHHjpDGeoxXsdEXF_Y0.css","js.gen":"//yastatic.net/s3/home-static/_/y/3/zdkngR-Q7Zzcz1rjfwvrhXzMY.js","css.gen":"//yastatic.net/s3/home-static/_/a/t/eEdYL9UymkaSrjB786etTmkwo.css","css.gen.webp":"//yastatic.net/s3/home-static/_/3/r/PIMOdfvHHjpDGeoxXsdEXF_Y0.css"},home.bundles.staticURL["media-event-promo"]={js:"//yastatic.net/s3/home-static/_/F/4/FWJPROFaDz5SsdzszFNzv7Oh8.js",css:"//yastatic.net/s3/home-static/_/2/5/2k27FCY704CV8Orsgge9c6d4M.css","css.webp":"//yastatic.net/s3/home-static/_/2/5/2k27FCY704CV8Orsgge9c6d4M.css","js.gen":"//yastatic.net/s3/home-static/_/o/z/D88OOb2qI5WXhAZQmDuF0b-Tw.js","css.gen":"//yastatic.net/s3/home-static/_/2/5/2k27FCY704CV8Orsgge9c6d4M.css","css.gen.webp":"//yastatic.net/s3/home-static/_/2/5/2k27FCY704CV8Orsgge9c6d4M.css"},home.bundles.staticURL["win10-stripe"]={js:"//yastatic.net/s3/home-static/_/D/2/ItaW0qVdCVKKDFJ7rllOt9FR0.js",css:"//yastatic.net/s3/home-static/_/J/p/vNrYG4cRJGF28YdwgWuMZZCAA.css","css.webp":"//yastatic.net/s3/home-static/_/J/p/vNrYG4cRJGF28YdwgWuMZZCAA.css","js.gen":"//yastatic.net/s3/home-static/_/Z/1/tlVQqrZYxBYk-sUVIjvnXYRrg.js","css.gen":"//yastatic.net/s3/home-static/_/J/p/vNrYG4cRJGF28YdwgWuMZZCAA.css","css.gen.webp":"//yastatic.net/s3/home-static/_/J/p/vNrYG4cRJGF28YdwgWuMZZCAA.css"},home.bundles.staticURL.streamnow={js:"//yastatic.net/s3/home-static/_/C/V/dBx2utRW6rP44Fl-3NLynio2k.js",css:"//yastatic.net/s3/home-static/_/r/0/tZ2jyRIq3WFgawJ5qBLz-_O60.css","css.webp":"//yastatic.net/s3/home-static/_/r/0/tZ2jyRIq3WFgawJ5qBLz-_O60.css","js.gen":"//yastatic.net/s3/home-static/_/a/G/348ikRVsfQ_tCsxdmf6NKQuWI.js","css.gen":"//yastatic.net/s3/home-static/_/r/0/tZ2jyRIq3WFgawJ5qBLz-_O60.css","css.gen.webp":"//yastatic.net/s3/home-static/_/r/0/tZ2jyRIq3WFgawJ5qBLz-_O60.css"},home.bundles.staticURL["stream-promo-popup"]={js:"//yastatic.net/s3/home-static/_/t/Q/lfTosBsEs5ZJo0IJDDqBxMgVM.js",css:"//yastatic.net/s3/home-static/_/Q/f/J17AsD1NxdCskaXOzfN7BtqeE.css","css.webp":"//yastatic.net/s3/home-static/_/Q/f/J17AsD1NxdCskaXOzfN7BtqeE.css","js.gen":"//yastatic.net/s3/home-static/_/o/S/L8Ak6WxhPHR_g18D2f6B5_Njo.js","css.gen":"//yastatic.net/s3/home-static/_/Q/f/J17AsD1NxdCskaXOzfN7BtqeE.css","css.gen.webp":"//yastatic.net/s3/home-static/_/Q/f/J17AsD1NxdCskaXOzfN7BtqeE.css"},home.bundles.staticURL["mobile-balloon"]={js:"//yastatic.net/s3/home-static/_/R/r/B5boAXUVzCOWVhUqhtCUiOq6M.js",css:"//yastatic.net/s3/home-static/_/F/3/m1rIXyCdRj4Bl6zwv86dpPPF0.css","css.webp":"//yastatic.net/s3/home-static/_/F/3/m1rIXyCdRj4Bl6zwv86dpPPF0.css","js.gen":"//yastatic.net/s3/home-static/_/J/R/8NGGPMepu1CRlPcv-iP_ZnoXQ.js","css.gen":"//yastatic.net/s3/home-static/_/F/3/m1rIXyCdRj4Bl6zwv86dpPPF0.css","css.gen.webp":"//yastatic.net/s3/home-static/_/F/3/m1rIXyCdRj4Bl6zwv86dpPPF0.css"},home.bundles.staticURL["b-errormsg"]={js:"//yastatic.net/s3/home-static/_/5/m/qCGafZmAxWlEQB663oVh1J1sg.js",css:"//yastatic.net/s3/home-static/_/M/C/kp99BvqonckYZfoTL-GyOAdL0.css","css.webp":"//yastatic.net/s3/home-static/_/M/C/kp99BvqonckYZfoTL-GyOAdL0.css","js.gen":"//yastatic.net/s3/home-static/_/Z/X/vqnTKBuTYYGdmPk6E99pa2Xdg.js","css.gen":"//yastatic.net/s3/home-static/_/M/C/kp99BvqonckYZfoTL-GyOAdL0.css","css.gen.webp":"//yastatic.net/s3/home-static/_/M/C/kp99BvqonckYZfoTL-GyOAdL0.css"},home.bundles.staticURL["b-time-banner"]={js:"//yastatic.net/s3/home-static/_/G/T/ZWlv4qkNtt5ch80ZF5Kf2meoI.js",css:"//yastatic.net/s3/home-static/_/c/T/F1LmBb5BObTgPnc7CgizJggXU.css","css.webp":"//yastatic.net/s3/home-static/_/L/G/yoj7wuLfzJ2Ok0-GpEgBAnTQ8.css","js.gen":"//yastatic.net/s3/home-static/_/L/l/6AVLg0vs7yFhrQfGaGKkrz80s.js","css.gen":"//yastatic.net/s3/home-static/_/c/T/F1LmBb5BObTgPnc7CgizJggXU.css","css.gen.webp":"//yastatic.net/s3/home-static/_/L/G/yoj7wuLfzJ2Ok0-GpEgBAnTQ8.css"},home.bundles.staticURL["old-zen"]={js:"//yastatic.net/s3/home-static/_/v/Y/Z9w3ZZ7aNaMLxDzFQtEBANJ-M.js",css:"//yastatic.net/s3/home-static/_/M/N/2T1anKH7MXQMRQd7M4nPRvC0k.css","css.webp":"//yastatic.net/s3/home-static/_/M/N/2T1anKH7MXQMRQd7M4nPRvC0k.css","js.gen":"//yastatic.net/s3/home-static/_/R/F/YPfcrDeRe9UDZNhqSzktIUcB0.js","css.gen":"//yastatic.net/s3/home-static/_/M/N/2T1anKH7MXQMRQd7M4nPRvC0k.css","css.gen.webp":"//yastatic.net/s3/home-static/_/M/N/2T1anKH7MXQMRQd7M4nPRvC0k.css"},home.bundles.staticURL["media-broadcast"]={js:"//yastatic.net/s3/home-static/_/C/A/9PUfdwS8NEy4hUfmoMMmaVgak.js",css:"//yastatic.net/s3/home-static/_/0/1/Ciy7uoHT07jijS6lbje3MSRno.css","css.webp":"//yastatic.net/s3/home-static/_/0/1/Ciy7uoHT07jijS6lbje3MSRno.css","js.gen":"//yastatic.net/s3/home-static/_/H/0/bx1noFilmZmUbtTH1RdtPbwvg.js","css.gen":"//yastatic.net/s3/home-static/_/0/1/Ciy7uoHT07jijS6lbje3MSRno.css","css.gen.webp":"//yastatic.net/s3/home-static/_/0/1/Ciy7uoHT07jijS6lbje3MSRno.css"},function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=477)}([function(e,t){function i(e){return"boolean"!=typeof e&&null!==e&&e!==undefined?Array.isArray(e)?e.join(""):e:""}e.exports=function(e){return e.map(i).join("")},e.exports.oneElem=i},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(n){"object"==typeof window&&(i=window)}e.exports=i},function(e,t){!function(e){var t,i;try{t=e.localStorage,i="ya_ls_test",t.setItem(i,"1"),"1"!==t.getItem(i)?t=null:t.removeItem(i)}catch(a){t=null}var n=e.home||(e.home={}),o=e.console&&function(e){console.log(e)}||function(){},s=function(e){o("localStorage is disabled. "+(e||""))},r=function(e){try{return e()}catch(a){s(a)}};t?n.localStorage={setItem:function(e,i){return r((function(){return t.setItem(e,i)}))},getItem:function(e){return r((function(){return t.getItem(e)}))},removeItem:function(e){return r((function(){return t.removeItem(e)}))},clear:function(){return r((function(){return t.clear()}))},key:function(e){return r((function(){return t.key(e)}))}}:(n.localStorage={removeItem:s,setItem:s,getItem:s,clear:s},n.disabledLS=!0)}(window)},function(e,t){window.home=window.home||{}},function(e,t){!function(e){e.getData=function(t,i){var n,o,s,r="export",a=t.split("."),c=a.length;if(c>1){for(n=e[r]||{},o=0;o<c;o++)if(void 0===(n=n[a[o]]))return void 0===n?i:n;return void 0===n?i:n}return r="export",void 0===(s=e&&e[r]&&e[r][t])?i:s},e.dataCallbacks=e.dataCallbacks||[],e.subscribeData=function(t){e["export"]?t():e.dataCallbacks.push(t)}}(home)},function(e,t){!function(){"use strict";var e=/^(?:(.*?):)?\/\/([^/?#\s]+)(\/?.*)$/,t=/^(\/?[^?#\s]*)(?:\?([^#]+))?(?:#(.*))?$/;function i(e){var t=[];if(!e)return"";for(var i in e)if(e.hasOwnProperty(i)&&e[i]!==undefined&&null!==e[i]){var n=e[i];"object"!=typeof n&&(n=[n]);for(var o=0;o<n.length;++o)t.push(encodeURIComponent(i)+(""!==n[o]?"="+encodeURIComponent(n[o]):""))}return t.length?"?"+t.join("&"):""}home.parseSearch=function(e,t){return e.split("&").reduce((function(e,i){if(!i)return{};var n,o,s=i.match(/([^=]*)=(.*)/);if(s)try{n=decodeURIComponent(s[1]),o=decodeURIComponent(s[2])}catch(r){return home.error("home.parseSearch: "+r.message+"; token: "+i),e}else{try{n=decodeURIComponent(i)}catch(r){return home.error("home.parseSearch: "+r.message+"; token: "+i),e}o=""}return n in e&&t?("string"==typeof e[n]&&(e[n]=[e[n]]),e[n].push(o)):e[n]=o,e}),{})},home.parseUrl=function(i,n){var o,s=i.match(e);if(s?o=s[3].match(t):(s=[],o=i.match(t)),!s&&!o)throw new TypeError('Invalid url "'+i+'"');var r={scheme:s[1]||"",host:s[2]||"",path:o&&o[1]||"",search:o&&o[2]||"",hash:o&&o[3]||"",query:{}};return r.query=home.parseSearch(r.search,n&&n.multi),r},home.makeUrl=function(e){var t="";return!e.scheme||!e.host&&e.path||(t+=e.scheme+"://"),e.host&&(e.scheme||(t+="//"),t+=e.host),t&&(e.path&&0!==e.path.indexOf("/")||!e.path)&&"/"!==t.charAt(t.length-1)&&(t+="/"),t+=e.path||"",t+=i(e.query),e.hash&&(t+="#"+e.hash),t},home.addQueryToUrl=function(e,n){return e.replace(t,(function(e,t,o,s){var r=o?home.parseSearch(o):{};for(var a in n)n.hasOwnProperty(a)&&(r[a]=n[a]);return t+i(r)+(s?"#"+s:"")}))}}()},function(e,t){
/**
 * @module inherit
 * @version 2.2.3
 * @author Filatov Dmitry <dfilatov@yandex-team.ru>
 * @description This module provides some syntax sugar for "class" declarations, constructors, mixins,
 *              "super" calls and static members.
 * License: https://github.com/dfilatov/inherit/blob/2.2.3/LICENSE.md
 */
!function(e){var t=function(){return"_"}.toString().indexOf("_")>-1,i=function(){},n=Object.create||function(e){var t=function(){};return t.prototype=e,new t},o=Object.keys,s=e.extend,r=Array.isArray,a=e.isFunction,c=!0,l={toString:""};for(var u in l)l.hasOwnProperty(u)&&(c=!1);var d=c?["toString","valueOf"]:null;function h(i,n,s){for(var r,l,u=function(e){var t=o(e);if(c)for(var i,n=0;i=d[n++];)e.hasOwnProperty(i)&&t.push(i);return t}(s),h=0,m=u.length;h<m;)"__self"!==(r=u[h++])&&(l=s[r],a(l)&&(!t||l.toString().indexOf(".__base")>-1)?n[r]=function(t,o){var s=function(){var e=this.__base;this.__base=s.__base;var t=o.apply(this,arguments);return this.__base=e,t};return s.__base=i[t]||("__constructor"===t?n.__self.__parent:e.noop),s}(r,l):n[r]=l)}function m(t,i){for(var n,o=1;n=t[o++];)i?a(n)?e.inheritSelf(i,n.prototype,n):e.inheritSelf(i,n):i=a(n)?e.inherit(t[0],n.prototype,n):e.inherit(t[0],n);return i||t[0]}e.inherit=function(){var e=arguments,t=r(e[0]),o=t||a(e[0]),c=o?t?m(e[0]):e[0]:i,l=e[o?1:0]||{},u=e[o?2:1],d=l.__constructor||o&&c.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:o?function(){return c.apply(this,arguments)}:function(){};if(!o)return d.prototype=l,d.prototype.__self=d.prototype.constructor=d,s(d,u);s(d,c),d.__parent=c;var p=c.prototype,f=d.prototype=n(p);return f.__self=f.constructor=d,l&&h(p,f,l),u&&h(c,d,u),d},e.inheritSelf=function(){var e=arguments,t=r(e[0]),i=t?m(e[0],e[0][0]):e[0],n=e[1],o=e[2],s=i.prototype;return n&&h(s,s,n),o&&h(i,i,o),i},e.inherit.self=e.inheritSelf}(jQuery)},function(e,t){!function(e){var t=0,i="__"+Number(new Date),n=function(){return"uniq"+ ++t};e.identify=function(e,t){if(!e)return n();var o="uniqueID"in e?"uniqueID":i;return t||o in e?e[o]:e[o]=n()}}(jQuery)},function(e,t){
/**
 * Observable plugin
 *
 * Copyright (c) 2010 Filatov Dmitry (alpha@zforms.ru)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * @version 1.0.0
 * @requires $.identify
 * @requires $.inherit
 */
!function(e){var t="__"+Number(new Date)+"storage",i=function(t,i){return e.identify(t)+(i?e.identify(i):"")},n={buildEventName:function(e){return e},on:function(n,o,s,r,a){if("string"==typeof n){e.isFunction(o)&&(r=s,s=o,o=undefined);for(var c,l=i(s,r),u=this[t]||(this[t]={}),d=n.split(" "),h=0;n=d[h++];)if(!(l in(c=u[n=this.buildEventName(n)]||(u[n]={ids:{},list:{}})).ids)){var m=c.list,p={fn:s,data:o,ctx:r,special:a};m.last?(m.last.next=p,p.prev=m.last):m.first=p,c.ids[l]=m.last=p}}else{var f=this;e.each(n,(function(e,t){f.on(e,t,o,a)}))}return this},onFirst:function(e,t,i,n){return this.on(e,t,i,n,{one:!0})},un:function(n,o,s){if("string"==typeof n||void 0===n){var r=this[t];if(r)if(n){for(var a,c=n.split(" "),l=0;n=c[l++];)if(a=r[n=this.buildEventName(n)])if(o){var u=i(o,s),d=a.ids;if(u in d){var h=a.list,m=d[u],p=m.prev,f=m.next;p?p.next=f:m===h.first&&(h.first=f),f?f.prev=p:m===h.last&&(h.last=p),delete d[u]}}else delete this[t][n]}else delete this[t]}else{var _=this;s=o,e.each(n,(function(e,t){_.un(e,t,s)}))}return this},trigger:function(i,n){var o=this[t],s="string"==typeof i,r=s?i:i.type,a=this.buildEventName(r);if(s||(i.type=a,i.target||(i.target=this)),o&&(o=o[a])){var c,l=o.list.first;for(l&&s&&((i=e.Event(a)).target=this);l;)i.data=l.data,void 0!==(c=l.fn.call(l.ctx||this,i,n))&&(i.result=c,!1===c&&(i.preventDefault(),i.stopPropagation())),l.special&&l.special.one&&this.un(r,l.fn,l.ctx),l=l.next}return this}};e.observable=e.inherit(n,n)}(jQuery)},function(e,t){var i;i=Array.prototype.slice,Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=i.call(arguments,1);return function(){return t.apply(e,n.concat(i.call(arguments)))}})},function(e,t){!function(e,t){var i=[],n=e.inherit,o=e.isFunction,s=Function.prototype.call.bind(Object.prototype.hasOwnProperty),r={},a={};function c(e,t,i){return(e?"__elem_"+e:"")+"__mod"+(t?"_"+t:"")+(i?"_"+i:"")}function l(e,t,i){var n,r,a;if(o(e))t[c(i,"*","*")]=e;else for(n in e)if(s(e,n))if(a=e[n],o(a))t[c(i,n,"*")]=a;else for(r in a)s(a,r)&&(t[c(i,n,r)]=a[r])}function u(e){var t;if(e.onSetMod&&(l(e.onSetMod,e),delete e.onSetMod),e.onElemSetMod){for(t in e.onElemSetMod)s(e.onElemSetMod,t)&&l(e.onElemSetMod[t],e,t);delete e.onElemSetMod}}this.BEM=n(e.observable,{__constructor:function(e,t,i){var n=this;n._modCache=e||{},n._processingMods={},n._params=t,n.params=null,!1!==i?n._init():n.afterCurrentEvent((function(){n._init()}))},_init:function(){return this._initing||this.hasMod("js","inited")||(this._initing=!0,this.params||(this.params=e.extend(this.getDefaultParams(),this._params),delete this._params),this.setMod("js","inited"),delete this._initing,this.hasMod("js","inited")&&this.trigger("init")),this},changeThis:function(e,t){return e.bind(t||this)},afterCurrentEvent:function(e,t){this.__self.afterCurrentEvent(e.bind(t||this))},on:function(t,i,n,o){return"object"==typeof t&&(e.isFunction(i)||e.isFunction(n))&&(t=this.__self._buildModEventName(t)),this.__base.apply(this,arguments)},un:function(t,i,n){return"object"==typeof t&&e.isFunction(i)&&(t=this.__self._buildModEventName(t)),this.__base.apply(this,arguments)},trigger:function(t,i){var n=!0;return"object"!=typeof t||t instanceof e.Event||(n="js"===t.modName||this.hasMod("js"),t=this.__self._buildModEventName(t)),n&&(this.__base(t=this.buildEvent(t),i),this._trigger(t,i)),this},_trigger:function(e,t){this.__self.trigger(e,t)},buildEvent:function(t){return"string"==typeof t&&(t=e.Event(t)),t.block=this,t},hasMod:function(e,t,i){var n=arguments.length,o=!1;1==n?(i="",t=e,e=void 0,o=!0):2==n&&("string"==typeof e?(i=t,t=e,e=void 0):(i="",o=!0));var s=this.getMod(e,t)===i;return o?!s:s},getMod:function(e,t){var i=typeof e;if("string"===i||"undefined"===i){t=e||t;var n=this._modCache;return t in n?n[t]:n[t]=this._extractModVal(t)}return this._getElemMod(t,e)},_getElemMod:function(e,t,i){return this._extractModVal(e,t,i)},getMods:function(e){var t=e&&"string"!=typeof e,i=this._modCache,n=[].slice.call(arguments,t?1:0);return n.length?n.reduce((function(e,t){return t in i&&(e[t]=i[t]),e}),{}):i},setMod:function(t,i,n){void 0===n&&("string"==typeof t?(n=void 0===i||i,i=t,t=void 0):n=!0);var o=this;if(!t||t[0]){!1===n||null===n?n="":!0!==n&&(n=n.toString());var s=(t&&t[0]?e.identify(t[0]):"")+"_"+i;if(this._processingMods[s])return o;var r,a=t?o._getElemMod(i,t,r=o.__self._extractElemNameFrom(t)):o.getMod(i);if(a===n)return o;this._processingMods[s]=!0;var c=!0,l=[i,n,a];t&&l.unshift(t),[["*","*"],[i,"*"],[i,n]].forEach((function(e){c=!1!==o._callModFn(r,e[0],e[1],l)&&c})),!t&&c&&(o._modCache[i]=n),c&&o._afterSetMod(i,n,a,t,r),delete this._processingMods[s]}return o},_afterSetMod:function(e,t,i,n,o){var s={modName:e,modVal:t,oldModVal:i};n&&(s.elem=n),this.trigger({modName:e,modVal:"*",elem:o},s).trigger({modName:e,modVal:t,elem:o},s)},toggleMod:function(e,t,i,n,o){"string"==typeof e&&(o=n,n=i,i=t,t=e,e=void 0),void 0===n?n="":"boolean"==typeof n&&(o=n,n="");var s=this.getMod(e,t);return(s==i||s==n)&&this.setMod(e,t,"boolean"==typeof o?o?i:n:this.hasMod(e,t,i)?n:i),this},delMod:function(e,t){return t||(t=e,e=void 0),this.setMod(e,t,"")},_callModFn:function(e,t,i,n){var o=c(e,t,i);return this[o]?this[o].apply(this,n):void 0},_extractModVal:function(e,t){return""},channel:function(e,t){return this.__self.channel(e,t)},getDefaultParams:function(){return{}},del:function(e){var t=[].slice.call(arguments);return"string"==typeof e&&t.unshift(this),this.__self.del.apply(this.__self,t),this},destruct:function(){var e={modName:"js",modVal:"",oldModVal:"inited"};this.trigger({modName:e.modName,modVal:e.modVal},e)}},e.extend(this.BEM,{_name:"i-bem",blocks:r,decl:function(t,i,s){"string"==typeof t?t={block:t}:t.name&&(t.block=t.name),u(i||(i={}));var a,c,l=r[t.baseBlock||t.block]||this;if(t.modName){var d=(a=t.modName,(c=t.modVal)?Array.isArray(c)?function(e){for(var t=0,i=c.length;t<i;)if(e.hasMod(a,c[t++]))return!0;return!1}:function(e){return e.hasMod(a,c)}:function(e){return e.hasMod(a)});e.each(i,(function(e,t){o(t)&&(i[e]=function(){var n;if(d(this))n=t;else{var o=l.prototype[e];o&&o!==i[e]&&(n=this.__base)}return n?n.apply(this,arguments):void 0})}))}if(s&&"boolean"==typeof s.live){var h=s.live;s.live=function(){return h}}var m,p=l;return t.baseMix&&(p=[p],t.baseMix.forEach((function(e){p.push(r[e])}))),t.block==l._name?(m=n.self(p,i,s))._processLive(!0):((m=r[t.block]=n(p,i,s))._name=t.block,delete m._liveInitable),m},declMix:function(e,t,i){return u(t||(t={})),e=r[e]=n(t,i)},_processLive:function(e){return!1},create:function(e,t){return"string"==typeof e&&(e={block:e}),new r[e.block](e.mods,t)},getName:function(){return this._name},on:function(t,i,n,o){return"object"==typeof t&&(e.isFunction(i)||e.isFunction(n))&&(t=this._buildModEventName(t)),this.__base.apply(this,arguments)},un:function(t,i,n){return"object"==typeof t&&e.isFunction(i)&&(t=this._buildModEventName(t)),this.__base.apply(this,arguments)},_buildModEventName:function(e){var t="_"+e.modName+"_"+(!1===e.modVal?"":e.modVal);return e.elem&&(t="__"+e.elem+t),t},_extractElemNameFrom:function(e){},afterCurrentEvent:function(e,t){1==i.push({fn:e,ctx:t})&&setTimeout(this._runAfterCurrentEventFns,0)},_runAfterCurrentEventFns:function(){var e=i.length;e&&i.splice(0,e).forEach((function(e){e.fn.call(e.ctx||this)}),this)},changeThis:function(e,t){return e.bind(t||this)},del:function(e){var t="string"==typeof e,i=t?0:1,n=arguments.length;for(t&&(e=this);i<n;)delete e[arguments[i++]];return this},channel:function(t,i){if("boolean"==typeof t&&(i=t,t=void 0),t||(t="default"),!i)return a[t]||(a[t]=new e.observable);a[t]&&(a[t].un(),delete a[t])}}))}(jQuery)},function(e,t){!function(e,t,i){function n(e){var t=typeof e;return"string"===t||"number"===t||"boolean"===t}function o(e,t,i){null!=t&&!1!==t&&(i.push("_",e),!0!==t&&i.push("_",t))}function s(e,t,i,n){n.push(e),o(t,i,n)}function r(e,t,i,n,r){s(e,void 0,void 0,r),r.push("__",t),o(i,n,r)}e.INTERNAL={NAME_PATTERN:"[a-zA-Z0-9-]+",MOD_DELIM:"_",ELEM_DELIM:"__",buildModPostfix:function(e,t,i){var n=i||[];return o(e,t,n),i?n:n.join("")},buildClass:function(e,t,i,o,a){if(n(i)?n(o)||(a=o,o=i,i=t,t=void 0):void 0!==i?(a=i,i=void 0):t&&"string"!=typeof t&&(a=t,t=void 0),!t&&void 0===i&&!a)return e;var c=a||[];return t?r(e,t,i,o,c):s(e,i,o,c),a?c:c.join("")},buildClasses:function(e,i,n,o){i&&"string"!=typeof i&&(o=n,n=i,i=void 0);var a=o||[];return i?r(e,i,void 0,void 0,a):s(e,void 0,void 0,a),n&&t.each(n,(function(t,n){n&&(a.push(" "),i?r(e,i,t,n,a):s(e,t,n,a))})),o?a:a.join("")}}}(BEM,jQuery)},function(e,t){BEM.decl("framebuster",{onSetMod:{js:{inited:function(){var e=this._getWindow();if(e.top.location!==e.location){var t=this.matchDomain(e.document.referrer);t&&!this.isInWhitelist(t)&&(e.top.location=e.location)}}}},matchDomain:function(e){if(!e)return null;var t=e.match(/^https?:\/\/([^:\/\s]+)\/?.*/);return t&&t[1]},isInWhitelist:function(e){return!e||this.defaultWhitelist().concat(this.params.whitelist||[]).some((function(t){return"string"==typeof t?t===e||-1!==e.indexOf(t,e.length-t.length):!!t.test(e)}))},defaultWhitelist:function(){return[]},_getWindow:function(){return window}})},function(e,t){!function(e,t,i){var n=t(window),o=t(document),s={},r={},a={},c={},l={},u=e.blocks,d=e.INTERNAL,h=d.NAME_PATTERN,m=d.MOD_DELIM,p=d.ELEM_DELIM,f=RegExp("[^"+m+"]"+m+"("+h+")(?:"+m+"("+h+"))?$"),_=d.buildModPostfix,g=d.buildClass,v=Array.prototype.slice,b=Array.prototype.reverse;function y(e,i,n,o,a){"boolean"==typeof n&&(a=o,o=n,n=void 0);var c=i[0];if(void 0===c.dataset||"react"!==c.dataset.lego){var l=(n=w(n||E(c)[e],c,e)).uniqId;if(r[l])return r[l]._init();s[l]=s[l]?s[l].add(i):i;var d=c.parentNode;d&&11!==d.nodeType||t.unique(s[l]);var h=u[e]||T.decl(e,{},{live:!0});if(!(h._liveInitable=Boolean(h._processLive()))||o||!1===n.live){o&&i.addClass("i-bem");var m=new h(s[l],n,Boolean(o));return delete s[l],a&&a.apply(m,v.call(arguments,4)),m}}}function w(e,i,n,o){(e||(e={})).uniqId||(e.uniqId=(e.id?n+"-id-"+e.id:t.identify())+(o||t.identify()));var s=t.identify(i),r=a[s]||(a[s]={});return r[n]||(r[n]=e),e}function k(e,t,i){var n=e.find(t);return i?n:n.add(e.filter(t))}function E(e){var i=t.identify(e);return a[i]||(a[i]=x(e))}function x(e){var t,i=e.getAttribute("data-bem");return i?JSON.parse(i):t?t():{}}function M(e){delete a[t.identify(e)]}function C(e,t){1===e.domElem.length?e.destruct(!0):e.domElem=e.domElem.not(t)}t.fn.bem=function(e,t){return y(e,this,t,!0)};var T=e.DOM=e.decl("i-bem__dom",{__constructor:function(e,i,n){this.domElem=e,this._eventNameCache={},this._elemCache={},this._blockInsideCache={},r[this._uniqId=i.uniqId||t.identify(this)]=this,this._needSpecialUnbind=!1,this.__base(null,i,n)},findBlocksInside:function(e,t){return this._findBlocks("find",e,t)},findBlockInside:function(e,t){var i=this._buildBlockCacheKey(e,t),n=this._findBlocks("find",e,t,!0);return this._blockInsideCache[i]=n,n},blockInside:function(e,t){var i=this._buildBlockCacheKey(e,t),n=this._blockInsideCache[i];return n||(n=this.findBlockInside(e,t)),n},dropBlockInsideCache:function(e,t){e||t?this._blockInsideCache[this._buildBlockCacheKey(e,t)]=null:this._blockInsideCache={}},_buildBlockCacheKey:function(e,t){t||(t=e,e="");var i="string"==typeof t?t:g(t.block,t.modName,t.modVal);return("string"==typeof e?e:e.__bemElemName)+":"+i},findBlocksOutside:function(e,t){return this._findBlocks("parents",e,t)},findBlockOutside:function(e,t){return this._findBlocks("closest",e,t)[0]||null},findBlocksOn:function(e,t){return this._findBlocks("",e,t)},findBlockOn:function(e,t){return this._findBlocks("",e,t,!0)},_findBlocks:function(e,i,n,o){if(!this.domElem)return o?null:[];n||(n=i,i=void 0);var s=i?"string"==typeof i?this.findElem(i):i:this.domElem,r="string"==typeof n,a=r?n:n.block||n.blockName,c="."+(r?a:g(a,n.modName,n.modVal))+(o?":first":""),l=s.filter(c);if(e&&(l=l.add(s[e](c))),o)return l[0]?y(a,l.eq(0),!0):null;var u=[],d={};return t.each(l,(function(e,i){var n=y(a,t(i),!0);d[n._uniqId]||(d[n._uniqId]=!0,u.push(n))})),u},bindToDomElem:function(e,i,n,o){t.isFunction(n)&&(o=n,n=void 0);var s=this,r=function(e){return(e.data||(e.data={})).domElem=t(this),o.apply(s,arguments)};return o?e.bind(s._buildEventName(i),n,(r.guid=o.guid=o.guid||t.guid++,r)):t.each(i,(function(t,i){s.bindToDomElem(e,t,n,i)})),s},bindToDoc:function(e,t,i){return this._needSpecialUnbind=!0,this.bindToDomElem(o,e,t,i)},bindToWin:function(e,i,o){return t.isFunction(i)&&(o=i,i=void 0),this._needSpecialUnbind=!0,this.bindToDomElem(n,e,i,o)},bindTo:function(e,i,n,o){var s=arguments.length;switch(s){case 3:t.isFunction(n)&&(o=n,"object"==typeof i&&(n=i,i=e,e=this.domElem));break;case 2:t.isFunction(i)?(o=i,i=e,e=this.domElem):"string"==typeof e||e instanceof t||(n=i,i=e,e=this.domElem);break;case 1:i=e,e=this.domElem}return"string"==typeof e&&(e=this.elem(e)),this.bindToDomElem(e,i,n,o)},unbindFromDomElem:function(e,t,i){return e.unbind(this._buildEventName(t),i),this},unbindFromDoc:function(e,t){return this.unbindFromDomElem(o,e,t)},unbindFromWin:function(e,t){return this.unbindFromDomElem(n,e,t)},unbindFrom:function(e,i,n){var o=arguments.length;return 1===o?(i=e,e=this.domElem):2===o&&t.isFunction(i)?(n=i,i=e,e=this.domElem):"string"==typeof e&&(e=this.elem(e)),this.unbindFromDomElem(e,i,n)},_buildEventName:function(e){var t=this;return e.indexOf(" ")>1?e.split(" ").map((function(e){return t._buildOneEventName(e)})).join(" "):t._buildOneEventName(e)},_buildOneEventName:function(e){var t=this._eventNameCache;if(e in t)return t[e];var i="."+this._uniqId;if(-1===e.indexOf("."))return t[e]=e+i,t[e];var n=".bem_"+this.__self._name;return t[e]=e.split(".").map((function(e,t){return 0===t?e+n:n+"_"+e})).join("")+i,t[e]},_trigger:function(e,t){this.__base.apply(this,arguments),this._ctxTrigger(e,t)},_ctxTrigger:function(e,i){var n=this,o=c[n.__self._buildCtxEventName(e.type)],s={};o&&n.domElem.each((function(){for(var r=this,a=o.counter;r&&a;){var c=t.identify(r,!0);if(c){if(s[c])break;var l=o.ctxs[c];l&&(t.each(l,(function(t,o){o.fn.call(o.ctx||n,e,i)})),a--),s[c]=!0}r=r.parentNode}}))},getMods:function(e){var t=e&&"string"!=typeof e,i=this._modCache,n=[].slice.call(arguments,t?1:0),o=this._extractMods(n,t?e:void 0);return t||(n.length?n.forEach((function(e){i[e]=o[e]})):i=o),o},setMod:function(e,i,n){if(e&&void 0!==n&&e.length>1){var o=this;return e.each((function(){var s=t(this);s.__bemElemName=e.__bemElemName,o.setMod(s,i,n)})),o}return this.__base(e,i,n)},_extractModVal:function(e,t,i){var n,o=(t||this.domElem)[0];return o&&(n=o.getAttribute("class").match(this.__self._buildModValRE(e,i||t))),n?n[2]||!0:""},_extractMods:function(e,t){var i={},n=!e.length,o=0;return((t||this.domElem).eq(0).attr("class").match(this.__self._buildModValRE("("+(n?h:e.join("|"))+")",t,"g"))||[]).forEach((function(e){var t=e.match(f);i[t[1]]=t[2]||!0,++o})),o<e.length&&e.forEach((function(e){e in i||(i[e]="")})),i},_afterSetMod:function(e,i,n,o,s){if(this._isDestructing)return this.__base.apply(this,arguments);var r=this.__self,a=r._buildModClassPrefix(e,s),c=r._buildModValRE(e,s,"g"),l=""===i||!1===i;(o||this.domElem).each((function(){var e=t(this),o=e.attr("class"),s=a;!0!==i&&(s+=m+i),(!0===n?c.test(o):(" "+o).indexOf(" "+a+m)>-1)?e.attr("class",o.replace(c,l?"":"$1"+s)):l||e.addClass(s)})),s&&this.dropElemCache(s,e,n).dropElemCache(s,e,i),this.__base.apply(this,arguments)},findElem:function(e,t,i,n){arguments.length%2?(n=i,i=t,t=e,e=this.domElem):"string"==typeof e&&(e=this.findElem(e)),t=t.split(" ");var o=this.__self.getName(),s=_(i,n),r=[],a=t.map((function(e){return r.push("."+g(o,e,i,n)),e+s})),c=1===a.length,l=k(e,r.join(","));return e===this.domElem&&r.forEach((function(e,i){(this._elemCache[a[i]]=c?l:l.filter(e)).__bemElemName=t[i]}),this),l},_elem:function(e,t,i){return this._elemCache[e+_(t,i)]||this.findElem(e,t,i)},elem:function(e,i,n){if(2===arguments.length&&(n=!0),i&&"string"!=typeof i)return i.__bemElemName=e,i;if(e.indexOf(" ")<0)return this._elem(e,i,n);var o=t([]);return e.split(" ").forEach((function(e){o=o.add(this._elem(e,i,n))}),this),o},dropElemCache:function(e,t,i){if(e){var n=_(t,i);e.indexOf(" ")<0?delete this._elemCache[e+n]:e.split(" ").forEach((function(e){delete this._elemCache[e+n]}),this)}else this._elemCache={};return this},elemParams:function(e){var t;return"string"==typeof e?(t=e,e=this.elem(e)):t=this.__self._extractElemNameFrom(e),x(e[0])[g(this.__self.getName(),t)]||{}},elemify:function(e,i){return(e=t(e)).__bemElemName=i,e},containsDomElem:function(e){var t=!1;return this.domElem.each((function(){return!(t=e.parents().andSelf().index(this)>-1)})),t},buildSelector:function(e,t,i){return this.__self.buildSelector(e,t,i)},destruct:function(e){var i=this.__self;this._isDestructing||(this._isDestructing=!0,this._needSpecialUnbind&&i.doc.add(i.win).unbind("."+this._uniqId),this.dropElemCache().domElem.each((function(e,i){var n=E(i);t.each(n,(function(e,t){var n=r[t.uniqId];n?n._isDestructing||C(n,i):delete s[t.uniqId]})),M(i)})),e||this.domElem.remove(),this.__base(),delete r[this.un()._uniqId],delete this.domElem,delete this._elemCache)}},{scope:null,doc:o,win:n,html:t(document.documentElement),_processLive:function(e){var t=this._liveInitable;if("live"in this&&void 0===t^e){t=!1!==this.live();var i=this.getName(),n=this.live;this.live=function(){return this.getName()===i?t:n.apply(this,arguments)}}return t},init:function(e,i,n){!e||t.isFunction(e)?(n=i,i=e,e=o):"string"==typeof e&&(e=t(e));var s=t.identify();return k(e,".i-bem").each((function(){!function(e,i){var n=e[0];t.each(E(n),(function(o,s){w(s,n,o,i);var a=r[s.uniqId];a?a.domElem.index(n)<0&&(a.domElem=a.domElem.add(e),t.extend(a._params,s)):y(o,e,s)}))}(t(this),s)})),i&&this.afterCurrentEvent((function(){i.call(n||this,e)})),this._runAfterCurrentEventFns(),e},destruct:function(e,i,n){"boolean"!=typeof e&&(n=i,i=e,e=void 0),i&&(b.call(k(i,".i-bem",n)).each((function(e,i){var n=E(this);t.each(n,(function(e,t){if(t.uniqId){var n=r[t.uniqId];n?C(n,i):delete s[t.uniqId]}})),M(this)})),e||(n?i.empty():i.remove()))},update:function(e,t,i,n){return this.destruct(e,!0),this.init(e.html(t),i,n)},replace:function(e,i){return this.destruct(!0,e),this.init(t(i).replaceAll(e))},append:function(e,i){return this.init(t(i).appendTo(e))},prepend:function(e,i){return this.init(t(i).prependTo(e))},before:function(e,i){return this.init(t(i).insertBefore(e))},after:function(e,i){return this.init(t(i).insertAfter(e))},_buildCtxEventName:function(e){return this._name+":"+e},_liveClassBind:function(e,i,n,s){var r=this;if(i.indexOf(" ")>-1)i.split(" ").forEach((function(t){r._liveClassBind(e,t,n,s)}));else{var a=l[i],c=t.identify(n);a||(a=l[i]={},o.bind(i,r._liveClassTrigger.bind(r))),c in(a=a[e]||(a[e]={uniqIds:{},fns:[]})).uniqIds||(a.fns.push({uniqId:c,fn:r._buildLiveEventFn(n,s)}),a.uniqIds[c]=a.fns.length-1)}return this},_liveClassUnbind:function(e,i,n){var o=l[i];if(o)if(n){if(o=o[e]){var s=t.identify(n);if(s in o.uniqIds){var r=o.uniqIds[s],a=o.fns.length-1;for(o.fns.splice(r,1);r<a;)o.uniqIds[o.fns[r++].uniqId]=r-1;delete o.uniqIds[s]}}}else delete o[e];return this},_liveClassTrigger:function(e){var i=l[e.type];if(i){var n=e.target,o=Object.keys(i);do{for(var s,r=" "+n.className+" ",a=0;s=o[a++];)if(-1!==r.indexOf(" "+s+" ")){for(var c=!1,u=i[s].fns,d=0;d<u.length;d++)!1===u[d].fn.apply(t(n),arguments)&&(c=!0);if(c&&e.preventDefault(),c||e.isPropagationStopped())return;o.splice(--a,1)}}while(o.length&&(n=n.parentNode))}},_buildLiveEventFn:function(e,i){var n=this;return function(o){var s=[n._name,((o.data||(o.data={})).domElem=t(this)).closest(n.buildSelector()),!0],r=y.apply(null,i?s.concat([e,o]):s);if(r&&!i&&e)return e.apply(r,arguments)}},liveInitOnEvent:function(e,t,i){return this.liveBindTo(e,t,i,!0)},liveBindTo:function(e,i,n,o){i&&!t.isFunction(i)||(n=i,i=e,e=void 0),e&&"string"!=typeof e||(e={elem:e}),e.elemName&&(e.elem=e.elemName);var s=this;return e.elem&&e.elem.indexOf(" ")>0?(e.elem.split(" ").forEach((function(t){s._liveClassBind(g(s._name,t,e.modName,e.modVal),i,n,o)})),s):s._liveClassBind(g(s._name,e.elem,e.modName,e.modVal),i,n,o)},liveUnbindFrom:function(e,i,n){i&&!t.isFunction(i)||(n=i,i=e,e=void 0);var o=this;return e&&e.indexOf(" ")>1?(e.split(" ").forEach((function(e){o._liveClassUnbind(g(o._name,e),i,n)})),o):o._liveClassUnbind(g(o._name,e),i,n)},_liveInitOnBlockEvent:function(e,t,i,n){var o=this._name;return u[t].on(e,(function(e){if(e.block.domElem){var t=arguments,s=e.block[n](o);i&&s.forEach((function(e){i.apply(e,t)}))}})),this},liveInitOnBlockEvent:function(e,t,i){return this._liveInitOnBlockEvent(e,t,i,"findBlocksOn")},liveInitOnBlockInsideEvent:function(e,t,i){return this._liveInitOnBlockEvent(e,t,i,"findBlocksOutside")},on:function(e,t,i,n,o){return e.jquery?this._liveCtxBind(e,t,i,n,o):this.__base(e,t,i,n,o)},un:function(e,t,i,n){return e.jquery?this._liveCtxUnbind(e,t,i,n):this.__base(e,t,i)},liveCtxBind:function(e,t,i,n,o){return this._liveCtxBind(e,t,i,n,o)},_liveCtxBind:function(e,i,n,o,s){var r=this;if("object"==typeof i&&(t.isFunction(n)||t.isFunction(o))&&(i=this._buildModEventName(i)),"string"==typeof i)if(t.isFunction(n)&&(s=o,o=n,n=void 0),i.indexOf(" ")>-1)i.split(" ").forEach((function(t){r._liveCtxBind(e,t,n,o,s)}));else{var a=r._buildCtxEventName(i),l=c[a]||(c[a]={counter:0,ctxs:{}});e.each((function(){var e=t.identify(this),i=l.ctxs[e];i||(i=l.ctxs[e]={},++l.counter),i[t.identify(o)+(s?t.identify(s):"")]={fn:o,data:n,ctx:s}}))}else t.each(i,(function(t,i){r._liveCtxBind(e,t,i,n)}));return r},liveCtxUnbind:function(e,t,i,n){return this._liveCtxUnbind(e,t,i,n)},_liveCtxUnbind:function(e,i,n,o){"object"==typeof i&&t.isFunction(n)&&(i=this._buildModEventName(i));var s=c[i=this._buildCtxEventName(i)];return s&&(e.each((function(){var e,i=t.identify(this,!0);i&&(e=s.ctxs[i])&&(n&&delete e[t.identify(n)+(o?t.identify(o):"")],n&&!t.isEmptyObject(e)||(s.counter--,delete s.ctxs[i]))})),s.counter||delete c[i]),this},_extractElemNameFrom:function(e){if(e.__bemElemName)return e.__bemElemName;var t=e.eq(0).attr("class").match(this._buildElemNameRE());return t?t[1]:void 0},extractParams:x,_buildModClassPrefix:function(e,t){return this._name+(t?p+("string"==typeof t?t:this._extractElemNameFrom(t)):"")+m+e},_buildModValRE:function(e,t,i){return new RegExp("(\\s|^)"+this._buildModClassPrefix(e,t)+"(?:"+m+"("+h+"))?(?=\\s|$)",i)},_buildElemNameRE:function(){return new RegExp(this._name+p+"("+h+")(?:\\s|$)")},buildSelector:function(e,t,i){return"."+g(this._name,e,t,i)},getBlockByUniqId:function(e){return r[e]},getWindowSize:function(){return{width:n.width(),height:n.height()}}});t((function(){e.DOM.scope=t("body")}))}(BEM,jQuery)},function(e,t){Object.defineProperty(window,"$",{value:$,writable:!1,configurable:!1})},function(e,t){!function(e){var t=e(window),i=o(),n=s();function o(){return window.innerHeight|0+t.outerHeight()}function s(){return window.innerWidth|0+t.outerWidth()}(e.event.special.resize||(e.event.special.resize={})).preDispatch=function(e){var t=o(),r=s();if(n===r&&i===t)return!1;i=t,n=r}}(jQuery)},function(e,t){!function(e){BEM.decl("i-visibilitychange",{init:function(){var t=e.document,i=this.changeThis(this.normalize);this.hiddenProp="hidden",this.hiddenProp in t?t.addEventListener("visibilitychange",this.changeThis((function(){this.change(t.hidden)}))):(this.hiddenProp="mozHidden")in t?t.addEventListener("mozvisibilitychange",i):(this.hiddenProp="webkitHidden")in t?t.addEventListener("webkitvisibilitychange",i):(this.hiddenProp="msHidden")in t?t.addEventListener("msvisibilitychange",i):"onfocusin"in t?t.onfocusin=t.onfocusout=i:e.onpageshow=e.onpagehide=e.onfocus=e.onblur=i},normalize:function(t){var i,n=e.document,o={focus:!1,focusin:!1,pageshow:!1,blur:!0,focusout:!0,pagehide:!0};i=(t=t||e.event).type in o?o[t.type]:n[this.hiddenProp],n.hidden=i,$(e).trigger("visibilitychange"),this.change(i)},change:function(e){this.channel("sys").trigger("visibilitychange",{hidden:e}),this.channel("sys").trigger(e?"hidden":"visible")}}),BEM.create("i-visibilitychange").init()}(window)},function(e,t){!function(e){"use strict";for(var t,i=["ms","moz","webkit","o"],n={},o=[],s=0;s<i.length&&!e.requestAnimationFrame;++s)e.requestAnimationFrame=e[i[s]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[i[s]+"CancelAnimationFrame"]||e[i[s]+"CancelRequestAnimationFrame"];if(e.requestAnimationFrame===undefined){var r=+new Date,a=0,c=function(){var e=o,i=n;o=[],n={},a=+new Date,t=0;for(var s=0,c=e.length;s<c;s++)i[e[s].requestid]||e[s].callback(a-r)};e.requestAnimationFrame=function(i){var n=Date.now()+Math.round(1e4*Math.random());if(o.push({requestid:n,callback:i}),!t){var s=+new Date,r=Math.max(0,16-(s-a));t=e.setTimeout(c,r)}return n},e.requestAnimationFrame.fallback=!0}e.cancelAnimationFrame===undefined&&(e.cancelAnimationFrame=function(e){e&&!n[e]&&(n[e]=1)})}(window)},function(e,t){window.getcss=function(e){setTimeout((function(){var t=document.createElement("link");t.setAttribute("type","text/css"),t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),document.getElementsByTagName("head").item(0).appendChild(t)}),0)}},function(e,t){home.l10n=function(e){for(var t=e.split("."),i=home.lang,n=0;n<t.length;++n){if("__proto__"===t[n])return"";if(!i||!i[t[n]])return"";i=i[t[n]]}return i}},function(e,t){!function(e,t,i){var n={bubbles:!1,cancelable:!1,view:null,detail:null,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null,buttons:0,pointerId:0,width:0,height:0,pressure:0,tiltX:0,tiltY:0,pointerType:"",hwTimestamp:0,isPrimary:!1,target:null,currentTarget:null,which:0,pageX:0,pageY:0,timeStamp:0},o=Object.keys(n),s=o.map((function(e){return n[e]})),r=o.length,a=!1,c=[0,1,4,2];try{a=1===new MouseEvent("test",{buttons:1}).buttons}catch(v){}function l(e,t){var i={},n=e.originalEvent||{};t||(t={});for(var l,u=0;u<r;u++)i[l=o[u]]=t[l]||e[l]||n[l]||s[u];return i.x=i.clientX,i.y=i.clientY,i.pressure=i.pressure||(i.buttons?.5:0),i.buttons||a||(i.buttons=c[i.which]||0),i.originalEvent=e.originalEvent||null,t.preventDefault?i.preventDefault=function(){t.preventDefault(),e.preventDefault()}:(i.preventDefault=function(){e.preventDefault()},i._preventScroll=function(){}),i}var u=e.Map&&e.Map.prototype.forEach?new e.Map:{array:[],size:0,set:function(e,t){if(t===undefined)return this["delete"](e);this.has(e)||this.size++,this.array[e]=t},has:function(e){return this.array[e]!==undefined},"delete":function(e){this.has(e)&&(delete this.array[e],this.size--)},get:function(e){return this.array[e]},clear:function(){this.array.length=0,this.size=0},forEach:function(e,t){return this.array.forEach((function(i,n){e.call(t,i,n,this)}),this)}},d={eventMap:{},captureInfo:{},eventSourceList:[],registerSource:function(e,t){var i=t.events;i&&(i.forEach((function(e){t[e]&&(this.eventMap[e]=t[e].bind(t))}),this),this.eventSourceList.push(t))},register:function(e){for(var t,i=this.eventSourceList.length,n=0;n<i&&(t=this.eventSourceList[n]);n++)t.register.call(t,e)},unregister:function(e){for(var t,i=this.eventSourceList.length,n=0;n<i&&(t=this.eventSourceList[n]);n++)t.unregister.call(t,e)},contains:function(e,t){return!!e.contains&&e.contains(t)},getCommonAncestor:function(e,i){for(;e&&e!==t.documentElement;){if(e.contains&&e.contains(i))return e;e=e.parentNode}return null},down:function(e){e.bubbles=!0,this.fireEvent("pointerdown",e)},move:function(e){e.bubbles=!0,this.fireEvent("pointermove",e)},up:function(e){e.bubbles=!0,this.fireEvent("pointerup",e)},enter:function(e){var t=[],i=e.target,n=this.getCommonAncestor(i,e.relatedTarget);for(e.bubbles=!1;i&&i!==n;)t.push(i),i=i.parentNode;for(;t.length;)e.target=t.pop(),this.fireEvent("pointerenter",e)},leave:function(e){var t=[],i=e.target,n=this.getCommonAncestor(i,e.relatedTarget);for(e.bubbles=!1;i&&i!==n;)t.push(i),i=i.parentNode;for(;t.length;)e.target=t.shift(),this.fireEvent("pointerleave",e)},over:function(e){e.bubbles=!0,this.fireEvent("pointerover",e)},out:function(e){e.bubbles=!0,this.fireEvent("pointerout",e)},cancel:function(e){e.bubbles=!0,this.fireEvent("pointercancel",e)},leaveOut:function(e){this.out(e),this.contains(e.target,e.relatedTarget)||this.leave(e)},enterOver:function(e){this.over(e),this.contains(e.target,e.relatedTarget)||this.enter(e)},listen:function(e,t){t.forEach((function(t){this.addEvent(e,t)}),this)},unlisten:function(e,t){t.forEach((function(t){this.removeEvent(e,t)}),this)},addEvent:function(e,t){i(e).on(t,this.boundHandler)},removeEvent:function(e,t){i(e).off(t,this.boundHandler)},eventHandler:function(e){var t=this.eventMap[e.type];t&&t(e,e.originalEvent)},makeEvent:function(e,t){this.captureInfo[t.pointerId]&&(t.relatedTarget=null);var n=function(e,t){var n=i.Event(e),o=t.preventDefault,s=n.preventDefault.bind(n);return jQuery.extend(n,t),n.preventDefault=function(){o(),s()},n}(e,t);return n._target=n._target||t.target,n},fireEvent:function(e,t){var i=this.makeEvent(e,t);return this.dispatchEvent(i)},getTarget:function(e){return this.captureInfo[e.pointerId]||e._target},setCapture:function(e,n){this.captureInfo[e]&&this.releaseCapture(e),this.captureInfo[e]=n,this.implicitRelease=this.releaseCapture.bind(this,e),i(t).on("pointerup pointercancel",this.implicitRelease),this.asyncDispatchEvent(i.Event("gotpointercapture",{bubbles:!0,cancelable:!1,pointerId:e,_target:n}))},releaseCapture:function(e){var n=this.captureInfo[e];n&&(this.captureInfo[e]=undefined,i(t).off("pointerup pointercancel",this.implicitRelease),this.asyncDispatchEvent(i.Event("lostpointercapture",{bubbles:!0,cancelable:!1,pointerId:e,_target:n})))},dispatchEvent:function(e){var t=this.getTarget(e);if(t)return i.event.trigger(e,null,t,!e.bubbles)},asyncDispatchEvent:function(t){(e.requestAnimationFrame||setTimeout)(this.dispatchEvent.bind(this,t))}};d.boundHandler=d.eventHandler.bind(d);var h,m,p={POINTER_ID:1,POINTER_TYPE:"mouse",DEDUP_DIST:25,events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(e){d.listen(e,this.events)},unregister:function(e){d.unlisten(e,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(e){for(var t,i=this.lastTouches,n=e.clientX,o=e.clientY,s=0,r=i.length;s<r&&(t=i[s]);s++){var a=Math.abs(n-t.x),c=Math.abs(o-t.y);if(a<=this.DEDUP_DIST&&c<=this.DEDUP_DIST)return!0}},prepareEvent:function(e){return l(e,{pointerId:this.POINTER_ID,isPrimary:!0,pointerType:this.POINTER_TYPE})},mousedown:function(e){this.isEventSimulatedFromTouch(e)||(u.has(this.POINTER_ID)&&this.cancel(e),u.set(this.POINTER_ID,e),d.down(this.prepareEvent(e)))},mousemove:function(e){this.isEventSimulatedFromTouch(e)||d.move(this.prepareEvent(e))},mouseup:function(e){if(!this.isEventSimulatedFromTouch(e)){var t=u.get(this.POINTER_ID);t&&t.button===e.button&&(d.up(this.prepareEvent(e)),this.cleanupMouse())}},mouseover:function(e){this.isEventSimulatedFromTouch(e)||d.enterOver(this.prepareEvent(e))},mouseout:function(e){this.isEventSimulatedFromTouch(e)||d.leaveOut(this.prepareEvent(e))},cancel:function(e){d.cancel(this.prepareEvent(e)),this.cleanupMouse()},cleanupMouse:function(){u["delete"](this.POINTER_ID)}},f={POINTER_TYPE:"touch",DEDUP_TIMEOUT:2500,CLICK_COUNT_TIMEOUT:200,events:["touchstart","touchmove","touchend","touchcancel"],register:function(e){d.listen(e,this.events)},unregister:function(e){d.unlisten(e,this.events)},firstTouch:null,isPrimaryTouch:function(e){return this.firstTouch===e.identifier},setPrimaryTouch:function(e){(0===u.size||1===u.size&&u.has(1))&&(this.firstTouch=e.identifier,this.firstTouchTarget=e.target,this.scrolling=!1,this.firstXY={X:e.clientX,Y:e.clientY},this.cancelResetClickCount())},removePrimaryPointer:function(e){e.isPrimary&&(this.firstTouch=null,this.firstTouchTarget=null,this.firstXY=null,this.shouldScrollCache=undefined,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var e=function(){this.clickCount=0,this.resetId=null}.bind(this);this.resetId=setTimeout(e,this.CLICK_COUNT_TIMEOUT)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(e){return"touchstart"===e||"touchmove"===e?1:0},findTarget:function(e){return t.elementFromPoint(e.clientX,e.clientY)},touchToPointer:function(e){var t=this,n=this.currentTouchEvent,o=e.identifier+2;return l(n,i.extend({},e,{pointerId:o,target:d.captureInfo[o]||this.findTarget(e),bubbles:!0,cancelable:!0,detail:this.clickCount,button:0,buttons:this.typeToButtons(n.type),width:e.webkitRadiusX||e.radiusX||0,height:e.webkitRadiusY||e.radiusY||0,pressure:e.webkitForce||e.force||.5,isPrimary:this.isPrimaryTouch(e),pointerType:this.POINTER_TYPE,preventDefault:function(){t.scrolling=!1,t.shouldScrollCache=!1,t.firstXY=null}}))},processTouches:function(e,t){var i=e.originalEvent.changedTouches;this.currentTouchEvent=e;for(var n,o=0;o<i.length;o++)n=i[o],t.call(this,this.touchToPointer(n))},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(e){var t,i=this.scrollTypes;return e===i.EMITTER?t="none":e===i.XSCROLLER?t="X":e===i.YSCROLLER?t="Y":i.SCROLLER.exec(e)&&(t="XY"),t},shouldScroll:function(e){if(this.shouldScrollCache!==undefined)return this.shouldScrollCache;if(!this.firstXY)return!0;var t,i,n=this.firstTouchTarget;do{if(null!==(t=n.getAttribute("touch-action")))break;n=n.parentNode}while(n!==document);var o=this.touchActionToScrollType(t);if("none"===o)i=!1;else if("XY"===o||o===undefined)i=!0;else{var s=e.originalEvent.changedTouches[0],r=o,a="Y"===o?"X":"Y";i=Math.abs(s["client"+r]-this.firstXY[r])>=Math.abs(s["client"+a]-this.firstXY[a])}return this.shouldScrollCache=i,this.firstXY=null,this.firstTouchTarget=null,this.shouldScrollCache},findTouch:function(e,t){for(var i,n=0,o=e.length;n<o&&(i=e[n]);n++)if(i.identifier===t)return!0},vacuumTouches:function(e){var t=e.originalEvent.touches;if(u.size>=t.length){var i=[];u.forEach((function(e,n){if(1!==n&&!this.findTouch(t,n-2)){var o=e.out;i.push(o)}}),this),i.forEach(this.cancelOut,this)}},touchstart:function(e){var t=e.originalEvent.changedTouches[0];this.vacuumTouches(e),this.setPrimaryTouch(t),this.dedupSynthMouse(t),this.scrolling||(this.clickCount++,this.processTouches(e,this.overDown))},overDown:function(e){u.set(e.pointerId,{target:e.target,out:e,outTarget:e.target}),d.over(e),d.enter(e),d.down(e)},touchmove:function(e){this.scrolling||(this.shouldScroll(e)?(this.scrolling=!0,this.touchcancel(e)):(e.preventDefault(),this.processTouches(e,this.moveOverOut)))},moveOverOut:function(e){var t=u.get(e.pointerId);if(t){var i=t.out,n=t.outTarget;d.move(e),i&&n!==e.target&&(i.relatedTarget=e.target,e.relatedTarget=n,i.target=n,e.target?(d.leaveOut(i),d.enterOver(e)):(e.target=n,e.relatedTarget=null,this.cancelOut(e))),t.out=e,t.outTarget=e.target}},touchend:function(e){this.dedupSynthMouse(e.originalEvent.changedTouches[0]),this.processTouches(e,this.upOut)},upOut:function(e){this.scrolling||(d.up(e),d.out(e),d.leave(e)),this.cleanUpPointer(e)},touchcancel:function(e){this.processTouches(e,this.cancelOut)},cancelOut:function(e){d.cancel(e),d.out(e),d.leave(e),this.cleanUpPointer(e)},cleanUpPointer:function(e){u["delete"](e.pointerId),this.removePrimaryPointer(e)},dedupSynthMouse:function(e){var t=p.lastTouches;if(this.isPrimaryTouch(e)){var i={x:e.clientX,y:e.clientY};t.push(i);var n=function(e,t){var i=e.indexOf(t);i>-1&&e.splice(i,1)}.bind(null,t,i);setTimeout(n,this.DEDUP_TIMEOUT)}}},_={POINTER_TYPES:["","unavailable","touch","pen","mouse"],HAS_BITMAP_TYPE:e.MSPointerEvent&&"number"==typeof e.MSPointerEvent.MSPOINTER_TYPE_MOUSE,events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(e){d.listen(e,this.events)},unregister:function(e){d.unlisten(e,this.events)},prepareEvent:function(e){var t=l(e);return this.HAS_BITMAP_TYPE&&(t.pointerType=this.POINTER_TYPES[t.pointerType]),t},cleanup:function(e){u["delete"](e)},MSPointerDown:function(e){u.set(e.originalEvent.pointerId,e),d.down(this.prepareEvent(e))},MSPointerMove:function(e){d.move(this.prepareEvent(e))},MSPointerUp:function(e){d.up(this.prepareEvent(e)),this.cleanup(e.originalEvent.pointerId)},MSPointerOut:function(e){d.leaveOut(this.prepareEvent(e))},MSPointerOver:function(e){d.enterOver(this.prepareEvent(e))},MSPointerCancel:function(e){d.cancel(this.prepareEvent(e)),this.cleanup(e.originalEvent.pointerId)},MSGotPointerCapture:function(e){d.fireEvent("gotpointercapture",this.prepareEvent(e))},MSLostPointerCapture:function(e){d.fireEvent("lostpointercapture",this.prepareEvent(e))}},g=function(e){if(!u.has(e))throw new Error("InvalidPointerId")};e.Element&&Element.prototype.setPointerCapture?(h=function(e,t){e.setPointerCapture(t)},m=function(e,t){e.releasePointerCapture(t)}):e.navigator.msPointerEnabled?(h=function(e,t){g(t),e.msSetPointerCapture(t)},m=function(e,t){g(t),e.msReleasePointerCapture(t)}):(h=function(e,t){g(t),d.setCapture(t,e)},m=function(e,t){g(t),d.releaseCapture(t,e)}),i.fn.extend({setPointerCapture:function(e){h(this[0],e)},releasePointerCapture:function(e){m(this[0],e)}}),e._pointerPolyfillInited||(e._pointerPolyfillInited=!0,e.PointerEvent?["move","down","up","over","out","enter","leave","cancel"].forEach((function(e){var t=jQuery.event.fixHooks,i="pointer"+e;t[i]||(t[i]={}),t[i].props=o.concat(t[i].props||[])})):(delete i.event.special.pointerenter,delete i.event.special.pointerleave,e.navigator.msPointerEnabled?d.registerSource("ms",_):(d.registerSource("mouse",p),e.ontouchstart!==undefined&&d.registerSource("touch",f)),d.register(document)))}(window,document,jQuery)},function(e,t){!function(e){e.event.special.pointerpress||e.each({pointerpress:"pointerdown",pointerrelease:"pointerup pointercancel"},(function(t,i){function n(i){var n,o=i.type;return"mouse"===i.pointerType&&1!==i.which||(i.type=t,n=e.event.dispatch.apply(this,arguments),i.type=o),n}e.event.special[t]={setup:function(){e(this).on(i,n)},teardown:function(){e(this).off(i,n)}}}))}(jQuery)},function(e,t){$.extend({util:{}})},function(e,t){!function(){var e=Object.prototype.toString;function t(t){return"[object Object]"===e.call(t)}function i(e,n,o){var s,r;for(s in e=Object(e),n=Object(n))(r=o&&o(e[s],n[s],s))!==undefined?e[s]=r:t(e[s])&&t(n[s])?e[s]=i(e[s],n[s],o):e[s]=n[s];return e}$.extend($.util,{merge:i,mergeBemjson:function(e,t){return i(e,t,(function(e,t,i){if("mix"===i)return[].concat(e,t)}))}})}()},function(e,t){
/**
 * Cookie plugin
 *
 * Copyright (c) 2006 Klaus Hartl (stilbuero.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */
jQuery.cookie=function(e,t,i){if(void 0===t){var n=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),s=0;s<o.length;s++){var r=jQuery.trim(o[s]);if(r.substring(0,e.length+1)==e+"="){n=decodeURIComponent(r.substring(e.length+1));break}}return n}i=i||{},null===t&&(t="",i.expires=-1);var a,c="";i.expires&&("number"==typeof i.expires||i.expires.toUTCString)&&("number"==typeof i.expires?(a=new Date).setTime(a.getTime()+24*i.expires*60*60*1e3):a=i.expires,c="; expires="+a.toUTCString());var l=i.path?"; path="+i.path:"",u=i.domain?"; domain="+i.domain:"",d=i.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),c,l,u,d].join("")}},function(e,t){
/**
 * Plugin for decoding URI-escaped strings in CP1251 encoding
 *
 * Copyright (c) 2011-2012 Roman Rozhdestvenskiy (sbmaxx@gmail.com)
 */
!function(e){var t={"%D0":"%D0%A0","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DA":"%D0%AA","%DB":"%D0%AB","%DC":"%D0%AC","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF","%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FA":"%D1%8A","%FB":"%D1%8B","%FC":"%D1%8C","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F"};function i(e,i){var n="";try{n=e(i)}catch(o){try{n=e(function(e){return e.replace(/%.{2}/g,(function(e){return t[e]||e}))}(i))}catch(s){n=i}}return n}e.extend({decodeURI:function(e){return i(decodeURI,e)},decodeURIComponent:function(e){return i(decodeURIComponent,e)}})}(jQuery)},function(e,t){BEM.DOM.decl("i-global",{onSetMod:{js:{inited:function(){this.del(this.__self._params=$.extend({},this.params),"uniqId","name");var e=this.__self._params;e["passport-msg"]||(e["passport-msg"]=e.id),e["show-counters"]===undefined&&(e["show-counters"]=Math.round(100*Math.random())<=e["show-counters-percent"]),e.locale=e.lang,window.BEMHTML&&BEMHTML.apply({block:"i-global",params:e})}}},getDefaultParams:function(){return{id:"",login:Lego.isSessionValid()&&$.cookie("yandex_login")||"",yandexuid:$.cookie("yandexuid"),lang:"ru",tld:"ru",retpath:encodeURI($.decodeURI(location.href)),"passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","social-host":"https://social.yandex.ru","lego-path":"/lego","show-counters-percent":100}}},{param:function(e,t){if(void 0===t)return(this._params||{})[e];this._params&&(this._params[e]=t)}})},function(e,t){!function(e){e||(e=window.Lego={}),e.getCookie=function(e){var t=document.cookie;if(t.length<1)return!1;var i=t.indexOf(e+"=");if(-1===i)return!1;i+=e.length+1;var n=t.indexOf(";",i);return decodeURIComponent(-1===n?t.substring(i):t.substring(i,n))}}(window.Lego)},function(e,t){!function(e,t){t||(t=window.Lego={}),t.init||(t.init=function(i){return(i=t.params=e.extend({id:"",login:t.isSessionValid()&&t.getCookie("yandex_login")||"",yandexuid:t.getCookie("yandexuid"),locale:"ru",retpath:window.location.toString(),"passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","passport-msg":i.id,"social-host":"https://social.yandex.ru","lego-path":"/lego","show-counters-percent":100},i,t.params))["show-counters"]=Math.round(100*Math.random())<=i["show-counters-percent"],BEM.blocks["i-global"]._params||e.extend(BEM.blocks["i-global"]._params={},i),i}),t.block||(t.block={}),t.blockInit||(t.blockInit=function(i,n){i=i||document,n=n||".g-js",e(i).find(n).each((function(){var i=e(this),n=i.data("bem")||(this.onclick?this.onclick():{}),o=n.name||"",s=t.block[o];s&&!i.data(o)&&(s.call(i,n),i.data(o,!0).addClass(o+"_js_inited"))}))}),t.blockInitBinded||(t.blockInitBinded=Boolean(e(document).ready((function(){t.blockInit()}))))}(jQuery,window.Lego)},function(e,t){!function(e){e||(e=window.Lego={}),e.isSessionValid=function(){return Boolean(e.getCookie("yandex_login"))}}(window.Lego)},function(e,t){!function(e,t){var i={};/msie|trident/i.test(t)?i.ie=parseInt(t.split(/msie|rv:/i)[1],10):-1!==t.indexOf("Opera")&&(i.opera=parseInt(t.split(/Version\//i)[1],10));var n,o={},s={};(n=t.match(/Windows\sPhone[^\d]*\s([\d.]+)/))?o.wp=n[1]:(n=t.match(/Android\s+([\d.]+)/))?o.android=n[1]:t.match(/\sHTC[\s_].*AppleWebKit/)?o.android="2.3":(n=t.match(/iPhone\sOS\s([\d_]+)/))?(o.ios=n[1].replace(/_/g,"."),s.iphone=!0):(n=t.match(/iPad.*OS\s([\d_]+)/))?(o.ios=n[1].replace(/_/g,"."),s.ipad=!0):(n=t.match(/Bada\/([\d.]+)/))?o.bada=n[1]:(n=t.match(/MSIE\s9/))?o.wp="7.5":o.other=!0,BEM.DOM.decl("i-ua",{onSetMod:{js:{inited:function(){var e=this.__self,t="other";["ios","android","bada","wp","opera"].some((function(i){return e[i]&&(t=i)})),this.setMod("platform",t)}}},setVersion:function(){var e=this.parseVersion();e&&(this.setMod(e.platform,e.major),this.setMod(e.platform+"-subversion",e.subversion))},parseVersion:function(){if(this.__self.ios||this.__self.android){var e=(this.__self.ios||this.__self.android).split("."),t=e.shift(),i=e.join("-");return{platform:this.getMod("platform"),major:t,subversion:i}}}},{ios:o.ios,iphone:s.iphone,ipad:s.ipad,android:o.android,bada:o.bada,wp:o.wp,other:o.other,ua:t,ie:i.ie,opera:i.opera})}(window,navigator.userAgent)},function(e,t){BEM.KEYS={LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,SPACE:32,ESC:27,TAB:9,HOME:36,END:35},function(){var e={};for(var t in BEM.KEYS)BEM.KEYS.hasOwnProperty(t)&&(e[BEM.KEYS[t]]=t);var i={CTRL:"ctrlKey",ALT:"altKey",SHIFT:"shiftKey",META:"metaKey"},n=function(t){var n=e[t.which]||"";for(var o in i)i.hasOwnProperty(o)&&t[i[o]]&&(n=o+"+"+n);return n},o=function(e){var t={};return e.split(" ").forEach((function(e){e.split("+").forEach((function(t){var n=t.toUpperCase();if(!(n in i)&&!(n in BEM.KEYS))throw"i-keys.js: Unknown key "+e})),t[e.toUpperCase()]=!0})),t};BEM.DOM.liveBindKey=function(e,t,i){var s;return $.isFunction(t)&&(i=t,t=e,e=undefined),s=o(t),this.liveBindTo(e,"keydown",(function(e){n(e)in s&&!1===i.call(this,e)&&e.preventDefault()}))},BEM.DOM.prototype.bindKeyTo=function(e,t,i){var s;return $.isFunction(t)&&(i=t,t=e,e=undefined),s=o(t),i.keydownHandler=r,e===document?this.bindToDoc("keydown",r):e===window?this.bindToWin("keydown",r):this.bindTo(e,"keydown",r);function r(e){n(e)in s&&!1===i.call(this,e)&&e.preventDefault()}},BEM.DOM.prototype.unbindKeyFrom=function(e,t,i){if($.isFunction(t)&&(i=t,t=e,e=undefined),!i||!i.keydownHandler)return this;var n=i.keydownHandler;return i.keydownHandler=null,e===document?this.unbindFromDoc("keydown",n):e===window?this.unbindFromWin("keydown",n):this.unbindFrom(e,"keydown",n)}}()},function(e,t){BEM.DOM.decl("control",{onSetMod:{focused:{yes:function(){if(this.hasMod("disabled"))return!1;this._focused||(this._focus(),this.trigger("focus"))},"":function(){this._focused&&(this._blur(),this.trigger("blur"))}},disabled:{"*":function(e,t){var i=this._getControl();i.prop("disabled",Boolean(t)).attr("aria-disabled",Boolean(t)),i.attr("tabindex",t?null:this.params._tabindex)},yes:function(){this.delMod("focused")}}},_focus:function(){this._getControl().focus()},_blur:function(){this._getControl().blur()},_getControl:function(){var e=this.elem("control");return e.length>0?e:this.domElem},_onFocusin:function(){this._focused=!0,this.trigger("focus").setMod("focused","yes").bindTo("focusout",this._onFocusout)},_onFocusout:function(){this._focused=!1,this.trigger("blur").delMod("focused").unbindFrom("focusout")},getDefaultParams:function(){return{_tabindex:this._getControl().attr("tabindex")}}},{live:function(){this.liveBindTo("focusin",(function(e){this._onFocusin(e)})),parseInt(BEM.blocks["i-ua"].ios,10)>=8&&this.liveBindTo("control","focusin",(function(e){e.preventDefault()}))}})},function(e,t){BEM.DOM.decl({block:"link",baseBlock:"control"},{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},pressed:{yes:function(){return!this.hasMod("disabled")}},disabled:{"":function(){this.__base.apply(this,arguments),this.domElem.attr("tabindex",this.params._tabindex).attr("href",this._url||this.params._url)},yes:function(){this.__base.apply(this,arguments),this._url=this.domElem.attr("href")||this.params._url,this._url!==undefined&&this.domElem.attr("tabindex",-1),this.domElem.removeAttr("href"),this.delMod("pressed")}}},_onPointerpress:function(e){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(e){this.delMod("pressed").unbindFromDoc("pointerrelease")}},{live:function(){return this.liveBindTo("pointerpress",(function(e){this.hasMod("disabled")||this._onPointerpress(e)})),this.__base()}})},function(e,t){BEM.DOM.decl("link",{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered")}}},_onPointerenter:function(e){this.setMod("hovered","yes")},_onPointerleave:function(e){this.delMod("hovered")}},{live:function(){return this.liveBindTo("pointerover pointerout",(function(e){this.hasMod("disabled")||this.domElem[0].contains(e.relatedTarget)||("pointerover"===e.type?this._onPointerenter(e):this._onPointerleave(e))})),this.__base.apply(this,arguments)}})},function(e,t){!function(e,t){if(!t.event.special.pointerclick){var i,n=e.ontouchstart!==undefined||navigator.msMaxTouchPoints>0,o="touchAction"in document.documentElement.style,s=[],r=[],a=null,c=null,l=o?function(e){return function t(e){return!(!e||e===document.documentElement)&&("manipulation"===getComputedStyle(e)["touch-action"]||t(e.parentElement))}(e)}:function(){return!1};n?(i={click:function(e){var t=Object(e.originalEvent)._sourcePoint;if(!t)return h.apply(this,arguments);t.isDefaultPrevented()&&e.preventDefault()},"pointerdown pointermove pointerleave pointercancel pointerup":function(e){var t=e.type;if("mouse"!==e.pointerType&&("pointerdown"!==t&&"pointerup"!==t||!l(e.target)))if("pointerdown"===t)c=e;else if("pointermove"===t&&c&&(c.target!==e.target||d(c,e)))c=null;else if("pointerleave"===t||"pointercancel"===t)c=null;else if("pointerup"===t){if(u(e),!c)return;if(!(e.timeStamp-c.timeStamp>250))return a||(a=setTimeout((function(){a=c=null}))),h.apply(this,arguments);c=null}}},["mousedown","click"].forEach((function(t){e.addEventListener(t,(function(e){!function(e){var t=e.clientX,i=e.clientY,n="_compat"+e.type;if(e._sourcePoint)return;for(var o=0;o<s.length;o++){var a=s[o],c=a.target===e.target;if(!a[n]&&((c||!(Math.abs(t-a.clientX)>25||Math.abs(i-a.clientY)>25))&&(c||document.elementFromPoint(a.clientX,a.clientY)!==a.target))){e._sourcePoint=a,a[n]=e;break}}r.push(e),setTimeout(Array.prototype.shift.bind(r),900)}(e),function(e){var t=function(e){for(var t=0;t<r.length;t++)if(r[t]===e)return r[t]._sourcePoint}(e);return Boolean(t)&&t.target!==e.target}(e)&&(e.preventDefault(),e.stopPropagation())}),!0)}))):i={click:function(e){return h.apply(this,arguments)}},t.event.special.pointerclick={setup:function(){t(this).on(i)},teardown:function(){t(this).off(i)}}}function u(e){e.isPrimary&&(s.push(e),setTimeout(Array.prototype.shift.bind(s),900))}function d(e,t){return Math.abs(e.clientX-t.clientX)>10||Math.abs(e.clientY-t.clientY)>10}function h(e){var i,n=e.type;return e.button||(e.type="pointerclick",i=t.event.dispatch.apply(this,arguments),e.type=n),i}}(window,jQuery)},function(e,t){BEM.DOM.decl({block:"link",modName:"pseudo",modVal:"yes"},{_onClick:function(e){e.preventDefault(),this.hasMod("disabled")||this.trigger("click",this._buildClickEventData(e))},_onKeydown:function(e){BEM.blocks.keycodes.is(e.keyCode,"ENTER","SPACE")&&(BEM.blocks.keycodes.is(e.keyCode,"SPACE")&&e.preventDefault(),this.setMod("pressed","yes"))},_onKeyup:function(e){BEM.blocks.keycodes.is(e.keyCode,"ENTER","SPACE")&&(BEM.blocks.keycodes.is(e.keyCode,"SPACE")&&this.trigger("click"),this.delMod("pressed"))},_buildClickEventData:function(e){return{domEvent:e,isModKey:e.ctrlKey||e.altKey||e.metaKey||e.shiftKey}}},{live:function(){return this.liveBindTo({modName:"pseudo",modVal:"yes"},"pointerclick",(function(e){this._onClick(e)})).liveBindTo({modName:"pseudo",modVal:"yes"},"keydown",(function(e){this.hasMod("disabled")||this._onKeydown(e)})).liveBindTo({modName:"pseudo",modVal:"yes"},"keyup",(function(e){this.hasMod("disabled")||this._onKeyup(e)})),this.__base()}})},function(e,t){BEM.decl("keycodes",{},{BACKSPACE:8,TAB:9,ENTER:13,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,is:function(e,t){return(Array.isArray(t)?t:Array.prototype.slice.call(arguments,1)).some((function(t){return this[t]===e}),this)}})},function(e,t){!function(){var e=$(window),t=$(document.documentElement),i=0,n=!1;function o(){t.hasClass("pointerfocus")&&(n=!0,setTimeout((function(){n=!1})))}document.documentMode<=11?t.on("focusin",(function(e){var t=e.originalEvent;!t||t.fromElement||t.relatedTarget||o()})):e.on("blur",(function(){e.one("focus",o)})),t.addClass("utilityfocus").on({focusin:function(){t.toggleClass("pointerfocus",n).toggleClass("utilityfocus",!n)},keydown:function(){clearTimeout(i),n=!1},"pointerdown pointerup click":function(e){n=!0,clearTimeout(i),i=setTimeout((function(){n=!1}),600)}})}()},function(e,t){var i,n,o;n={isAuthenticated:!1,isFeedbackReceived:!1,isRequestSent:!1},o=function(){},BEM.decl("i-mda-auth",{},{authenticate:function(e){if(""===(i=Lego.params["mda-auth-url"]||home.getData("i-mda-auth.url")||""))return!1;var t=Lego.params["mda-auth-delay"]||10;o=e||function(){},setTimeout((function(){var e=document.createElement("iframe");e.style.visibility="hidden",e.style.position="absolute",e.setAttribute("src",i),e.name="i-mda-auth"+(Math.random()+"").substr(3,7),e.style.top=e.style.left=e.style.width=e.style.height=0,document.getElementsByTagName("body")[0].appendChild(e),n.isRequestSent=!0}),t)},isRequestSent:function(){return n.isRequestSent},isFeedbackReceived:function(){return n.isFeedbackReceived},isAuthenticated:function(){return n.isAuthenticated},getUrl:function(){return i},registerFeedback:function(e){var t="success"===e;n.isFeedbackReceived=!0,n.isAuthenticated=t,o(t)}})},function(e,t){window.Ya&&Ya.Rum&&(function(e){if(!e)throw new Error("Rum: interface is not included");if(!e.enabled)return e.getSetting=function(){return""},e.getVarsList=function(){return[]},void(e.getResourceTimings=e.pushConnectionTypeTo=e.pushTimingTo=e.normalize=e.sendCounter=e.sendDelta=e.sendTimeMark=e.sendResTiming=e.sendTTI=e.makeSubPage=e.sendFirstPaint=e.sendHeroElement=function(){});e.getVarsList=function(){var t=e._vars;return Object.keys(t).map((function(e){return e+"="+encodeURIComponent(t[e]).replace(/\*/g,"%2A")}))},e.setVars=function(t){Object.keys(t).forEach((function(i){e._vars[i]=t[i]})),E(),x()};var t,i,n={connectEnd:2116,connectStart:2114,decodedBodySize:2886,domComplete:2124,domContentLoadedEventEnd:2131,domContentLoadedEventStart:2123,domInteractive:2770,domLoading:2769,domainLookupEnd:2113,domainLookupStart:2112,duration:2136,encodedBodySize:2887,entryType:2888,fetchStart:2111,initiatorType:2889,loadEventEnd:2126,loadEventStart:2125,nextHopProtocol:2890,redirectCount:1385,redirectEnd:2110,redirectStart:2109,requestStart:2117,responseEnd:2120,responseStart:2119,secureConnectionStart:2115,startTime:2322,transferSize:2323,type:76,unloadEventEnd:2128,unloadEventStart:2127,workerStart:2137},o={visible:1,hidden:2,prerender:3},s={bluetooth:2064,cellular:2065,ethernet:2066,none:1229,wifi:2067,wimax:2068,other:861,unknown:836,0:836,1:2066,2:2067,3:2070,4:2071,5:2768},r={"first-paint":2793,"first-contentful-paint":2794},a=Object.keys(r).length,c=e.getTime,l=window.PerformanceObserver,u=window.performance||{},d=u.timing||{},h=u.navigation||{},m=navigator.connection,p={},f={},_=e._deltaMarks,g=document.createElement("link"),v=document.createElement("a"),b="function"==typeof u.getEntriesByType,y=d.navigationStart,w=d.responseStart-y,k=d.domainLookupStart-y;if(E(),x(),e.ajaxStart=0,e.ajaxComplete=0,l)try{new l((function(e,i){var n=e.getEntriesByType("navigation")[0];if(n){i&&i.disconnect();var o=[];J(o,n),K(o),ee("690.2096.2892",t.concat(o))}})).observe({entryTypes:["navigation"]})}catch(te){}function E(){t=e.getVarsList().concat("1042="+encodeURIComponent(navigator.userAgent))}function x(){i=t.concat(["143.2129="+y,"143.2112="+k,"143.2119="+w])}function M(){removeEventListener("DOMContentLoaded",M),removeEventListener("load",M),y&&setTimeout((function(){e.sendTimeMark=B,e.sendResTiming=A,e.timeEnd=D;for(var i=e._defRes;i.length;){var n=i.shift();A(n[0],n[1])}for(var o=e._defTimes;o.length;){var s=o.shift();B(s[0],s[1],!1,s[2])}Object.keys(_).forEach((function(e){j(e)})),T(),function c(){if(!b||!e.getSetting("forceFirstPaintTimeSending")&&e.isVisibilityChanged())return;for(var t=u.getEntriesByType("paint"),i=0;i<t.length;i++){var n=t[i],o=r[n.name];o&&!P[n.name]&&(P[n.name]=!0,I++,B("1926."+o,n.startTime))}if(I<a)try{new l((function(e,t){c(),t&&t.disconnect()})).observe({entryTypes:["paint"]})}catch(te){}}(),q(),e.getSetting("sendStaticLocation")&&function(){if(window.YaStaticRegion)return void ee("690.2096.2335.1822",t.concat("1822="+encodeURIComponent(window.YaStaticRegion)));var i=document.createElement("script"),n=e.getSetting("crossOrigin");i.src="https://yastatic.net/nearest.js",i.async=!0,null!==n&&(i.crossOrigin=n);i.onload=function(){var e=window.YaStaticRegion;e&&ee("690.2096.2335.1822",t.concat("1822="+e))},document.head.appendChild(i)}(),Y(),b&&("complete"===document.readyState?C():addEventListener("load",C))}),0)}function C(){removeEventListener("load",C),function(){if(!b)return;var e=u.getEntriesByType("resource").reduce((function(e,t){var i,n=t.name.match(/^https?:\/\/([^\/?#]+)(?:[\/?#]|$)/i);return n&&((i=n[1])in e||(e[i]={count:0,size:0}),e[i].count++,t.transferSize&&(e[i].size+=t.transferSize)),e}),{}),i="2748=";Object.keys(e).forEach((function(t){i+=t+"!"+e[t].count+"!"+(e[t].size||"")+";"})),ee("690.2096.2748",t.concat(i))}(),function(){var t=e.getSetting("periodicStatsIntervalMs");t||null===t||(t=15e3);t&&(S=setInterval(R,t));addEventListener("beforeunload",R)}(),function(){if(!l)return;F(u.getEntriesByType("navigation")),F(u.getEntriesByType("resource"));try{new l((function(e){F(e.getEntries())})).observe({entryTypes:["resource","navigation"]})}catch(te){}e._periodicTasks.push(z)}(),function(){if(!l)return;try{new l((function(e,t){var i=e.getEntries()[0];i&&(j("first-input",i.processingStart-i.startTime),t.disconnect())})).observe({type:"first-input",buffered:!0})}catch(te){}}(),function(){if(!l)return;var e=new l((function(e){var t=e.getEntries();null==N&&(N=0);for(var i=0;i<t.length;i++){var n=t[i];n.hadRecentInput||(N+=n.value)}}));try{e.observe({type:"layout-shift",buffered:!0})}catch(te){}addEventListener("visibilitychange",(function t(){if("hidden"===document.visibilityState){removeEventListener("visibilitychange",t);try{"function"==typeof e.takeRecords&&e.takeRecords(),e.disconnect()}catch(te){}H()}})),addEventListener("beforeunload",H)}(),function(){if(!l)return;var e=new l((function(e){for(var t=e.getEntries(),i=0;i<t.length;i++){var n=t[i];W=n.renderTime||n.loadTime}V||(B("largest-loading-elem-paint",W),V=!0)}));try{e.observe({type:"largest-contentful-paint",buffered:!0})}catch(te){}addEventListener("visibilitychange",(function t(){if("hidden"===document.visibilityState){removeEventListener("visibilitychange",t);try{"function"==typeof e.takeRecords&&e.takeRecords(),e.disconnect()}catch(te){}$()}})),addEventListener("beforeunload",$)}()}function T(){var i=d.domContentLoadedEventStart,s=d.domContentLoadedEventEnd;if(0!==i||0!==s){var r=function(){if(!e.getSetting("forceFirstPaintTimeSending")&&e.isVisibilityChanged())return;if(window.chrome&&"function"==typeof window.chrome.loadTimes){var t=window.chrome.loadTimes();return t&&t.firstPaintTime?1e3*t.firstPaintTime:0}if(d.msFirstPaint)return d.msFirstPaint}(),a=t.concat(["2129="+y,"1036="+(d.domainLookupStart-y),"1037="+(d.domainLookupEnd-d.domainLookupStart),"1038="+(d.connectEnd-d.connectStart),d.secureConnectionStart&&"1383="+(d.connectEnd-d.secureConnectionStart),"1039="+(d.responseStart-d.connectEnd),"1040="+(d.responseEnd-d.responseStart),"1040.906="+(d.responseEnd-d.domainLookupStart),"1310.2084="+(d.domLoading-d.responseStart),"1310.2085="+(d.domInteractive-d.responseStart),"1310.1309="+(s-i),"1310.1007="+(i-d.responseStart),"2299="+history.length,navigator.deviceMemory&&"3140="+navigator.deviceMemory,navigator.hardwareConcurrency&&"3141="+navigator.hardwareConcurrency]);e.mark("1039 ttfb",d.responseStart-d.connectEnd),e.mark("1310.1007 dom.loaded",d.domContentLoadedEventStart-d.responseStart),r&&(a.push("2130="+(r-y),"1041="+(r-d.responseStart),"1041.906="+(r-d.domainLookupStart)),e.mark("1041.906 ttfp",r-d.domainLookupStart)),Object.keys(n).forEach((function(e){e in d&&d[e]&&a.push(n[e]+"="+Q(d[e],y))})),e.vsStart?(a.push("1484="+(o[e.vsStart]||2771)),e.vsChanged&&a.push("1484.719=1")):a.push("1484="+o.visible),h&&(h.redirectCount&&a.push("1384.1385="+h.redirectCount),1!==h.type&&2!==h.type||a.push("770.76="+h.type)),K(a),ee("690.1033",a,["dtype=stred","pid=1","cid=72202"])}else setTimeout(T,50)}"loading"===document.readyState?(addEventListener("DOMContentLoaded",M),addEventListener("load",M)):M(),e._getCommonVars=function(){return t};var S,P={},I=0;function B(t,i,n,o){i===undefined&&(i=c()),n!==undefined&&!0!==n||e.mark(t,i);var s=Z(t);if(s.push("207="+Q(i)),O(s,o)){ee("690.2096.207",s),p[t]=p[t]||[],p[t].push(i);var r=e._markListeners[t];r&&r.length&&r.forEach((function(e){e(i)}))}}function O(e,t){if(t){if(t.isCanceled&&t.isCanceled())return!1;Object.keys(t).forEach((function(i){"function"!=typeof t[i]&&e.push(i+"="+t[i])}))}return!0}function D(e,t){var i=_[e];i&&0!==i.length&&(i.push(c(),t),j(e))}function j(t,i,n){var o,s,r,a=_[t];if(void 0!==i?o=(s=e.getTime())-i:a&&(o=a[0],s=a[1],r=a[2]),o!==undefined&&s!==undefined){var c=Z(t);c.push("207.2154="+Q(o),"207.1428="+Q(s),"2877="+Q(s-o)),O(c,n)&&O(c,r)&&(ee("690.2096.2877",c),delete _[t])}}function A(e,t){G(t,(function(i){if(i){var n=Z(e);n.push("13="+encodeURIComponent(t)),J(n,i[0]),ee("690.2096.2044",n)}}))}function R(){var t=!1;e._periodicTasks.forEach((function(e){e()&&(t=!0)})),t||clearInterval(S)}e.getTimeMarks=function(){return p},e._periodicTasks=[];var N,L=0;function F(e){if(e&&e.length)for(var t=f,i=0;i<e.length;i++){var n=U(e[i]);if(n){var o=n.domain+"-"+n.extension,s=t[o]=t[o]||{count:0,size:0};s.count++,s.size+=n.size}}}function U(e){var t=e.transferSize;if(null==t)return null;v.href=e.name;var i=v.pathname;if(0===i.indexOf("/clck"))return null;var n=i.lastIndexOf("."),o="";return-1!=n&&i.lastIndexOf("/")<n&&i.length-n<=5&&(o=i.slice(n+1)),{size:t,domain:v.hostname,extension:o}}function z(){var e=Ya.Rum.getSetting("maxTrafficCounters")||250;if(L>=e)return!1;for(var i=Object.keys(f),n="",o=0;o<i.length;o++){var s=i[o],r=f[s];n+=encodeURIComponent(s)+"!"+r.count+"!"+r.size+";"}n.length&&(L++,ee("690.2096.361",t.concat(["d="+n,"t="+Q(Ya.Rum.getTime())])));return f={},!(L>=e)}function H(){if(null!=N){var e=Math.round(1e6*N)/1e6;ee("690.2096.4004",t.concat("s="+e)),N=null}}var W=null,V=!1;function $(){null!=W&&(B("largest-contentful-paint",W),W=null)}var q=l?function(){try{new l((function(e){for(var t=e.getEntries(),i=0;i<t.length;i++){var n=t[i];B("element-timing."+n.identifier,n.startTime)}})).observe({type:"element",buffered:!0})}catch(te){}}:function(){};function Y(t,i,n){if(e._tti){var o=c(),s=function(t,s,r){var a={2796.2797:X(r,i),689.2322:Q(o)};n&&Object.keys(n).forEach((function(e){a[e]=n[e]})),B(t||"2795",s,!0,a),e._tti.fired=!0},r=function(){var n,a=i||o,l=c(),u=e._tti.events||[],d=u.length;0!==d&&(n=u[d-1],a=Math.max(a,Math.floor(n.startTime+n.duration))),l-a>=3e3?s(t,a,u):l-a>=2e4?s(t,(i||o)+2e4,u):setTimeout(r,1e3)};r()}}function K(e){m&&e.push("2437="+(s[m.type]||2771),m.downlinkMax&&"2439="+m.downlinkMax,m.effectiveType&&"2870="+m.effectiveType)}function G(e,t){if(!b)return t(null);g.href=e;var i=g.href,n=0,o=100;setTimeout((function s(){var e=u.getEntriesByName(i);if(e.length)return t(e);n++<10?(setTimeout(s,o),o+=o):t(null)}),0)}function X(e,t){return t=t||0,(e=e||[]).filter((function(e){return e.startTime-t>=-50})).map((function(e){var t=e.name?e.name.split("-").map((function(e){return e[0]})).join(""):"u",i=Math.floor(e.startTime);return t+"-"+i+"-"+Math.floor(i+e.duration)})).join(".")}function Z(t){return i.concat(["1701="+t,e.ajaxStart&&"1201.2154="+Q(e.ajaxStart),e.ajaxComplete&&"1201.2052="+Q(e.ajaxComplete)])}function J(e,t){Object.keys(n).forEach((function(i){if(i in t){var o=t[i];(o||0===o)&&e.push(n[i]+"="+Q(o))}}))}function Q(e,t){return"string"==typeof e?encodeURIComponent(e):Math.round(1e3*(e-(t||0)))/1e3}function ee(t,i,n,o){var s=encodeURIComponent(window.YaStaticRegion||"unknown");i.push("-cdn="+s);var r=i.filter(Boolean).join(","),a=o?{href:o}:null;e.send(a,t,r,null,null,null,n)}e.sendTTI=Y,e.sendFirstPaint=function(e){window.requestAnimationFrame?requestAnimationFrame((function(){B("2130",e)})):B("2130",e)},e.sendHeroElement=function(e){B("2876",e)},e._subpages={},e.makeSubPage=function(t,i){var n=e._subpages[t];e._subpages[t]=void 0===n?n=0:++n;var o=!1;return{689.2322:Q(void 0!==i?i:Ya.Rum.getTime()),2924:t,2925:n,isCanceled:function(){return o},cancel:function(){o=!0}}},e._getLongtasksStringValue=X,e.getResourceTimings=G,e.pushConnectionTypeTo=K,e.pushTimingTo=J,e.normalize=Q,e.sendCounter=ee,e.sendDelta=j,e.sendTrafficData=z,e.finalizeLayoutShiftScore=H,e.finalizeLargestContentfulPaint=$}(Ya.Rum),function(e){var t=0;var i=[];function n(e){for(var t=0,i=0;i<e.length;++i)t+=e[i]*e[i];return Math.sqrt(t/e.length)}var o,s,r,a=[];e.enabled&&(e.getSetting("longTaskMetric")&&e._tti&&e._periodicTasks.push((function(){if(!e._tti.fired)return!0;var i=e.getSetting("maxLongTaskCounters")||10;if(++t>i)return!1;if(e._tti.eventsAfterTTI.length){var n=e._getCommonVars().slice();n.push("2796.2797="+e._getLongtasksStringValue(e._tti.eventsAfterTTI)),n.push("689.2322="+e.normalize(e.getTime())),e.sendCounter("690.2096.2796",n),e._tti.eventsAfterTTI=[]}return!0})),e.getSetting("scrollMetric")&&(r=!1,e.getTime(),addEventListener("scroll",(function(){var t=e.getTime();r?i.push(t-o):(r=!0,e.getTime()),o=t,clearTimeout(s),s=setTimeout((function(){r=!1}),500)})),e._periodicTasks.push((function(){if(i.length){var t=e._getCommonVars().concat(["d="+n(i)]);e.sendCounter("690.2096.768",t),i=[]}return!0}))),e.getSetting("scrollLatencyMetric")&&function(){try{if(!window.PerformanceScrollUpdateLatency)return!1;new PerformanceObserver((function(e){e.getEntries().forEach((function(e){a.push(e.duration)}))})).observe({entryTypes:["scrollUpdateLatency"]})}catch(e){return!1}return!0}()&&e._periodicTasks.push((function(){if(a.length){var t=e._getCommonVars().concat(["d="+n(a)]);e.sendCounter("690.2096.768.2373",t),a=[]}return!0})))}(Ya.Rum),Ya.Rum.enabled&&addEventListener("load",(function i(){removeEventListener("load",i),Ya.Rum.sendTimeMark("1724");for(var e=document.querySelectorAll("script[data-rCid], div[data-rCid]"),t=0,n=e.length;t<n;t++){var o=e[t],s=o.src;if(!s){var r=getComputedStyle(o).backgroundImage;if(r){var a=r.match(/^url\(["']?(.*?)["']?\)$/);a&&(s=a[1])}}s&&Ya.Rum.sendResTiming(o.getAttribute("data-rCid"),s)}})),function(){"use strict";var e,t=[];function i(){var i=Ya.Rum.getSetting("clck"),n=t.join("\r\n");if((t=[],e=null,i)&&!(navigator.sendBeacon&&Ya.Rum.getSetting("beacon")&&navigator.sendBeacon(i,n))){var o=new XMLHttpRequest;o.open("POST",i),o.send(n)}}Ya.Rum.send=function(n,o,s,r,a,c,l){clearTimeout(e);var u=function(e,t,i,n,o,s){var r=Ya.Rum.getSetting("slots"),a=Ya.Rum.getSetting("experiments");return[s?"/"+s.join("/"):"",t?"/path="+t:"",n?"/events="+n:"",r?"/slots="+r.join(";"):"",a?"/experiments="+a.join(";"):"",i?"/vars="+i:"","/cts="+(new Date).getTime(),"/*"]}(0,o,s,a,0,l);t.push("/reqid="+Ya.Rum.getSetting("reqid")+u.join("")),t.length<42?e=setTimeout(i,15):i()}}()),window.Ya&&Ya.Rum&&Ya.Rum.enabled&&window.BEM&&BEM.channel("i-bem").onFirst("start-init",(function(){Ya.Rum.sendTimeMark("2418")})).onFirst("init",(function(){Ya.Rum.sendTimeMark("2295")}))},function(e,t){!function(e,t){var i,n,o,s,r;function a(e){var i=n.call(t,"span");return i.innerText=String.fromCharCode(e),i}function c(e,t){return Math.round(e.offsetWidth*t)-1}e.Ya=e.Ya||{},e.Ya.F=e.Ya.F||{},e.Ya.F.calibrate=function(e,l){if(null,e){i=t.body,n=t.createElement,o=t.createDocumentFragment,s=i.appendChild,r=i.removeChild;var u=function(e){var i=n.call(t,"div"),o='position:absolute;left:0;top:0;width:1px;height:1px;opacity:0;overflow:hidden;font:1000px "'+e+'", serif;';i.setAttribute("style",o),i.setAttribute("aria-hidden","true");for(var r=0;r<4;r++)s.call(i,a(57344+r));return i}(e);s.call(i,u);var d=u.children,h=16/d[0].offsetWidth,m=c(d[1],h);if(1==m){var p=c(d[2],h),f=c(d[3],h),_=p+(f<<4);if(_<4)C(l,null);else{for(var g=o.apply(t),v=m+p+f,b=0;b<2*_+1;b++)s.call(g,a(57348+b));s.call(u,g);for(var y=[],w=4;w<4+2*_;w+=2){var k=c(d[w],h),E=c(d[w+1],h);y.push(k+(E<<4)),v+=k+E}if(c(d[w],h)==(15&v)){for(var x=0,M=0;M<y.length;M++)x+=y[M]*(1<<8*M);C(l,x)}else C(l,null)}}else C(l,null)}else C(l,null);function C(e,t){u&&(r.call(i,u),u=null),setTimeout((function(){e(t)}),0)}}}(window,document)},function(e,t){var i;i=/^(https?:)?\/\//,home.getStaticURL={getAbsolute:function(e,t){var n;return i.test(e)?n=e:(n=home.getData("get-static-url.urls."+(e+t)))===undefined&&home.error({message:"Missing url in client data",block:"getStaticURL",method:"getAbsolute",additional:{path:e,page:t}}),n},getHost:function(){return home.getData("get-static-url.host")}},home["export"]&&(home["export"].common=home["export"].common||{},home["export"].common.req=home["export"].common.req||{},home["export"].common.req.getStaticURL=home.getStaticURL)},function(e,t){window.ya=window.ya||{},ya.history=window.history&&history.pushState?{navigate:function(e){(e=e||{}).url&&(e.title||(e.title=""),e.data||(e.data=""),e.replace?history.replaceState(e.data,e.title,e.url):history.pushState(e.data,e.title,e.url))},onchange:function(e){$(window).on("popstate",(function(t){e.call(this,t.originalEvent)}))}}:null},function(e,t){!function(){"use strict";function e(){home.originalUrl=window.location.href;var e=home&&home.getData&&home.getData("i-change-url.data");if(e){var t,i=e.url;try{t=history.state}catch(n){}i&&ya.history&&ya.history.navigate({data:t||null,url:i,replace:!0})}}var t=+new Date;!function i(){window.defaultMetrikaCounter||+new Date-t>5e3?e():setTimeout(i,100)}()}()},function(e,t){$(document).ready((function(){var e=home&&home.getData&&home.getData("time-count.data");if(e){var t=null,i=e.timeout,n=+new Date+3e5,o=[];document.hidden||function r(e){o.push(e),s(),t=e<=3e5?setTimeout((function(){r(e+i)}),i):null}(0),BEM.channel("sys").on("hidden",(function a(){t&&(clearTimeout(t),t=null),BEM.channel("sys").un("hidden",a)}))}function s(){if(window.defaultMetrikaCounter)for(;o.length;){var t=o.pop(),i={};i["time-"+e.content]={},i["time-"+e.content][e.type]={},i["time-"+e.content][e.type][t]=1,window.defaultMetrikaCounter.params(i)}else+new Date<n&&setTimeout(s,100)}}))},function(e,t){BEM.DOM.decl("xiva-notif",{onSetMod:{js:function(){window.WebSocket&&this.params.url&&(this.isConnected=!1,this.isPageClosed=!1,this.last={},this.connectAttempts=0,this.connectAttemptsTimer=null,this.reconnectTimer=null,this._connect(),this.bindToWin("beforeunload",this._disconnect))}},_update:function(e){this._isFreshMessage(e)&&("insert"!==e.operation&&"update labels"!==e.operation||this.channel("mail").trigger("update",{uid:e.uid,value:e.newCount}))},_isFreshMessage:function(e){var t=e.uid;return!!t&&(t in this.last||(this.last[t]=0),this.last[t]<=e.lcn?(this.last[t]=e.lcn,!0):void 0)},_connect:function(){this.last={},this.connectAttempts=0,this.ws=new WebSocket(this.params.url),this.ws.onopen=this._onSocketOpen.bind(this),this.ws.onmessage=this._onSocketMessage.bind(this),this.ws.onclose=this._onSocketClose.bind(this)},_onSocketOpen:function(){this.isConnected=!0,clearTimeout(this.connectAttemptsTimer),this.connectAttemptsTimer=setTimeout(function(){this.isConnected&&(this.connectAttempts=0)}.bind(this),5e3)},_onSocketMessage:function(e){try{var t=JSON.parse(e.data);t.raw_data&&this._update(JSON.parse(t.raw_data))}catch(i){}},_onSocketClose:function(e){if(clearTimeout(this.connectAttemptsTimer),!this.isPageClosed){this.connectAttempts+=1;var t=6e4;this.isConnected=!1,this.connectAttempts<=5?t=3e3:this.connectAttempts<=15&&(t=1e4),4e3===e.code&&(t=3e5),4401!==e.code&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(this._connect.bind(this),t))}},_disconnect:function(){this.isPageClosed=!0,this.ws&&this.ws.close&&this.ws.close(1e3,"unload")}})},function(e,t){window.MordaRT=function(){this.listRE={}},MordaRT.prototype.siteInDomainList=function(e,t){for(var i,n=0,o=e.length;n<o;n++)if(i=e[n],this.listRE[i]||(this.listRE[i]=new RegExp("^"+i.replace(/\./g,"\\.").replace(/\*/g,"[^.]+")+"$")),t.match(this.listRE[i]))return!0;return!1},MordaRT.prototype.getHostname=function(e){0!==e.indexOf("http")&&0!==e.indexOf("//")&&(e="//"+e);var t=document.createElement("a");return t.href=e,t.hostname},MordaRT.prototype.getEntries=function(e,t){if(!window.performance||!window.performance.getEntries)return{resources:{},resourcesCount:0};try{var i,n,o=window.performance.getEntries("resources"),s={},r=0;if(o&&o.length)for(var a=0,c=o.length;a<c;a++)if(i=o[a].initiatorType||"unknown",-1!==(n=this.getHostname(o[a].name)).indexOf(".")&&!this.siteInDomainList(e,n)){s[i]||(s[i]={});var l=t?this.quote(o[a].name):n;s[i][l]?s[i][l]++:s[i][l]=1,r++}return{resources:s,resourcesCount:r}}catch(u){return{resources:{},resourcesCount:0}}},MordaRT.prototype.quote=function(e){return e.replace(/"|%22/g,"&quot;")}},function(e,t){$(document).ready((function(){var e=home&&home.getData&&home.getData("consistency.data"),t=new MordaRT;if(e){var i=["*.*.yandex.*","*.yandex.*","yandex.*","yastatic.net","yastat.net","mc.admetrica.*","www.microsoft.com"];setTimeout((function(){n()}),e.timeout)}function n(){var n,a,c,l,u,d=null;"antiadb"===e.type?d=null:"flash"===e.type?e.custom.flashV&&(new CAWBrowser).flash>=e.custom.flashV?(a=$("#banner > object:eq(0)").attr("classid"),c=$("#banner > #bc > noscript").length,l=$("#banner").children().length,u=$("#banner > #bc").children().length,d=a&&"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"===a&&1===c&&2===l&&1===u?null:{horizontal:{flash:1}}):d=o():"img"===e.type?d=o():"hdpi_img"===e.type?d=null:"iframe"===e.type?d=function(){var e=$(".banner-iframe").attr("src"),t=$("#banner #bc noscript").length,i=$("#banner").children().length,n=$("#banner #bc").children().length,o=$(".banner__expand_innerclick").length;return s(e)&&1===t&&(1===i||o&&(2===i||3===i))&&1===n?null:{horizontal:{iframe:1}}}():"html"!==e.type&&(d=(n=$(".b-line_adv")).length&&0===n.children().length||3===$(".main").children().length?null:{horizontal:{none:1}});var h=function(){var e=$("img"),t=[],i=!1,n={};if(e.each((function(){var e=$(this).parents("a");this.src&&e.length&&t.push({src:this.src,link:e.attr("href")})})),t.length)for(var o=0,r=t.length;o<r;o++)s(t[o].link)||s(t[o].src)||(i=!0,n[t[o].link]={},n[t[o].link][t[o].src]=1);return i?{image:1,links:n,ignore:1}:null}(),m=$("html")[0].style.cssText?{html:1}:null;h&&d?$.extend(d,h):h&&(d=h),m&&d?$.extend(d,m):m&&(d=m),function(){var e,t,n=home.getData("rtb.counters.shows",[]),o=home.getData("banner.bnCounts",[]).concat(n);if(o&&o.length)for(var s=0,r=o.length;s<r;s++)(e=document.createElement("a")).href=o[s],t=e.host,i.push(t)}(),function(n){n&&!n.ignore?r("1"):"1"===e.csc&&r("2");n&&n.ignore&&delete n.ignore;var o=null,s=t.getEntries(i),a=t.getEntries(i,!0);n&&((o=o||{})["consistency-"+e.content]=n);s.resourcesCount&&((o=o||{})["resources-consistency-"+e.content]=s.resources);a.resourcesCount&&s.resources.script&&((o=o||{})["resources-src-consistency-"+e.content]=a.resources.script);o&&window.defaultMetrikaCounter&&window.defaultMetrikaCounter.params(o)}(d)}function o(){var t=$("#banner > #bc > noscript").length,i=$("#banner > #bc").children().length,n="",o="";return e.custom.gif?n=$("#banner > img").attr("src"):(o=$("#banner > a").attr("href"),n=$("#banner > a > img").attr("src")),n!==e.custom.img||!e.custom.gif&&o!==e.custom.href||1!==t||1!==i?e.custom.img?{horizontal:{img:1}}:{horizontal:{none:1}}:null}function s(e){if(!e||"#"===e||0===$.trim(e).indexOf("javascript"))return!0;var n=t.getHostname(e);return t.siteInDomainList(i,n)}function r(t){var i=$('<iframe class="consistency__frame" aria-hidden="true"></iframe>');$("body").append(i),i.attr("name","consistency"+(Math.random()+"").substr(3,7)),i.attr("src",e.url+"&csc="+t)}}))},function(e,t){!function(){"use strict";var e=$.Deferred();$((function(){e.resolve()})),BEM.decl("i-message-locker",{},{blockOrder:[],acquireLock:function(e,t){var i,n=$.Deferred(),o=this;return this._initOrder(),!(e in this._blockOrderMap)||this._locked?n.reject():(i=this._blockOrderMap[e],!this._showPretender||this._showPretender.index>i?(this._showPretender?this._showPretender.deferreds.forEach((function(e){e.reject()})):this._initDelay.done((function(){setTimeout((function(){var e=o._showPretender.deferreds;o._locked=o._showPretender.name,o._closeFunc=t,o._showPretender=null,e.forEach((function(e){e.resolve()})),BEM.channel("i-message-locker").trigger("lock",o._locked)}),0)})),this._showPretender={name:e,deferreds:[n],index:i}):this._showPretender&&this._showPretender.name===e?this._showPretender.deferreds.push(n):n.reject(),n)},releaseLock:function(e){this._locked&&this._locked===e&&(this._locked="",this._closeFunc=null,BEM.channel("i-message-locker").trigger("unlock",e))},forceClose:function(){this._closeFunc&&this._closeFunc()},_blockOrderMap:undefined,_showPretender:undefined,_locked:"",_initDelay:e,_initOrder:function(){if(!this._blockOrderMap){this._blockOrderMap={};for(var e=0;e<this.blockOrder.length;++e)this._blockOrderMap[this.blockOrder[e]]=e}}})}()},function(e,t){BEM.decl("i-message-locker",{},{blockOrder:["consistency-popup","b-time-banner","b-hs-balloon","dist-popup","themes-touch-promo","stream-promo-popup","themes-promo","media-zen-promo"]})},function(e,t){$((function(){var e=home&&home.getData&&home.getData("consistencyPopup.data");if(e){var t,i,n=function(){return(new Image).src=e.closeLink,home.stat.logPath("click","virus_popup.close"),clearTimeout(i),t&&t.remove(),BEM.blocks["i-message-locker"].releaseLock("consistency-popup"),!1};BEM.blocks["i-message-locker"].acquireLock("consistency-popup",n).then((function(){e.zIndex=1e5+Math.floor(1e3*Math.random()),i=setTimeout((function(){t=$(home.view("consistency-popup__html",e)),$("a:last",t).click(n),$(".button_theme_cpopup__close",t).click(n),$("body").append(t),(new Image).src=e.pixel,home.stat.logPath("show","virus_popup.go"),home.stat.logPath("show","virus_popup.close")}),e.timeout)}))}}))},function(e,t){BEM.decl("custom-protocol-detect",{},{protocolCheck:function(e,t,i){var n=this._checkBrowser();return n.isMsLaunchUri?this._openUriWithMsLaunchUri(e,t,i):n.isFirefox?this._openUriUsingFirefox(e,t,i):n.isWebkit?this._openUriWithHiddenFrame(e,t,i):n.isIE?this._openUriUsingIEInOlderWindows(e,t,i):void(i&&i())},_openUriWithHiddenFrame:function(e,t,i){this._blurWindowHack(t,i),this._getHiddenIframe().contentWindow.location.href=e},_openUriUsingFirefox:function(e,t,i){var n=this._getHiddenIframe();try{n.contentWindow.location.href=e,t&&t()}catch(o){i()}},_openUriUsingIEInOlderWindows:function(e,t,i){this[{9:"openUriWithHiddenFrame",10:"openUriUsingIe10InWindows7",11:"openUriWithHiddenFrame"}[home.getData("custom-protocol-detect.ieVersion")]||"_openUriInNewWindowHack"](e,t,i)},_openUriUsingIe10InWindows7:function(e,t,i){var n=this._getHiddenIframe(),o=i?setTimeout(i,1e3):null;BEM.DOM.win.on("blur",(function(){o&&clearTimeout(o),t&&t()}));try{n.contentWindow.location.href=e}catch(s){i&&i(),clearTimeout(o)}},_openUriInNewWindowHack:function(e,t,i){var n=window.open("","","width=0,height=0");n.document.write("<iframe src='"+e+"'></iframe>"),setTimeout((function(){try{n.location.href=e,n.setTimeout((function(){n.close()}),1e3),t&&t()}catch(o){n.close(),i&&i()}}),1e3)},_openUriWithMsLaunchUri:function(e,t,i){navigator.msLaunchUri(e,t,i)},_checkBrowser:function(){return{isMsLaunchUri:Boolean(navigator.msLaunchUri),isFirefox:"undefined"!=typeof InstallTrigger,isWebkit:Boolean(window.chrome||window.opr||window.safari),isIE:home.getData("custom-protocol-detect.isMSIE")}},_getHiddenIframe:function(){if(!this.iframe){var e=document.createElement("iframe");e.src="about:blank",e.style.display="none",e.name="custom-protocol-detect",document.body.appendChild(e),this.iframe=e}return this.iframe},_blurWindowHack:function(e,t){var i=setTimeout((function(){BEM.DOM.win.off("blur",n),t&&t()}),1e3);function n(){clearTimeout(i),BEM.DOM.win.off("blur",n),e&&e()}BEM.DOM.win.on("blur",n)}})},function(e,t){!function(){"use strict";var e,t=!1,i=[];home.pseudoReady=function(n){t?setTimeout(n,0):(i.push(n),e||(e=setTimeout((function o(){if(document.body&&home["export"]){t=!0;for(var e=0;e<i.length;++e)setTimeout(i[e],0)}else setTimeout(o,100)}),100)))}}()},function(e,t){!function(){var e=null,t=!1,i=!1,n=document.createElement("div"),o=function(e){return n.innerHTML=e,n.firstChild};function s(n,s){if(s&&s.id){e||(e=o('<iframe style="display:none" src="'+n+'" name="ga"></iframe>'));var r=function(){e.contentWindow.postMessage&&e.contentWindow.postMessage({id:s.id,type:"params",params:s.params,labels:s.labels,remarketingOnly:s.remarketingOnly},"*")};i?r():e.onload=function(){i=!0,r()},t||(document.body.appendChild(e),t=!0)}}var r,a=null,c=!1;function l(e){return window.home&&home.getData&&home.getData("ga-counter."+e)}window.home=window.home||{},window.home.gaCounter={track:function(e){var t,i=l("morda");i&&i.customLabels&&i.customLabels[e]&&(t={id:i.id,params:null,labels:i.customLabels[e],remarketingOnly:i.remarketingOnly},s(i.iframeSrc,t))},trackEther:function(){var e=l("ether");e&&e.customLabels&&e.customLabels.ether&&(r=setTimeout((function(){var t={id:e.id,params:null,labels:e.customLabels.ether,remarketingOnly:e.remarketingOnly};s(e.iframeSrc,t)}),e.timeout))},stopTrackEther:function(){clearTimeout(r)},trackCancel:function(){this.track("cancel")},trackCancelPopup:function(){this.track("cancelPopup")}},home.pseudoReady((function(){var e=l("morda");function t(){if(e.iframeSrcEx)i=e.iframeSrcEx+function(){for(var e=[],t=0,i=arguments.length;t<i;t++)arguments[t]&&e.push(arguments[t]);return e.length?"?"+e.join("&"):""}(e.csc?"csc="+e.csc:"",e.refg?"refg=1":"",e.swb?"swb=1":""),a||(a=o('<iframe style="display:none" src="'+i+'" name="ga-ex"></iframe>')),c||(document.body.appendChild(a),c=!0);else if(e.iframeSrc){var t={id:e.id,params:e.params,labels:e.labels,remarketingOnly:e.remarketingOnly};s(e.iframeSrc,t)}var i}e&&function(){if(e.swb)return!0;var t;try{t=localStorage.getItem("gaCounterShowTime")}catch(i){}return!t||Number(t)<e.ignoreLSBefore||+new Date-Number(t)>e.showTimeout}()&&setTimeout((function(){t(),function(){try{localStorage.setItem("gaCounterShowTime",+new Date)}catch(e){}}()}),e.timeout)}))}()},function(e,t){$(document).ready((function(){var e=home&&home.getData&&home.getData("yandcache.data");e&&window.setTimeout((function(){var t=document.createElement("script");t.src=e.url,document.getElementsByTagName("head")[0].appendChild(t)}),e.timeout)}))},function(e,t){home.pseudoReady((function(){var e=window.home&&home.getData&&home.getData("szm.data");if(e){setTimeout((function(){var t,i=window.devicePixelRatio||1,n=screen.width,o=screen.height,s=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,r=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,a=home.getData("szm.data.szm",null),c=home.getData("szm.data.swap")||!1;i=String(i).replace(".","_"),c&&n<o&&(t=n,n=o,o=t),a&&function(e,t){for(var i in t)if(t.hasOwnProperty(i)&&(!e[i]||Math.abs(parseFloat(e[i])-parseFloat(t[i]))>.01))return!1;return!0}(a,{dpr:i,screenX:n,screenY:o,viewportX:s,viewportY:r})||((new Image).src=e.url+(i+":")+n+"x"+o+":"+s+"x"+r)}),e.timeout)}}))},function(e,t){home.pseudoReady((function(){var e=home&&home.getData&&home.getData("referers.data");if(e){var t=location.hash?location.hash.replace(/^#/,""):"",i=t&&t.match(/^[1-578]$/);i&&e.referer&&home.error.logError({block:"referers-check",sourceType:"clckerror",message:"clck error",url:e.referer,meta:{hash:i}})}}))},function(e,t){$((function(){window.performance&&performance.navigation&&1===performance.navigation.type&&home.stat.logPath("tech","refresh")}))},function(e,t){!function(){var e,t=!1,i=[];function n(){document[e]&&o()}function o(){i.forEach((function(e){e.fn.call(e.ctx,!0),e.awaitsCall=!1})),i=[]}home.delayedTask=function(s,r,a){var c,l;!t&&"addEventListener"in window&&(t=!0,window.addEventListener("beforeunload",o,!1),window.addEventListener("unload",o,!1),"undefined"!=typeof document.hidden?(c="hidden",l="visibilitychange"):"undefined"!=typeof document.webkitHidden&&(c="webkitHidden",l="webkitvisibilitychange"),e=c,window.addEventListener(l,n,!1));var u={fn:s,ctx:a,awaitsCall:!1},d=home.debounce((function(){u.awaitsCall&&(u.awaitsCall=!1,i=i.filter((function(e){return e!==u})),s.call(a,!1))}),r,!1,a);return function(){u.awaitsCall||(u.awaitsCall=!0,i.push(u)),d()}}}()},function(e,t){$(document).ready((function(){var e=home&&home.getData&&home.getData("search-provider.data");e&&function t(){if(window.defaultMetrikaCounter)try{var i,n="yandex."+e.zone,o={"search-provider":{}};window.external&&external.IsSearchProviderInstalled&&(i=external.IsSearchProviderInstalled(n)),void 0!==i&&(o["search-provider"][n]=i,window.defaultMetrikaCounter.params(o))}catch(s){return!1}else setTimeout(t,300)}()}))},function(e,t){$(document).ready((function(){var e,t=home&&home.getData&&home.getData("adb.data"),i=!1,n={"content-blocking":{},"resource-blocking":{}},o=!1,s=1,r=t&&t.timeout,a=!1;function c(e){var n,o=new Date,s=home.getData("adb.data.domain"),r=home.getData("adb.data.sameSiteSupport"),a="",c=o.getTime();e?(BEM.channel("adb").trigger("detect"),o.setTime(c+12096e5)):o.setTime(c-12096e5),n="; expires="+o.toUTCString(),r&&(a="; sameSite=None"),document.cookie="computer=1"+n+";domain=."+s+a+"; secure=true; path=/",t.cookie&&(document.cookie=t.cookie+"=1"+n+";domain=."+s+a+"; secure=true; path=/"),i=!0}function l(){if(!o){o=2===s,s++;var n,h=function(){var e=$('<div class="b-spec-adv" aria-hidden="true"></div>');$("body").append(e);var t=0===document.getElementsByClassName("b-spec-adv")[0].offsetWidth;return e.remove(),t}(),m=!!t.desktopKubr&&!$(".media-grid").is(":visible"),p={"content-blocking":{}};h?p["content-blocking"].easylist=1:(n=t.adg).str&&n.check&&(a||(a=$('<div aria-hidden="true" style="position:absolute;left:-10px;top:0;width:1px;height:1px;overflow:hidden;">'+n.str+"</div>"),$("body").append(a)),0===$(n.check,a)[0].offsetWidth)&&(p["content-blocking"].adguard=1),m&&(p["content-blocking"].mediafooter=1),home._cbsc&&(p["content-blocking"].styles=home._cbsc),Object.keys(p["content-blocking"]).length&&!i?(o=!0,c(!0),t.adb||home.stat.logPath("show","adb.new"),e=+new Date,u(p)):(r*=2,setTimeout((function(){l(),a&&a.remove(),!i&&t.selfClean&&(d("computer")||d(t.cookie))&&(c(!1),u({unblocking:!0}))}),r))}}function u(t){window.defaultMetrikaCounter?window.defaultMetrikaCounter.params(t):new Date-e<5e3&&setTimeout((function(){u(t)}),300)}function d(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null}t&&((t.desktopKubr||t.touchKubr)&&(BEM.channel("adb").on("rendered",(function(e,t){setTimeout((function(){var e=t.elem,i=t.id;!$(e).is(":visible")&&(c(!0),n["content-blocking"].blocked=i,u(n))}),1e3)})),BEM.channel("adb").on("download",(function(e,t){c(!0),n["resource-blocking"].blocked=t.id,u(n)}))),setTimeout((function(){l()}),r))}))},function(e,t){BEM.decl("i-visibilitychange",{},{waitForVisible:function(e){document.hidden?BEM.channel("sys").onFirst("visible",e):e()}})},function(e,t){var i;BEM.channel("sys").on("visibilitychange",(function(e,t){t.hidden?i=Date.now():i&&(home.stat.logPath("tech","return",{customParams:{timems:Date.now()-i}}),i=null)}))},function(e,t){BEM.decl("i-yabs-sender",{},{_init:function(){this._pixelBase=home.getData("yabs.pixelBase"),this._pixelBase&&(this._linksNext="",this._inited=!0,this._sendPixelDebounced=home.debounce(this._sendPixel.bind(this),1e3))},_sendPixel:function(){if(!this._sending){var e=this._linksNext;this._linksNext="",this._sending=!0,$.ajax({url:this._pixelBase+e,xhrFields:{withCredentials:!0},timeout:15e3}).asPromise().then(function(){this._onRequestEnd()}.bind(this),function(t){this._onRequestEnd(),this._linksNext+=e,home.error.logError({block:"i-yabs-sender"},t)}.bind(this))}},_onRequestEnd:function(){this._sending=!1,this._linksNext&&this._sendPixelDebounced()},_pixelBaseCheck:function(){return!!this._pixelBase||(home.error.logError({block:"i-yabs-sender",message:"pixelBase is not defined"}),!1)},sendClose:function(e,t,i){if(!t)return!1;function n(){location.href=i}function o(){return new Promise((function(e,i){var n=new Image;n.onload=e,n.onerror=i,n.src=t}))}return i?(e.preventDefault(),Promise.race([o(),new Promise((function(e){setTimeout(e,300)}))]).then(n,n)):o()},sendShow:function(e){this._inited||this._init(),e&&this._pixelBaseCheck()&&(this._linksNext+=e,this._sendPixelDebounced())}})},function(e,t){!function(){"use strict";var e=Object.prototype.toString;home.ltgtFilter=function(e){return String(e).replace(/</g,"&lt;").replace(/>/g,"&gt;")},home.jsonFilter=function(e){return String(e).replace(/[<>&\u2028\u2029]/g,(function(e){switch(e){case"<":return"\\u003c";case">":return"\\u003e";case"&":return"\\u0026";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}return""}))},home.capitalize=function(e){return e?e[0].toUpperCase()+e.substr(1):""},home.isXivaSupported=function(e){return!e.EditMode&&e.XivaUrl&&!e.isOldIE&&!e.isMSIE9},home.encodeParams=function(e){return JSON.stringify(e).replace(/"/g,"'")},home.getJPathValue=function(e,t){for(var i=e,n=t.split("."),o=0;i&&i[n[o]]!==undefined;)i=i[n[o++]];return"object"==typeof i?"":i},home.formatNumber=function(e,t,i){if(isNaN(e))return e;t=t||",",i=i||"&nbsp;";var n=(e+="").lastIndexOf("."),o=[],s="",r=0,a="";for(-1!==n?s=t+e.substr(n+1):n=e.length;--n>-1;)a=e[n]+a,3===++r&&(o.push(a),a="",r=0);return a&&o.push(a),o.reverse().join(i)+s},home.deepExtend=function(t,i){if(!i)return t;for(var n in i)if("__proto__"!==n&&i.hasOwnProperty(n)){var o=i[n];Array.isArray(o)?(t[n]=Array.isArray(t[n])?t[n]:[],home.deepExtend(t[n],o)):"[object Date]"===e.call(o)||"object"!=typeof o||null===o?t[n]=o:(t[n]="[object Object]"===e.call(t[n])?t[n]:{},home.deepExtend(t[n],o))}return t},home.rnd=function(){return String(Math.random()).substr(2)},home.randomInteger=function(e,t){var i=e+Math.random()*(t+1-e);return Math.floor(i)},home.intersectionArrays=function(e,t){return e&&t?e.filter((function(e){return-1!==t.indexOf(e)})):[]}}()},function(e,t){var i;i={logError:function(e,t){if("object"!=typeof e&&(e={message:e}),t){if(t.logged)return;t.logged=!0}this._rumLogError(e,t)},logAjaxError:function(e,t,i,n){this._rumLogAjaxError(e,t,i,n)},setProject:function(e){this._checkRumErrorCounter()&&Ya.Rum.updateErrors({project:e})},restoreDefaultProject:function(){if(this._checkRumErrorCounter()){for(var e,t=Ya.Rum.getVarsList(),i=0;i<t.length&&(e=t[i].split("="))&&"-project"!==e[0];)i++;"-project"===e[0]&&e[1]&&this.setProject(e[1])}},_rumLogError:function(e,t){this._checkRumErrorCounter()&&Ya.Rum.logError(this._prepareRumOptions(e,t),t)},_rumLogAjaxError:function(e,t,i,n){this._checkRumErrorCounter()&&(e.message||(e.message=e.method?e.method+" ajax":"AjaxError"),Ya.Rum.logAjaxError(this._prepareRumOptions(e),t,i,n))},_prepareRumOptions:function(e,t){var i={};return t=t||{},e.message&&(i.message=e.message),e.block&&(i.block=e.block),e.method&&(i.method=e.method),e.level&&(i.level=e.level),(e.sourceType||t.sourceType)&&(i.type=e.sourceType||t.sourceType),e.source&&(i.source=e.source),e.sourceMethod&&(i.sourceMethod=e.sourceMethod),e.coordinates_gp&&(i.coordinates_gp=e.coordinates_gp),(e.meta||t.meta)&&(i.additional=e.meta||t.meta),(e.url||t.url)&&(i.additional=i.additional||{},i.additional.url=e.url||t.url),i},_checkRumErrorCounter:function(){return!!window.Ya&&window.Ya.Rum&&window.Ya.Rum.logError}},home.error=function(e,t){i.logError.bind(i)(e,t)},home.deepExtend(home.error,i)},function(e,t){window.MBEM=window.MBEM||{}},function(e,t){MBEM.arrayFrom=function(e){return Array.prototype.slice.call(e)}},function(e,t){Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,i=MBEM.arrayFrom(arguments).slice(1);return function(){var n=MBEM.arrayFrom(arguments);return t.apply(e,i.concat(n))}})},function(e,t){!function(e){var t=setTimeout;function i(){}function n(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],l(e,this)}function o(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,n._immediateFn((function(){var i=1===e._state?t.onFulfilled:t.onRejected;if(null!==i){var n;try{n=i(e._value)}catch(o){return void r(t.promise,o)}s(t.promise,n)}else(1===e._state?s:r)(t.promise,e._value)}))):e._deferreds.push(t)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var i=t.then;if(t instanceof n)return e._state=3,e._value=t,void a(e);if("function"==typeof i)return void l(i.bind(t),e)}e._state=1,e._value=t,a(e)}catch(o){r(e,o)}}function r(e,t){e._state=2,e._value=t,a(e)}function a(e){2===e._state&&0===e._deferreds.length&&n._immediateFn((function(){e._handled||n._unhandledRejectionFn(e._value)}));for(var t=0,i=e._deferreds.length;t<i;t++)o(e,e._deferreds[t]);e._deferreds=null}function c(e,t,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=i}function l(e,t){var i=!1;try{e((function(e){i||(i=!0,s(t,e))}),(function(e){i||(i=!0,r(t,e))}))}catch(n){if(i)return;i=!0,r(t,n)}}n.prototype["catch"]=function(e){return this.then(null,e)},n.prototype.then=function(e,t){var n=new this.constructor(i);return o(this,new c(e,t,n)),n},n.all=function(e){var t=Array.prototype.slice.call(e);return new n((function(e,i){if(0===t.length)return e([]);var n=t.length;function o(s,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var a=r.then;if("function"==typeof a)return void a.call(r,(function(e){o(s,e)}),i)}t[s]=r,0==--n&&e(t)}catch(c){i(c)}}for(var s=0;s<t.length;s++)o(s,t[s])}))},n.resolve=function(e){return e&&"object"==typeof e&&e.constructor===n?e:new n((function(t){t(e)}))},n.reject=function(e){return new n((function(t,i){i(e)}))},n.race=function(e){return new n((function(t,i){for(var n=0,o=e.length;n<o;n++)e[n].then(t,i)}))},n._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){t(e,0)},n._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},e.Promise||(e.Promise=n)}(window)},function(e,t){"undefined"!=typeof home&&home.loadManager&&home.loadManager.trigger("js")},function(e,t){!function(){"use strict";var e={},t={};function i(e){var t=home.getData("bundles.data.host");return t?e.replace("//yastatic.net",t):e}home.bundles=home.bundles||{},home.bundles.loaded={},home.bundles.load=function(n,o){if(e[n])return e[n];var s=home.getData("bundles.data");if(home.getData("bundles.placed",[]).indexOf(n)>-1)return e[n]=new Promise((function(e){t[n]=e})),e[n];o=o||{};var r=home.bundles.staticURL&&home.bundles.staticURL[n]||s&&s.staticURL&&s.staticURL[n];return e[n]=Promise.race([new Promise((function(e,t){setTimeout(t,o.timeout||1e4)})),Promise.all([!1===o.css?null:new Promise((function(e){var t=s.root+"/"+s.page+"__"+n+"/_"+s.page+"__"+n+(s.cssSuffix||"")+".css";r&&r["css"+(s.cssSuffix||"")]&&(t=i(r["css"+(s.cssSuffix||"")])),home.loadCss(t,{callback:e,noFlash:!0})})),new Promise((function(e,o){var a=document.createElement("script");t[n]=e,a.onerror=function(){o(new Error("Failed to load js from bundle "+n))};var c=s.root+"/"+s.page+"__"+n+"/_"+s.page+"__"+n+"."+s.locale+(s.jsSuffix||"")+".js";r&&r["js"+(s.jsSuffix||"")]&&(c=i(r["js"+(s.jsSuffix||"")])),a.src=c,document.getElementsByTagName("head")[0].appendChild(a)}))])])["catch"]((function(t){throw e[n]=null,t}))},home.bundles.notify=function(i){e[i]?t[i]&&t[i]():e[i]=Promise.resolve(),e[i].then((function(){home.bundles.loaded[i]=!0,home.bundles.initBlocks()}))}}()},function(e,t,i){(function(e){
/*! loadCSS: load a CSS file asynchronously. [c]2016 @scottjehl, Filament Group, Inc. Licensed MIT */
var t;t=void 0!==e?e:window,home.loadCss=function(e,i){var n=i||{},o=function(e,i,n,o){var s,r=t.document,a=r.createElement("link");if(i)s=i;else{var c=(r.body||r.getElementsByTagName("head")[0]).childNodes;s=c[c.length-1]}var l=r.styleSheets;a.rel="stylesheet",a.href=e,a.media=o?n||"all":"only x",function h(e){if(r.body)return e();setTimeout((function(){h(e)}))}((function(){s.parentNode.insertBefore(a,i?s:s.nextSibling)}));var u=function m(e){for(var t=a.href,i=l.length;i--;)if(l[i].href===t)return e();setTimeout((function(){m(e)}))};function d(){a.addEventListener&&a.removeEventListener("load",d),o||(a.media=n||"all")}return a.addEventListener&&a.addEventListener("load",d),a.onloadcssdefined=u,u(d),a}(e,n.before,n.media,n.noFlash);n.callback&&
/*! onloadCSS: adds onload support for asynchronous stylesheets loaded with loadCSS. [c]2016 @zachleat, Filament Group, Inc. Licensed MIT */
function(e,t){var i;function n(){!i&&t&&(i=!0,t.call(e))}e.addEventListener&&e.addEventListener("load",n),e.attachEvent&&e.attachEvent("onload",n),"isApplicationInstalled"in navigator&&"onloadcssdefined"in e&&e.onloadcssdefined(n)}(o,n.callback)}}).call(this,i(1))},function(e,t){home.cls={full:function(e){return e},part:function(e){return e}}},function(e,t){home.bundles.initBlocks=function(){var e={};e[home.cls.full("direct-desktop")]=["direct-invertion","direct-new-design"],$(".i-bundle-bem").each((function(){var t=$(this),i=t.data("bem"),n=t.data("depBundle"),o=[],s=!1;if(n){n=n.split(",");for(var r=0;r<n.length;++r)if(!home.bundles.loaded[n[r]])return}else for(var a in i){i.hasOwnProperty(a)&&e[a]&&o.push(e[a]);for(var c=0;c<o.length;c++){for(var l=0;l<o[c].length;l++)s=s||home.bundles.loaded[o[c][l]];if(!s)return}}for(var u in i)if(i.hasOwnProperty(u)&&!(u in BEM.blocks))return;t.removeClass("i-bundle-bem").addClass("i-bem"),BEM.DOM.init(t)}))},$((function(){BEM.afterCurrentEvent((function(){home.bundles.initBlocks()}))}))},function(e,t){$((function(){"use strict";var e=home.getData("i-bannerid.csl");BEM.decl("i-bannerid",{},{save:function(t){if(!e)throw new Error("i-bannerid: Cookie set link wasn't passed");if(!t)throw new Error("i-bannerid: Bannerid wasn't passed");var i=$(".i-bannerid"),n=home.stringf(e,t);i.length||(i=$('<iframe class="i-bannerid" name="i-bannerid" style="display:none"/>'),$(document.body).append(i)),i.attr("src")!==n&&i.attr("src",n)}})}))},function(e,t){home.stringf=function(e){var t=Array.prototype.slice.call(arguments,1);return e.replace(/%s/g,(function(){return t.shift()||""}))}},function(e,t){BEM.DOM.decl("i-geolocation",{},{get:function(e,t){if(1===arguments.length&&(t=e,e={}),(e=$.extend({enableHighAccuracy:!0,timeout:15,cacheTime:15},e)).timeout*=1e3,e.maximumAge=1e3*e.cacheTime*60,delete e.cacheTime,"geolocation"in navigator){var i=!1,n=setTimeout((function(){i=!0,t({error:4})}),e.timeout+300);navigator.geolocation.getCurrentPosition((function(e){i||(clearTimeout(n),t(e))}),(function(e){i||(clearTimeout(n),t({error:e.code}))}),e)}else t({error:0})}})},function(e,t){!function(){"use strict";var e={1:"denied",2:"unavailable",3:"timeout"};BEM.decl("i-geolocation",{},{_firstLocation:!0,locate:function(e){return e=e||{},this._wrapRequest(e,(function(){return this._locate(e)}))},_wrapRequest:function(e,t){var i;return this._promise?this._promise:(this._triggerEvent("start",e),this._promise=i=this._wrapEnd(e,t.call(this)),this._promise.always(this.changeThis((function(){this._promise=undefined}))),i)},_wrapEnd:function(e,t){var i=this;return t&&t.then||(t=$.Deferred().resolve(t)),t.fail((function(t){i._triggerEvent("fail",e,t)})).always((function(){i._triggerEvent("end",e)}))},_triggerEvent:function(e,t,i){var n=$.Event(e);for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);return this.channel("i-geolocation").trigger(n,i),this},_locate:function(e){var t,i=this,n=$.Deferred(),o=home.getData("geo."+(e.background?"background-":"")+"counters",{});try{navigator.geolocation&&navigator.geolocation.getCurrentPosition&&(home.stat.logPath("tech",o.request),t=new Date,navigator.geolocation.getCurrentPosition((function(s){i._saveLocation(s,new Date-t,e).then((function(t){i._triggerEvent("gpsave",e,{id:t.region_id,locale:t.locale,name:t.region_name,address:t.address,address_short:t.address_short}),home.stat.logPath("tech",o.success),n.resolve()}),(function(e){n.reject(e)}))}),(function(o){o.type="locate",i._saveError(o,new Date-t,e).always((function(){n.reject(o)}))}),{timeout:1e3*(e.timeout?e.timeout:15),maximumAge:i._firstLocation?3e5:0,enableHighAccuracy:!1}),i._firstLocation=!1)}catch(s){n.reject(s)}return n.promise()},_saveLocation:function(e,t,i){return home.localStorage.setItem("gpallowed","1"),this._location=e.coords,this._saveAjax($.extend(this._extractCoords(e.coords),{persistent:1,timing:t}),i)},_saveError:function(t,i,n){var o;return 1===t.code?home.localStorage.setItem("gpforbidden","1"):home.localStorage.setItem("gpallowed","1"),o=home.getData("geo."+(n.background?"background-":"")+"counters.error",{}),home.stat.logPath("tech",o[e[t.code]]),this._saveAjax($.extend({status:t.code,timing:i},t.data||{}))},_extractCoords:function(e){return{lon:e.longitude,lat:e.latitude,precision:e.accuracy}},_saveAjax:function(e){var t;return e.sk=home.getData("geo.sk"),e.device=0,e.laas=home.getData("geo.laas")||0,t={url:home.getData("geo.gpsaveUrl"),dataType:"json",data:e},$.ajax(t)}}),$((function(){"permissions"in navigator&&!home.getData("geo.gpauto")&&setTimeout((function(){navigator.permissions.query({name:"geolocation"}).then((function(e){"granted"===(e.state||e.status)&&BEM.blocks["i-geolocation"].locate({background:!0})}),(function(){}))}),5e3)}))}()},function(e,t){var i;i="Promise"in window&&!Promise._unhandledRejectionFn,$((function(){if(home.getData("tech-counters")){home.stat.logPath("tech","tech.localStorage."+Number(!home.disabledLS));var e=!1;try{e=window.matchMedia("(prefers-color-scheme: dark)").matches}catch(o){}home.stat.logPath("tech","tech.dark."+Number(e)),home.stat.logPath("tech","tech.promise."+Number(i));var t="IntersectionObserver"in window&&!IntersectionObserver.prototype.THROTTLE_TIMEOUT;home.stat.logPath("tech","tech.io."+Number(t));var n="Proxy"in window;home.stat.logPath("tech","tech.es6."+Number(n))}}))},function(e,t,i){var n;
/* SockJS client, version 0.3.4, http://sockjs.org, MIT License

Copyright (c) 2011-2012 VMware, Inc.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/window.SockJS=function(){var e=document,t=window,i={},n=function(){};n.prototype.addEventListener=function(e,t){this._listeners||(this._listeners={}),e in this._listeners||(this._listeners[e]=[]);var n=this._listeners[e];-1===i.arrIndexOf(n,t)&&n.push(t)},n.prototype.removeEventListener=function(e,t){if(this._listeners&&e in this._listeners){var n=this._listeners[e],o=i.arrIndexOf(n,t);-1===o||(n.length>1?this._listeners[e]=n.slice(0,o).concat(n.slice(o+1)):delete this._listeners[e])}},n.prototype.dispatchEvent=function(e){var t=e.type,i=Array.prototype.slice.call(arguments,0);if(this["on"+t]&&this["on"+t].apply(this,i),this._listeners&&t in this._listeners)for(var n=0;n<this._listeners[t].length;n++)this._listeners[t][n].apply(this,i)};
/*
   * ***** BEGIN LICENSE BLOCK *****
   * Copyright (c) 2011-2012 VMware, Inc.
   *
   * For the license see COPYING.
   * ***** END LICENSE BLOCK *****
   */
var o=function(e,t){if(this.type=e,void 0!==t)for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i])};o.prototype.toString=function(){var e=[];for(var t in this)if(this.hasOwnProperty(t)){var i=this[t];"function"==typeof i&&(i="[function]"),e.push(t+"="+i)}return"SimpleEvent("+e.join(", ")+")"};
/*
   * ***** BEGIN LICENSE BLOCK *****
   * Copyright (c) 2011-2012 VMware, Inc.
   *
   * For the license see COPYING.
   * ***** END LICENSE BLOCK *****
   */
var s=function(e){this._events=e||[],this._listeners={}};s.prototype.emit=function(e){var t=this;if(t._verifyType(e),!t._nuked){var i=Array.prototype.slice.call(arguments,1);if(t["on"+e]&&t["on"+e].apply(t,i),e in t._listeners)for(var n=0;n<t._listeners[e].length;n++)t._listeners[e][n].apply(t,i)}},s.prototype.on=function(e,t){this._verifyType(e),this._nuked||(e in this._listeners||(this._listeners[e]=[]),this._listeners[e].push(t))},s.prototype._verifyType=function(e){-1===i.arrIndexOf(this._events,e)&&i.log("Event "+JSON.stringify(e)+" not listed "+JSON.stringify(this._events)+" in "+this)},s.prototype.nuke=function(){this._nuked=!0;for(var e=0;e<this._events.length;e++)delete this[this._events[e]];this._listeners={}};i.random_string=function(e,t){t=t||"abcdefghijklmnopqrstuvwxyz0123456789_".length;var i,n=[];for(i=0;i<e;i++)n.push("abcdefghijklmnopqrstuvwxyz0123456789_".substr(Math.floor(Math.random()*t),1));return n.join("")},i.random_number=function(e){return Math.floor(Math.random()*e)},i.random_number_string=function(e){var t=(""+(e-1)).length;return(Array(t+1).join("0")+i.random_number(e)).slice(-t)},i.getOrigin=function(e){return(e+="/").split("/").slice(0,3).join("/")},i.isSameOriginUrl=function(e,i){return i||(i=t.location.href),e.split("/").slice(0,3).join("/")===i.split("/").slice(0,3).join("/")},i.getParentDomain=function(e){return/^[0-9.]*$/.test(e)||/^\[/.test(e)?e:/[.]/.test(e)?e.split(".").slice(1).join("."):e},i.objectExtend=function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e};i.polluteGlobalNamespace=function(){"_jp"in t||(t._jp={})},i.closeFrame=function(e,t){return"c"+JSON.stringify([e,t])},i.userSetCode=function(e){return 1e3===e||e>=3e3&&e<=4999},i.countRTO=function(e){return e>100?3*e:e+200},i.log=function(){t.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},i.bind=function(e,t){return e.bind?e.bind(t):function(){return e.apply(t,arguments)}},i.flatUrl=function(e){return-1===e.indexOf("?")&&-1===e.indexOf("#")},i.amendUrl=function(t){var n=e.location;if(!t)throw new Error("Wrong url for SockJS");if(!i.flatUrl(t))throw new Error("Only basic urls are supported in SockJS");return 0===t.indexOf("//")&&(t=n.protocol+t),0===t.indexOf("/")&&(t=n.protocol+"//"+n.host+t),t=t.replace(/[/]+$/,"")},i.arrIndexOf=function(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1},i.arrSkip=function(e,t){var n=i.arrIndexOf(e,t);return-1===n?e.slice():e.slice(0,n).concat(e.slice(n+1))},i.isArray=Array.isArray||function(e){return{}.toString.call(e).indexOf("Array")>=0},i.delay=function(e,t){return"function"==typeof e&&(t=e,e=0),setTimeout(t,e)};var r,a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c={"\0":"\\u0000","":"\\u0001","":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","\t":"\\t","\n":"\\n","\x0B":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","":"\\u0080","":"\\u0081","":"\\u0082","":"\\u0083","":"\\u0084","":"\\u0085","":"\\u0086","":"\\u0087","":"\\u0088","":"\\u0089","":"\\u008a","":"\\u008b","":"\\u008c","":"\\u008d","":"\\u008e","":"\\u008f","":"\\u0090","":"\\u0091","":"\\u0092","":"\\u0093","":"\\u0094","":"\\u0095","":"\\u0096","":"\\u0097","":"\\u0098","":"\\u0099","":"\\u009a","":"\\u009b","":"\\u009c","":"\\u009d","":"\\u009e","":"\\u009f","":"\\u00ad","":"\\u0600","":"\\u0601","":"\\u0602","":"\\u0603","":"\\u0604","":"\\u070f","":"\\u17b4","":"\\u17b5","":"\\u200c","":"\\u200d","":"\\u200e","":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","":"\\u202a","":"\\u202b","":"\\u202c","":"\\u202d","":"\\u202e","":"\\u202f","":"\\u2060","":"\\u2061","":"\\u2062","":"\\u2063","":"\\u2064","":"\\u2065","":"\\u2066","":"\\u2067","":"\\u2068","":"\\u2069","":"\\u206a","":"\\u206b","":"\\u206c","":"\\u206d","":"\\u206e","":"\\u206f","\ufeff":"\\ufeff","":"\\ufff0","":"\\ufff1","":"\\ufff2","":"\\ufff3","":"\\ufff4","":"\\ufff5","":"\\ufff6","":"\\ufff7","":"\\ufff8","":"\\ufff9","":"\\ufffa","":"\\ufffb","":"\\ufffc","":"\\ufffd","":"\\ufffe","":"\\uffff"},l=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,u=JSON&&JSON.stringify||function(e){return a.lastIndex=0,a.test(e)&&(e=e.replace(a,(function(e){return c[e]}))),'"'+e+'"'};i.quote=function(e){var t=u(e);return l.lastIndex=0,l.test(t)?(r||(r=function(e){var t,i={},n=[];for(t=0;t<65536;t++)n.push(String.fromCharCode(t));return e.lastIndex=0,n.join("").replace(e,(function(e){return i[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""})),e.lastIndex=0,i}(l)),t.replace(l,(function(e){return r[e]}))):t};var d=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];i.probeProtocols=function(){for(var e={},t=0;t<d.length;t++){var i=d[t];e[i]=v[i]&&v[i].enabled()}return e},i.detectProtocols=function(e,t,i){var n={},o=[];t||(t=d);for(var s=0;s<t.length;s++){var r=t[s];n[r]=e[r]}var a=function c(e){var t=e.shift();n[t]?o.push(t):e.length>0&&c(e)};return!1!==i.websocket&&a(["websocket"]),n["xhr-streaming"]&&!i.null_origin?o.push("xhr-streaming"):!n["xdr-streaming"]||i.cookie_needed||i.null_origin?a(["iframe-eventsource","iframe-htmlfile"]):o.push("xdr-streaming"),n["xhr-polling"]&&!i.null_origin?o.push("xhr-polling"):!n["xdr-polling"]||i.cookie_needed||i.null_origin?a(["iframe-xhr-polling","jsonp-polling"]):o.push("xdr-polling"),o};
/*
   * ***** BEGIN LICENSE BLOCK *****
   * Copyright (c) 2011-2012 VMware, Inc.
   *
   * For the license see COPYING.
   * ***** END LICENSE BLOCK *****
   */
var h="_sockjs_global";i.createHook=function(){var e="a"+i.random_string(8);if(!(h in t)){var n={};t[h]=function(e){return e in n||(n[e]={id:e,del:function(){delete n[e]}}),n[e]}}return t[h](e)},i.attachMessage=function(e){i.attachEvent("message",e)},i.attachEvent=function(i,n){"undefined"!=typeof t.addEventListener?t.addEventListener(i,n,!1):(e.attachEvent("on"+i,n),t.attachEvent("on"+i,n))},i.detachMessage=function(e){i.detachEvent("message",e)},i.detachEvent=function(i,n){"undefined"!=typeof t.addEventListener?t.removeEventListener(i,n,!1):(e.detachEvent("on"+i,n),t.detachEvent("on"+i,n))};var m={},p=!1,f=function(){for(var e in m)m[e](),delete m[e]};i.attachEvent("unload",(function(){p||(p=!0,f())})),i.unload_add=function(e){var t=i.random_string(8);return m[t]=e,p&&i.delay(f),t},i.unload_del=function(e){e in m&&delete m[e]},i.createIframe=function(t,n){var o,s,r=e.createElement("iframe"),a=function(){clearTimeout(o);try{r.onload=null}catch(e){}r.onerror=null},c=function(){r&&(a(),setTimeout((function(){r&&r.parentNode.removeChild(r),r=null}),0),i.unload_del(s))},l=function(e){r&&(c(),n(e))};return r.src=t,r.style.display="none",r.style.position="absolute",r.onerror=function(){l("onerror")},r.onload=function(){clearTimeout(o),o=setTimeout((function(){l("onload timeout")}),2e3)},e.body.appendChild(r),o=setTimeout((function(){l("timeout")}),15e3),s=i.unload_add(c),{post:function(e,t){try{r&&r.contentWindow&&r.contentWindow.postMessage(e,t)}catch(i){}},cleanup:c,loaded:a}},i.createHtmlfile=function(e,n){var o,s,r,a=new ActiveXObject("htmlfile"),c=function(){clearTimeout(o)},l=function(){a&&(c(),i.unload_del(s),r.parentNode.removeChild(r),r=a=null,CollectGarbage())};a.open(),a.write('<html><script>document.domain="'+document.domain+'";<\/script></html>'),a.close(),a.parentWindow._jp=t._jp;var u=a.createElement("div");return a.body.appendChild(u),r=a.createElement("iframe"),u.appendChild(r),r.src=e,o=setTimeout((function(){var e;e="timeout",a&&(l(),n(e))}),15e3),s=i.unload_add(l),{post:function(e,t){try{r&&r.contentWindow&&r.contentWindow.postMessage(e,t)}catch(i){}},cleanup:l,loaded:c}};
/*
   * ***** BEGIN LICENSE BLOCK *****
   * Copyright (c) 2011-2012 VMware, Inc.
   *
   * For the license see COPYING.
   * ***** END LICENSE BLOCK *****
   */
var _=function(){};(_.prototype=new s(["chunk","finish"]))._start=function(e,n,o,s){var r=this;try{r.xhr=new XMLHttpRequest}catch(c){}if(!r.xhr)try{r.xhr=new t.ActiveXObject("Microsoft.XMLHTTP")}catch(c){}(t.ActiveXObject||t.XDomainRequest)&&(n+=(-1===n.indexOf("?")?"?":"&")+"t="+ +new Date),r.unload_ref=i.unload_add((function(){r._cleanup(!0)}));try{r.xhr.open(e,n,!0)}catch(l){return r.emit("finish",0,""),void r._cleanup()}if(s&&s.no_credentials||(r.xhr.withCredentials="true"),s&&s.headers)for(var a in s.headers)r.xhr.setRequestHeader(a,s.headers[a]);r.xhr.onreadystatechange=function(){if(r.xhr){var e=r.xhr;switch(e.readyState){case 3:try{var t=e.status,i=e.responseText}catch(e){}1223===t&&(t=204),i&&i.length>0&&r.emit("chunk",t,i);break;case 4:1223===(t=e.status)&&(t=204),r.emit("finish",t,e.responseText),r._cleanup(!1)}}},r.xhr.send(o)},_.prototype._cleanup=function(e){if(this.xhr){if(i.unload_del(this.unload_ref),this.xhr.onreadystatechange=function(){},e)try{this.xhr.abort()}catch(t){}this.unload_ref=this.xhr=null}},_.prototype.close=function(){this.nuke(),this._cleanup(!0)},(i.XHRCorsObject=function(){var e=this,t=arguments;i.delay((function(){e._start.apply(e,t)}))}).prototype=new _,(i.XHRLocalObject=function(e,t,n){var o=this;i.delay((function(){o._start(e,t,n,{no_credentials:!0})}))}).prototype=new _;var g=i.XDRObject=function(e,t,n){var o=this;i.delay((function(){o._start(e,t,n)}))};g.prototype=new s(["chunk","finish"]),g.prototype._start=function(e,t,n){var o=this,s=new XDomainRequest;t+=(-1===t.indexOf("?")?"?":"&")+"t="+ +new Date;var r=s.ontimeout=s.onerror=function(){o.emit("finish",0,""),o._cleanup(!1)};s.onprogress=function(){o.emit("chunk",200,s.responseText)},s.onload=function(){o.emit("finish",200,s.responseText),o._cleanup(!1)},o.xdr=s,o.unload_ref=i.unload_add((function(){o._cleanup(!0)}));try{o.xdr.open(e,t),o.xdr.send(n)}catch(a){r()}},g.prototype._cleanup=function(e){if(this.xdr){if(i.unload_del(this.unload_ref),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(t){}this.unload_ref=this.xdr=null}},g.prototype.close=function(){this.nuke(),this._cleanup(!0)},i.isXHRCorsCapable=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:t.XDomainRequest&&e.domain?2:B.enabled()?3:4};
/*
   * ***** BEGIN LICENSE BLOCK *****
   * Copyright (c) 2011-2012 VMware, Inc.
   *
   * For the license see COPYING.
   * ***** END LICENSE BLOCK *****
   */
var v=function q(e,n,o){if(this===t)return new q(e,n,o);var s,r=this;r._options={devel:!1,debug:!1,protocols_whitelist:[],info:undefined,rtt:undefined},o&&i.objectExtend(r._options,o),r._base_url=i.amendUrl(e),r._server=r._options.server||i.random_number_string(1e3),r._options.protocols_whitelist&&r._options.protocols_whitelist.length?s=r._options.protocols_whitelist:(s="string"==typeof n&&n.length>0?[n]:i.isArray(n)?n:null)&&r._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.'),r._protocols=[],r.protocol=null,r.readyState=q.CONNECTING,r._ir=N(r._base_url),r._ir.onfinish=function(e,t){r._ir=null,e?(r._options.info&&(e=i.objectExtend(e,r._options.info)),r._options.rtt&&(t=r._options.rtt),r._applyInfo(e,t,s),r._didClose()):r._didClose(1002,"Can't connect to server",!0)}};v.prototype=new n,v.version="0.3.4",v.CONNECTING=0,v.OPEN=1,v.CLOSING=2,v.CLOSED=3,v.prototype._debug=function(){this._options.debug&&i.log.apply(i,arguments)},v.prototype._dispatchOpen=function(){this.readyState===v.CONNECTING?(this._transport_tref&&(clearTimeout(this._transport_tref),this._transport_tref=null),this.readyState=v.OPEN,this.dispatchEvent(new o("open"))):this._didClose(1006,"Server lost session")},v.prototype._dispatchMessage=function(e){this.readyState===v.OPEN&&this.dispatchEvent(new o("message",{data:e}))},v.prototype._dispatchHeartbeat=function(e){this.readyState===v.OPEN&&this.dispatchEvent(new o("heartbeat",{}))},v.prototype._didClose=function(e,t,n){var s=this;if(s.readyState!==v.CONNECTING&&s.readyState!==v.OPEN&&s.readyState!==v.CLOSING)throw new Error("INVALID_STATE_ERR");s._ir&&(s._ir.nuke(),s._ir=null),s._transport&&(s._transport.doCleanup(),s._transport=null);var r=new o("close",{code:e,reason:t,wasClean:i.userSetCode(e)});if(!i.userSetCode(e)&&s.readyState===v.CONNECTING&&!n){if(s._try_next_protocol(r))return;r=new o("close",{code:2e3,reason:"All transports failed",wasClean:!1,last_event:r})}s.readyState=v.CLOSED,i.delay((function(){s.dispatchEvent(r)}))},v.prototype._didMessage=function(e){switch(e.slice(0,1)){case"o":this._dispatchOpen();break;case"a":for(var t=JSON.parse(e.slice(1)||"[]"),i=0;i<t.length;i++)this._dispatchMessage(t[i]);break;case"m":t=JSON.parse(e.slice(1)||"null");this._dispatchMessage(t);break;case"c":t=JSON.parse(e.slice(1)||"[]");this._didClose(t[0],t[1]);break;case"h":this._dispatchHeartbeat()}},v.prototype._try_next_protocol=function(t){var n=this;for(n.protocol&&(n._debug("Closed transport:",n.protocol,""+t),n.protocol=null),n._transport_tref&&(clearTimeout(n._transport_tref),n._transport_tref=null);;){var o=n.protocol=n._protocols.shift();if(!o)return!1;if(v[o]&&!0===v[o].need_body&&(!e.body||"undefined"!=typeof e.readyState&&"complete"!==e.readyState))return n._protocols.unshift(o),n.protocol="waiting-for-load",i.attachEvent("load",(function(){n._try_next_protocol()})),!0;if(v[o]&&v[o].enabled(n._options)){var s=v[o].roundTrips||1,r=(n._options.rto||0)*s||5e3;n._transport_tref=i.delay(r,(function(){n.readyState===v.CONNECTING&&n._didClose(2007,"Transport timeouted")}));var a=i.random_string(8),c=n._base_url+"/"+n._server+"/"+a;return n._debug("Opening transport:",o," url:"+c," RTO:"+n._options.rto),n._transport=new v[o](n,c,n._base_url),!0}n._debug("Skipping transport:",o)}},v.prototype.close=function(e,t){if(e&&!i.userSetCode(e))throw new Error("INVALID_ACCESS_ERR");return(this.readyState===v.CONNECTING||this.readyState===v.OPEN)&&(this.readyState=v.CLOSING,this._didClose(e||1e3,t||"Normal closure"),!0)},v.prototype.send=function(e){if(this.readyState===v.CONNECTING)throw new Error("INVALID_STATE_ERR");return this.readyState===v.OPEN&&this._transport.doSend(i.quote(""+e)),!0},v.prototype._applyInfo=function(t,n,o){this._options.info=t,this._options.rtt=n,this._options.rto=i.countRTO(n),this._options.info.null_origin=!e.domain;var s=i.probeProtocols();this._protocols=i.detectProtocols(s,o,t)};
/*
   * ***** BEGIN LICENSE BLOCK *****
   * Copyright (c) 2011-2012 VMware, Inc.
   *
   * For the license see COPYING.
   * ***** END LICENSE BLOCK *****
   */
var b=v.websocket=function(e,n){var o=this,s=n+"/websocket";s="https"===s.slice(0,5)?"wss"+s.slice(5):"ws"+s.slice(4),o.ri=e,o.url=s;var r=t.WebSocket||t.MozWebSocket;o.ws=new r(o.url),o.ws.onmessage=function(e){o.ri._didMessage(e.data)},o.unload_ref=i.unload_add((function(){o.ws.close()})),o.ws.onclose=function(){o.ri._didMessage(i.closeFrame(1006,"WebSocket connection broken"))}};b.prototype.doSend=function(e){this.ws.send("["+e+"]")},b.prototype.doCleanup=function(){var e=this.ws;e&&(e.onmessage=e.onclose=null,e.close(),i.unload_del(this.unload_ref),this.unload_ref=this.ri=this.ws=null)},b.enabled=function(){return!(!t.WebSocket&&!t.MozWebSocket)},b.roundTrips=2;
/*
   * ***** BEGIN LICENSE BLOCK *****
   * Copyright (c) 2011-2012 VMware, Inc.
   *
   * For the license see COPYING.
   * ***** END LICENSE BLOCK *****
   */
var y=function(){};y.prototype.send_constructor=function(e){this.send_buffer=[],this.sender=e},y.prototype.doSend=function(e){this.send_buffer.push(e),this.send_stop||this.send_schedule()},y.prototype.send_schedule_wait=function(){var e,t=this;t.send_stop=function(){t.send_stop=null,clearTimeout(e)},e=i.delay(25,(function(){t.send_stop=null,t.send_schedule()}))},y.prototype.send_schedule=function(){var e=this;if(e.send_buffer.length>0){var t="["+e.send_buffer.join(",")+"]";e.send_stop=e.sender(e.trans_url,t,(function(t,i){e.send_stop=null,!1===t?e.ri._didClose(1006,"Sending error "+i):e.send_schedule_wait()})),e.send_buffer=[]}},y.prototype.send_destructor=function(){this._send_stop&&this._send_stop(),this._send_stop=null};var w=function(t,n,o){if(!("_send_form"in this)){var s=this._send_form=e.createElement("form");(a=this._send_area=e.createElement("textarea")).name="d",s.style.display="none",s.style.position="absolute",s.method="POST",s.enctype="application/x-www-form-urlencoded",s.acceptCharset="UTF-8",s.appendChild(a),e.body.appendChild(s)}s=this._send_form;var r,a=this._send_area,c="a"+i.random_string(8);s.target=c,s.action=t+"/jsonp_send?i="+c;try{r=e.createElement('<iframe name="'+c+'">')}catch(u){(r=e.createElement("iframe")).name=c}r.id=c,s.appendChild(r),r.style.display="none";try{a.value=n}catch(d){i.log("Your browser is seriously broken. Go home! "+d.message)}s.submit();var l=function(e){r.onerror&&(r.onreadystatechange=r.onerror=r.onload=null,i.delay(500,(function(){r.parentNode.removeChild(r),r=null})),a.value="",o(!0))};return r.onerror=r.onload=l,r.onreadystatechange=function(e){"complete"==r.readyState&&l()},l},k=function(t,n){var o,s,r=e.createElement("script"),a=function(e){s&&(s.parentNode.removeChild(s),s=null),r&&(clearTimeout(o),r.parentNode.removeChild(r),r.onreadystatechange=r.onerror=r.onload=r.onclick=null,r=null,n(e),n=null)},c=!1,l=null;if(r.id="a"+i.random_string(8),r.src=t,r.type="text/javascript",r.charset="UTF-8",r.onerror=function(e){l||(l=setTimeout((function(){c||a(i.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))}),1e3))},r.onload=function(e){a(i.closeFrame(1006,"JSONP script loaded abnormally (onload)"))},r.onreadystatechange=function(e){if(/loaded|closed/.test(r.readyState)){if(r&&r.htmlFor&&r.onclick){c=!0;try{r.onclick()}catch(t){}}r&&a(i.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"==typeof r.async&&e.attachEvent)if(/opera/i.test(navigator.userAgent))(s=e.createElement("script")).text="try{var a = document.getElementById('"+r.id+"'); if(a)a.onerror();}catch(x){};",r.async=s.async=!1;else{try{r.htmlFor=r.id,r.event="onclick"}catch(d){}r.async=!0}"undefined"!=typeof r.async&&(r.async=!0),o=setTimeout((function(){a(i.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))}),35e3);var u=e.getElementsByTagName("head")[0];return u.insertBefore(r,u.firstChild),s&&u.insertBefore(s,u.firstChild),a},E=v["jsonp-polling"]=function(e,t){i.polluteGlobalNamespace();this.ri=e,this.trans_url=t,this.send_constructor(w),this._schedule_recv()};E.prototype=new y,E.prototype._schedule_recv=function(){var e=this;e._recv_stop=x(e.trans_url+"/jsonp",k,(function(t){e._recv_stop=null,t&&(e._is_closing||e.ri._didMessage(t)),e._is_closing||e._schedule_recv()}))},E.enabled=function(){return!0},E.need_body=!0,E.prototype.doCleanup=function(){this._is_closing=!0,this._recv_stop&&this._recv_stop(),this.ri=this._recv_stop=null,this.send_destructor()};var x=function(e,n,o){var s="a"+i.random_string(6),r=e+"?c="+escape("_jp."+s),a=0,c=n(r,(function(e){switch(a){case 0:delete t._jp[s],o(e);break;case 1:o(e),a=2;break;case 2:delete t._jp[s]}}));t._jp[s]=c;return function(){t._jp[s]&&(a=1,t._jp[s](i.closeFrame(1e3,"JSONP user aborted read")))}},M=function(){};
/*
   * ***** BEGIN LICENSE BLOCK *****
   * Copyright (c) 2011-2012 VMware, Inc.
   *
   * For the license see COPYING.
   * ***** END LICENSE BLOCK *****
   */(M.prototype=new y).run=function(e,t,i,n,o){this.ri=e,this.trans_url=t,this.send_constructor(function(e){return function(t,i,n){return new e("POST",t+"/xhr_send",i).onfinish=function(e,t){n(200===e||204===e,"http status "+e)},function(e){n(!1,e)}}}(o)),this.poll=new z(e,n,t+i,o)},M.prototype.doCleanup=function(){this.poll&&(this.poll.abort(),this.poll=null)};var C=v["xhr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",$,i.XHRCorsObject)};C.prototype=new M,C.enabled=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)},C.roundTrips=2,C.need_body=!0;var T=v["xdr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",$,i.XDRObject)};T.prototype=new M,T.enabled=function(){return!!t.XDomainRequest},T.roundTrips=2;var S=v["xhr-polling"]=function(e,t){this.run(e,t,"/xhr",$,i.XHRCorsObject)};S.prototype=new M,S.enabled=C.enabled,S.roundTrips=2;var P=v["xdr-polling"]=function(e,t){this.run(e,t,"/xhr",$,i.XDRObject)};P.prototype=new M,P.enabled=T.enabled,P.roundTrips=2;
/*
   * ***** BEGIN LICENSE BLOCK *****
   * Copyright (c) 2011-2012 VMware, Inc.
   *
   * For the license see COPYING.
   * ***** END LICENSE BLOCK *****
   */
var I,B=function(){};B.prototype.i_constructor=function(e,t,n){var o=this;o.ri=e,o.origin=i.getOrigin(n),o.base_url=n,o.trans_url=t;var s=n+"/iframe.html";o.ri._options.devel&&(s+="?t="+ +new Date),o.window_id=i.random_string(8),s+="#"+o.window_id,o.iframeObj=i.createIframe(s,(function(e){o.ri._didClose(1006,"Unable to load an iframe ("+e+")")})),o.onmessage_cb=i.bind(o.onmessage,o),i.attachMessage(o.onmessage_cb)},B.prototype.doCleanup=function(){if(this.iframeObj){i.detachMessage(this.onmessage_cb);try{this.iframeObj.iframe.contentWindow&&this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessage_cb=this.iframeObj=null}},B.prototype.onmessage=function(e){if(e.origin===this.origin){var t=e.data.slice(0,8),i=e.data.slice(8,9),n=e.data.slice(9);if(t===this.window_id)switch(i){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([v.version,this.protocol,this.trans_url,this.base_url]));break;case"t":this.ri._didMessage(n)}}},B.prototype.postMessage=function(e,t){this.iframeObj.post(this.window_id+e+(t||""),this.origin)},B.prototype.doSend=function(e){this.postMessage("m",e)},B.enabled=function(){var e=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof t.postMessage||"object"==typeof t.postMessage)&&!e};var O=function(e,n){parent!==t?parent.postMessage(I+e+(n||""),"*"):i.log("Can't postMessage, no parent window.",e,n)},D=function(){};D.prototype._didClose=function(e,t){O("t",i.closeFrame(e,t))},D.prototype._didMessage=function(e){O("t",e)},D.prototype._doSend=function(e){this._transport.doSend(e)},D.prototype._doCleanup=function(){this._transport.doCleanup()},i.parent_origin=undefined,v.bootstrap_iframe=function(){var n;I=e.location.hash.slice(1);i.attachMessage((function(e){if(e.source===parent&&("undefined"==typeof i.parent_origin&&(i.parent_origin=e.origin),e.origin===i.parent_origin)){var o=e.data.slice(0,8),s=e.data.slice(8,9),r=e.data.slice(9);if(o===I)switch(s){case"s":var a=JSON.parse(r),c=a[0],l=a[1],u=a[2],d=a[3];if(c!==v.version&&i.log('Incompatibile SockJS! Main site uses: "'+c+'", the iframe: "'+v.version+'".'),!i.flatUrl(u)||!i.flatUrl(d))return void i.log("Only basic urls are supported in SockJS");if(!i.isSameOriginUrl(u)||!i.isSameOriginUrl(d))return void i.log("Can't connect to different domain from within an iframe. ("+JSON.stringify([t.location.href,u,d])+")");(n=new D)._transport=new D[l](n,u,d);break;case"m":n._doSend(r);break;case"c":n&&n._doCleanup(),n=null}}})),O("s")};
/*
   * ***** BEGIN LICENSE BLOCK *****
   * Copyright (c) 2011-2012 VMware, Inc.
   *
   * For the license see COPYING.
   * ***** END LICENSE BLOCK *****
   */
var j=function(e,t){var n=this;i.delay((function(){n.doXhr(e,t)}))};(j.prototype=new s(["finish"])).doXhr=function(e,t){var n=this,o=(new Date).getTime(),s=new t("GET",e+"/info"),r=i.delay(8e3,(function(){s.ontimeout()}));s.onfinish=function(e,t){if(clearTimeout(r),r=null,200===e){var i=(new Date).getTime()-o,s=JSON.parse(t);"object"!=typeof s&&(s={}),n.emit("finish",s,i)}else n.emit("finish")},s.ontimeout=function(){s.close(),n.emit("finish")}};var A=function(t){var n=this,o=function(){var e=new B;e.protocol="w-iframe-info-receiver";var i=function(t){if("string"==typeof t&&"m"===t.substr(0,1)){var i=JSON.parse(t.substr(1)),o=i[0],s=i[1];n.emit("finish",o,s)}else n.emit("finish");e.doCleanup(),e=null},o={_options:{},_didClose:i,_didMessage:i};e.i_constructor(o,t,t)};e.body?o():i.attachEvent("load",o)};A.prototype=new s(["finish"]);var R=function(){var e=this;i.delay((function(){e.emit("finish",{},2e3)}))};R.prototype=new s(["finish"]);var N=function(e){if(i.isSameOriginUrl(e))return new j(e,i.XHRLocalObject);switch(i.isXHRCorsCapable()){case 1:return new j(e,i.XHRLocalObject);case 2:return new j(e,i.XDRObject);case 3:return new A(e);default:return new R}};(D["w-iframe-info-receiver"]=function(e,t,n){new j(n,i.XHRLocalObject).onfinish=function(t,i){e._didMessage("m"+JSON.stringify([t,i])),e._didClose()}}).prototype.doCleanup=function(){};
/*
   * ***** BEGIN LICENSE BLOCK *****
   * Copyright (c) 2011-2012 VMware, Inc.
   *
   * For the license see COPYING.
   * ***** END LICENSE BLOCK *****
   */
var L=v["iframe-eventsource"]=function(){var e=this;e.protocol="w-iframe-eventsource",e.i_constructor.apply(e,arguments)};L.prototype=new B,L.enabled=function(){return"EventSource"in t&&B.enabled()},L.need_body=!0,L.roundTrips=3,(D["w-iframe-eventsource"]=function(e,t){this.run(e,t,"/eventsource",W,i.XHRLocalObject)}).prototype=new M;
/*
   * ***** BEGIN LICENSE BLOCK *****
   * Copyright (c) 2011-2012 VMware, Inc.
   *
   * For the license see COPYING.
   * ***** END LICENSE BLOCK *****
   */
var F=v["iframe-xhr-polling"]=function(){var e=this;e.protocol="w-iframe-xhr-polling",e.i_constructor.apply(e,arguments)};F.prototype=new B,F.enabled=function(){return t.XMLHttpRequest&&B.enabled()},F.need_body=!0,F.roundTrips=3,(D["w-iframe-xhr-polling"]=function(e,t){this.run(e,t,"/xhr",$,i.XHRLocalObject)}).prototype=new M;
/*
   * ***** BEGIN LICENSE BLOCK *****
   * Copyright (c) 2011-2012 VMware, Inc.
   *
   * For the license see COPYING.
   * ***** END LICENSE BLOCK *****
   */
var U=v["iframe-htmlfile"]=function(){var e=this;e.protocol="w-iframe-htmlfile",e.i_constructor.apply(e,arguments)};U.prototype=new B,U.enabled=function(){return B.enabled()},U.need_body=!0,U.roundTrips=3,(D["w-iframe-htmlfile"]=function(e,t){this.run(e,t,"/htmlfile",V,i.XHRLocalObject)}).prototype=new M;
/*
   * ***** BEGIN LICENSE BLOCK *****
   * Copyright (c) 2011-2012 VMware, Inc.
   *
   * For the license see COPYING.
   * ***** END LICENSE BLOCK *****
   */
var z=function(e,t,i,n){this.ri=e,this.Receiver=t,this.recv_url=i,this.AjaxObject=n,this._scheduleRecv()};z.prototype._scheduleRecv=function(){var e=this,t=e.poll=new e.Receiver(e.recv_url,e.AjaxObject);t.onmessage=function(t){1,e.ri._didMessage(t.data)},t.onclose=function(i){e.poll=t=t.onmessage=t.onclose=null,e.poll_is_closing||("permanent"===i.reason?e.ri._didClose(1006,"Polling error ("+i.reason+")"):e._scheduleRecv())}},z.prototype.abort=function(){this.poll_is_closing=!0,this.poll&&this.poll.abort()};
/*
   * ***** BEGIN LICENSE BLOCK *****
   * Copyright (c) 2011-2012 VMware, Inc.
   *
   * For the license see COPYING.
   * ***** END LICENSE BLOCK *****
   */
var H,W=function(e){var t=this,n=new EventSource(e);n.onmessage=function(e){t.dispatchEvent(new o("message",{data:unescape(e.data)}))},t.es_close=n.onerror=function(e,s){var r=s?"user":2!==n.readyState?"network":"permanent";t.es_close=n.onmessage=n.onerror=null,n.close(),n=null,i.delay(200,(function(){t.dispatchEvent(new o("close",{reason:r}))}))}};W.prototype=new n,W.prototype.abort=function(){this.es_close&&this.es_close({},!0)};var V=function(e){var n=this;i.polluteGlobalNamespace(),n.id="a"+i.random_string(6,26),e+=(-1===e.indexOf("?")?"?":"&")+"c="+escape("_jp."+n.id);var s,r=function(){if(H===undefined)if("ActiveXObject"in t)try{H=!!new ActiveXObject("htmlfile")}catch(e){}else H=!1;return H}()?i.createHtmlfile:i.createIframe;t._jp[n.id]={start:function(){s.loaded()},message:function(e){n.dispatchEvent(new o("message",{data:e}))},stop:function(){n.iframe_close({},"network")}},n.iframe_close=function(e,i){s.cleanup(),n.iframe_close=s=null,delete t._jp[n.id],n.dispatchEvent(new o("close",{reason:i}))},s=r(e,(function(e){n.iframe_close({},"permanent")}))};V.prototype=new n,V.prototype.abort=function(){this.iframe_close&&this.iframe_close({},"user")};
/*
   * ***** BEGIN LICENSE BLOCK *****
   * Copyright (c) 2011-2012 VMware, Inc.
   *
   * For the license see COPYING.
   * ***** END LICENSE BLOCK *****
   */
var $=function(e,t){var i=this,n=0;i.xo=new t("POST",e,null),i.xo.onchunk=function(e,t){if(200===e)for(;;){var s=t.slice(n),r=s.indexOf("\n");if(-1===r)break;n+=r+1;var a=s.slice(0,r);i.dispatchEvent(new o("message",{data:a}))}},i.xo.onfinish=function(e,t){i.xo.onchunk(e,t),i.xo=null;var n=200===e?"network":"permanent";i.dispatchEvent(new o("close",{reason:n}))}};return $.prototype=new n,$.prototype.abort=function(){this.xo&&(this.xo.close(),this.dispatchEvent(new o("close",{reason:"user"})),this.xo=null)},
/*
   * ***** BEGIN LICENSE BLOCK *****
   * Copyright (c) 2011-2012 VMware, Inc.
   *
   * For the license see COPYING.
   * ***** END LICENSE BLOCK *****
   */
v.getUtils=function(){return i},v.getIframeTransport=function(){return B},v}(),"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1),(n=function(){return SockJS}.apply(t,[]))===undefined||(e.exports=n)},function(e,t){!function(){"use strict";var e="PerformanceObserver"in window&&window.performance&&performance.getEntriesByName&&performance.getEntries;home.addPerformanceEntryListener=function(t){if(!e)return function(){};var i,n=t.callback,o=t.name,s=o?function(e){return e.getEntriesByName(o)}:function(e){return e.getEntries()},r=function(e){var t=s(e);t.length&&n(t,i)},a=new window.PerformanceObserver(r);return i=a.disconnect.bind(a),a.observe({entryTypes:t.entryTypes}),t.initialCheck&&setTimeout((function(){r(performance)}),0),i}}()},function(e,t){!function(){var e=home.getData("i-prefetch-stat.data"),t=home.getData("i-prefetch-stat.prefetch"),i=window.Ya&&Ya.Rum&&Ya.Rum.sendTimeMark;if(t&&i&&("PerformanceYndxEntry"in window&&home.addPerformanceEntryListener({entryTypes:["yndxEntry"],name:"yndxPreloadedPageSubmit",callback:function(e,t){Ya.Rum.sendTimeMark("3106.143.297",e[0].startTime,!1),t()}}),"PerformancePaintTiming"in window&&home.addPerformanceEntryListener({entryTypes:["paint"],name:"first-paint",callback:function(e,t){Ya.Rum.sendTimeMark("1088.2793"),t()}})),e){var n=!1;home.localStorage.getItem("home:lastPrerenderShowIdLogged")===e.showId&&(n=!0),n||o()||document.addEventListener("visibilitychange",(function t(){o()&&document.removeEventListener("visibilitychange",t)}))}function o(){if("visible"===document.visibilityState)return n||(n=!0,home.localStorage.setItem("home:lastPrerenderShowIdLogged",e.showId),$.ajax({url:"/instant/stlog?msid="+e.showId+"&rnd="+Date.now()+"&from="+e.from,method:"POST",data:"r="+e.root+"&b="+[["search",Object.keys(e.params).map((function(t){return t+"="+encodeURIComponent(e.params[t])})).join(":")].join(":"),"ROOT:k="+e.k].concat(e.shows||[]).join("#"),xhrFields:{withCredentials:!0}}),t&&Ya.Rum.sendTimeMark("1088.487")),!0}}()},function(e,t){BEM.DOM.decl("usermenu-link",{_createPopup:function(){if(this.__self._popup&&this.updatePopup(),!this._inited){if(this._inited=!0,!this.__self._popup){var e=home.getData("usermenu-link.data");if(!e)return;var t=$(home.view("popup2",{mods:{view:"default",theme:"normal",target:"anchor",autoclosable:"yes","alt-shadow":"yes"},content:home.view("usermenu",e)})).appendTo("body");home.stat.logDOMShow(t,{visibilityCheck:!1}),BEM.DOM.init(t),this.__self._popup=this.findBlockInside(t,"popup2"),this.updatePopup()}this.__self._popup.on({beforeOpen:function(){this._toggleSwitcherAttrs(!0)},beforeClose:function(){this._toggleSwitcherAttrs(!1)}},this)}},updatePopup:function(){var e=this.params.popup||{};this.setAnchor(),e.mainOffset=e.mainOffset||0,e.secondaryOffset=e.secondaryOffset||0,e.directions=e.directions||["bottom-right"],this.__self._popup.setParams(e)},setAnchor:function(){var e=this.domElem;if(this.params.anchor){var t=this.findBlockInside(this.params.anchor);t&&(e=t)}this.__self._popup.setAnchor(e)},_onSwitcherClick:function(){this._createPopup(),this.__self._popup&&this.__self._popup.toggleMod("visible","yes")},_toggleSwitcherAttrs:function(e){this.domElem.attr("aria-expanded",e?"true":"false")}},{hide:function(){this._popup&&this._popup.setMod("visible","")},live:function(){this.liveBindTo("control","pointerclick",(function(){return this._onSwitcherClick(),!1})),this.liveBindKey("control","space enter",(function(){return this._onSwitcherClick(),!1}))}})},function(e,t){BEM.DOM.decl({block:"menu",baseBlock:"control"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.elem("item").attr("id",(function(e,t){return t||$.identify()})),this._val=this.getVal()}},disabled:function(e,t){this.__base.apply(this,arguments),this.setMod(this.elem("item"),e,t)}},onElemSetMod:{item:{hovered:{yes:function(e){if(this.hasMod(e,"disabled"))return!1;this.delMod(this.elem("item","hovered","yes"),"hovered"),this.domElem.attr("aria-activedescendant",e.attr("id")),this.trigger("item-hover",{item:e})},"":function(){this.domElem.removeAttr("aria-activedescendant"),this.trigger("item-hover",{})}},checked:function(e,t,i){this.domElem.attr("aria-selected",Boolean(i))},disabled:{yes:function(){this.delMod("hovered"),this.domElem.attr("aria-disabled",!0)},"":function(){this.domElem.attr("aria-disabled",!1)}}}},_onChange:function(){var e=this._val,t=this.getVal();return e!==t&&(this._val=t,this.trigger("change",{prevVal:e,currVal:t})),this},getItems:function(e,t){return this.elem("item",e,t).get().map((function(e){return $(e)}))},setContent:function(e){return BEM.DOM.update(this.domElem,e),this.reset(),this},getVal:function(){},reset:function(){this.dropElemCache()},_onItemEnter:function(e,t){this.setMod(e,"hovered","yes")},_onItemLeave:function(e,t){this.delMod(e,"hovered")},_onItemFocusin:function(e,t){this.setMod(e,"hovered","yes")},_onFocusout:function(e){this.__base.apply(this,arguments),this.delMod(this.elem("item","hovered","yes"),"hovered")},_onItemClick:function(e,t,i){this.trigger("click",{item:e,source:i.source})}},{live:function(){return this.liveBindTo("item","pointerover pointerout",(function(e){var t=e.data.domElem;this.hasMod(t,"disabled","yes")||t[0].contains(e.relatedTarget)||("pointerover"===e.type?this._onItemEnter(t,e):this._onItemLeave(t,e))})).liveBindTo("item","pointerclick",(function(e){var t=e.data.domElem;this.hasMod(t,"disabled")||this._onItemClick(t,e,{source:"pointer"})})).liveBindTo("item","focusin",(function(e){var t=e.data.domElem;this.hasMod(t,"disabled")||this._onItemFocusin(t,e)})).liveBindTo("focusout",(function(e){this._onFocusout(e)})),this.__base()}})},function(e,t){BEM.DOM.decl("menu",{onSetMod:{focused:{yes:function(){if(this.__base.apply(this,arguments),this.hasMod("type","navigation"))return!1;this.elem("item","hovered","yes").length||(this.setMod(this.elem("item").eq(0),"hovered","yes"),this._scrollToItem(this.elem("item").eq(0))),this.bindToDoc("keydown",this._onKeydown).bindToDoc("keyup",this._onKeyup).bindToDoc("keypress",this._onKeypress)},"":function(){this.__base.apply(this,arguments),this.unbindFromDoc("keydown keyup keypress").delMod(this.elem("item","hovered","yes"),"hovered")}}},hoverNext:function(e){for(var t,i,n=e?this.getItems().reverse():this.getItems(),o=0,s=!1;i=n[o];o++)if(!this.hasMod(i,"disabled"))if(this.hasMod(i,"hovered"))s=!0;else{if(s){t=i;break}t||(t=i)}t&&(this.setMod(t,"hovered","yes"),this._scrollToItem(t))},hoverText:function(e,t){for(var i,n=this.getItems(),o=n.length,s=this._normalizeText(e),r=t||0;r<o;){if(i=n[r],!this.hasMod(i,"disabled")&&0===this._normalizeText(i.text()).indexOf(s))return this.setMod(i,"hovered","yes"),void this._scrollToItem(i);++r===n.length&&(r=0,o=t)}},_normalizeText:function(e){return e.toLowerCase().replace(//,"")},reset:function(){this.__base.apply(this,arguments),this._dropSearchCache()},_dropSearchCache:function(){this._lastTime=this._lastChar=this._searchTerm=undefined},_scrollToItem:function(e){var t=this.domElem.offset().top,i=e.offset().top,n=0;i<t?n=i-t:(n=i+e.outerHeight()-t-this.domElem.outerHeight())<0&&(n=0),this.domElem.scrollTop(this.domElem.scrollTop()+n)},_onKeydown:function(e,t){var i=BEM.blocks.keycodes,n=e.keyCode;e.shiftKey||e.ctrlKey||e.altKey||e.metaKey||((i.is(n,"UP","DOWN")||!t&&n===i.SPACE)&&e.preventDefault(),i.is(n,"UP","DOWN")&&(this.hoverNext(i.is(n,"UP")),this._dropSearchCache()))},_onKeyup:function(e){var t=BEM.blocks.keycodes,i=e.keyCode;e.shiftKey||e.ctrlKey||e.altKey||e.metaKey||t.is(i,"ENTER","SPACE")&&this._onItemClick(this.elem("item","hovered","yes"),e,{source:"keyboard"})},_onKeypress:function(e){var t,i,n=Number(new Date),o=e.charCode,s=String.fromCharCode(o).toLowerCase(),r=s===this._lastChar&&1===this._searchTerm.length,a=this.getItems();o<=BEM.blocks.keycodes.SPACE||e.ctrlKey||e.altKey||e.metaKey?this._lastTime=n:(n-this._lastTime>this.SEARCH_TIMEOUT||r?this._searchTerm=s:this._searchTerm=(this._searchTerm||"")+s,this._lastChar=s,this._lastTime=n,t=this.elem("item","hovered","yes"),i=(i=$($.map(a,(function(e){return e.get()}))).index(t))>=0?i:0,r&&0===this._normalizeText(t.text()).indexOf(this._searchTerm)&&(i=i>=a.length-1?0:i+1),this.hoverText(this._searchTerm,i))},SEARCH_TIMEOUT:1500})},function(e,t){BEM.DOM.decl("menu",{},{live:function(){var e=this.__base.apply(this,arguments);return this.liveBindKey("item","enter space",(function(e){this.getMod("type","navigation")&&!e.data.domElem.attr("href")&&(this._onItemClick(e.data.domElem,e,{source:"keyboard"}),home.stat.logPath("click",e.data.domElem.attr(home.stat.attr)))})),e}})},function(e,t){BEM.DOM.decl("usermenu",{onSetMod:{js:{inited:function(){this.findBlockOutside("popup2").on("beforeOpen",(function(){this.domElem.css("min-width","")}),this)}}},_getEmbeddedAuth:function(){return this.auth?this.auth:this.auth=BEM.create("i-embeddedauth",this.params.auth)},_selectUser:function(e){var t=e.closest(".usermenu__user").data("uid");if(t)return this._getEmbeddedAuth().setData({uid:t},this.changeThis(this._switchResponse)).submit(),!1},_logoutUser:function(e){var t=e.closest(".usermenu__user-exit"),i=t.parent(),n=t.data("uid");if(n)return this.domElem.css("min-width",this.domElem.width()),this._$userWrapper=i,this._getEmbeddedAuth().setData({uid:n,action:"logout"},this.changeThis(this._logoutResponse)).submit(),!1},_switchResponse:function(e){switch(e.status){case"ok":case"action-not-required":return void window.location.reload();default:window.location.href=this.params.passport}},_logoutResponse:function(e){var t=this._$userWrapper;switch(this._$userWrapper=null,e.status){case"ok":case"action-not-required":return void(t&&t.hide());default:window.location.href=this.params.passport}}},{live:function(){var e=function(e){return this._selectUser($(e.target))},t=function(e){return this._logoutUser($(e.target))};this.liveBindTo({elem:"user",modName:"clickable",modVal:"yes"},"pointerclick",e),this.liveBindKey({elem:"user",modName:"clickable",modVal:"yes"},"enter",e),this.liveBindTo("user-exit","pointerclick",t),this.liveBindKey("user-exit","enter",t)}})},function(e,t){BEM.decl("i-embeddedauth",{addCallback:function(e){var t="cb"+Math.random();return this.callbacks||(this.callbacks={}),this.callbacks[t]=e,t},addQueryParam:function(e,t){var i=e.split("?"),n=i[1]?i[1].split("&"):[];return n.push(t),i[1]=n.join("&"),i.join("?")},bindCallback:function(){var e=this;window.mordaAuth={onResponse:function(t){if(t){for(var i=t.split("?")[1].split("&"),n={},o=0,s=i.length;o<s;o++){var r=i[o].split("=");n[r.shift()]=decodeURIComponent(r.join("="))}e.processResponse(n)}else e.processResponse()}}},submit:function(){this.getForm().trigger("submit")},setData:function(e,t){if(e=$.extend({},this.params.params||{},e),this.idkey&&(e.idkey=this.idkey),t){var i=this.addCallback(t);e.retpath=this.addQueryParam(e.retpath,"from="+i)}return this.getForm().html(this.stringifyParams(e)),this},setDomain:function(){var e=document.domain.match(/([^.]+(?:\.com?)?\.)?[^.]+$/)[0];try{document.domain=e}catch(t){}},stringifyParams:function(e){var t="";for(var i in e)e.hasOwnProperty(i)&&(t+=this.getInputHtml(i,e[i]));return t},getInputHtml:function(e,t){return'<input name="'+e+'" value="'+t+'"/>'},getForm:function(){if(this.form)return this.form;this.setDomain(),this.bindCallback();var e="embeddedauthframe"+parseInt(1e4*Math.random(),10);return this.form=$('<form style="display:none" target="'+e+'" method="'+(this.params.method||"post")+'" action="'+this.params.action+'"></form>'),this.frame=$('<iframe style="display:none" name="'+e+'"></iframe>'),$("body").append(this.form,this.frame),this.form},processResponse:function(e){var t=function(){};if(e)switch(e.from&&this.callbacks[e.from]&&(t=this.callbacks[e.from],this.callbacks[e.from]=!1),this.idkey=e.idkey,e.status){case"login-empty":case"password-empty":case"account-not-found":case"password-invalid":case"action-not-required":case"ok":case"uid-empty":case"sessionid-invalid":case"session-no-uid":case"yu-empty":case"yu-invalid":case"captcha-invalid":case"captcha-required":return t(e),void this.trigger("data-received",e);case"internal-exception":return this.idkey="",this._interr?(t(e),void this.trigger("data-received",e)):(this._interr=!0,e.from&&(this.callbacks[e.from]=t),void this.submit());default:e.url?window.location=e.url:(t(e),this.trigger("data-received",e))}else this.trigger("no-data")}})},function(e,t){home.htmlFilter=function(e){var t=String(e);return t.indexOf("&")>-1&&(t=t.replace(/&/g,"&amp;")),t.indexOf("<")>-1&&(t=t.replace(/</g,"&lt;")),t.indexOf(">")>-1&&(t=t.replace(/>/g,"&gt;")),t.indexOf('"')>-1&&(t=t.replace(/"/g,"&quot;")),t},home.getBEMParams=function(e){return home.htmlFilter(JSON.stringify(e))},home.getBEMClassname=function(e,t){var i=t.mods,n=e,o=i?home.getBEMMods(e,i):"";return t.mix&&("object"==typeof t.mix?(Array.isArray(t.mix)||(t.mix=[t.mix]),n+=" "+t.mix.map((function(t){var i=t.block||e,n=t.mods;return"string"==typeof t?t:(t.elem&&(i+="__"+t.elem,n=t.elemMods),n&&(i+=" "+home.getBEMMods(i,n)),i)})).join(" ")):n+=" "+t.mix),o&&(n+=" "+o),n},home.getBEMMods=function(e,t){var i,n=[];for(i in t)t.hasOwnProperty(i)&&(t[i]||0===t[i])&&n.push(e+"_"+i+"_"+t[i]);return n.join(" ")},home.emptyAttr={},home.getAttributes=function(e){if(!e)return"";var t,i="";for(t in e)if(e.hasOwnProperty(t)){var n=e[t];(n||0===n)&&(n===home.emptyAttr?i+=" "+t:((n=n.toString()).indexOf('"')>-1&&(n=n.replace(/"/g,"&quot;")),i+=" "+t+'="'+n+'"'))}return i}},function(e,t){!function(){"use strict";home.cleverString={};var e;e=function(e,t){var i=e.charCodeAt(),n=t.charCodeAt();return i>=55296&&i<=56319&&n>=56320&&n<=57343},home.cleverString.length=function(t){if(null==t)return 0;for(var i=0,n=t.length,o=0;i<n;)++i<n&&e(t[i-1],t[i])&&++i,++o;return o},home.cleverString.substring=function(t,i,n){if("string"!=typeof t)return t;"number"!=typeof i&&(i=0),n||0===n||(n=Infinity);for(var o,s=[],r=i+n,a=0,c=t.split(""),l=c.length,u=0;a<=l;)o=1,a+1<l&&e(t[a],t[a+1])&&(o=2),u>=i&&u<r&&s.push(c.slice(a,a+o).join("")),a+=o,++u;return s.join("")},home.cleverString.cutMiddleOfString=function(e,t,i){var n=home.cleverString.length(e);return"string"!=typeof e||n<3||"number"!=typeof t||"number"!=typeof i?e:-1===t||-1===i?"":n>t+1+i?home.cleverString.substring(e,0,t)+""+home.cleverString.substring(e,n-i):e},home.cleverString.cutEndOfString=function(e,t){return home.cleverString.cutMiddleOfString(e,t-1,0)},home.cleverString.cutStartOfString=function(e,t){return home.cleverString.cutMiddleOfString(e,0,t-1)}}()},function(e,t){$((function(){if(window.performance&&window.performance.getEntries){var e=home.getData("strm-check.data");if(e){var t="https://strm.yandex.ru/probe/jobs?count="+Math.min(e.count,5)+"&size="+e.size,i=function(e){for(var t=0,i=Math.min(e.length,5),o={},s=function(i){var s=e[i]+"&rnd="+home.rnd();t++,o[s]=!0,$.ajax({method:"get",url:s,timeout:3e4}).then((function(){--t||n(o)}),(function(e,t,i){/egress.strm.yandex.net|egress.yandex.net/.test(s)||home.error.logAjaxError({block:"strm-check",message:"job file error",url:s,method:"runUrls",source:"strm"},e,t,i)}))},r=0;r<i;r++)s(r);setTimeout((function(){n(o)}),3e4)},n=function(e){if(!o){o=!0;var t=[];try{for(var i=window.performance.getEntriesByType("resource"),n=0,s=i.length;n<s;n++)e[i[n].name]&&t.push(i[n])}catch(a){}if(t.length){var r=window.performance&&performance.timing&&performance.timing.navigationStart||"";$.ajax({type:"POST",dataType:"json",url:"https://strm.yandex.ru/perf?rum=1&perfnow="+ +new Date+"&navstart="+r,data:JSON.stringify(t)})}}},o=!1;setTimeout((function(){$.ajax({method:"get",dataType:"json",url:t,timeout:3e4}).then((function(e){e&&e.jobs&&i(e.jobs)}),(function(e,i,n){home.error.logAjaxError({block:"strm-check",message:"probe/jobs error",url:t,method:"getUrls",source:"strm"},e,i,n)}))}),1e3*e.timeout)}}}))},function(e,t){var i;i=function(){var e=home.getData("delayed-reporter"),t=function(e){"undefined"!=typeof e.timeout?setTimeout((function(){i(e)}),1e3*e.timeout):i(e)},i=function(e){e.url?(new Image).src=e.url:e.stat&&e.stat.type&&e.stat.name&&home.stat.logPath(e.stat.type,e.stat.name)},n=function(e){e&&(e="string"==typeof e?{url:e}:e,document.visibilityState&&"visible"!==document.visibilityState?document.addEventListener("visibilitychange",(function i(){"visible"===document.visibilityState&&(document.removeEventListener("visibilitychange",i),t(e))})):t(e))};if(e)for(var o in e)if(e.hasOwnProperty(o)){var s=e[o];Array.isArray(s)||(s=[s]),s.forEach(n)}},window.$?$(i):"addEventListener"in document&&document.addEventListener("DOMContentLoaded",i,!1)},function(e,t){
/**
 * Debounce and throttle function's decorator plugin 1.0.6
 *
 * Copyright (c) 2009 Filatov Dmitry (alpha@zforms.ru)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */
$.extend({debounce:function(e,t,i,n){var o,s=function(){var s=arguments;n=n||this,i&&!o&&e.apply(n,s),clearTimeout(o),o=setTimeout((function(){i||e.apply(n,s),o=null}),t)};return 3===arguments.length&&"boolean"!=typeof i&&(n=i,i=!1),s.stop=function(){clearTimeout(o),o=null},s},throttle:function(e,t,i){var n,o,s,r=function(){o=arguments,s=!0,i=i||this,n||function(){s?(e.apply(i,o),s=!1,n=setTimeout(arguments.callee,t)):n=null}()};return r.stop=function(){clearTimeout(n),n=null},r}})},function(e,t){BEM.DOM.decl("header",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindToWin("resize",$.throttle(this._onResize,150)),this._collapseUserIfNeeded()}}},_onResize:function(){this._collapseUserIfNeeded()},_onUserUpdatesName:function(){this._collapseBreakpoint=null,this._collapseUserIfNeeded()},_collapseUserIfNeeded:function(){var e=this._getUser();e&&e.toggleCollapsed(this._getCollapseBreakpoint()>=this.elem("nav").width())},_getCollapseBreakpoint:function(){return this._collapseBreakpoint||(this._collapseBreakpoint=this._getNavItemsWidth()+this.__self.NAV_ITEMS_GAP),this._collapseBreakpoint},_getNavItemsWidth:function(){var e=0;return this.elem("nav").children().each((function(){e+=$(this).outerWidth(!0)})),e},_getUser:function(){return this._user?this._user._isDestructing&&(this._collapseBreakpoint=null,this._user=this.findBlockInside("user")):(this._user=this.findBlockInside("user"),this._user&&this._user.on("update-name",this._onUserUpdatesName,this)),this._user}},{NAV_ITEMS_GAP:10,live:!1})},function(e,t){BEM.DOM.declMix("mix-tabber",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._keys=this._getKeys(),this._data=this._getInitData(),this._selectedKey=this._defaultKey=this._getDefaultKey(),this._panels={},this._defaultPanels={},this._showedPanels={},this._showedPanels[this._defaultKey]=!0,this._statRoot=this.params.statRoot||this.__self.getName(),this.elem("panel").toArray().forEach((function(e){var t=$(e),i=t.data("key");this._panels[i]=t,this._defaultPanels[i]=!0}),this),this._$panel=this._panels[this._defaultKey]}}},_getKeys:function(){return this.params.keys},_getDefaultKey:function(){return this.params.selectedKey},_getInitData:function(){return this.params.data||{}},_selectTab:function(e,t){t=t||{},this._selectedKey===e||this._selectedParentKey===e&&!t.parentKey||this._changeTab(e,t)},_changeTab:function(e,t){var i=!this._panels[e],n=this._panels[e]||(this._panels[e]=this._createPanel(e));this._togglePanelsOnChange(e,n),this._$panel=n,this._selectedKey=e,this._selectedParentKey=t.parentKey,this._afterPanelChange(e,n,!i)},_togglePanelsOnChange:function(e,t){this._togglePanel(this._selectedKey,this._$panel,!1),this._togglePanel(e,t,!0)},_mapKeyToIndex:function(e){return this._keys.indexOf(e)},_createPanel:function(e){var t=$(home.view("mix-tabber__panel",{block:this.__self.getName(),id:this._uniqId,key:e,attrs:this._getPanelAttrs(e)}));return this._renderPanelInner(e,t,this._data[e]),t},_getPanelAttrs:function(){return{}},_renderPanelInner:function(e,t,i){t.append(this._getPanelHTML(e,i))},_afterPanelChange:function(e,t,i){i||this._onPanelDraw(e,t),this._showedPanels[e]||this._onPanelFirstShow(e,t),this._showedPanels[e]=!0,this._onPanelChange(e,t)},_onPanelDraw:function(e,t){BEM.DOM.init(t)},_onPanelFirstShow:function(e,t){home.stat.logDOMShow(t)},_onPanelChange:function(){},_getPanelHTML:function(e,t){return""},_togglePanel:function(e,t,i){t.attr("aria-hidden",i?"false":"true"),this._toggleMountPanel(e,t,i)},_toggleMountPanel:function(e,t,i){i?t.parent().length?t.css("display",""):this.elem("panels").append(t):t.css("display","none")}})},function(e,t){BEM.DOM.declMix("mix-tabber-labels",{_getKeys:function(){var e=this.elem("tab");return e.length?e.toArray().map((function(e){return String($(e).data("key"))})):this.__base.apply(this,arguments)},_getDefaultKey:function(){var e=this.elem("tab","selected","yes");return e.length?String(e.data("key")):this.__base.apply(this,arguments)},_changeTab:function(e,t){this.__base.apply(this,arguments);var i=this.elem("tab","selected","yes"),n=this.elem("tab").filter('[data-key="'+(t.parentKey||e)+'"]');this._toggleLabelSelection(i,!1,t),this._toggleLabelSelection(n,!0,t),t.focus&&n.focus()},_toggleLabelSelection:function(e,t,i){e.attr({tabindex:t?0:-1,"aria-selected":t?"true":"false","aria-controls":t?this._uniqId+"_panel_"+this._selectedKey:null}),this.toggleMod(e,"selected","yes","no",t),e.toggleClass("mix-tabber__tab_selected_yes mix-tabber__tab_selected_no")},_getPanelAttrs:function(e){return{"aria-labelledby":this._uniqId+"_tab_"+e}},_onTabClick:function(e){var t=e.data.domElem,i=String(t.data("key")),n=this._selectedKey===i;return this._selectTab(i,{from:"user"}),n?home.stat.redirect(t[0],t.data("stat-link")):home.stat.logPath("click",t.data("stat-select")),n}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("tab","pointerclick",(function(e){return this._onTabClick(e)}))}})},function(e,t){BEM.DOM.declMix("mix-tabber-labels-keyboard",{_selectTabByKeyboard:function(e,t){var i,n=this.elem("tab"),o=this._mapKeyToIndex(this._selectedParentKey||this._selectedKey);"relative"===e?o+=t:"absolute"===e&&(o=t),o<0?o=n.length-1:o>=n.length&&(o=0),i=n.eq(o),this._selectTab(String(i.data("key")),{focus:!0}),home.stat.logPath("click",i.attr(home.stat.attr))}},{live:function(){this.__base.apply(this,arguments),this.liveBindKey("tab","left right",(function(e){return this._selectTabByKeyboard("relative",e.which===BEM.KEYS.LEFT?-1:1),!1})),this.liveBindKey("tab","home end",(function(e){return this._selectTabByKeyboard("absolute",e.which===BEM.KEYS.HOME?0:-1),!1}))}})},function(e,t){BEM.DOM.declMix("mix-tabber-labels-preloader",{},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("tab","mouseover mouseout",(function(e){var t=e.data.domElem.data("key");String(t)!==String(this._selectedKey)&&(clearTimeout(this._tabPreloadTimer),"mouseover"!==e.type||this._panels[t]||(this._tabPreloadTimer=setTimeout(function(){this._loadDataWrapped(t)["catch"]((function(){}))}.bind(this),200)))}))}})},function(e,t){BEM.DOM.decl("button",{onSetMod:{js:{inited:function(){var e=this.isDisabled(),t=this.domElem;(this._href=t.attr("href"))&&e&&t.removeAttr("href")}},disabled:function(e,t){var i=this.domElem;t&&this.delMod("hovered"),this._href&&(t?i.removeAttr("href"):i.attr("href",this._href)),this.afterCurrentEvent((function(){i&&i.prop("disabled",t)}))},pressed:function(e,t){if(this.hasMod("disabled"))return!1;this.trigger(t?"press":"release")}},isDisabled:function(){return this.hasMod("disabled","yes")},url:function(e){return void 0===e?this._href:(this._href=e,this.isDisabled()||this.domElem.attr("href",e),this)},getUrl:function(){return this.url()},setUrl:function(e){return this.url(e)},_onPointerpress:function(e){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(e){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onClick:function(e){this.isDisabled()?e.preventDefault():this.afterCurrentEvent((function(){this.domElem&&this.trigger("click")}))}},{live:function(){this.liveBindTo("pointerclick",(function(e){this._onClick(e)})).liveBindTo("pointerpress",(function(e){this.isDisabled()||this._onPointerpress(e)}))}})},function(e,t){BEM.DOM.decl("button",{onSetMod:{focused:{yes:function(){if(this.isDisabled())return!1;this.bindToWin("unload",(function(){this.delMod("focused")})).bindTo("keydown",this._onKeyDown),this._isControlFocused()||this._getControl().focus(),this.trigger("focus")},"":function(){var e=BEM.blocks["i-ua"].opera<13;this.unbindFromWin("unload").unbindFrom("keydown"),(e||document.hasFocus())&&this._isControlFocused()&&this._getControl().blur(),this.trigger("blur")}},disabled:function(e,t){this.__base.apply(this,arguments),t&&(this.delMod("focused"),this.domElem.keyup())},hovered:function(e,t){if(this.isDisabled())return!1;!t&&this.delMod("pressed")},pressed:function(){return this.isDisabled()||this.setMod("focused","yes"),this.__base.apply(this,arguments)}},_getControl:function(){return this.elem("control").length&&this.elem("control")||this.domElem},_isControlFocused:function(){return this.containsDomElem($.dom.getActiveElement())},_onKeyDown:function(e){var t=BEM.blocks.keycodes,i=e.keyCode;!this._keyDowned&&t.is(i,"ENTER","SPACE")&&(this._keyDowned=!0,this.setMod("pressed","yes").bindTo("keyup",(function(){this.delMod("pressed").unbindFrom("keyup"),delete this._keyDowned,i===t.SPACE&&this.domElem.attr("href")&&(document.location=this.domElem.attr("href"))})))},destruct:function(){this.delMod("focused"),this.__base.apply(this,arguments)}},{live:function(){return this.liveBindTo("pointerover pointerout",(function(e){this.isDisabled()||this.domElem[0].contains(e.relatedTarget)||this.toggleMod("hovered","yes","pointerover"===e.type)})).liveBindTo("focusin focusout",(function(e){this.toggleMod("focused","yes","focusin"===e.type)})),8===BEM.blocks["i-ua"].ie&&this.liveBindTo("mouseup mouseout",(function(e){this.domElem.height()})),this.__base()}})},function(e,t){!function(e){e.dom={getActiveElement:function(){try{return e(document.activeElement)}catch(t){return e()}}},e.fn.isFocused=function(){return this.is(e.dom.getActiveElement())}}(jQuery)},function(e,t){BEM.DOM.declMix("mix-tabber-loader",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._dataPromises={}}}},_renderPanelInner:function(e,t,i){i?this.__base.apply(this,arguments):(t.append(this._renderLoader(e)).css("min-height",this._$panel.height()),this._loadAndDrawData(e,t))},_renderLoader:function(){return'<div class="'+this.__self.getName()+'__loader loader"></div>'},_afterPanelChange:function(e,t,i){this._data[e]||this._defaultPanels[e]?this.__base(e,t,i):BEM.DOM.init(t)},_loadAndDrawData:function(e,t){return this._loadDataWrapped(e).then(this._drawData.bind(this,e,t,!0),this._drawData.bind(this,e,t,!1))},_drawData:function(e,t,i){if(e!==this._selectedKey)return delete this._panels[e],void t.remove();var n;try{i&&(n=this._getPanelHTML(e,this._data[e]))}catch(o){home.error.logError({block:this.__self.getName(),message:o,meta:{key:e},sourceType:"render"})}n||(n=this._getPanelRetry(e)),t.html(n),this._onPanelReplace(e,t),i?this._afterPanelChange(e,t,!1):home.stat.logDOMShow(t)},_onPanelReplace:function(e,t){t.css("min-height","")},_loadDataWrapped:function(e,t){return t=t||{},this._dataPromises[e]||this._data[e]&&!t.forceReload?this._dataPromises[e]||Promise.resolve(this._data[e]):(this._dataPromises[e]=this._loadData(e).then(function(t){return t&&(this._data[e]=t),t}.bind(this),function(t){this._dataPromises[e]=null;var i=t.meta||{};throw i.key=e,home.error.logError({block:this.__self.getName(),meta:i,sourceType:"network"},t),t}.bind(this)),this._dataPromises[e])},_loadData:function(){return Promise.reject(new Error("Not implemented"))},_getPanelRetry:function(e){return home.view("mix-tabber-loader__retry",{buttonMods:this._getRetryButtonMods(),key:e,block:this.__self.getName(),statRoot:this._statRoot})},_getRetryButtonMods:function(){return{theme:this.params.retryButtonTheme,size:"s"}},_onRetryClick:function(e){var t=this._panels[e];t&&(t.html(this._renderLoader(e)),BEM.DOM.init(t),this._loadAndDrawData(e,t))}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("retry-button","pointerclick",(function(e){return this._onRetryClick(String(e.data.domElem.data("key"))),!1}))}})},function(e,t){BEM.DOM.declMix("mix-tabber-loader-keyboard",{},{live:function(){this.__base.apply(this,arguments),this.liveBindKey("retry-button","space enter",(function(){this._onRetryClick()}))}})},function(e,t){BEM.DOM.declMix("mix-tabber-slide2",{_changeTab:function(e,t){var i=this._mapKeyToIndex(this._selectedKey),n=this._mapKeyToIndex(e);this._showSide=i<n?"right":"left",this._hideSide=i<n?"left":"right",this._hasAnimation=!(t&&!1===t.animate),this.domElem.toggleClass("mix-tabber-slide2_panel-animation_yes",this._hasAnimation),this.__base.apply(this,arguments)},_toggleMountPanel:function(e,t,i){if(this._panelMap=this._panelMap||{},this._panelMap[e]=i,i){t.parent().length||this.elem("panels").append(t),t.removeClass("mix-tabber-slide2__panel_hide-side_left mix-tabber-slide2__panel_hide-side_right").addClass("mix-tabber-slide2__panel_hide-side_"+this._showSide).addClass("mix-tabber-slide2__panel_hidden_yes").removeClass("mix-tabber-slide2__panel_no-place_yes");var n=function(){this._panelMap[e]===i&&t.removeClass("mix-tabber-slide2__panel_hide-side_left mix-tabber-slide2__panel_hide-side_right").removeClass("mix-tabber-slide2__panel_hidden_yes").addClass("mix-tabber-slide2__panel_animated_yes").onceAnimationEnd("transition",this.__self.SLIDE_DURATION,(function(){t.removeClass("mix-tabber-slide2__panel_animated_yes")}))}.bind(this);this._hasAnimation?setTimeout(n,100):n()}else t.removeClass("mix-tabber-slide2__panel_hide-side_left mix-tabber-slide2__panel_hide-side_right").addClass("mix-tabber-slide2__panel_hide-side_"+this._hideSide).addClass("mix-tabber-slide2__panel_hidden_yes").addClass("mix-tabber-slide2__panel_no-place_yes").addClass("mix-tabber-slide2__panel_animated_yes").onceAnimationEnd("transition",this.__self.SLIDE_DURATION,(function(){t.removeClass("mix-tabber-slide2__panel_animated_yes")}))},_createPanel:function(){var e=this.__base.apply(this,arguments);return e.addClass("mix-tabber-slide2__panel"),e}},{SLIDE_DURATION:250})},function(e,t){$.fn.onceAnimationEnd=function(e,t,i){var n,o,s,r=this;function a(){clearTimeout(s),i=null,r.off(n)}"object"==typeof e&&(o=e.property,e=e.type),n="animation"===e?"webkitAnimationEnd animationend":"webkitTransitionEnd transitionend",this.on(n,(function(e){!r.is(e.target)||o&&o!==e.originalEvent.propertyName||i&&(i(r),a())})),t>0&&(s=setTimeout((function(){i&&(i(r),a())}),t+50))}},function(e,t){!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(i){}BEM.DOM.decl("i-ua",{},{passiveEvents:e})}()},function(e,t){BEM.DOM.declMix("mix-tabber-wheel",{onSetMod:{js:{inited:function(){if(this.__base.apply(this,arguments),home.getData("i-scroll-changes.data.scroll_speedup_wheel")){var e=!!BEM.blocks["i-ua"].passiveEvents&&{passive:!0};this.elem("panels")[0].addEventListener("wheel",this._onWheel.bind(this),e)}}}},_processWheelOrient:function(e,t,i,n){var o;((!this._wheelPrevTime||t-this._wheelPrevTime>this.__self.WHEEL_FADE_TIME)&&(this._wheelOrient=undefined),this._wheelOrient===undefined)?this._wheelOrient=i>n?"horizontal":"vertical":(i/n>this.__self.WHEEL_ORIENT_COEFFICIENT?o="horizontal":n/i>this.__self.WHEEL_ORIENT_COEFFICIENT&&(o="vertical"),o&&(this._wheelOrient=o));"horizontal"===this._wheelOrient&&!1!==e.cancelable&&e.preventDefault()},_calcWheelDeltas:function(e){var t=e.deltaX,i=e.deltaY;return e.deltaMode!==e.DOM_DELTA_LINE&&e.deltaMode!==e.DOM_DELTA_PAGE||(t*=18,i*=18),{x:t,y:i}},_onWheel:function(e){if("deltaX"in e&&!this.__self._hasHorizontalScroll()){var t=this._calcWheelDeltas(e),i=t.x,n=t.y,o=Math.abs(i),s=Math.abs(n),r=Date.now();if(this._preventWheelTime&&r<this._preventWheelTime)return this._wheelPrevTime=r,void("horizontal"===this._wheelOrient&&!1!==e.cancelable&&e.preventDefault());this._processWheelOrient(e,r,o,s),this._wheelCounterX=this._wheelCounterX||0,this._wheelCounterY=this._wheelCounterY||0,this._wheelPrevTime=this._wheelPrevTime||r;var a=1-Math.min(1,(r-this._wheelPrevTime)/this.__self.WHEEL_FADE_TIME);if(this._wheelCounterX*=a,this._wheelCounterY*=a,this._wheelCounterX+=i,this._wheelCounterY+=n,Math.abs(this._wheelCounterX)>40&&Math.abs(this._wheelCounterX/this._wheelCounterY)>this.__self.WHEEL_ORIENT_COEFFICIENT){var c=this._wheelCounterX>0;this._wheelCounterX=0,this._wheelCounterY=0,this._preventWheelTime=r+this.__self.WHEEL_DEDUP_TIME;var l=this._keys.indexOf(this._selectedKey);(l+=c?1:-1)>=this._keys.length?l=0:l<0&&(l=this._keys.length-1),this._selectTab(this._keys[l])}this._wheelPrevTime=r}}},{WHEEL_FADE_TIME:1e3,WHEEL_ORIENT_COEFFICIENT:2.5,WHEEL_DEDUP_TIME:750,_hasHorizontalScroll:function(){return document.documentElement.scrollWidth>document.documentElement.offsetWidth},live:function(){this.__base.apply(this,arguments);var e=this;if(home.getData("i-scroll-changes.data.scroll_speedup_wheel"))return!1;var t=!!BEM.blocks["i-ua"].passiveEvents&&{passive:!1};document.addEventListener("wheel",(function(t){var i=e.getName(),n=$(t.target).closest("."+i+"__panels");n.length&&n.closest("."+i).bem(i)._onWheel(t)}),t)}})},function(e,t){BEM.DOM.decl("datetime",{onSetMod:{js:{inited:function(){var e=this;this._initDate(),this._prevDay=null,this._settedHour="",this._settedMin="",this._serverDate&&"Invalid Date"!==this._serverDate.toString()&&!isNaN(this._serverDate)&&(this.afterCurrentEvent(this._iterate),this._interval=setInterval((function(){e._iterate(),e._blink()}),1e3))}}},destruct:function(){clearInterval(this._interval),this.__base.apply(this,arguments)},_initDate:function(){this._serverDate=this.params.timestamp?new Date(this.params.timestamp+" GMT+0000"):null,this._loadDate=new Date},_iterate:function(){var e=new Date,t=new Date(this._serverDate.getTime()+(e.getTime()-this._loadDate.getTime()));this._proceedNewDate(t,e)},_proceedNewDate:function(e){var t,i;0===e.getUTCHours()&&0===e.getUTCMinutes()&&this._proceedNextDay(e),t=this._format(e.getUTCHours()),i=this._format(e.getUTCMinutes()),t===this._settedHour&&i===this._settedMin||(this._settedHour=t,this._settedMin=i,this.elem("hour").text(t),this.elem("min").text(i))},_proceedNextDay:function(e){var t=e.getDay();this._prevDay===t||this.hasMod("time-only","yes")||(this._drawNextDay(e,t),this._prevDay=t)},_drawNextDay:function(e,t){var i=this.findElem("date"),n=home.getData("datetime.data",{}),o=this.hasMod("short","yes")?n.monthShortArr:n.monthArr;i.length&&o&&i.replaceWith(home.view("datetime__date",{day:e.getDate(),month:o[e.getMonth()],wday:n.weekArr[t]}))},_format:function(e){return e>9?""+e:"0"+e},_blink:function(){this.toggleMod("time-hidden","yes")}})},function(e,t){BEM.DOM.decl({block:"news",baseMix:["mix-tabber","mix-tabber-labels","mix-tabber-labels-keyboard","mix-tabber-loader","mix-tabber-loader-keyboard","mix-tabber-labels-preloader","mix-tabber-slide2","mix-tabber-wheel"]},{_loadData:function(e){var t="personalRotating"===e;return"personal"===e||t?$.ajax({url:t?this.params.personalRotatingDataUrl:this.params.personalDataUrl,xhrFields:{withCredentials:!0},dataType:"json",timeout:15e3}).asPromise().then(function(t){return Array.isArray(t.items)&&t.items.length>=5?{nolinks:this.params.nolinks,statid:"news."+e,news:t.items.map((function(e){var t=home.parseUrl(e.obj.url),i={full:e.obj.title,ishot:e.obj.is_hot};return t.query.utm_source="morda_desktop",t.query.utm_medium="topnews_personal",this.params.yandex0&&(t.query.yandex="0"),i.href=home.makeUrl(t),this.params.showIcons&&Array.isArray(e.obj.annot_docs)&&e.obj.annot_docs[0]&&e.obj.annot_docs[0].source_name&&(i.agency_logo=e.obj.annot_docs[0].logo_square?e.obj.annot_docs[0].logo_square+"/logo-square":undefined,i.agency_name=e.obj.annot_docs[0].source_name,this.params.favoriteIcon&&(i.is_favorite=e.obj.is_favorite)),i}),this),showIcons:this.params.showIcons,newTabLinks:this.params.newTabLinks}:Promise.reject("Incorrect data")}.bind(this))["catch"](function(i){if(t)throw new Error(i);return home.error.logError({block:this.__self.getName(),meta:{key:e},sourceType:"network"},i),this.params.personalFallbackData}.bind(this)):this.__base.apply(this,arguments)},_getPanelHTML:function(e,t){return home.view("news__panel-content",t)},_renderLoader:function(){return home.view("news__loader")}},{live:function(){return this.__base.apply(this,arguments),!1}})},function(e,t){BEM.DOM.decl("news",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._inlineStocks=this.elem("inline-stocks");var e,t=this.params.storeClientTabs,i=this.__self._selectedTabs;t&&(e=i[t])&&this._keys.indexOf(e)>-1&&this._selectTab(e,{focus:!1,animate:!1})}}},hideCustomTab:function(){var e="custom";this._keys=this._keys.filter((function(t){return t!==e})),this._selectedKey===e&&this._selectTab(this._keys[this._keys.length-1]),this.elem("tab").filter('[data-key="custom"]').parent().remove(),this.dropElemCache("tab")},_changeTab:function(e){this.params.storeClientTabs&&(this.__self._selectedTabs[this.params.storeClientTabs]=e),this._inlineStocks&&this.toggleMod(this._inlineStocks,"hidden","yes","no","covid"===e&&this.params.covid_topnews),this.__base.apply(this,arguments)}},{_selectedTabs:{}})},function(e,t){BEM.DOM.decl({block:"news",modName:"animation",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._animatedHovered=!1,this._animatedFocused=!1,this._visible=!0}}},destruct:function(){this._deinitAnimation(),this.__base.apply(this,arguments)},_onPanelChange:function(){this.__base.apply(this,arguments),this._stopRotation(),this._startRotation()},_initAnimation:function(){this._timeout=setTimeout(function(){this._rotate(),this._startRotation()}.bind(this),this.params.firstInterval),this.channel("sys").on("visibilitychange",this._onVisibilityChange,this)},_shiftNews:function(e){$(".news__animated-item:not(.list__item_fade_in)").remove(),$(".list__item_fade_in").after(e),this.findElem("animated-item").each((function(e,t){$(t).attr("value",e+5)})),this.newsShifted=!0},_deinitAnimation:function(){this.channel("sys").un("visibilitychange",this._onVisibilityChange,this),this._stopRotation(),this.__base.apply(this,arguments)},_checkConditions:function(){!this._animatedHovered&&!this._animatedFocused&&this._visible?this._startRotation():this._stopRotation()},_onVisibilityChange:function(e,t){this._visible=!t.hidden,this._checkConditions()},_toggleHover:function(e){this._animatedHovered=e,this._checkConditions()},_toggleFocus:function(e){this._animatedFocused=e,this._checkConditions()},_startRotation:function(){!this._interval&&this._isAnimationEnabled&&(this._interval=setInterval(this._rotate.bind(this),this.params.interval))},_stopRotation:function(){this._interval&&(clearInterval(this._interval),this._interval=null),this._timeout&&(clearTimeout(this._timeout),this._timeout=null)},_rotate:function(){var e=this.findElem(this._$panel,"animation-list");if(e.length){var t=e.find(".list__item"),i=t.filter(".list__item_fade_in").next(".list__item");i.length||(i=t.eq(0)),this._showAnimatedItem(i)}},_showAnimatedItem:function(e){var t=this.findElem(this._$panel,"animation-list");if(t.length){var i=t.find(".list__item").filter(".list__item_fade_in");e.addClass("list__item_fade_in"),i.removeClass("list__item_fade_in").addClass("list__item_fade_out"),setTimeout(function(e){this.rotateNewsHtml&&(this.newsShifted||this._shiftNews(this.rotateNewsHtml),this.fadeInNewShifted||(this.fadeInNewShifted=!0,e.remove())),e.removeClass("list__item_fade_out")}.bind(this,i),this.__self.ANIMATION_DURATION)}}},{ANIMATION_DURATION:400,live:function(){var e=this.__base.apply(this,arguments);return this.liveBindTo("animated-item","mouseover mouseout",(function(e){var t=e.relatedTarget,i=e.target;t&&(t===i||$.contains(i,t))||this._toggleHover("mouseover"===e.type)})),this.liveBindTo("animated-item","focusin focusout",(function(e){if(("focusin"!==e.type||!$("html").hasClass("pointerfocus"))&&(this._toggleFocus("focusin"===e.type),"focusin"===e.type)){var t=$(e.target).closest(".list__item");t.hasClass("list__item_fade_in")||this._showAnimatedItem(t)}})),e}})},function(e,t){BEM.DOM.decl({block:"news",modName:"animation",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var e=this.findBlockOutside("widgets"),t=e&&e.params.editMode,i=this.findBlockOutside("widget"),n=i&&i.getInstance(),o=!n||n.getValue("autoreload");this._isAnimationEnabled=!t&&o&&"false"!==o,this._isAnimationEnabled&&this._initAnimation(),this.params.personalRotatingDataUrl&&this.params.personalRotating&&this._loadData("personalRotating").then(function(e){this.rotateNewsHtml=home.view("news__list-content",{newsList:e.news,extraStatPath:"animation.",hasAnimation:!0,nolinks:e.nolinks,showIcons:e.showIcons,shift:!0,statId:e.statid,newTabLinks:e.newTabLinks}),$(".list__item_fade_out").length||this._shiftNews(this.rotateNewsHtml)}.bind(this))["catch"](function(e){home.error.logError({block:this.__self.getName(),meta:{key:"personalRotating"},sourceType:"network"},e)}.bind(this))}}}})},function(e,t){BEM.DOM.decl("popup2",{onSetMod:{js:{inited:function(){this._parentPopup=undefined,this._zIndex=null,this._zIndexGroupLevel=null,this._scope=BEM.DOM.scope,this._isAttachedToScope=!1}},visible:{yes:function(){this.trigger("beforeOpen"),this._isAttachedToScope||(this._scope.append(this.domElem),this._isAttachedToScope=!0),this._captureZIndex()._bindToParentPopup().bindTo("pointerdown pointerclick",this._setPreventHideByClick)},"":function(){this.trigger("beforeClose")._releaseZIndex()._unbindFromParentPopup().unbindFrom("pointerdown pointerclick")}}},destruct:function(){this.delMod("visible"),this.__base.apply(this,arguments)},setScope:function(e){return this._scope=e,this._isAttachedToScope=!1,this},setContent:function(e){return BEM.DOM.update(this.domElem,e),this},_calcZIndexGroupLevel:function(){var e=this.params.zIndexGroupLevel,t=this._getParentPopup();return t&&(e+=t._zIndexGroupLevel),e},_setPreventHideByClick:function(){var e=this;do{e._preventHideByClick=!0,e=e._getParentPopup()}while(e)},_bindToParentPopup:function(){var e=this._getParentPopup();return e&&(e.on("beforeClose",this._onParentPopupClose,this),e.addChild&&e.addChild(this)),this},_unbindFromParentPopup:function(){return this._parentPopup&&this._parentPopup.un("beforeClose",this._onParentPopupClose,this),this._parentPopup=undefined,this},_onParentPopupClose:function(){this.delMod("visible")},_getParentPopup:function(){return this._parentPopup},_captureZIndex:function(){null===this._zIndexGroupLevel&&(this._zIndexGroupLevel=this._calcZIndexGroupLevel());var e=this.__self._visiblePopupsZIndexes,t=this._zIndexGroupLevel,i=e[t],n=this._zIndex;return i||(i=e[t]=[(t+1)*this.__self.ZINDEX_FACTOR]),this._zIndex=i[i.length-1]+1,i.push(this._zIndex),this._zIndex!==n&&this.domElem.css("z-index",this._zIndex),this},_releaseZIndex:function(){var e=this.__self._visiblePopupsZIndexes[this._zIndexGroupLevel];return e&&e.splice(e.indexOf(this._zIndex),1),this},_recaptureZIndex:function(){return this._releaseZIndex(),this._zIndexGroupLevel=null,this._captureZIndex()},getDefaultParams:function(){return{zIndexGroupLevel:0}}},{live:!0,_visiblePopupsZIndexes:(BEM.blocks.popup||{})._visiblePopupsZIndexes||{},ZINDEX_FACTOR:1e3})},function(e,t){BEM.DOM.decl("popup2",{onSetMod:{visible:{yes:function(){this.__base.apply(this,arguments),this._bindFocusEvents()},"":function(){this.__base.apply(this,arguments),this._unbindFocusEvents(),this._returnFocus()}}},setParams:function(e){for(var t in e)e.hasOwnProperty(t)&&(this.params[t]=e[t])},_bindFocusEvents:function(){this._lastFocused=$($.dom.getActiveElement()[0]||this._scope);var e=this._getFocusable(this.domElem);this._firstFocusable=e.first(),this._lastFocusable=e.last(),this._skipReturnFocus=!1,0!==this._firstFocusable.length?this.bindTo(this._lastFocused,"keydown",this._onLastFocusedKeyDown).bindTo(this._firstFocusable,"keydown",this._onFirstFocusableKeyDown).bindTo(this._lastFocusable,"keydown",this._onLastFocusableKeyDown):this._skipReturnFocus=!0},_unbindFocusEvents:function(){this.unbindFrom(this._firstFocusable,"keydown"),this.unbindFrom(this._lastFocusable,"keydown"),this.unbindFrom(this._lastFocused,"keydown")},_getFocusable:function(e){var t=$.identify(),i="a[href], link, ";return $.data(e,"popup-getFocusable-id",t),BEM.blocks["i-ua"].opera<13&&(i=""),e.find(i+'*[tabindex], button, input:not([type="hidden"]), textarea, select, menuitem').filter((function(){var e=!0;return!(parseInt($(this).prop("tabindex"),10)<0)&&($(this).parentsUntil('*[data-popup-getFocusable-id="'+t+'"]').each((function(){if("none"===$(this).css("display"))return e=!1})),e)}))},_returnFocus:function(){try{var e=document.activeElement;if(!$(e).closest(this.domElem).length)return}catch(t){}(this._parent||{})._skipReturnFocus||this._skipReturnFocus||this._lastFocused.focus()},_onLastFocusedKeyDown:function(e){this._lastFocused.is(this._scope)&&!this._lastFocused.is(e.target)||e.ctrlKey||e.altKey||e.metaKey||e.which===BEM.blocks.keycodes.TAB&&(e.preventDefault(),this[e.shiftKey?"_lastFocusable":"_firstFocusable"].focus())},_onFirstFocusableKeyDown:function(e){e.ctrlKey||e.altKey||e.metaKey||e.shiftKey&&e.which===BEM.blocks.keycodes.TAB&&(e.preventDefault(),this._lastFocused.focus())},_onLastFocusableKeyDown:function(e){e.shiftKey||e.ctrlKey||e.altKey||e.metaKey||e.which===BEM.blocks.keycodes.TAB&&(e.preventDefault(),this._lastFocused.focus())}},{})},function(e,t){BEM.DOM.decl("popup2",{attachToScope:function(e){return e&&(this._scope=e),this._scope.append(this.domElem),this._isAttachedToScope=!0,this}})},function(e,t){BEM.DOM.decl({block:"popup2",modName:"target"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._lastPopupDrawingCss={left:undefined,top:undefined,zIndex:undefined,display:undefined},this._lastTailDrawingCss={left:undefined,top:undefined},this._initialVisible=this.hasMod("visible")}},visible:{yes:function(){this.__base.apply(this,arguments),this.bindToWin("scroll resize",this._onWinScollAndResize).redraw(!0)},"":function(){this.__base.apply(this,arguments),this.unbindFromWin("scroll resize")}}},setContent:function(){return this.__base.apply(this,arguments).redraw()},_draw:function(){var e=this._calcBestDrawingParams();return this.setMod("direction",e.direction),t(this._lastPopupDrawingCss,this._calcDrawingCss(e))&&this.domElem.css(this._lastPopupDrawingCss),t(this._lastTailDrawingCss,this._calcTailDrawingCss(e))&&this.elem("tail").css(this._lastTailDrawingCss),this;function t(e,t){var i=!1;return Object.keys(t).forEach((function(n){var o=t[n];e[n]!==o&&(e[n]=o,i=!0)})),i}},redraw:function(e){return this.hasMod("visible","yes")||e?(this.setMod("outside","yes")._draw().delMod("outside"),this):this},_calcDrawingCss:function(e){var t,i=this._scope;return i.is(BEM.DOM.scope)||(t=i.offset(),e.top-=t.top,e.left-=t.left),{left:e.left,top:e.top}},_calcTailDrawingCss:function(e){return e.tail},calcPossibleDrawingParams:function(){var e=this._calcTargetDimensions(),t=this._calcViewportDimensions(),i=this._calcOffsets();return this.params.directions.map((function(n){var o={direction:n,width:0,height:0,left:0,top:0};return this._checkMainDirection(n,"bottom")?(o.top=e.top+e.height+i.main,o.height=t.bottom-o.top-i.viewport):this._checkMainDirection(n,"top")?(o.height=e.top-t.top-i.main-i.viewport,o.top=e.top-o.height-i.main):(this._checkSecondaryDirection(n,"center")?(o.height=t.bottom-t.top-2*i.viewport,o.top=e.top+(e.height-o.height)/2):this._checkSecondaryDirection(n,"bottom")?(o.height=e.top+e.height-t.top-i.secondary-i.viewport,o.top=e.top+e.height-o.height-i.secondary):this._checkSecondaryDirection(n,"top")&&(o.top=e.top+i.secondary,o.height=t.bottom-o.top-i.viewport),this._checkMainDirection(n,"left")?(o.width=e.left-t.left-i.main-i.viewport,o.left=e.left-o.width-i.main):(o.left=e.left+e.width+i.main,o.width=t.right-o.left-i.viewport)),this._checkSecondaryDirection(n,"right")?(o.width=e.left+e.width-t.left-i.secondary-i.viewport,o.left=e.left+e.width-o.width-i.secondary):this._checkSecondaryDirection(n,"left")?(o.left=e.left+i.secondary,o.width=t.right-o.left-i.viewport):this._checkSecondaryDirection(n,"center")&&this._checkMainDirection(n,"top","bottom")&&(o.width=t.right-t.left-2*i.viewport,o.left=e.left+e.width/2-o.width/2),o}),this)},_calcBestDrawingParams:function(){for(var e,t,i,n,o,s,r=this._calcPopupDimensions(),a=this._calcTargetDimensions(),c=this._calcViewportDimensions(),l=this.params.directions,u=l.length,d=0;d<u&&(e=l[d],t=this._calcPos(e,a,r),i=this._calcViewportFactor(t,c,r),(0===d||i>s||!s&&this.hasMod("direction",e))&&(n=e,s=i,o=t),!(s>this.__self.VIEWPORT_ACCURACY_FACTOR));d++);return{direction:n,left:o.left,top:o.top,tail:this._calcTailPos(n,a,r,o)}},_calcPopupDimensions:function(){var e=this.domElem.outerWidth(),t=this.domElem.outerHeight();return{width:e,height:t,innerWidth:this.domElem.innerWidth(),innerHeight:this.domElem.innerHeight(),area:e*t}},_calcTailDimension:function(){var e=this.elem("tail"),t=this.params.tailSize||e.outerWidth();return e.length>0&&"none"!==e.css("display")?t:0},_calcTargetDimensions:function(){},_calcViewportDimensions:function(){var e=BEM.DOM.win,t=e.scrollTop(),i=e.scrollLeft(),n=e.width();return{top:t,left:i,bottom:t+e.height(),right:i+n}},_calcPos:function(e,t,i){var n={},o=this._calcOffsets();return this._checkMainDirection(e,"bottom")?n.top=t.top+t.height+o.main:this._checkMainDirection(e,"top")?n.top=t.top-i.height-o.main:this._checkMainDirection(e,"left")?n.left=t.left-i.width-o.main:this._checkMainDirection(e,"right")&&(n.left=t.left+t.width+o.main),this._checkSecondaryDirection(e,"right")?n.left=t.left+t.width-i.width-o.secondary:this._checkSecondaryDirection(e,"left")?n.left=t.left+o.secondary:this._checkSecondaryDirection(e,"bottom")?n.top=t.top+t.height-i.height-o.secondary:this._checkSecondaryDirection(e,"top")?n.top=t.top+o.secondary:this._checkSecondaryDirection(e,"center")&&(this._checkMainDirection(e,"top","bottom")?n.left=t.left+t.width/2-i.width/2:this._checkMainDirection(e,"left","right")&&(n.top=t.top+t.height/2-i.height/2)),n},_calcTailPos:function(e,t,i,n){var o={},s=this._calcTailDimension()/2,r=this.params.tailOffset,a=this.params.tailSize;return this._checkMainDirection(e,"bottom")?o.top=-s:this._checkMainDirection(e,"top")?o.top=Math.floor(i.innerHeight-s):this._checkMainDirection(e,"left")?o.left=Math.floor(i.innerWidth-s):this._checkMainDirection(e,"right")&&(o.left=-s),this._checkSecondaryDirection(e,"right")?o.left=i.innerWidth-Math.ceil(Math.min(i.innerWidth,t.width)/2)-s-r:this._checkSecondaryDirection(e,"left")?o.left=Math.ceil(Math.min(i.innerWidth,t.width)/2)-s+r:this._checkSecondaryDirection(e,"bottom")?o.top=i.innerHeight-Math.ceil(Math.min(i.innerHeight,t.height)/2)-s-r:this._checkSecondaryDirection(e,"top")?o.top=Math.ceil(Math.min(i.innerHeight,t.height)/2)-s+r:this._checkSecondaryDirection(e,"center")&&(this._checkMainDirection(e,"top","bottom")?o.left=Math.ceil(i.innerWidth/2)-s+r:o.top=Math.ceil(i.innerHeight/2)-s+r),{top:o.top,left:o.left,width:a,height:a}},_calcViewportFactor:function(e,t,i){var n=this.params.viewportOffset,o=Math.max(e.left,t.left+n),s=Math.min(e.left+i.width,t.right-n),r=Math.max(e.top,t.top+n),a=Math.min(e.top+i.height,t.bottom-n);return o<s&&r<a?(s-o)*(a-r)/i.area:0},_calcOffsets:function(){var e=this.params,t=this._calcTailDimension();return{main:t>0?Math.max(e.mainOffset,Math.round(t*Math.SQRT1_2)):e.mainOffset,secondary:e.secondaryOffset,viewport:e.viewportOffset}},_checkMainDirection:function(e,t,i){return 0===e.indexOf(t)||i&&0===e.indexOf(i)},_checkSecondaryDirection:function(e,t){return e.indexOf("-"+t)>0},_checkDirection:function(e,t){return e.indexOf(t)>=0},_onWinScollAndResize:function(e){this.hasMod("visible","yes")&&this._draw()},getDefaultParams:function(){return $.extend(this.__base.apply(this,arguments),{mainOffset:0,secondaryOffset:0,viewportOffset:0,tailOffset:0,directions:this.__self.AVAILABLE_DIRECTIONS})},_setVisible:function(){this._initialVisible&&(this._initialVisible=!1,this.delMod("visible").setMod("visible","yes"))}},{VIEWPORT_ACCURACY_FACTOR:.99,AVAILABLE_DIRECTIONS:["bottom-left","bottom-center","bottom-right","top-left","top-center","top-right","right-top","right-center","right-bottom","left-top","left-center","left-bottom"]})},function(e,t){BEM.DOM.decl({block:"popup2",modName:"target"},{_calcOffsets:function(){var e=this.__base.apply(this,arguments);return this.params.mainOffset!==this.getDefaultParams().mainOffset&&(e.main=this.params.mainOffset),e}})},function(e,t){BEM.DOM.decl({block:"popup2",modName:"theme",modVal:"normal"},{getDefaultParams:function(){return $.extend(this.__base(),{mainOffset:5,viewportOffset:5})}})},function(e,t){BEM.DOM.decl({block:"popup2",modName:"autoclosable",modVal:"yes"},{onSetMod:{visible:{yes:function(){this.__self._visiblePopupsStack.unshift(this),this.afterCurrentEvent((function(){this.domElem&&this.hasMod("visible")&&this.bindToDoc("pointerclick",this._onDocClick)})),this.__base.apply(this,arguments)},"":function(){var e=this.__self._visiblePopupsStack;e.splice(e.indexOf(this),1),this.unbindFromDoc("pointerclick").__base.apply(this,arguments)}}},_onDocClick:function(e){this.hasMod("target","anchor")&&(this._anchor[0]===e.target||this._anchor.find(e.target).length>0)||(this._preventHideByClick?this._preventHideByClick=null:this.delMod("visible"))}},{live:function(){return BEM.DOM.doc.on("keydown",this._onDocKeyPress.bind(this)),this.__base()},_visiblePopupsStack:(BEM.blocks.popup||{})._visiblePopupsStack||[],_onDocKeyPress:function(e){BEM.blocks.keycodes.is(e.keyCode,"ESC")&&this._visiblePopupsStack.length&&this._visiblePopupsStack[0].__self.getName()===this.getName()&&this._visiblePopupsStack[0].delMod("visible")}})},function(e,t){!function(e){BEM.DOM.decl({block:"popup2",modName:"target",modVal:"anchor"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._anchor=null,this._destructor=null,this._fixedAnchor=undefined}},visible:{yes:function(){this.bindToDoc("documentchange",this._onWinScollAndResize),this.__base.apply(this,arguments)},"":function(){this.__base.apply(this,arguments),this.unbindFromDoc("documentchange")}}},destruct:function(){this._unbindFromDestructor(),this.__base.apply(this,arguments)},setAnchor:function(e){var t,i;return this._unbindFromDestructor()._unbindFromParentPopup(),this._anchor=e instanceof BEM.DOM?e.domElem:e,this._destructor=(t=this._anchor,i="_"+this.__self.getName()+"-destructor",t.addClass("i-bem "+i).bem(i)),this._fixedAnchor=undefined,this._bindToDestructor(),this._setVisible(),this.hasMod("visible")?this._recaptureZIndex()._bindToParentPopup().redraw():this._zIndexGroupLevel=null,this},_calcTargetDimensions:function(){var e=this._anchor,t=this._getOffsetOf(e);return{left:t.left,top:t.top,width:e.outerWidth(),height:e.outerHeight()}},_getOffsetOf:function(e){var t=e.offset();return"pageYOffset"in window&&(t.top-=window.pageYOffset-(document.documentElement.scrollTop||document.body.scrollTop),t.left-=window.pageXOffset-(document.documentElement.scrollLeft||document.body.scrollLeft)),t},_calcDrawingCss:function(t){var i=this.__base.apply(this,arguments);if("undefined"==typeof this._fixedAnchor&&(this._fixedAnchor=this._getFirstFixedParent(this._anchor)),this._fixedAnchor){var n=0,o=0,s=this._getFirstFixedParent(this._scope);if(s){var r=s.offset();n=r.left,o=r.top}i.left-=e(window).scrollLeft()-n,i.top-=e(window).scrollTop()-o}return e.extend(i,{position:this._fixedAnchor?"fixed":""})},_getFirstFixedParent:function(t){for(t=t[0];t;){if(1===t.nodeType&&"fixed"===e(t).css("position"))return e(t);t=t.parentNode}return null},_calcZIndexGroupLevel:function(){var e=this.__base.apply(this,arguments);return this._destructor.findBlocksOutside("z-index-group").reduce((function(e,t){return e+Number(t.getMod("level"))}),e)},_bindToDestructor:function(){return this._destructor.on("destruct",this._onPopupAnchorDestruct,this),this},_unbindFromDestructor:function(){return this._destructor&&this._destructor.un("destruct",this._onPopupAnchorDestruct,this),this},_onPopupAnchorDestruct:function(){this.domElem&&BEM.DOM.destruct(this.domElem)},_getParentPopup:function(){if(this._parentPopup===undefined){var e=this._anchor.closest(".popup, .popup2");this._parentPopup=this.findBlockOn(e,this.__self.getName())||this.findBlockOn(e,"popup")}return this._parentPopup}}),BEM.DOM.decl("_popup2-destructor",{destruct:function(){this.trigger("destruct"),this.__base.apply(this,arguments)}})}(jQuery)},function(e,t){BEM.DOM.decl({block:"popup2",modName:"hiding",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._anchorParents=null,this._isAnchorVisible=undefined,this._updateIsAnchorVisible=$.throttle(this._updateIsAnchorVisible,this.__self.UPDATE_TARGET_VISIBILITY_THROTTLING_INTERVAL,this)}},visible:{yes:function(){this._anchorParents=this._getAnchorParents(),this._bindToAnchorParents(),this.__base.apply(this,arguments)},"":function(){this.__base.apply(this,arguments),this._updateIsAnchorVisible.stop(),this._unbindFromAnchorParents(),this._anchorParents=null,this._isAnchorVisible=undefined}}},_getAnchorParents:function(){for(var e,t=this;t&&t._anchor;)e=t,t=t._getParentPopup();return $(e._anchor).parents()},setAnchor:function(e){return this.__base.apply(this,arguments),this._unbindFromAnchorParents(),this._isAnchorVisible=undefined,this.hasMod("visible")?(this._anchorParents=this._getAnchorParents(),this._bindToAnchorParents()):this._anchorParents=null,this},_unbindFromDestructor:function(){return this._updateIsAnchorVisible.stop&&this._updateIsAnchorVisible.stop(),this.__base.apply(this,arguments)},_calcDrawingCss:function(e){var t=this.__base.apply(this,arguments);return"undefined"==typeof this._isAnchorVisible&&(this._isAnchorVisible=this._calcIsAnchorVisible()),$.extend(t,{display:this._isAnchorVisible?"":"none"})},_calcIsAnchorVisible:function(){var e=this._anchor,t=this._getOffsetOf(e),i=t.left,n=t.top,o=i+e.outerWidth(),s=n+e.outerHeight(),r=this.getMod("direction"),a=Math.floor(this._checkDirection(r,"top")?n:s),c=Math.floor(this._checkDirection(r,"left")?i:o),l=!0;return this._anchorParents.each(function(e,t){if("BODY"===t.tagName)return!1;t=$(t);var i=/scroll|hidden|auto/,n=i.test(t.css("overflow-y")),o=i.test(t.css("overflow-x"));if(n||o){var s=this._getOffsetOf(t),r=Math.floor(s.top);if(a<r||r+t.outerHeight()<a)return l=!1;var u=Math.floor(s.left);return l=c>=u&&u+t.outerWidth()>=c}}.bind(this)),l},_bindToAnchorParents:function(){return this.bindTo(this._anchorParents,"scroll",this._onAnchorParentsScroll)},_unbindFromAnchorParents:function(){return this._updateIsAnchorVisible.stop(),this._anchorParents&&this.unbindFrom(this._anchorParents,"scroll"),this},_onAnchorParentsScroll:function(){this.redraw()._updateIsAnchorVisible()},_onWinScollAndResize:function(){this.hasMod("visible")&&(this.__base.apply(this,arguments),this._updateIsAnchorVisible())},_updateIsAnchorVisible:function(){if(this.domElem){var e=this._calcIsAnchorVisible();e!==this._isAnchorVisible&&(this._isAnchorVisible=e,this.redraw())}}},{UPDATE_TARGET_VISIBILITY_THROTTLING_INTERVAL:100})},function(e,t){BEM.DOM.decl("inline-stocks",{onSetMod:{js:function(){this.bindMouseEvents(),this.xivainitTimer=setTimeout(this.changeThis(this.initXiva),6e4)}},destruct:function(){clearTimeout(this.xivainitTimer);var e=home.getData("inline-stocks.xivas")||[],t=this._onXivaEvent;e.forEach((function(e){BEM.blocks["i-xiva"].stopListen(e.ch,t)}))},bindMouseEvents:function(){if(!window.device){var e={name:"hint",val:"visible",elem:".inline-stocks__item"};this.bindTo("item","mouseenter",this.getOnmouseenter(e)),this.bindTo("item","mouseleave",this.getOnmouseleave(e))}},getOnmouseenter:function(e){return function(t){var i=this;e.countdown||(e.countdown=setTimeout((function(){if(e.countdown=null,e.elem){var n=$(t.target).closest(e.elem);i.setMod(n,e.name,e.val)}else i.setMod(e.name,e.val)}),e.delay||250))}},getOnmouseleave:function(e){return function(t){if(clearTimeout(e.countdown),e.countdown=null,e.elem){var i=$(t.target).closest(e.elem);this.delMod(i,e.name)}else this.delMod(e.name)}},initXiva:function(){var e=home.getData("inline-stocks.xivas")||[],t=this,i=this._onXivaEvent=function(e){t.updateFunc(e.dt)};e.forEach((function(e){BEM.blocks["i-xiva"].listen(e.ch,e.ts,i)}))},updateFunc:function(e){if(e&&e.id){var t=e.id,i=this.elem("item","id",t);if(i.length){e=e.data&&e.data[0];var n=i.data("precision"),o=e["value"+n]||e.value,s=e["delta"+n]||e.delta;$(".inline-stocks__value_inner",i).html(o);var r=this.findElem(i,"cell","type","delta"),a=this.findElem(i,"cell","type","delta-label");if(s){var c=Number((s||"").replace("","-").replace(/[+%]/g,"").replace(",",".")),l="";this.delMod(r,"hidden"),r.html(s),a.html(s.replace("","-")),e.is_hot?c>0?l="up":c<0&&(l="down"):l="small",this.setMod(r,"change",l)}else this.setMod(r,"hidden","yes"),a.html("");var u=e.alt;if(!u){var d=home.getData("inline-stocks.alts")||{};d[t]&&(u=e.datetime?d[t].replace("%d",e.datetime).replace("%t",""):d[t].replace("%d",e.date).replace("%t",e.time||""))}u&&$(".inline-stocks__item__baloon_inner",i).html(u)}}}})},function(e,t){BEM.DOM.decl({block:"inline-stocks",modName:"new",modVal:"yes"},{onSetMod:{js:function(){this.__base(),this.bindTo("more","pointerclick",this.toggleMore),this.bindKeyTo("more","space enter",this.toggleMore),this.__self.popup&&this.__self.popup.domElem||this.createPopup(),this.__self.popup.setAnchor(this.domElem),this.__self.reloaded&&(this.toggleMore(),this.__self.reloaded=!1)}},toggleMore:function(){this.__self.popup.getMod("visible")||this.__self.reloaded||this.onShow(this.__self.popup),this.__self.popup.toggleMod("visible","yes")},onShow:function(e){var t=this;if(!this.data||this.data&&this.datats&&Number(new Date-this.datats)>6e4)return t.toggleState("load"),$.ajax({url:this.params.stocksUrl,dataType:"json",success:function(i){i&&i.Stocks?(t.needTopNewsUpdate&&(t.needTopNewsUpdate=!1,t.updateTopNews()),(i.Stocks&&i.Stocks.blocks||[]).forEach((function(e){(e.rows||[]).forEach((function(e){t.needTopNewsUpdate||t.updateFunc(e),BEM.channel("stocks").trigger("changed",e)}))})),t.datats=Number(new Date),t.data=i,t.createTable(i,e),t.onShow(e)):t.toggleState("error")},error:function(){t.toggleState("error")}});this.toggleState("tables"),home.stat.logDOMShow(e.domElem,{visibilityCheck:!1}),this.__self.popup._unbindFocusEvents(),this.__self.popup._bindFocusEvents()},createPopup:function(){var e=this,t=-25,i=this.domElem.offset().left,n=$(document.body).width();i>n/2&&(t=Math.floor(n/3)-i);var o=this.params.editShow,s=$(home.view("popup2",{mods:{view:"default",theme:"normal",autoclosable:"yes","alt-shadow":"yes",target:"anchor"},mix:"inline-stocks__popup-wrap",directions:["bottom-left"],mainOffset:0,secondaryOffset:t,content:(o?home.view("home-link",{mix:"inline-stocks__tune b-widget__control",href:home.getData("widgets.alt")?"?widget_edit=1#open=_stocks":"?edit=1#open=_stocks",attrs:{target:"_self","data-statlog":"news_rates_manual.popup.tune"},content:'<i class="b-ico widget__icon_prefs"></i>',stat:""}):"")+'<span class="inline-stocks__popup-close" role="button" tabindex="0"></span>'}));return this.__self.popupContent=this.elem("popup"),(s=this.findBlockInside(s,"popup2")).domElem.append(this.__self.popupContent),this.__self.popup=s,this.getInstance()&&this.bindTo(this.findElem(s.domElem,"tune"),"click",this.showForm),this.bindTo(this.findElem(s.domElem,"popup-close"),"click",this.toggleMore),this.bindKeyTo(this.findElem(s.domElem,"popup-close"),"space enter",this.toggleMore),s.on("beforeOpen beforeClose",(function(){e._elemCache&&e.elem("more").attr("aria-expanded",this.getMod("visible")?"false":"true")})),s},createTable:function(e){var t=this,i=home.view("inline-stocks__tables",e.Stocks),n=this.findElem(this.__self.popupContent,"tables");n.html(i),this.findElem(n,"table").each((function(){t.toggleTommorrowTitleVisibility($(this))}))},toggleTommorrowTitleVisibility:function(e){var t=this.getMod(e,"type");if("indexes"!==t){var i=e.find("tr:not(.inline-stocks__head)"),n=0;i.each((function(){var e=$(this).find("td").length;n<e&&(n=e)}));var o="hide";(n>3&&"currency"===t||n>2&&"cash"===t)&&(o="show"),e.find(".inline-stocks__head .inline-stocks__cell:last")[o]()}},updateFunc:function(e){if(this.__base(e),this.__self.popup){var t=this.elem("popup"),i=this.findElem(t,"row","id",e.id);if(i.length)try{var n=i.closest("table"),o=this.getMod(n,"type"),s=this.findElem(i,"row-title"),r=i.data("klimit"),a=home.view("inline-stocks__rows-by-type",{type:o,rows:e.data,klimit:r});i.empty().append(s,a),this.toggleTommorrowTitleVisibility(n)}catch(c){home.error.logError({block:"inline-stocks",method:"updateFunc",meta:{id:e.id}},c)}}},replaceCaps:function(e){return e.replace(/<(\w)>([^<]+)<\/\1>/g,(function(e,t,i){switch(t){case"c":return'<span class="b-stocks__caps">'+i+"</span>";case"d":return'<span class="b-stocks__numbers">'+i+"</span>";default:return e}}))},toggleState:function(e){this.setMod(this.__self.popupContent,"state",e)},getId:function(){return"_stocks-1"},getInstance:function(){return window.Widget&&Widget.Framework.get("_stocks-1")},showForm:function(e){var t=this;e.preventDefault(),this.toggleMore(),$(".b-wdgt-preferences").bem("b-wdgt-preferences").show($("#wd-wrapper-"+this.getId()).bem("widget"),(function(){t.needTopNewsUpdate=!0,t.data=null,t.__self.reloaded=!0,t.onShow(t.__self.popup),t.__self.popup.setAnchor($(document.body))}))},updateTopNews:function(){$("#wd-wrapper-_topnews-1").bem("widget").getInstance().reload(!1,!1,!0)}})},function(e,t){!function(e,t,i){var n=e.INTERNAL,o=n.ELEM_DELIM,s={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1},r=n.buildClass,a=n.buildClasses,c={};function l(e,t,i){(e[t]||(e[t]=[])).unshift(i)}function u(e,t){return t.modName?function(i){(i._curBlock.mods||{})[t.modName]===t.modVal&&e(i)}:e}function d(e,i){var n,o=t.isArray(i);return t.isArray(e)?o?n=e.concat(i):(n=e).push(i):o?(n=i).unshift(e):n=[e,i],n}var h={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"},m=/["&<>]/g;e.HTML={decl:function(e,i){"string"==typeof e&&(e={block:e}),e.name&&(e.block=e.name);var n=c[e.block]||(c[e.block]={});i.onBlock&&l(n,"_block",u(i.onBlock,e)),i.onElem&&(t.isFunction(i.onElem)?l(n,"_elem",u(i.onElem,e)):t.each(i.onElem,(function(t,i){l(n,"_elem"+("*"===t?"":o+t),u(i,e))})))},build:function(e){var t=new this.Ctx(e);return t._buildAll(),t._flush()},Ctx:t.inherit({__constructor:function(e){this._buffer=[],this._params=e,this._tParams=null,this._tParamsChanges=null,this._curBlock=void 0},pos:function(){return this._params._pos},isFirst:function(){return 1===this._params._pos},isLast:function(){var e=this._params;return e._pos===e._siblingsCount},params:function(e){return void 0===e?this._params:(this._params=e,this)},param:function(e,i,n,o){var s=this._params;return void 0===i?s[e]:(n||!(e in s)?s[e]=i:o&&(s[e]=t.extend(i,s[e])),this)},attrs:function(e,t){return this.param("attrs",e,t,!0)},attr:function(e,t,i){if(void 0===t)return(this._params.attrs||{})[e];var n=this._params.attrs;return n?(i||!(e in n))&&(n[e]=t):(this._params.attrs={})[e]=t,this},tag:function(e,t){return this.param("tag",e,t)},cls:function(e,t){return this.param("cls",e,t)},mods:function(e,t){return this.param("mods",e,t,!0)},mod:function(e,t,i){if(void 0===t)return(this._params.mods||{})[e];var n=this._params.mods;return n?(i||!(e in n))&&(n[e]=t):(this._params.mods={})[e]=t,this},mix:function(e,t){var i=this._params;return void 0===e?i.mix:(i.mix=t||!("mix"in i)?e:i.mix.concat(e),this)},js:function(e){return this.param("js",e)},content:function(e,t){return this.param("content",e,t)},wrapContent:function(e){var t=this._params;return e.content=t.content,t.content=e,this},beforeContent:function(e){var t=this._params;return t.content=d(e,t.content),this},afterContent:function(e){var t=this._params;return t.content=d(t.content,e),this},wrap:function(e){var t=this._params;return e.block||(e._curBlock=this._curBlock),e.content=t._wrapper?t._wrapper:t,t._wrapper=e,this},tParam:function(e,t){var i=this._tParams||(this._tParams={});if(void 0===t)return i[e];var n=this._tParamsChanges||(this._tParamsChanges={});return e in n||(n[e]=i[e]),i[e]=t,this},generateId:function(){return t.identify()},stop:function(){this._params._isStopped=!0},_buildAll:function(){var e=this._buffer,i=this._params,n=typeof i;if("string"===n||"number"===n)e.push(i);else if(t.isArray(i))for(var o,s,r=0,a=i.length;r<a;)this._params=o=i[r++],"string"===(s=typeof o)||"number"===s?e.push(o):o&&(o._pos=r,o._siblingsCount=a,this._buildByDecl());else i&&(this._params._pos=this._params._siblingsCount=1,this._buildByDecl())},_build:function(){var e,i=this._buffer,n=this._params,o=n.tag||"div",c=n.block||n.elem,l=c&&(n.block||this._curBlock.block),u=!1;n.js&&((e={})[r(l,n.elem)]=!0===n.js?{}:n.js,u=!n.elem),i.push("<",o),(c||n.cls)&&(i.push(' class="'),c&&(a(l,n.elem,n.mods,i),n.mix&&t.each(n.mix,(function(t,n){n&&(i.push(" "),a(n.block,n.elem,n.mods,i),n.js&&((e||(e={}))[r(n.block,n.elem)]=!0===n.js?{}:n.js,u||(u=!n.elem)))}))),n.cls&&i.push(c?" ":"",n.cls),u&&i.push(" i-bem"),i.push('"')),e&&i.push(' onclick="return ',JSON.stringify(e).replace(m,(function(e){return h[e]})),'"'),n.attrs&&t.each(n.attrs,(function(e,t){null!=t&&!1!==t&&i.push(" ",e,'="',t.toString().replace(/"/g,"&quot;"),'"')})),s[o]?i.push("/>"):(i.push(">"),"undefined"!=typeof n.content&&(this._params=n.content,this._buildAll()),i.push("</",o,">"))},_flush:function(){var e=this._buffer.join("");return delete this._buffer,e},_buildByDecl:function(){var e=this._curBlock,i=this._params;if(i._curBlock&&(this._curBlock=i._curBlock),i.block&&(this._curBlock=i),!i._wrapper){if(i.block||i.elem){var n,s=c[this._curBlock.block];if(s)if(i.elem?(n=s["_elem"+o+i.elem],s._elem&&(n=n?n.concat(s._elem):s._elem)):n=s._block,n)for(var r,a=0;(r=n[a++])&&(r(this),!i._isStopped););}if(i._wrapper)return i._curBlock=this._curBlock,this._params=i._wrapper,this._buildAll()}var l=this._tParamsChanges;if(this._tParamsChanges=null,this._build(),this._curBlock=e,l){var u=this._tParams;t.each(l,(function(e,t){void 0===t?delete u[e]:u[e]=t}))}}})}}(BEM,jQuery)},function(e,t){BEM.DOM.decl("widget",{onSetMod:{js:function(){this.tuned=!1,this.altWidgets=home.getData("widgets.alt"),this._initWidget(),this.listenToXiva(),this.altWidgets?(this.hasMod("collapsed","yes")&&this.createControl(),$("html").hasClass("i-ua_browser_touch")?this.createControl():this.bindTo("mouseenter focusin",(function(){this.createControl()}))):this.createControl(),this.channel("widget").on("hidePreferences",this.onHidePreferences,this),this.channel("widget").on("reload",this.onReload,this)},drag:{on:function(){this.createDrag(),this.getInstance().stopAutoReload()},"":function(){this.getInstance().queueAutoReload()}},removed:function(e,t){var i=this.getInstance(),n="yes"===t;i&&(i.params.removed=n),this.altWidgets&&this.setMod("alt-removed","yes"),this.channel("widget").trigger("commit",{type:n?"remove":"recover",id:this.getId(),widget:this}),n?this.getInstance().stopAutoReload():this.getInstance().queueAutoReload()},state:{add:function(){this.getSaveButtons().appendTo(this.domElem),this.setMod("drag","on"),this.getInstance().stopAutoReload(),this.bindToWin("widgetLoaded",(function(e){e.id===this.getId()&&(this.elem("buttons").height(41).height(40),this.elem("accept").focus())}))},remove:function(){var e=this.__self.getRmPopup(),t=this.changeThis((function(){this.setMod("removed","yes")})),i=this.changeThis((function(){this.delMod("state")}));this.altWidgets?e.show(this,t,i,this.domElem.closest(".widgets-list__item")):e.show(this,t,i)},"":function(){this.elem("buttons").detach(),this.getInstance().queueAutoReload(),this.unbindFromWin("widgetLoaded")}}},_initWidget:function(){var e=this.params.initParams;e&&(this._instance=Widget.Bind(this.params.id,e.params))},destruct:function(){this.channel("widget").un("hidePreferences",this.onHidePreferences,this),this.channel("widget").un("reload",this.onReload,this),this.__base.apply(this,arguments)},onHidePreferences:function(e,t){this===t.elem&&this.hasMod("state","add")&&!this.tuned&&this.abortAdd()},onReload:function(e,t){this.control2&&this.domElem.is(t.widget.$().parent())&&(this.control2=null,this.altWidgets&&this.hasMod("collapsed","yes")&&this.createControl())},createControl:function(){if(!this.hasMod("empty","yes")&&(this.control2&&!this.control2.domElem&&(this.control2=null),!this.control2)){var e=this.getId(),t=this.altWidgets;if(!(t&&e.indexOf("_teaser")>-1)){var i,n=this.getInstance(),o={};n?i=(o=n.params).havePrefsFrom&&o.isWidgetWorkNormal:(i=this.params.showPrefs&&-1===["_afisha","_teaser","_geo","_stream_now","_covid","_covid_isolation","_covid_speed"].indexOf(e),o.prefsUrl=t?"/?widget_edit=1#open="+this.params.id:"/?edit=1#open="+this.params.id,("_services"===e&&home.getData("widgets.disable_services_prefs")||"_weather"===e&&home.getData("widgets.disable_weather_prefs"))&&(i=null)),this.control2=BEM.blocks["widget-control"].create(this.domElem,{name:this.params.id.replace(/^_/,"").replace(/-.+$/,""),statName:this.params.isWidgetList?"custom_widget":undefined,hidden:this.hasMod("collapsed","yes"),items:{hide:!this.params.isWidgetList,settings:i,settingsHref:o.prefsUrl,remove:this.params.isWidgetList},customItems:this._getMenuCustomItems()}),this.control2.on({settings:this.showPrefs,remove:this.remove,hide:this._toggle.bind(this,!1),show:this._toggle.bind(this,!0)},this)}}},_getMenuCustomItems:function(){return[]},createDrag:function(){return this.elem("drag").length||(this.domElem.append('<div class="widget__drag"></div>'),this.dropElemCache("drag")),this.elem("drag")},getInstance:function(){return this._instance},getId:function(){return this.params.id||this.getInstance().id},markChanged:function(e,t){var i=this.getInstance();i&&i.markChanged(e,t),t&&(this.tuned=!0,this.channel("widget").trigger("tuned",{type:"tuned",elem:this}))},remove:function(){this.hasMod("drag","on")?this.setMod("removed","yes"):this.setMod("state","remove"),this.channel("widget").trigger("remove",{id:this.getId(),widget:this})},showPrefs:function(){if(!this.hasMod("mode","plain"))return this.__self.queryPrefs(this),!1},accept:function(){this.channel("widget").trigger("commit",{type:"add",id:this.getId()}),this.delMod("state")},getSaveButtons:function(){var e=this.elem("buttons");return e.length||(this.dropElemCache("buttons"),e=$(home.view("widget__save-buttons",{yandex:this.hasMod("yandex")}))),e},abortAdd:function(){var e=this.getInstance();e&&(e.params.removed=!0),this.channel("widget").trigger("abort-add",{elem:this}),this.destruct()},listenToXiva:function(){var e=this.getInstance();this.params.xivas&&e&&e.params.rebind&&this.params.xivas.forEach((function(e){BEM.blocks["i-xiva"].listen(e.ch,e.ts,this.changeThis((function(){this.reloading||(this.reloading=!0,this.getInstance().iReload(this.changeThis((function(){this.reloading=!1})),24e4))})))}),this)},reload:function(){this.getInstance().reload()},_toggle:function(e){this.toggleMod("collapsed","yes",!e),BEM.blocks["i-reposition-event"].trigger()}},{live:function(){return this.liveBindTo("force-remove","pointerclick",(function(){this.setMod("removed","yes")})),this.liveBindTo("accept","pointerclick",(function(){this.accept()})),this.liveBindTo("reject","pointerclick",(function(){this.abortAdd()})),this.liveBindTo("remove","pointerclick",(function(){this.remove()})),this.liveBindTo("prefs","pointerclick",(function(){this.showPrefs()})),!1},queryPrefs:function(e){this.getPrefsPopup().show(e,(function(){this.reload(),BEM.channel("widget").trigger("settingsSaved")}))},getRmPopup:function(){return this.rmPopup||(this.rmPopup=$(".b-wdgt-remove").bem("b-wdgt-remove")),this.rmPopup},getPrefsPopup:function(){return this.prefsPopup||(this.prefsPopup=$(".b-wdgt-preferences").bem("b-wdgt-preferences")),this.prefsPopup}})},function(e,t){BEM.DOM.decl({name:"widget",modName:"name",modVal:"stocks"},{reload:function(){"_stocks-1"===this.params.id?this.reloadTopNews():this.__base.apply(this)},reloadTopNews:function(){$("#wd-wrapper-_topnews-1").bem("widget").getInstance().reload(!1,!1,!0)}})},function(e,t){BEM.DOM.decl({name:"widget",modName:"name",modVal:"topnews"},{onSetMod:{collapsed:function(e,t){this.__base.apply(this,arguments),this.channel("topnews").trigger("collapse",{collapse:"yes"===t})}}})},function(e,t){BEM.DOM.decl({name:"widget",modName:"name",modVal:"teaser"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.channel("topnews").on("collapse",(function(e,t){this.toggleMod("mini","yes",t.collapse)}),this)}}}})},function(e,t){BEM.DOM.decl({name:"widget",modName:"name",modVal:"geo"},{_getMenuCustomItems:function(){return[{id:"geo",icon:"geo",text:home.l10n("head.region"),href:home.getData("region.tuneUrl")}]}})},function(e,t){BEM.DOM.decl("widget-control",{onSetMod:{js:{inited:function(){this._statName=this.params.statName||home.view("widget-control__stat-map")[this.params.name]||this.params.name,this.bindTo("menu","pointerclick",this._createAndShowDropdown),this.bindKeyTo("menu","enter space",this._createAndShowDropdown)}},collapsed:function(e,t){var i=home.getData("media-grid."+("yes"===t?"blocks_fold_url":"blocks_unfold_url"));i&&((new Image).src=i+this.params.name)}},setRoot:function(e){this._$root=e},_updatePosition:function(){this._$root&&this.__self._findTitle(this._$root).append(this.domElem)},_createAndShowDropdown:function(e){if(e.preventDefault(),!this._popupInited){this._popupInited=!0;var t,i=this.elem("menu"),n=this.params.items,o=[];this.params.customItems&&this.params.customItems.forEach((function(e){o.push({text:e.text,icon:{mods:{glyph:e.icon}},elemMods:{type:"link"},href:e.href,attrs:{"data-type":e.id}})})),n.settings&&o.push({text:home.l10n("widgetcontrol.setup"),icon:{mods:{glyph:"settings"}},elemMods:{type:"link"},href:n.settingsHref,attrs:{"data-type":"settings"}}),n.hide&&o.push({text:home.l10n("widgetcontrol.hide"),icon:{mods:{glyph:"hide"}},elemMods:{type:"link"},attrs:{"data-type":"hide"}}),n.hide2&&o.push({text:home.l10n("widgetcontrol.hide2"),icon:{mods:{glyph:"hide2"}},elemMods:{type:"link"},attrs:{"data-type":"hide"}}),n.remove&&o.push({text:home.l10n("widgetcontrol.delete"),icon:{mods:{glyph:"delete"}},elemMods:{type:"link"},attrs:{"data-type":"remove"}}),o.forEach((function(e){e.attrs[home.stat.attr]=this._statName+".widget_control."+e.attrs["data-type"],e.href||(e.attrs.tabindex=0)}),this),t=$(home.view("popup2",{mods:{view:"default",theme:"normal",target:"anchor",autoclosable:"yes","alt-shadow":"yes"},mix:"dropdown2__popup",attrs:{role:"menu"},directions:["bottom-left","top-left","left-left"],hasTail:!1,mainOffset:6,secondaryOffset:-10,content:home.view("menu",{mods:{type:"navigation",theme:"normal",view:"default",tone:"default",size:"m2"},items:[{items:o}]})})),i.append(t),BEM.DOM.init(t);var s=t.bem("popup2");s.onFirst("beforeOpen",(function(){home.stat.logDOMShow(this.domElem)})),t.find(".menu").bem("menu").on("click",(function(e,t){s.delMod("visible");var i=t.item.data("type");this.trigger(i),"hide"===i&&(this.setMod("collapsed","yes"),this._updatePosition(),home.stat.logPath("show",this._statName+".widget_control.show"))}),this)}}},{_findTitle:function(e){for(var t=[".divjson-title__header",".content-tabs__head",".news__tabs",".weather__geo",".weather__header-links",".streamnow__tabs",".tvstream__tabs",".covid_closable_yes .covid__tab-wrapper_last",".covid-speed__tab-wrapper_last",".media-service__header_inline-desc_yes .media-service__title-wrapper",".traffic__header","h1:not(.a11y-hidden, .covid__tab-wrapper)","h2"],i=0;i<t.length;++i){var n=e.find(t[i]).filter(":visible");if(n.length)return n.eq(0)}return $()},create:function(e,t){var i=$(home.view("widget-control",{mods:{collapsed:t.hidden?"yes":undefined,"expanded-only":t.removeOnHide?"yes":"no"},params:t})),n=this._findTitle(e);setTimeout((function(){i.addClass("widget-control_animated_yes")}),50),n.length?n.append(i):(e.append(i),i.addClass("widget-control_root_yes")),BEM.DOM.init(i);var o=i.bem("widget-control");return o.setRoot(e),o},live:function(){function e(e){this.trigger("show"),this.delMod("collapsed"),this._updatePosition(),e.preventDefault(),home.stat.logPath("click",this._statName+".widget_control.show")}this.liveBindTo("show","pointerclick",e),this.liveBindKey("show","enter space",e)}})},function(e,t){BEM.DOM.decl("dropdown2",{onSetMod:{js:{inited:function(){this._switcher=null,this._popup=null}},opened:{yes:function(){if(this.hasMod("disabled"))return!1;this.trigger("beforeOpen").getPopup().setAnchor(this.getSwitcher()).setMod("visible","yes").on("beforeClose",this._onPopupBeforeClose,this)},"":function(){this.trigger("beforeClose").getPopup().delMod("visible").un("beforeClose",this._onPopupBeforeClose,this)}},disabled:{"*":function(e,t){this.getSwitcher().setMod(e,t)},yes:function(){this.delMod("opened")}}},getPopup:function(){return this._popup||(this._popup=this.findBlockInside("popup2")),this._popup},getSwitcher:function(){return this._switcher||(this._switcher=this.findBlockInside(this.getMod("switcher"))),this._switcher},_onPopupBeforeClose:function(){this.delMod("opened")},_onSwitcherClick:function(e){this._switcher||(this._switcher=e.block),this.toggleMod("opened","yes")}},{live:!0})},function(e,t){BEM.DOM.decl("dropdown2",{onSetMod:{opened:function(e,t){if(this.__base.apply(this,arguments),this._switcher){var i="yes"===t?"true":"false",n=this._switcher.domElem||this._switcher;n.attr("aria-expanded",i)}}}})},function(e,t){BEM.DOM.decl({block:"dropdown2",modName:"switcher",modVal:"elem"},{getSwitcher:function(){return this._switcher||(this._switcher=this.findElem("switcher")),this._switcher}},{live:function(){return this.liveBindTo("switcher","pointerclick",(function(e){this._onSwitcherClick(e),e.preventDefault()})),this.liveBindKey("switcher","space enter",(function(e){var t=this.elem("switcher").prop("tagName").toLowerCase();"button"!==t&&("a"!==t&&e.which===BEM.blocks.keycodes.ENTER||e.which===BEM.blocks.keycodes.SPACE)&&(this._onSwitcherClick(e),e.preventDefault())})),this.__base()}})},function(e,t){var i;i=BEM.channel("i-reposition-event"),BEM.channel("i-scroll-event").on("scroll",(function(e,t){i.trigger("reposition",t)})),BEM.decl("i-reposition-event",{},{trigger:function(){i.trigger("reposition",$(window).scrollTop())}})},function(e,t){window.home=window.home||{},home.throttle=function(e,t,i){var n,o,s,r=null,a=0;i||(i={});var c=function(){a=!1===i.leading?0:(new Date).getTime(),r=null,s=e.apply(n,o),r||(n=o=null)};return function(){var l=(new Date).getTime();a||!1!==i.leading||(a=l);var u=t-(l-a);return n=this,o=arguments,u<=0||u>t?(r&&(clearTimeout(r),r=null),a=l,s=e.apply(n,o),r||(n=o=null)):r||!1===i.trailing||(r=setTimeout(c,u)),s}}},function(e,t){!function(){"use strict";BEM.decl("i-scroll-event",{},{init:function(){var e=100;home.getData("i-scroll-changes.data.scroll_slowdown_scroll_event")&&(e=1);var t=BEM.channel("i-scroll-event"),i=home.throttle((function(){var e=$(o).scrollTop();t.trigger("scroll",e)}),e),n=!!BEM.blocks["i-ua"].passiveEvents&&{passive:!0},o=this.getScrollElem(),s=function(e){var t="scroll"===e?o:window;"addEventListener"in window?t.addEventListener(e,i,n):t.attachEvent("on"+e,i)};s("scroll"),s("resize"),s("orientationchange")},getScrollElem:function(){return window}}),setTimeout((function(){BEM.blocks["i-scroll-event"].init()}),0)}()},function(e,t){var i;i=$.ajax,$.ajax=function(e,t){var n=i(e,t);return n.asPromise=function(){return new Promise((function(t,i){n.then(t,(function(t,n,o){var s;if(!e||"object"==typeof e&&!e.url)(s=new Error("Url is not defined")).sourceType="logic";else{(s=new Error("Cannot load ajax request")).sourceType="abort"===n?"logic":"parsererror"===n?"backend":"network",s.errorName=n,s.errorText=o,t.responseJSON&&(s.json=t.responseJSON);var r=home.parseUrl("object"==typeof e?e.url:e);s.url=r.host+r.path,s.meta={},"error"!==n&&(s.meta[n]=1),t.status&&(s.meta.status=t.status)}s.name="blockerror",i(s)}))}))},n}},function(e,t){BEM.DOM.decl("teaser",{_install:function(){return this.params.yaCounterId&&(BEM.blocks["i-metrika"].add({id:this.params.yaCounterId,triggerEvent:!0}),this.params.bannerid&&BEM.blocks["i-bannerid"].save(this.params.bannerid)),!0}},{live:function(){return this.liveBindTo("link","pointerclick",(function(){return this._install()})),!0}})},function(e,t){BEM.decl("i-metrika",{},{add:function(e){var t=(e=e||{}).id;if(!t)throw new Error("i-metrika: Counter id wasn't passed");var i=$.Deferred();try{window["yaCounter"+t]?i.resolve(window["yaCounter"+t]):(window["yaCounter"+t]=new window.Ya.Metrika(e),$(document).one("yacounter"+t+"inited",(function(){i.resolve(window["yaCounter"+t])})))}catch(n){i.reject()}return i.promise()}})},function(e,t){BEM.DOM.decl({block:"teaser",modName:"install",modVal:"download"},{_install:function(){return this.__base.apply(this),this._downloadInstance||(this._downloadInstance=BEM.create("i-install-download",this.params)),this._downloadInstance.download(),!1}})},function(e,t){BEM.DOM.decl("popup",{getDefaultParams:function(){return{zIndexGroupLevel:0,directions:[{to:"bottom",axis:"center",tail:{axis:"center"}},{to:"top",axis:"center",tail:{axis:"center"}},{to:"right",axis:"middle",tail:{axis:"middle"}},{to:"left",axis:"middle",tail:{axis:"middle"}}],tail:{width:24.04,height:12.02,offset:{left:15,right:15,top:15,bottom:15}},duration:150}},onSetMod:{js:{inited:function(){this._cache={},this._viewport=BEM.DOM.win,this._scope=BEM.DOM.scope,this._channel=BEM.channel("popups"),this._inContainer=!1,this._isParentFixed=!1,this._owner=null,this._destructor=null,this._userPosition=null,this._parent=null,this._childs=[],this._isShown=!1,this._isHiding=!1,this._positions={},this._currPos={},this._visibilityFactor=null,this._direction=!1,this._directions={};var e=this.getDefaultParams(),t=this.params,i=this._repackDirParams(e.directions),n=t.generateDirections?this._generateDirections:t.directions,o=this._repackDirParams(n);t.tail&&(this.params.tail=this._mergeParams(e.tail,t.tail)),this._order=o.keys.map((function(e){var t=o.directions[e],n=i.directions[e];return n||(n=i.directions[t.to]),this._directions[e]=this._mergeParams(n,t,{tail:this._tailParamsHook}),e}),this),this._zIndex=null,this._zIndexGroupLevel=null}},visibility:{visible:function(){this._onShown()},"":function(){this._onHidden()}}},show:function(e){var t;if(e instanceof BEM)t=e.domElem.eq(0);else if(e instanceof $)t=e;else if(!e)return;if(t){if(this._owner&&t[0]!==this._owner[0]&&this.delMod("visibility"),this._owner=t,t.length){var i="_"+this.__self.getName()+"-destructor";this._destructor=t.addClass("i-bem "+i).bem(i)}var n=this._findParent(t);n&&this.setParent(n)}else this._userPosition=e;return this.setMod("visibility","outside").repaint()},hide:function(e){if(this._isHiding)return this;if(this._isShown){var t=$.Event("before-hide");if(this.trigger(t,e),t.isDefaultPrevented())return this;if(this._isHiding=!0,this._childs.forEach((function(e){e.hide&&e.hide(),e.delMod("visible")})),this.hasMod("animate","yes")&&!this.hasMod("fade-out","no")){var i=this;return this.beforeHide((function(){i.domElem&&i.delMod("visibility")})),this}}return this.delMod("visibility")},toggle:function(e,t){return this._isShown&&!this._isHiding?this.hide(t):this.show(e||this._owner)},repaint:function(){this._moveToContainer();var e=this._pickDirection();return this.setMod("to",e.to)._show(this._positions[e.key],this._tailPos&&this._tailPos[e.key]),this},getCurrPos:function(){return this._currPos},getCurrDirection:function(){return this._direction},setScope:function(e){return this._scope=e,this._inContainer=!1,this},setContent:function(e){return BEM.DOM.update(this.elem("content"),e),this._resetDefault(),this._isShown&&this.repaint(),this},isShown:function(){return this._isShown},setParent:function(e){return this._parent=e,this._isParentFixed=e.hasMod("position","fixed"),e.addChild&&e.addChild(this),this},addChild:function(e){for(var t=this._childs,i=t.length,n=0;n<i;n++)if(t[n]._uniqId===e._uniqId)return;e.on("hide",(function(){this.removeChild(e)}),this),e.on("beforeClose",(function(){this.afterCurrentEvent((function(){this.removeChild(e)}))}),this),t.push(e)},_getParentPopup:function(){return this._parent},removeChild:function(e){for(var t=this._childs,i=t.length,n=0;n<i;n++)if(t[n]._uniqId===e._uniqId)return void t.splice(n,1)},setSize:function(e){return e&&(this._resetDefault(),this.domElem.css(e),this._isShown&&!this._isHiding&&this.repaint()),this},_show:function(e,t){return this._currPos=e,t&&this.elem("tail").removeAttr("style").css(t),this.domElem.css(e),(!this._isShown||this._isHiding)&&this.hasMod("animate","yes")&&!this.hasMod("fade-in","no")&&this.afterShow(),this._isHiding=!1,this.setMod("visibility","visible"),this},_onShown:function(){this._isShown||this._bindCompatibility(),this.bindToDoc("keydown",(function(e){e.which===BEM.blocks.keycodes.ESC&&0===this._childs.length&&this.hide({source:"esc-key"})})),this._attachRepaintOnResize(),this._bindFocusEvents(),this._attachUnder(),this._isShown=!0,this.hasMod("autoclosable","yes")&&this.afterCurrentEvent((function(){this.domElem&&this._enableAutoclosable()})),this.hasMod("adaptive","yes")&&this._enableAdaptive(),this._channel.on("hide",this.hide,this),this.trigger("show")},_bindCompatibility:function(){this._captureZIndex(),this.__self._visiblePopupsStack.unshift(this),this.trigger("beforeOpen")},_unbindCompatibility:function(){this.trigger("beforeClose");var e=this.__self._visiblePopupsStack;e.splice(e.indexOf(this),1),this._releaseZIndex()},_onHidden:function(){this._isShown&&this._unbindCompatibility(),this.unbindFromDoc("keydown"),this._detachRepaintOnResize(),this._unbindFocusEvents(),this.hasMod("autoclosable","yes")&&this._disableAutoclosable(),this.hasMod("adaptive","yes")&&this._disableAdaptive(),this._detachUnder(),this._cache={},this._isShown=!1,this._isHiding=!1,this._channel.un("hide"),this._returnFocus(),this.trigger("hide")},_attachRepaintOnResize:function(){window.attachEvent&&this.domElem[0].attachEvent("onresize",this.__self._enforcePageRepaint)},_detachRepaintOnResize:function(){window.detachEvent&&this.domElem[0].detachEvent("onresize",this.__self._enforcePageRepaint)},_bindFocusEvents:function(){this._lastFocused=$($.dom.getActiveElement()[0]||this._scope);var e=this.__self._getFocusable(this.elem("content"));this._firstFocusable=e.first(),this._lastFocusable=e.last(),this._skipReturnFocus=!1,0!==this._firstFocusable.length?this.bindTo(this._lastFocused,"keydown",this._onLastFocusedKeyDown).bindTo(this._firstFocusable,"keydown",this._onFirstFocusableKeyDown).bindTo(this._lastFocusable,"keydown",this._onLastFocusableKeyDown):this._skipReturnFocus=!0},_unbindFocusEvents:function(){this.unbindFrom(this._firstFocusable,"keydown"),this.unbindFrom(this._lastFocusable,"keydown"),this.unbindFrom(this._lastFocused,"keydown")},_onLastFocusedKeyDown:function(e){this._lastFocused.is(this._scope)&&!this._lastFocused.is(e.target)||e.ctrlKey||e.altKey||e.metaKey||e.which===BEM.blocks.keycodes.TAB&&(e.preventDefault(),this[e.shiftKey?"_lastFocusable":"_firstFocusable"].focus())},_onFirstFocusableKeyDown:function(e){e.ctrlKey||e.altKey||e.metaKey||e.shiftKey&&e.which===BEM.blocks.keycodes.TAB&&(e.preventDefault(),this._lastFocused.focus())},_onLastFocusableKeyDown:function(e){e.shiftKey||e.ctrlKey||e.altKey||e.metaKey||e.which===BEM.blocks.keycodes.TAB&&(e.preventDefault(),this._lastFocused.focus())},_returnFocus:function(){(this._parent||{})._skipReturnFocus||this._skipReturnFocus||this._lastFocused.focus()},_mergeParams:function(e,t,i){var n={},o=Object.prototype.hasOwnProperty;return i||(i={}),e&&"object"==typeof e&&Object.keys(e).forEach((function(t){n[t]=e[t]})),Object.keys(t).forEach((function(s){var r=o.call(i,s)?i[s].call(this,e[s],t[s]):t[s];!r||"object"!=typeof r||Array.isArray(r)?n[s]=r:e[s]?n[s]=this._mergeParams(e[s],r,i):n[s]=r}),this),n},_tailParamsHook:function(e,t){return t.offset||(t.offset=this.params.tail.offset),"number"==typeof t.offset?{offset:{left:t.offset,top:t.offset}}:t},_generateDirections:function(){if(this.__self._generateDirectionsCache)return this.__self._generateDirectionsCache;for(var e=[["bottom","top"],["left","right"]],t=[["center","left","right"],["middle","top","bottom"]],i=t,n=e.length,o=[],s=0;s<n;s++)for(var r=e[s],a=r.length,c=0;c<a;c++)for(var l=t[s],u=l.length,d=0;d<u;d++)for(var h=i[s],m=h.length,p=0;p<m;p++)o.push({direction:r[c],axis:l[d],tail:{axis:h[p]}});return this.__self._generateDirectionsCache=o,o},_repackDirParams:function(e){var t,i={};return("string"==typeof e||$.isPlainObject(e))&&(e=[e]),t=e.map((function(e){if("string"==typeof e){var t=e.split("-");e={to:t[0],tail:{}},t[1]&&(e.axis=t[1]),t[2]&&(e.tail.axis=t[2])}var n=e.to;return i[n]||(i[n]=e),e.axis&&(n+="-"+e.axis),e.key=n,i[n]=e,n}),this),{directions:i,keys:t}},setViewport:function(e){return this._viewport=e,this},_pickDirection:function(){var e,t=this._order,i=this.hasMod("adaptive","yes")?t.length:1;for(this._visibilityFactor=0,e=0;e<i;e++){var n=t[e],o=this._directions[n];this._resetPos(n)._pushPos(n,this._calcPos(o))._pushPos(n,this._calcOffsets(o)),this._hasTail()&&this._resetTailPos(n)._pushTailPos(n,this._calcTailPos(o))._pushTailPos(n,this._calcTailOffset(o))._pushPos(n,this._calcOffsetByTail(o)),this._pushPos(n,this._getParentOffset());var s=this._calcVisibilityFactor(o);if((s>this._visibilityFactor||!this._direction)&&(this._visibilityFactor=s,this._direction=this._directions[n],this.size=this.getPlacingSize(),100===s))break}return this._direction},_getParentOffset:function(){var e=this.domElem.offsetParent().offset();return e.left*=-1,e.top*=-1,e},_calcPos:function(e){this._calcPlacingSize(e);var t=this.getOwnerPos(),i=this.getOwnerSize(),n=this.getPlacingSize(),o=e.axis,s=this.params.position||{},r={},a=Object.prototype.hasOwnProperty;switch(e.to){case"bottom":r={top:a.call(s,"top")?s.top:t.top+i.height,left:a.call(s,"left")?s.left:this._calcLeft(o)};break;case"top":r={top:a.call(s,"top")?s.top:t.top-n.height,left:a.call(s,"left")?s.left:this._calcLeft(o)};break;case"left":r={top:a.call(s,"top")?s.top:this._calcTop(o),left:a.call(s,"left")?s.left:t.left-n.width};break;case"right":r={top:a.call(s,"top")?s.top:this._calcTop(o),left:a.call(s,"left")?s.left:t.left+i.width}}return r},_calcTop:function(e){var t=0,i=this.getPlacingSize(),n=this.getOwnerPos(),o=this.getOwnerSize();return"top"===e?t+=n.top:"middle"===e?t+=n.top+o.height/2-i.height/2:"bottom"===e&&(t+=n.top+o.height-i.height),t},_calcLeft:function(e){var t=0,i=this.getPlacingSize(),n=this.getOwnerPos(),o=this.getOwnerSize();return"left"===e?t+=n.left:"center"===e?t+=n.left+o.width/2-i.width/2:"right"===e&&(t+=n.left+o.width-i.width),t},getPlacingSize:function(){return this.getPopupSize()},_calcOffsets:function(e){var t,i=this._cache.offset||(this._cache.offset={}),n=e.key,o=e.offset;if(i[n])return i[n];if(!o)return!1;if(t={left:0,top:0},"number"==typeof o)switch(n){case"left":t.left+=o;break;case"right":t.left-=o;break;case"top":t.top+=o;break;case"bottom":t.top-=o}else o.left&&(t.left+=o.left),o.right&&(t.left-=o.right),o.top&&(t.top+=o.top),o.bottom&&(t.top-=o.bottom);return i[n]=t,t},_hasTail:function(){return 0!==this.elem("tail").length},_moveToContainer:function(e){if(e)this._inContainer=!1;else{if(this._isShown)return;e=this._parent?this._parent.domElem:this._scope}this.domElem.appendTo(e),this._inContainer=!0},_resetPos:function(e){return e?this._positions[e]=null:this._positions={},this},_pushPosTo:function(e,t,i){!1!==i&&("string"==typeof t?this._sum(e[t]||(e[t]={}),i):(i=t,Object.keys(e).forEach((function(t){this._sum(e[t],i)}),this)))},_pushPos:function(e,t){return this._pushPosTo(this._positions,e,t),this},_sum:function(e,t){Object.keys(t).forEach((function(i){e[i]=(e[i]||0)+t[i]}))},_getSizeOf:function(e){return{height:e.outerHeight(),width:e.outerWidth()}},getOwnerSize:function(){return this._owner?this._cache.ownerSize||(this._cache.ownerSize=this._getSizeOf(this._owner)):{height:0,width:0}},getPopupSize:function(){return this._getSizeOf(this.domElem)},_getPosOf:function(e){return e.offset()||{left:0,top:0}},getOwnerPos:function(){var e;return this._owner&&(e=this._getPosOf(this._owner),"pageYOffset"in window&&(e.top-=window.pageYOffset-(document.documentElement.scrollTop||document.body.scrollTop),e.left-=window.pageXOffset-(document.documentElement.scrollLeft||document.body.scrollLeft))),e||this._userPosition},_calcVisibilityFactor:function(e){var t,i,n=this._viewport,o=this._getSizeOf(n),s=this.getPopupSize(),r=this._positions[e.key],a=this._parent&&this._isParentFixed?this._parent.domElem.offset():{top:0,left:0},c=this.hasMod("position","fixed")?{top:0,left:0}:{top:n.scrollTop(),left:n.scrollLeft()},l=r.top+a.top-c.top,u=r.left+a.left-c.left,d=u+s.width-o.width,h=l+s.height-o.height,m={height:s.height,width:s.width},p=100;return h>0&&(m.height-=h),l<0&&(m.height+=l),u<0&&(m.width+=u),d>0&&(m.width-=d),m.height<0||m.width<0?p=0:(i=Math.abs(m.height*m.width),(t=s.height*s.width)!==i&&(p=i/t*100)),p},_findParent:function(e){var t=e.closest(".popup, .popup2");return this.findBlockOn(t,"popup")||this.findBlockOn(t,"popup2")},destruct:function(){return this._childs.forEach((function(e){e.domElem&&BEM.DOM.destruct(e.domElem)})),this.setMod("fade-out","no"),this.hide(),this._isShown&&this._unbindCompatibility(),this.__base.apply(this,arguments)},_calcZIndexGroupLevel:function(){var e=this.params.zIndexGroupLevel,t=this._getParentPopup();return t&&(e+=t._zIndexGroupLevel),this._destructor?this._destructor.findBlocksOutside("z-index-group").reduce((function(e,t){return e+Number(t.getMod("level"))}),e):e},_captureZIndex:function(){null===this._zIndexGroupLevel&&(this._zIndexGroupLevel=this._calcZIndexGroupLevel());var e=this.__self._visiblePopupsZIndexes,t=this._zIndexGroupLevel,i=e[t],n=this._zIndex;return i||(i=e[t]=[(t+1)*this.__self.ZINDEX_FACTOR]),this._zIndex=i[i.length-1]+1,i.push(this._zIndex),this._zIndex!==n&&this.domElem.css("z-index",this._zIndex),this},_releaseZIndex:function(){var e=this.__self._visiblePopupsZIndexes[this._zIndexGroupLevel];return e.splice(e.indexOf(this._zIndex),1),this},_resetDefault:function(){},_calcPlacingSize:function(){}},{live:function(){this.liveBindTo("close","pointerclick",(function(){this.hide({source:"close-click"})}))},_visiblePopupsStack:(BEM.blocks.popup2||{})._visiblePopupsStack||[],_visiblePopupsZIndexes:(BEM.blocks.popup2||{})._visiblePopupsZIndexes||{},ZINDEX_FACTOR:1e3,_getFocusable:function(e){var t=$.data(e,"popup-getFocusable-id");t||(t=$.identify(),$.data(e,"popup-getFocusable-id",t)),t='*[data-popup-getFocusable-id="'+t+'"]';var i="a[href], link, ";return BEM.blocks["i-ua"].opera<13&&(i=""),e.find(i+'*[tabindex], button, input:not([type="hidden"]), textarea, select, menuitem').filter((function(){var e=$(this),i=!0;return!(parseInt(e.prop("tabindex"),10)<0||"hidden"===e.css("visibility"))&&($(this).parentsUntil(t).each((function(){if("none"===$(this).css("display"))return i=!1})),i)}))},_enforcePageRepaint:function(){document.body.className+=""},_generateDirectionsCache:null})},function(e,t){BEM.DOM.decl("popup",{_getPosOf:function(e){var t,i=e.offset();return i?(this._getPosOfTmpElem||(this._getPosOfTmpElem=$('<div class="popup__getposoffix" style="position:absolute;left:0;top:0">').appendTo("body")),t=this._getPosOfTmpElem.offset(),i.left-=t.left,i.top-=t.top,i):{left:0,top:0}}})},function(e,t){BEM.DOM.decl("popup",{onSetMod:{js:{inited:function(){this.__base.call(this);var e=this.findElem("under").first();this._underClassAttr=e.attr("class"),this.isDivEnough()?this._under=e:(e.remove(),this._under=null),this._underInPool=!1}}},isDivEnough:function(){return!0},_createUnder:function(){return $('<iframe frameBorder="0" tabindex="-1" src="about:blank"/>')},_getUnder:function(){if(this._under)return this._under;var e=this.__self._underPool.pop();return e&&(this._underInPool=!1),this._under=e,e||this._createUnder()},_attachUnder:function(){var e=this._under=this._getUnder();e.attr("class",this._underClassAttr),this.hasMod(e,"type","paranja")?e.detach().insertBefore(this.domElem).css("z-index",this._zIndex):e.prependTo(this.domElem)},_detachUnder:function(){var e=this._under;e.removeAttr("style"),this.__self._underPool.push(e.detach()),this._under=null,this._underInPool=!0},destruct:function(){var e=this.__base.apply(this,arguments);return this._underInPool&&this.__self._underPool.pop(),this._under&&this._under.remove(),e}},{_underPool:[]})},function(e,t){BEM.DOM.decl("popup",{onSetMod:{autoclosable:{yes:function(){this._enableAutoclosable()},"":function(){this._disableAutoclosable()}}},_enableAutoclosable:function(){if(this.domElem){var e=this._under;this.hasMod(e,"type","paranja")&&(e.is("iframe")&&(e=$([e[0].contentWindow,e[0].contentWindow.document])),this.bindTo(e,"pointerclick",(function(e){e.stopPropagation(),this.hide({source:"outside-click"})})),this.bindTo(e,"pointerdown",(function(){this._skipReturnFocus=!0}))),this.bindTo("pointerdown pointerclick",(function(){var e=this;do{e._preventHideByClick=!0,e=e._getParentPopup()}while(e)})),this.bindToDoc("pointerclick",(function(e){if(this._preventHideByClick)this._preventHideByClick=null;else if(!this._isRelatedNode($(e.target))){var t=$.Event("outside-click");this.trigger(t,e),t.isDefaultPrevented()||this.hide({source:"outside-click"})}})),this.bindToDoc("pointerdown",(function(){this._skipReturnFocus=!0}))}},_disableAutoclosable:function(){var e=this._under;this.hasMod(e,"type","paranja")&&(e.is("iframe")&&(e=$([e[0].contentWindow,e[0].contentWindow.document])),this.unbindFrom(e,"pointerclick pointerdown")),this.unbindFromDoc("pointerclick pointerdown")},_isRelatedNode:function(e){var t=this.containsDomElem(e);if(t||(t=Boolean(this._owner)&&this.containsDomElem.call({domElem:this._owner},e)),t)return!0;var i,n=this._childs.length;for(i=0;i<n;i++)if(this.containsDomElem.call({domElem:this._childs[i].domElem},e))return!0;return!1}})},function(e,t){BEM.DOM.decl({block:"popup",modName:"adaptive",modVal:"yes"},{onSetMod:{adaptive:{yes:function(){this._enableAdaptive()},no:function(){this._disableAdaptive()}},"watch-scroll":{yes:function(){this._watchScroll()},no:function(){this._unwatchScroll()}}},_enableAdaptive:function(){this.afterCurrentEvent((function(){this.domElem&&this.bindToWin("resize",this.onResize)})),this._watchScroll()},_disableAdaptive:function(){this.unbindFromWin("resize")._unwatchScroll()},getScrollEvents:function(){return["scroll"]},_watchScroll:function(){this._owner&&!this.hasMod("watch-scroll","no")&&this.bindTo(this._owner.parents().add(this._viewport),this.getScrollEvents().join(" "),this.onScroll,this)},_unwatchScroll:function(){this._owner&&this.unbindFromDomElem(this._owner.parents().add(this._viewport),this.getScrollEvents().join(" "))},onResize:function(e){this._cache={},this._isShown&&!this._isHiding&&this.repaint()},onScroll:function(e){this._cache={},this._isShown&&!this._isHiding&&this.repaint()},destruct:function(){this._disableAdaptive(),this.__base.apply(this,arguments)}})},function(e,t){BEM.DOM.decl({block:"popup",modName:"animate",modVal:"yes"},{afterShow:function(){var e=this.getCurrDirection();if(e){var t=e.to,i=this.getCurrPos(),n={opacity:1,top:i.top,left:i.left},o={opacity:0,top:i.top,left:i.left};"bottom"===t?o.top+=10:"top"===t?o.top-=10:"left"===t?o.left-=10:"right"===t&&(o.left+=10),this.domElem.stop(!0).css(o).animate(n,this.params.duration)}},beforeHide:function(e){var t=this.getCurrDirection();if(!t)return e();var i=t.to,n=this.getCurrPos(),o=this.domElem,s={top:n.top,left:n.left,opacity:0};return"bottom"===i?s.top+=10:"top"===i?s.top-=10:"left"===i?s.left-=10:"right"===i&&(s.left+=10),o.stop(!0,!0).animate(s,this.params.duration,(function(){e(),o.css("opacity","")}))}})},function(e,t){BEM.DOM.decl("paas",{},{_load:function(){return this._loader=new Promise((function(e,t){home.loadScript("//yastatic.net/q/ya-paranja/client.js?build=morda",e,t)}))["catch"](function(e){this._loader=undefined,home.error.logError({block:"paas",sourceType:"network",method:"_load",message:"Error loading source for paas"},e)}.bind(this)),this._loader},show:function(e){(this._loader||this._load()).then((function(){(window.Ya||{}).Paranja&&(window.Ya.Paranja.init({from:"morda",product:e,mod:"iframe"}),window.Ya.Paranja.show())}))}})},function(e,t){home.loadScript=function(e,t,i,n){var o=document.createElement("script");n&&(o.nonce=n),o.charset="utf-8",o.onload=t,o.onerror=i,o.src=e,o.crossOrigin="anonymous",document.getElementsByTagName("head")[0].appendChild(o)}},function(e,t){BEM.decl("i-install-download",{init:function(){var e=home.view("popup",{mods:{type:"download",position:"fixed","has-close":"yes"},mix:"i-install-download__popup i-bem",attrs:{"bem-js":home.getBEMParams({popup:{}})},content:home.view("i-install-download__content",this.params)});this._popup=BEM.DOM.append(BEM.DOM.scope,e).bem("popup"),this._popup.on("show",(function(){$("body").addClass("b-page_overflow_hidden")})),this._popup.on("hide",(function(){$("body").removeClass("b-page_overflow_hidden")})),this.inited=!0},download:function(){return this.params.paas||this.inited||this.init(),this.params.paas?BEM.blocks.paas.show(this.params.paas):setTimeout(function(){this._popup.show({top:0})}.bind(this),500),this._download(),this},_countDownload:function(){this.params.counters.click&&((new Image).src=this.params.counters.click)},_download:function(){var e=document.createElement("iframe");$(e).addClass("i-install-download__frame-hidden").attr("aria-hidden",!0).attr("name","install").attr("src",this.params.url).appendTo(BEM.DOM.scope),this._countDownload()}})},function(e,t){BEM.decl("i-intersection-observer-wrapper",{},{create:function(e,t){this._eventsInited||(this._eventsInited=!0,"THROTTLE_TIMEOUT"in IntersectionObserver.prototype&&(this._initEvents(),IntersectionObserver.prototype.THROTTLE_TIMEOUT=200,IntersectionObserver.prototype.USE_MUTATION_OBSERVER=!1));var i=new IntersectionObserver(e,t);return this._instances.push(i),i},_instances:[],_THROTTLE_TIMEOUT:200,_initEvents:function(){this._throttledCallback=home.throttle(this._fire.bind(this),this._THROTTLE_TIMEOUT,{leading:!1}),this._listenEvents()},_listenEvents:function(){},_fire:function(){this._instances.forEach((function(e){e._checkForIntersections()}))}})},function(e,t){BEM.decl("i-intersection-observer-wrapper",{},{_listenEvents:function(){this.__base.apply(this,arguments),BEM.channel("i-reposition-event").on("change",this._throttledCallback)}})},function(e,t){
/**
 * Copyright 2016 Google Inc. All Rights Reserved.
 *
 * Licensed under the W3C SOFTWARE AND DOCUMENT NOTICE AND LICENSE.
 *
 *  https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document
 *
 */
!function(){"use strict";if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var e=window.document,t=[];n.prototype.THROTTLE_TIMEOUT=100,n.prototype.POLL_INTERVAL=null,n.prototype.USE_MUTATION_OBSERVER=!0,n.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},n.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},n.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},n.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},n.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,i){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==i[t-1]}))},n.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},n.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(o(window,"resize",this._checkForIntersections,!0),o(e,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in window&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},n.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,s(window,"resize",this._checkForIntersections,!0),s(e,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},n.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(n){var o=n.element,s=r(o),a=this._rootContainsTarget(o),c=n.entry,l=e&&a&&this._computeTargetAndRootIntersection(o,t),u=n.entry=new i({time:window.performance&&performance.now&&performance.now(),target:o,boundingClientRect:s,rootBounds:t,intersectionRect:l});c?e&&a?this._hasCrossedThreshold(c,u)&&this._queuedEntries.push(u):c&&c.isIntersecting&&this._queuedEntries.push(u):this._queuedEntries.push(u)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},n.prototype._computeTargetAndRootIntersection=function(t,i){if("none"!=window.getComputedStyle(t).display){for(var n,o,s,a,l,u,d,h,m=r(t),p=c(t),f=!1;!f;){var _=null,g=1==p.nodeType?window.getComputedStyle(p):{};if("none"==g.display)return;if(p==this.root||p==e?(f=!0,_=i):p!=e.body&&p!=e.documentElement&&"visible"!=g.overflow&&(_=r(p)),_&&(n=_,o=m,s=void 0,a=void 0,l=void 0,u=void 0,d=void 0,h=void 0,s=Math.max(n.top,o.top),a=Math.min(n.bottom,o.bottom),l=Math.max(n.left,o.left),u=Math.min(n.right,o.right),h=a-s,!(m=(d=u-l)>=0&&h>=0&&{top:s,bottom:a,left:l,right:u,width:d,height:h})))break;p=c(p)}return m}},n.prototype._getRootRect=function(){var t;if(this.root)t=r(this.root);else{var i=e.documentElement,n=e.body;t={top:0,left:0,right:i.clientWidth||n.clientWidth,width:i.clientWidth||n.clientWidth,bottom:i.clientHeight||n.clientHeight,height:i.clientHeight||n.clientHeight}}return this._expandRectByRootMargin(t)},n.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,i){return"px"==t.unit?t.value:t.value*(i%2?e.width:e.height)/100})),i={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return i.width=i.right-i.left,i.height=i.bottom-i.top,i},n.prototype._hasCrossedThreshold=function(e,t){var i=e&&e.isIntersecting?e.intersectionRatio||0:-1,n=t.isIntersecting?t.intersectionRatio||0:-1;if(i!==n)for(var o=0;o<this.thresholds.length;o++){var s=this.thresholds[o];if(s==i||s==n||s<i!=s<n)return!0}},n.prototype._rootIsInDom=function(){return!this.root||a(e,this.root)},n.prototype._rootContainsTarget=function(t){return a(this.root||e,t)},n.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},n.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=n,window.IntersectionObserverEntry=i}function i(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,i=t.width*t.height,n=this.intersectionRect,o=n.width*n.height;this.intersectionRatio=i?Number((o/i).toFixed(4)):this.isIntersecting?1:0}function n(e,t){var i,n,o,s=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(s.root&&1!=s.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(i=this._checkForIntersections.bind(this),n=this.THROTTLE_TIMEOUT,o=null,function(){o||(o=setTimeout((function(){i(),o=null}),n))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(s.rootMargin),this.thresholds=this._initThresholds(s.threshold),this.root=s.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" ")}function o(e,t,i,n){"function"==typeof e.addEventListener?e.addEventListener(t,i,n||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,i)}function s(e,t,i,n){"function"==typeof e.removeEventListener?e.removeEventListener(t,i,n||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,i)}function r(e){var t;try{t=e.getBoundingClientRect()}catch(i){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function a(e,t){for(var i=t;i;){if(i==e)return!0;i=c(i)}return!1}function c(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t&&t.assignedSlot?t.assignedSlot.parentNode:t}}()},function(e,t){!function(){var e,t,i=home.getData("teaser.refresh"),n=i&&i.refreshUrl,o=i&&i.refreshTimeout,s=document.querySelector(".widget_name_teaser"),r=$(".teaser"),a=0;if(o&&s&&r){BEM.channel("sys").on({hidden:function(){c()},visible:function(){e&&l(),t&&u()}});BEM.blocks["i-intersection-observer-wrapper"].create((function(i){i[i.length-1].intersectionRatio>=.5?c():(t&&u(),e&&l())}),{threshold:.5}).observe(s)}function c(){e||(e=setTimeout((function(){t=!0,e=null}),o))}function l(){clearTimeout(e),e=null}function u(){$.ajax({url:n,xhrFields:{withCredentials:!0},dataType:"json",context:this,timeout:2e3}).asPromise().then((function(e){var i,n=e&&e.banners&&e.banners.teaser&&e.banners.teaser.length&&e.banners.teaser[0],o=n&&n.code,s=n&&n.linknext,c=e&&e.linkhead;if(r=$(".teaser"),!(o&&o.url&&o.bannerid&&c&&s))return Promise.reject(new Error("Incorrect data from yabs"));o.refreshedData={linkHead:c,linkNext:s},(i=home.view("teaser",o))&&(r.replaceWith(i),t=!1,home.stat.logPath("tech","dist.teaser.refresh."+(a>9?"10+":++a)))}))["catch"]((function(e){home.error.logError({block:"teaser"},e)}))}}()},function(e,t){function i(){this.current=null,this.currentStatus=0,this.area=null,this.shareInstance=null,this.fadeTimeout=600}i.prototype._init=function(){var e=this;this.params=home.getData("coversAPI.data"),(this.params.forced||this.params.settings.autoload)&&$((function(){e.load({autostart:!0}),e.sendStats("forced.show")})),$(".covers-logo").click((function(){0===e.currentStatus?(e.load({autostart:!0}),e.sendStats("logo.show")):4===e.currentStatus&&(e.stop({fromEvent:!0}),e.sendStats("logo.hide"))}));var t=this.getSearchForm(),i=!1;t.on("submit",(function(){e.getSearchInput().bem("input").val()!==e.params.text||i||(i=!0,t.append('<input type="hidden" name="aoff" value="1"><input type="hidden" name="promo" value="supercover">'))}))},i.prototype.getSearchInput=function(){return $(".search2 .input")},i.prototype.getSearchForm=function(){return $(".search2")},i.prototype._changeInputVal=function(e){this.getSearchInput().bem("input").val(e,{suggest:!1})},i.prototype.submitForm=function(e){e||(e=this.params.text),this._changeInputVal(e),setTimeout(function(){this.getSearchForm().bem("suggest2-form").submit({prevent:!1})}.bind(this),200)},i.prototype._setParams=function(e){this.params=e},i.prototype._set=function(e){this.current&&this.stop(),home.covers[e.name]&&(this.current=e.name,this.currentStatus=0)},i.prototype._getShare=function(e){var t=this;e&&!t.shareInstance&&($("body").append('<div id="covers-share"></div>'),$.getScript("//yastatic.net/share2/share.js").done((function(){t.shareInstance=new Ya.share2("covers-share",e)})))},i.prototype.load=function(e){if(this.current&&0===this.currentStatus){if(!this.area&&!this.close){this.area=$('<div class="covers-parent"></div>');var t=!1;this.params.settings&&"white"===this.params.settings.close&&(t=!0),this.close=$('<span title="'+this.params.closeTitle+'" class="covers-close '+(t?"covers-close_white":"")+'"></span>'),$("body").append(this.area,this.close),this.close.on("click",$.proxy((function(){this.stop(),this.sendStats("close.hide")}),this))}this._getShare(this.params.shareParams),$("body").addClass("covers-fade"),this.params.parent=this.area,this.currentStatus=1;var i=this;home.covers[this.current].load(this.params,(function(t){i._loadHandler(t,e)}))}},i.prototype._loadHandler=function(e,t){e.status>0?(this.currentStatus=2,t.autostart&&this.start(t)):this.currentStatus=0},i.prototype.start=function(e){if(2===this.currentStatus){this.currentStatus=3;var t=this;this.params.settings.noHide||($(".i-ua_browser_touch").length?$(".rows").css({overflowX:"hidden"}):$("body").addClass("covers-overflow"),$("body").addClass("covers-fade-on"),$(".covers-search").addClass("covers-search_hidden_yes")),this.params.settings.noSearchPhrase||this._changeInputVal(this.params.text),home.covers[t.current].start(t.params,(function(i){t._startHandler(i,e)}))}},i.prototype._startHandler=function(e){e.status>0?this.currentStatus=4:this.currentStatus=0},i.prototype.stop=function(e){if(4===this.currentStatus){this.currentStatus=5;var t=this;home.covers[this.current].stop(this.params,(function(i){t.stopHandler(i,e)}))}},i.prototype.stopHandler=function(){this.area.remove(),this.close.remove(),this.area=null,this.close=null,$(".i-ua_browser_touch").length?$(".rows").css({overflowX:"visible"}):$("body").removeClass("covers-overflow"),$(".covers-search").removeClass("covers-search_hidden_yes"),$("body").removeClass("covers-fade covers-white_close covers-fade-on"),this.currentStatus=0},i.prototype.sendStats=function(e){this.params.stat&&home.stat.logPath("click",this.params.stat+"."+e)},home.coversAPI=new i,home.covers={}},function(e,t){BEM.DOM.decl("search2",{onSetMod:{js:function(){this.__base.apply(this,arguments);var e=this;this.input=this.findBlockInside("input"),this.button=this.findBlockInside("button"),this.arrow=this.findBlockOutside("home-arrow"),this.arrow&&(this.arrow.on("sample-click",(function(){var t=e.domElem.find("input[name='nl']");e.params.nl&&!t.length&&$('<input type="hidden" name="nl" value="1"/>').insertAfter(e.input.domElem);var i=e.domElem.find("input[name='example_source']");e.params.serpArg&&!i.length&&$('<input type="hidden" name="example_source" value="'+e.params.serpArg+'"/>').insertAfter(e.input.domElem),$("body").hasClass("edit-mode")||$("body").hasClass("b-page_skins-calatog")||setTimeout((function(){e.domElem.submit(),e.arrow.reEnable()}),500)})),this.button.on("_hovered_*",(function(e,t){this.toggleMod("button-hovered","yes","yes"===t.modVal)}),this),this.button.on("_pressed_*",(function(e,t){this.toggleMod("button-pressed","yes","yes"===t.modVal)}),this))}}}),$((function(){var e=$(".mini-suggest"),t=e[0];t&&MBEM.createBlock({node:t,block:"mini-suggest",params:e.data("mini-bem")["mini-suggest"]})}))},function(e,t){var i;BEM.decl("i-common__string",{},{cleverSubstring:function(e,t,i){return e.length>t+i?e.substring(0,t-1)+"":e},escapeHTML:(i={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},function(e){return String(e).replace(/&(?!\w+;)|[<>"']/g,(function(e){return i[e]||e}))}),escapeRegExp:function(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}})},function(e,t){BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this._val=this.elem("control").val()}},disabled:{"*":function(e,t){this.elem("control").prop("disabled",t)},yes:function(){this.delMod("focused")}},focused:function(e,t){if(this.hasMod("disabled"))return!1;t?this._focused||this._focus():this._focused&&this._blur(),this.afterCurrentEvent((function(){this.domElem&&this.trigger(t?"focus":"blur")}))}},isDisabled:function(){return this.hasMod("disabled","yes")},val:function(e,t){var i=void 0!==e,n=this.elem("control");return e=i?null===e?"":e.toString():n.val(),this._val!==e&&(this._val=e,n.val()!==e&&n.val(e),this.trigger("change",t)),i?this:e},name:function(e){var t=this.elem("control");return arguments.length?(t.attr("name",e),this):t.attr("name")},getSelectionEnd:function(){var e=this.elem("control")[0],t=0;if("number"==typeof e.selectionEnd)t=e.selectionEnd;else{var i=document.selection.createRange();if(i&&i.parentElement()===e){var n=e.value.length,o=e.createTextRange();o.moveToBookmark(i.getBookmark());var s=e.createTextRange();s.collapse(!1),t=o.compareEndPoints("EndToEnd",s)>-1?n:-o.moveEnd("character",-n)}}return t},_onFocus:function(){if(parseInt(BEM.blocks["i-ua"].ios,10)>=8&&!this.hasMod("type","textarea")){var e=this.elem("control")[0];e.selectionStart===e.value.length&&(e.scrollLeft=e.scrollWidth)}return this._focused=!0,this.setMod("focused","yes")},_onBlur:function(){return this._returnFocus?(this.afterCurrentEvent((function(){this.domElem&&this._focus()})),this):this.hasMod(this.elem("clear"),"pressed")?this:(this._focused=!1,this.delMod("focused"))},_focus:function(){if(this.hasMod("disabled","yes"))return!1;this.elem("control").focus()},_blur:function(){this._returnFocus=!1,this.elem("control").blur()},_updateVal:function(){this.val(this.elem("control").val())},destruct:function(){this._blur(),this.__base.apply(this,arguments)}},{live:function(){this.liveBindTo("control","focusin focusout",(function(e){this["focusin"===e.type?"_onFocus":"_onBlur"](e)})),this.liveBindTo("control","input",(function(){this._updateVal()})),9===document.documentMode&&(this.liveBindTo("control","focusin",(function(){this.bindToDoc("selectionchange",this._updateVal)})),this.liveBindTo("control","focusout",(function(){this.unbindFromDoc("selectionchange")})))}})},function(e,t){BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var e=this.elem("control"),t=$.dom.getActiveElement(),i=this.params.autoFocus&&!t.is("input, textarea");(t[0]===e[0]||i)&&(this.setMod("focused","yes")._focused=!0),this.params.shortcut&&this.bindToDoc("keydown",(function(e){e.ctrlKey&&e.which===BEM.blocks.keycodes.UP&&!$(e.target).is("input, textarea")&&this.setMod("focused","yes")}))}}},_focus:function(){if(!1===this.__base())return!1;var e=this.elem("control")[0];if(e.createTextRange&&!e.selectionStart){var t=e.createTextRange();t.move("character",e.value.length),t.select()}},destruct:function(){this.params.shortcut&&this.unbindFromDoc("keydown"),this.__base.apply(this,arguments)},_onPointerenter:function(e){this.setMod("hovered","yes")},_onPointerleave:function(e){this.delMod("hovered")},_updateValNextTick:function(){this.afterCurrentEvent((function(){this.domElem&&this._updateVal()}))}},{live:function(){return this.liveBindTo("box","pointerover pointerout",(function(e){this.hasMod("disabled")||this.elem("box")[0].contains(e.relatedTarget)||("pointerover"===e.type?this._onPointerenter(e):this._onPointerleave(e))})),this.liveBindTo("control","dragenter"),this.liveBindTo("control","dragend",(function(){this._updateValNextTick()})),"documentMode"in document&&document.documentMode<=8&&(this.liveBindTo("control","focusin",(function(){this.bindTo("control","propertychange keyup",this._updateVal),this.bindTo("control","cut paste",(function(){this._updateValNextTick()}))})),this.liveBindTo("control","focusout",(function(){this.unbindFrom("control","cut paste"),this.unbindFrom("control","propertychange keyup"),this._updateValNextTick()}))),this.__base()}})},function(e,t){BEM.DOM.decl("input",{_onIOSTouchStart:function(){}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("clear","pointerclick",(function(e){e.preventDefault()})),this.liveBindTo("control","keyup",(function(){this._updateVal()}))}})},function(e,t){BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.on("change",this._updateClear)._updateClear()}}},_onClearClick:function(){return this.trigger("clear"),this.removeInsets&&this.removeInsets(),this.clearInput({source:"clear"})._focus()},clearInput:function(e){return this.val("",e),this},_updateClear:function(){return this.toggleMod(this.elem("clear"),"visibility","visible",Boolean(this._val))}},{live:function(){return this.liveBindTo("clear","pointerpress",(function(e){this.setMod(this.elem("clear"),"pressed","yes")})).liveBindTo("clear","pointerover",(function(e){this.setMod(this.elem("clear"),"hovered","yes")})).liveBindTo("clear","pointerout",(function(e){this.delMod(this.elem("clear"),"hovered")})).liveBindTo("clear","pointerclick",(function(){this.delMod(this.elem("clear"),"pressed"),this._onClearClick()})).liveBindTo("control","paste",(function(){this.setMod(this.elem("clear"),"visibility","visible")})),this.__base()}})},function(e,t){var i,n;i=/^[a-z-]$/i,n=/^[0-9]$/,BEM.DOM.decl({name:"input",modName:"autofocus",modVal:"capture"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.bindToDoc("keydown",this._autoFocusBind)},autofocus:{yes:function(){this.bindToDoc("keydown",this._autoFocusBind)},"":function(){this.unbindFromDoc("keydown")}},listen:{yes:function(){this.bindToDoc("keydown",this._autoFocusBind)},no:function(){this.unbindFromDoc("keydown")}}},_autoFocusBind:function(e){var t;if(!$(".popup_visibility_visible").filter(":not(.b-topbar__popup, .suggest2)").length&&(!(t=$(".v_sform_bg")).length||"none"===t.css("display"))&&!$(".left-banner-opened").length&&this.domElem.is(":visible")){var o,s;try{o=document.activeElement.tagName.toLowerCase(),s=document.activeElement.getAttribute("contenteditable")}catch(l){}if(function(e){if(e.originalEvent&&!("altKey"in e.originalEvent))return!1;var t,o,s=e.charCode||e.keyCode||e.which||0,r=e.ctrlKey||e.altKey||e.metaKey;return e.originalEvent&&e.originalEvent.key?(o=i.test(e.originalEvent.key),t=n.test(e.originalEvent.key)):(o=[s>=65&&s<=90,s>=1025&&s<=1071,0===s,231===s,186===s,188===s,190===s,String.fromCharCode(s).toLowerCase()!==String.fromCharCode(s).toUpperCase()].some(Boolean),t=s>=48&&s<=57||s>=96&&s<=105),!r&&(t||o)}(e)&&"input"!==o&&"textarea"!==o&&!s){this.trigger("beforeFocus");var r=this.elem("control")[0],a=this.val();if(a.length>0&&" "!==a.slice(-1)&&(a+=" ",this.val(a)),r.createTextRange){var c=r.createTextRange();c.collapse(!1),c.select()}else r.selectionStart&&(r.focus(),r.setSelectionRange(a.length,a.length));this.setMod("focused","yes")}}}})},function(e,t){BEM.DOM.decl({name:"input",modName:"ahead",modVal:"yes"},{onSetMod:{js:function(){var e=$.browser&&$.browser.opera&&$.browser.version<12.1?"keypress":"keydown";this.__base(),this._leftPadding=parseInt(this.elem("input").css("border-left-width"),10),this._buildAhead(),this._intent=!1,this._preventAhead=!1,this._lastBackspace=0,this.on("change",this._onTextChange).on("blur",(function(){this.delMod("ahead-visible")})).bindTo("click",this._onClickOver).bindTo(e,this._onKeyDown)}},_onClickOver:function(e){var t=this;if(!this._preventAhead&&this.elem("input").is(e.target))if(this.hasMod("ahead-visible")){var i=e.pageX-this.domElem.offset().left-this._leftPadding,n=this.elem("ahead-filler").width(),o=this.elem("ahead-hintholder").width();i>n&&i<o&&(this.trigger("ahead-click"),setTimeout((function(){t._fill({usage:"mouse"})}),0))}else this.setMod("ahead-visible","yes")},_onKeyDown:function(e){switch(this.__base.apply(this,arguments),new Date-this._lastBackspace>this.params.backspaceDelay&&(this._preventAhead=!1),e.which){case 8:if(!this.params.hideOnBackspace)break;this._preventAhead=!0,this._lastBackspace=new Date,this._intent=this._clearAhead();break;case 9:this.hasMod("focused","yes")&&this._intent&&!e.ctrlKey&&!e.altKey&&this._fill({usage:"tab"})&&e.preventDefault();break;case 39:this.val().length===this.getSelectionEnd()&&this._fill({usage:"arrow"})&&e.preventDefault()}},setAhead:function(e){var t;return!this._preventAhead&&(t=this.val(),0!==e.indexOf(t)?this._clearAhead():void(this._intent=this._setAhead(t,e.slice(t.length))))},unsetAhead:function(){this._clearAhead(),this._intent=!1},_onTextChange:function(){var e=this.val().length;this.shiftAhead(e),this._intent&&0!==this._intent.indexOf(this.val())?this._clearAhead():this.setMod("ahead-visible","yes")},_fill:function(e){var t=this.val(),i=$.extend(e,{chars:this._intent.length-t.length});if("string"==typeof this._intent&&i.chars>0&&0===this._intent.indexOf(t)){try{var n=document.createEvent("TextEvent");n.initTextEvent("textInput",!0,!0,null,this._intent.slice(this.val().length),9),this._input.selectionEnd=this._input.selectionStart=this._intent.length,this._input.dispatchEvent(n)}catch(r){var o=this.elem("control").get(0);if(this.val(this._intent),o.createTextRange){var s=o.createTextRange();s.moveEnd("character",this._intent.length),s.collapse(!1),s.select()}else try{o.selectionEnd=o.selectionStart=this._intent.length}catch(a){}}this.trigger("ahead-fill",i),home.stat.logPath("tech","suggest.ahead."+e.usage)}return i.chars>0},getSelectionEnd:function(){var e=this.elem("control")[0],t=0;if("number"==typeof e.selectionEnd)t=e.selectionEnd;else{var i=document.selection.createRange();if(i&&i.parentElement()===e){var n=e.value.length,o=e.createTextRange();o.moveToBookmark(i.getBookmark());var s=e.createTextRange();s.collapse(!1),t=o.compareEndPoints("EndToEnd",s)>-1?n:-o.moveEnd("character",-n)}}return t},getDefaultParams:function(){return $.extend(this.__base(),{backspaceDelay:100,hideOnBackspace:!0})},_buildAhead:function(){this._ahead=$(home.view("input__ahead")),BEM.DOM.before(this.elem("control"),this._ahead)},_setAhead:function(e,t){var i=this.elem("ahead-filler");return this._preventAhead?(e="",t=""):(e=e||"",t=t||""),i.text(e),this.elem("ahead-hintholder").text(e+t),this.elem("ahead-hint").val(e+t),this.elem("ahead").css("clip","rect(auto auto auto "+(i.width()+this._leftPadding)+"px)"),e+t},_clearAhead:function(){return this._setAhead("",""),!1},shiftAhead:function(e){if(this._intent){var t=this._intent.slice(0,e),i=this._intent.slice(e);this._setAhead(t,i)}}})},function(e,t){BEM.DOM.decl({block:"input",modName:"keyboard",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),$(window).bind("keyboardOpened.lego",this.changeThis((function(){this.setMod("focused","yes")._focused=!0})))}},onElemSetMod:{clear:{visibility:function(e,t,i){this.__base.apply(this,arguments),this.hasMod("clear","yes")&&this.toggleMod("keyboard-visibility","hidden","visible"===i)}}}})},function(e,t){BEM.DOM.decl("keyboard-loader",{onSetMod:{js:function(){var e=this;Lego.block["keyboard-loader"].call(this.domElem,this.params),$(window).on("keyboardOpened.lego",(function(){home.stat.logPath("click",e.params.statOpen),e.getVkbd().removeAttr("disabled")})).on("keyboardClosed.lego",(function(t){"lego"===t.namespace&&home.stat.logPath("click",e.params.statClose),e.getVkbd().attr("disabled","disabled")}))}},getVkbd:function(){return this._vkbd?this._vkbd:this._vkbd=$('<input type="hidden" name="vkbd" value="1"/>').appendTo(this.domElem)}}),function(e,t){t||(t=window.Lego={}),t.block||(t.block={}),t.block["keyboard-loader"]=function(i){var n=e(document.body),o=e(window),s=this,r=e(".b-topbar__popup.popup_behavior_snap"),a=r.length?r.bem("popup"):null;function c(i){e("body").removeClass("b-page_keyboard");var s=i?"addClass":"toggleClass",r=n.find(".keyboard-popup");if(r.length){if(n.find(".keyboard-popup__gap")[s]("keyboard-popup__gap_hidden_yes"),n.find(".keyboard-popup")[s]("keyboard-popup_hidden_yes").hasClass("keyboard-popup_hidden_yes")){o.trigger("keyboardClosed"),e(document).trigger("popupsClose.lego");var a=t.block.keyboard._lastFocusedIn;a!==undefined&&a.focus()}else o.trigger("keyboardOpened.lego");r.data("isHidden",!1)}}s.click((function(s){s.preventDefault(),a&&a._unbindFromResize();var r=(this.className.match(/keyboard-loader_lang_(\w+)/)||["",""])[1];n.find(".keyboard")[0]?(c(),a&&a._bindToResize()):home.bundles.load("keyboard").then((function(){t.block["keyboard-popup"]({lang:r,"for":i["for"]}),n.append('<div class="keyboard i-bem" data-bem=\'{&quot;keyboard&quot;: { &quot;lang&quot;:&quot;'+r+"&quot;}}'></div>"),BEM.DOM.init(e(".keyboard")),o.trigger("keyboardOpened.lego",{afterLoad:!0}),e(".keyboard").on("click",".keyboard__key",(function(){var t,i=e("*:focus").offset();i&&(t=i.top,e(".keyboard-popup").offset().top<t+30&&window.scrollTo(0,t-20))}))}))["catch"]((function(e){home.error.logError({block:"keyboard-loader",message:"_downloadResources: fail"},e)}))})),o.bind("keyboardOpen.lego",(function(){s.click()})).bind("keyboardClose.lego",c),i["for"]&&o.bind("keyboardOpened.lego",(function(t,n){!(n&&n.afterLoad&&i.autoLoad)&&e(i["for"]).focus()})),o.bind("keyboardLangChanged.lego keyboardSetLang.lego",(function(e,t){var i=s.find(".keyboard-loader__flag");i[0]&&("tt"===t&&(t="ru"),i.attr("src",i.attr("src").replace(/[a-z]+\.png$/,t+".png")))})),i.storeState=!1!==i.storeState,i.storeState&&o.bind("keyboardOpened.lego",(function(){h("keyboard_state","open");var t=u("keyboard_lang");t&&e(window).trigger("keyboardSetLang.lego",t)})).bind("keyboardClosed.lego",(function(){e("body").removeClass("b-page_keyboard"),h("keyboard_state","close")})).bind("keyboardLangChanged.lego",(function(e,t){h("keyboard_lang",t)}));var l="#kb"===window.location.hash;function u(e){return d()[e]}function d(){var t={};return e.each(window.name.split("&"),(function(){if(this.toString()){var e=this.split("=");t[e[0]]=e[1]}})),t}function h(t,i){var n=d(),o=[];n[t]=i,e.each(n,(function(e,t){o.push(e+"="+t)})),window.name=o.join("&")}(i.autoLoad||i.storeState&&"open"===u("keyboard_state")||l)&&s.click(),o.bind("keyboardOpened.lego",(function(){e("input:focus").focus(),e("body").addClass("b-page_keyboard")}))}}(jQuery,window.Lego)},function(e,t){BEM.DOM.decl("search2",{onSetMod:{js:function(){this.__base.apply(this,arguments);var e=this.findBlockInside("input");this.toggleMod("empty","yes",!e.val()),e.on("change",(function(){this.toggleMod("empty","yes",!e.val())}),this),e.on("_ahead-visible_*",(function(e,t){this.toggleMod("ahead-visible","yes","yes"===t.modVal)}),this)}}})},function(e,t){BEM.decl("i-voice",{},{hasMicSupport:function(e){if("Promise"in window&&(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia)){var t;if(navigator.enumerateDevices?t=navigator.enumerateDevices.bind(navigator):(window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(t=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&(t=function(e){navigator.mediaDevices.enumerateDevices().then(e)})),!t)return void e({message:"API is Not supported"});t((function(t){var i=t.some((function(e){return"audio"===e.kind||"audioinput"===e.kind}));e(!i&&{message:"Mic is not available"})}))}else e({message:"API is Not supported"})}})},function(e,t){!function(){var e,t,i,n,o={},s=0;BEM.decl("i-voice",{},{events:{ERROR:"error",BEFORE_START_RECOGNIZE:"before-start-recognize",START_RECOGNIZE:"start-recognize",SPEECH_KIT_INIT:"speech-kit-init",SPEECH_KIT_ACCESS_GRANTED:"speech-kit-access-granted",RECOGNIZE_TEXT:"recognize-text",STOP_RECOGNIZE:"stop-recognize",PERMISSION_REQUEST:"permission-request"},eventsType:{ERROR_INIT:"error-init",ERROR_SPEECH_KIT:"error-speech-kit",SUCCESS_RECOGNIZE:"success-recognize",TIMEOUT_SUCCESS:"timeout-success",TIMEOUT_EMPTY:"timeout-empty"},TIMEOUT_RECOGNIZE:1e4,startRecognize:function(e){if(this._isOnline()){n=e,o={recognizedText:"",_startedRecognize:!0,maxTime:e.maxTime||0===e.maxTime?e.maxTime:this.TIMEOUT_RECOGNIZE};var s=window.AudioContext||window.webkitAudioContext;this._freeAudioContext();try{(i=i||new s).createScriptProcessor(256,1,1).disconnect()}catch(r){return void this.trigger(this.events.ERROR,{type:this.eventsType.ERROR_INIT,message:"AudioContext is not available"})}this.trigger(this.events.BEFORE_START_RECOGNIZE,{session:o}),this._getStreamer(e,function(n){if(n.err||!n.streamer)return this.trigger(this.events.ERROR,{type:this.eventsType.ERROR_INIT,message:n.err}),void this._freeAudioContext();window.ya.speechkit.audiocontext=i,o.streamer=n.streamer,this._speechKitStart(o,e),this.trigger(this.events.START_RECOGNIZE,{session:o}),t=setTimeout(function(){this.isStartedRecognize()&&!this.isPermissionProvided()&&this.trigger(this.events.PERMISSION_REQUEST,{session:o})}.bind(this),500)}.bind(this))}else this.trigger(this.events.ERROR,{type:this.eventsType.ERROR_INIT,message:"offline"})},_speechKitStart:function(e,t){var i=t.codec||window.ya.speechkit.FORMAT.OPUS||window.ya.speechkit.FORMAT.PCM16;e.streamer.start({lang:t.lang,model:t.recognitionModel,apikey:t.apikey,initCallback:this._speechKitInitHandler.bind(this),accessGrantedCallback:this._speechKitAccessGrantedHandler.bind(this),dataCallback:this._speechKitDataHandler.bind(this),errorCallback:this._speechKitErrorHandler.bind(this),format:i,particialResults:!0,utteranceSilence:Math.max(t.utteranceSilence||0,60),use_snr:Boolean(t.use_snr),yandexuid:t.yandexuid,applicationName:t.applicationName})},_isOnline:function(){return"undefined"==typeof navigator.onLine||navigator.onLine},isStartedRecognize:function(){return o._startedRecognize},stopRecognize:function(e,i){this.isStartedRecognize()&&(clearTimeout(t),this._resetTimeout(),o._startedRecognize=!1,o.streamer&&o.streamer.abort(),clearTimeout(this._initFailedTimeout),this.trigger(this.events.STOP_RECOGNIZE,{type:e,session:o,data:i}))},isSpeechkitLoaded:function(){return window.ya&&window.ya.speechkit&&window.ya.speechkit.SpeechRecognition},isPermissionProvided:function(){return window.ya.speechkit.isPermissionProvided()},_freeAudioContext:function(){i&&i.close&&i.state&&("closed"!==i.state&&i.close(),i=null)},_speechKitDataHandler:function(e,t){s=0,this.afterCurrentEvent(function(){e&&(o.recognizedText=e,this.trigger(this.events.RECOGNIZE_TEXT,{session:o,isDone:t})),t&&this.stopRecognize(this.eventsType.SUCCESS_RECOGNIZE)}.bind(this))},_speechKitInitHandler:function(e){o.id=e,this._resetTimeout(),this._startTimeout(),clearTimeout(this._initFailedTimeout),this.trigger(this.events.SPEECH_KIT_INIT,{session:o})},_speechKitAccessGrantedHandler:function(){this._initFailedTimeout=setTimeout(function(){this.trigger(this.events.ERROR,{type:this.eventsType.ERROR_SPEECH_KIT,session:o,message:"offline"})}.bind(this),5e3),this.trigger(this.events.SPEECH_KIT_ACCESS_GRANTED,{session:o})},_speechKitErrorHandler:function(e){if("MediaDeviceFailedDueToShutdown"===e&&s<1)return this._speechKitStart(o,n),void s++;o._startedRecognize=!1,clearTimeout(t),this.trigger(this.events.ERROR,{type:this.eventsType.ERROR_SPEECH_KIT,session:o,message:e}),this._freeAudioContext()},_startTimeout:function(){o.maxTime&&(o._timerRecognize=setTimeout(this._timeoutHandler.bind(this),o.maxTime))},_resetTimeout:function(){o._timerRecognize&&(clearTimeout(o._timerRecognize),o._timerRecognize=null)},_timeoutHandler:function(){o._timerRecognize=null;var e=Boolean(o.recognizedText);this.stopRecognize(this.eventsType[e?"TIMEOUT_SUCCESS":"TIMEOUT_EMPTY"])},loadSpeechkit:function(e,t){this._loaded?t&&t():(this._loadCallbacks=this._loadCallbacks||[],this._loadCallbacks.push(t),1===this._loadCallbacks.length&&this._loadSpeechkit(e,function(e){this._loadCallbacks.forEach((function(t){t&&t(e)})),this._loadCallbacks=[],this._loaded=!0}.bind(this)))},_loadSpeechkit:function(e,t){var i=document.createElement("script");i.src=e+"/webspeechkit/v-1.0.5/webspeechkit-recognition.min.js",i.async=!0,i.crossOrigin="",i.onload=function(){t(!0)},i.onerror=function(){t(!1)},document.body.appendChild(i)},_initStreamer:function(t){try{t({streamer:e=new window.ya.speechkit.SpeechRecognition})}catch(i){t({err:"Error at SpeechStreamer create"})}},_getStreamer:function(t,i){var n=this;e?i({streamer:e}):this.isSpeechkitLoaded()?this._initStreamer(i):this.loadSpeechkit(t.origin,(function(e){e?n.afterCurrentEvent((function(){n._initStreamer(i)})):i({err:"Error when loading webspeechkit"})}))}}),"undefined"==typeof window.ya&&(window.ya={}),"undefined"==typeof window.ya.speechkit&&(window.ya.speechkit={});var r={websocketProtocol:"wss://",asrUrl:"webasr.yandex.net/asrsocket.ws",ttsUrl:"https://tts.voicetech.yandex.net",ttsStreamUrl:"webasr.yandex.net/ttssocket.ws",lang:"ru-RU",langWhitelist:["ru-RU","tr-TR","en-US","en-GB","uk-UA","ru","tr","en","uk","en-EN"],model:"notes",applicationName:"jsapi",apikey:"",uuid:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},a=home.getData("speechkit.settings")||{};for(var c in r)a.hasOwnProperty(c)||(a[c]=r[c]);"undefined"==typeof window.ya.speechkit._extend?window.ya.speechkit.settings=a:window.ya.speechkit.settings=window.ya.speechkit._extend(a,window.ya.speechkit.settings)}()},function(e,t){BEM.decl("i-voice",{},{startRecognize:function(e){var t=window.yandex&&window.yandex.messenger&&window.yandex.messenger.isPanelEnabled,i=this.__base.bind(this,e);e&&e.useAlice&&t?t((function(e){e?(window.yandex.messenger.openView("#dialogs/alice"),window.yandex.speechkit.startRecognition()):i()})):i()}})},function(e,t){var i;BEM.DOM.decl("voice-search-popup",{onSetMod:{js:{inited:function(){this._setupProperties()}}},state:{name:"state",opened:"opened",closed:"closed"},speechKitState:{name:"speechkit-state",init:"init",start:"start",recognized:"recognized",finish:"finish",error:"error",access:"access"},_indicatorHeightMultiplier:.8,SMOOTH_CONSTANT:.8,loadSpeechkit:function(e){BEM.blocks["i-voice"].loadSpeechkit(e)},startRecognition:function(e){this._voiceRecognition.startRecognize(e)},_setupProperties:function(){if(this._voiceRecognition=BEM.blocks["i-voice"],this._errorDescription={PermissionDenied:{title:home.l10n("voice-search.popup.noaccess.title"),subtitle:home.l10n("voice-search.popup.noaccess.subtitle")},ConnectionProblem:{title:home.l10n("voice-search.popup.connectionproblem.subtitle"),subtitle:home.l10n("voice-search.popup.connectionproblem.title")},other:{title:home.l10n("voice-search.popup.unknownerror.title")}},this._content=this.elem("content"),this._textElem=this.elem("text"),this._indicator=this.elem("indicator"),this._boundSetupIndicator=this._setupIndicator.bind(this),this._paranja=$(".voice-search-popup__paranja"),this._lastAmplitute=0,this._voiceRecognition){var e=this._voiceRecognition,t=e.events;this._voiceEventsType=e.eventsType,e.on(t.BEFORE_START_RECOGNIZE,this._onPreInit,this),e.on(t.SPEECH_KIT_INIT,this._onInit,this),e.on(t.SPEECH_KIT_ACCESS_GRANTED,this._onAccessGranted,this),e.on(t.ERROR,this._voiceOnError,this),e.on(t.RECOGNIZE_TEXT,this._voiceRecognizeText,this),e.on(t.STOP_RECOGNIZE,this._voiceStopRecognize,this),e.on(t.PERMISSION_REQUEST,this._voicePermissionRequest,this),this._calcSoundAmplitudePerFrameBinded=this._calcSoundAmplitudePerFrame.bind(this),this.bindTo("continue-button","click",this._onErrorContinueButtonPressed,this),this.bindTo("help-button","click",this._onErrorHelpButtonPressed,this)}},_calcSoundAmplitudePerFrame:function(){if(this._nodeAnalyzer){var e=new Uint8Array(this._nodeAnalyzer.frequencyBinCount);this._nodeAnalyzer.getByteFrequencyData(e);var t=Array.prototype.slice.call(e,0,4),i=t.reduce((function(e,t){return e+t}),0)/t.length/255;this._onAudioChangeAmplitude(i),this._animationFrameId=window.requestAnimationFrame(this._calcSoundAmplitudePerFrameBinded)}},_onPreInit:function(){this._showLayout(),this.trigger("start")},_onAccessGranted:function(){this._attachCloseEvents(),this._setupIndicator(),this._showInitState()},_onInit:function(e,t){t.session&&t.session.streamer&&t.session.streamer.recorder&&(this._nodeAnalyzer=t.session.streamer.recorder.getAnalyserNode(),this._nodeAnalyzer.fftSize=32,this._nodeAnalyzer.smoothingTimeConstant=.95,this._calcSoundAmplitudePerFrameBinded()),this._showStartState()},_voiceRecognizeText:function(e,t){var i=t.session.recognizedText;i&&(this._startedRecognize=!0,this._setRecognizedText(i),this._showRecognizedState(),this.trigger("text",t))},_voiceStopRecognize:function(e,t){if(t.type===this._voiceEventsType.SUCCESS_RECOGNIZE||t.type===this._voiceEventsType.TIMEOUT_SUCCESS)return this.trigger("success",t),void setTimeout(function(){this.trigger("after-success",t),this._hideLayout()}.bind(this),this.__self.TIMEOUT_SUCCESS_RECOGNITION);this._hideLayout()},_voiceOnError:function(e,t){this._attachCloseEvents();var i=this._parseError(t.message);this._showErrorState(i),"PermissionDenied"!==i&&home.error.logError({block:"voice-search-popup",message:"Voice search error: "+i,method:"_voiceOnError",source:"speechkit",sourceType:-1!==i.indexOf("Socket error:")?"network":undefined,meta:t})},_parseError:function(e){return-1!==(e=String(e)).indexOf("Socket error:")||"offline"===e?"ConnectionProblem":-1!==e.indexOf("not allowed")||"MediaDeviceFailedDueToShutdown"===e||"PermissionDismissedError"===e||"PermissionDeniedError"===e||"Permission denied"===e||"Permission dismissed"===e?"PermissionDenied":"other"},_attachCloseEvents:function(){var e=this._hideLayout.bind(this),t=new Date;this._paranja.on("click",(function(){if(!(new Date-t>500))return!1;e()})),this.bindTo("close","click",e),this.bindToDoc("keydown",(function(t){t.originalEvent&&"altKey"in t.originalEvent&&(home.stat.logPath("click","voice.popup.exit-key"),e())}))},_showLayout:function(){this.afterCurrentEvent((function(){this.setMod(this._paranja,"state","open")})),home.stat.logDOMShow(this.domElem),home.stat.logDOMShow(this._paranja),this.trigger("show")},_hideLayout:function(){this._voiceRecognition.stopRecognize(),this.unbindFromDoc("keydown"),this._paranja.unbind("click"),this.unbindFrom("close","click"),window.cancelAnimationFrame(this._animationFrameId),this.delMod(this._paranja,"state"),this._hidePopup(),this.trigger("hide")},_onErrorContinueButtonPressed:function(){this._hideLayout()},_onErrorHelpButtonPressed:function(){this._hideLayout()},_bindEvents:function(){$(window).on("resize.voice-search-popup",this._boundSetupIndicator),$(window).on("popstate.voice-search-popup",this._hideLayout.bind(this)),$(window).on("scroll.voice-search-popup",this._hideLayout.bind(this)),this.__self._visibilityEventName&&$(document).one(this.__self._visibilityEventName+".voice-search-popup",function(){this.afterCurrentEvent((function(){this._hideLayout()}))}.bind(this))},_unbindEvents:function(){$(window).off(".voice-search-popup"),this.__self._visibilityEventName&&$(document).off(this.__self._visibilityEventName+".voice-search-popup")},_setupIndicator:function(){var e=this.elem("content").height()*this._indicatorHeightMultiplier;e=Math.floor(e),this._indicator.width(e),this._indicator.height(e)},_getProcessedAmplitude:function(e,t){return this.SMOOTH_CONSTANT*e+(1-this.SMOOTH_CONSTANT)*t},_updateIndicatorWithAmplitude:function(e){var t=e<=this._lastAmplitute;if(e=this._getProcessedAmplitude(e,this._lastAmplitute),this._lastAmplitute=e,e<=.4||t)return this._indicator.css("transform",""),this._indicator.css("transition",""),void this._indicator.css("opacity","");var i=Math.min(1.2*e,1);this._indicator.css("transition","opacity .1s linear, transform 0s linear"),this._indicator.css("transform","translate(-50%, -50%) scale("+i+")"),this._indicator.css("opacity","1")},_showPopup:function(){this._bindEvents(),this._showLayout(),this.setMod(this.state.name,this.state.opened),history.pushState&&history.pushState(null,document.title,location.href)},_hidePopup:function(){this.getMod(this.state.name)===this.state.opened&&(this._unbindEvents(),this.setMod(this.state.name,this.state.closed))},_setRecognizedText:function(e){this._textElem.text(e)},_showInitState:function(){this.setMod(this.speechKitState.name,this.speechKitState.init),this._showPopup()},_showStartState:function(){this._setRecognizedText(""),this.setMod(this.speechKitState.name,this.speechKitState.start)},_showRecognizedState:function(){this.setMod(this.speechKitState.name,this.speechKitState.recognized)},_showErrorState:function(e){var t;this._errorDescription[e]&&(t=this._errorDescription[e].subtitle||"",this.setMod(this.speechKitState.name,this.speechKitState.error),this.elem("error-title").text(this._errorDescription[e].title),this.elem("error-subtitle").html(t),this._showPopup(),home.stat.logPath("show","voice.popup.error."+e))},_onAudioChangeAmplitude:function(e){this.getMod(this.speechKitState.name)!==this.speechKitState.finish&&this._updateIndicatorWithAmplitude(e)},_voicePermissionRequest:function(){this.setMod(this.speechKitState.name,this.speechKitState.access)}},{TIMEOUT_SUCCESS_RECOGNITION:700,live:!0,_visibilityEventName:(["hidden","mozHidden","webkitHidden","msHidden"].forEach((function(e){!i&&e in document&&(i=e)})),i&&i.replace(/hidden/i,"visibilitychange"))})},function(e,t){BEM.DOM.decl("voice-search-popup",{_showErrorState:function(e){this.__base.apply(this,arguments);var t=!(!this.params.showMicHelper||"PermissionDenied"!==e);if(t){var i=home.l10n("voice-search.popup.chrome-permission.subtitle").replace("%icon%",'<div class="voice-search-popup__error-access-icon"></div>');this.elem("error-subtitle").html(i)}this.toggleMod("mic-helper","yes",t);var n="PermissionDenied"===e;this.toggleMod("show-help","yes",n)}})},function(e,t){BEM.DOM.decl({name:"input",modName:"voice-search",modVal:"yes"},{onSetMod:{js:function(){var e=this;this.__base.apply(this,arguments),this._hasRecognized=!1,BEM.blocks["i-voice"].hasMicSupport((function(t){t?e.delMod("voice-search"):(e.hasMod(e.elem("clear"),"visibility","visible")||e.delMod(e.elem("voice-search"),"visibility"),home.stat.logPath("show","voice"),e.params.autoVoiceSearch&&e.startRecognize({alice:!1}))}))}},onElemSetMod:{clear:{visibility:function(e,t,i){this.__base.apply(this,arguments),this.toggleMod(this.elem("voice-search"),"visibility","hidden","","visible"===i)}}},_initVoicePopup:function(){if(!this._popupInited){this._popupInited=!0;var e=$(home.view("voice-search-popup",{showMicHelper:this.params.showMicHelper})).appendTo("body").filter(".voice-search-popup"),t=this;this._voicePopup=e.bem("voice-search-popup",{showMicHelper:this.params.showMicHelper}),this._voicePopup.on({start:function(){t._setVoiceSearchState(!0)},hide:function(){t._setVoiceSearchState(!1)},text:function(e,i){BEM.channel("voice-search").trigger("change"),i.session.recognizedText&&(t._hasRecognized||(t._hasRecognized=!0,home.stat.logPath("click","voice.data")))},success:function(e,i){t.val(i.session.recognizedText,{suggest:!1})},"after-success":function(){t._setVoiceSearchState(!1),t._submitForm()}})}},_setVoiceSearchState:function(e){this.toggleMod(this.elem("voice-search"),"active","yes",e)},_submitForm:function(){var e=this.findBlockOutside("suggest2-form");if(e)e.domElem.append($("<input>",{type:"hidden",name:"query_source",value:"voice"})),e.submit();else{var t=this.domElem.closest("form");t.length&&(t.append($("<input>",{type:"hidden",name:"query_source",value:"voice"})),t.submit())}},startRecognize:function(e){e=e||{},this.setMod("focused",""),this._initVoicePopup(),BEM.blocks["i-message-locker"].forceClose(),BEM.channel("voice-search").trigger("init"),this._voicePopup.startRecognition({origin:this.params.webspeechkitStaticOrigin,lang:this.params.recognitionLocale,apikey:"5e7c4b34-f4ff-49c1-a683-44439c124cc8",recognitionModel:"general",utteranceSilence:this.params.recognitionUtteranceSilence||100,applicationName:this.params.webspeechkitApplication,useAlice:!1!==e.alice&&this.hasMod("voice-alice","yes")})},_loadLib:function(){this._initVoicePopup(),this._voicePopup.loadSpeechkit(this.params.webspeechkitStaticOrigin)},_updateClear:function(){this._startedRecognize||this.__base.apply(this,arguments)}},{live:function(){var e=this.__base.apply(this,arguments);return this.liveBindTo("voice-search","mouseover",(function(){this._loadLib()})),this.liveBindTo("voice-search","pointerclick",(function(){home.stat.logPath("click","voice.on"),this.startRecognize()})),e}})},function(e,t){!function(){var e=function(e){this.type=e,this.propagationStopped=!1};e.prototype.stopPropagation=function(){this.propagationStopped=!0};var t=function(){};t.prototype.on=function(e,t,i){if("object"==typeof e){for(var n in e)e.hasOwnProperty(n)&&this.on(n,e[n],t);return this}var o=this._handlerStorage||(this._handlerStorage={});return(o[e]||(o[e]=[])).push({fn:t,ctx:i}),this},t.prototype.un=function(e,t){for(var i=this._handlerStorage||(this._handlerStorage={}),n=i[e]||(i[e]=[]),o=0;o<n.length;++o)if(n[o].fn===t)return n.splice(o,1),this;return this},t.prototype.trigger=function(t,i){for(var n,o=new e(t),s=this._handlerStorage||(this._handlerStorage={}),r=s[t]||(s[t]=[]),a=0;a<r.length;++a){var c=r[a];if(!1===(n=c.fn.call(c.ctx||this,o,i))&&o.stopPropagation(),o.propagationStopped)break}return n},MBEM.Observable=t}()},function(e,t){var i;i=/\s+/,MBEM.cls={list:function(e){return e.split(i).filter(Boolean)},contains:function(e,t){return MBEM.cls.list(e.className).indexOf(t)>-1},add:function(e,t){var i=MBEM.cls.list(e.className);return-1===i.indexOf(t)&&i.push(t),e.className=i.join(" "),this},remove:function(e,t){var i=MBEM.cls.list(e.className),n=i.indexOf(t);return n>-1&&i.splice(n,1),e.className=i.join(" "),this},toggle:function(e,t,i){return i===undefined&&(i=!MBEM.cls.contains(e,t)),MBEM.cls[i?"add":"remove"](e,t)}}},function(e,t){MBEM.extend=function(e,t){for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];n instanceof Array||n instanceof Date||"object"!=typeof n||null===n?e[i]=n:(e[i]=e[i]||{},MBEM.extend(e[i],n))}return e}},function(e,t){!function(){var e="__uniqMBEM"+Math.random().toString().substr(2,5),t=MBEM.blocks={};MBEM.prototype=Object.create(MBEM.Observable.prototype),MBEM.prototype.getDefaultParams=function(){return{}};var i=MBEM._propListeners="__uniqMBEMListeners"+Math.random().toString().substr(2,5);MBEM.prototype.bindTo=function(e,t,n){return"function"==typeof t&&(n=t,t=e,e=this.domElem),"string"==typeof e?e=this.elem(e):Array.isArray(e)||(e=[e]),t.split(" ").forEach((function(t){e.forEach((function(e){var o=n.bind(this);o.origHandler=n,e[i]||(e[i]={}),e[i][t]||(e[i][t]=[]),e[i][t].push(o),e.addEventListener(t,o)}),this)}),this),this},MBEM.prototype.elem=function(e,t,i){var n=[],o=e.split(" ").map((function(e){var o=this.__self.className(e,t,i);return MBEM.cls.contains(this.domElem,o)&&n.push(this.domElem),"."+o}),this).join(",");return n.concat(MBEM.arrayFrom(this.domElem.querySelectorAll(o)))};var n=function(){};MBEM.override=function(e,t){return"function"==typeof t&&t.toString().indexOf("__base")>-1?(e=e||n,function(){var i=this.__base;this.__base=e;var n=t.apply(this,arguments);return this.__base=i,n}):t},MBEM.staticProto={},MBEM.staticProto.className=function(e,t,i){var n=this._name;return e&&(n+="__"+e),t!==undefined&&!1!==i&&(n+="_"+t+(!0!==i&&i!==undefined?"_"+i:"")),n},MBEM.decl=function(e,i,n){i=i||{};var o,s,r,a,c,l=!1;for(var u in"object"==typeof e&&e.baseBlock?(l=!0,c=e.baseBlock,e=e.block):c=e,c in t?(s=t[c].prototype,o=r=t[c]):(l=!0,s=MBEM.prototype,r=MBEM.staticProto),l&&(s=Object.create(s),(o=function(e){this.__internalConstructor(e),this.__constructor(e),this.__afterConstructor(e)}).prototype=s,o.prototype.constructor=o,o.prototype.__self=o,o._name=e,t[e]=o),i)i.hasOwnProperty(u)&&(s[u]=MBEM.override(s[u],i[u]));for(a in r)n&&n.hasOwnProperty(a)||o[a]||(o[a]=r[a]);if(n)for(a in n)n.hasOwnProperty(a)&&(o[a]=MBEM.override(r[a],n[a]));return o},MBEM.getBlock=function(t,i){return t[e]&&t[e][i]},MBEM.consoleError=function(){if(window.console&&window.console.error)try{window.console.error.apply(window.console,arguments)}catch(e){}},MBEM.prototype.__internalConstructor=function(t){t=t||{},this.domElem=t.node,this.params=MBEM.extend(this.getDefaultParams(),t.params||{}),t.node&&((t.node[e]||(t.node[e]={}))[this.__self._name]=this)},MBEM.prototype.__constructor=function(){},MBEM.prototype.__afterConstructor=function(){},MBEM.initBlockFromNode=function(e,t,i){var n;return(n=MBEM.getBlock(e,t))?n:(i||(i=MBEM.getNodeParams(e)[t]),MBEM._createBlockFromNode({node:e,block:t,params:i}))},MBEM.createBlock=function(e){if(t[e.block])return new t[e.block](e);MBEM.consoleError("Block is not declared",e.block)},MBEM._createBlockFromNode=MBEM.createBlock,MBEM.getNodeParams=function(e){var t;try{t=JSON.parse(e.getAttribute("data-bem"))||{}}catch(i){return void MBEM.consoleError("Incorrect params",e)}return t}}()},function(e,t){!function(){function e(){return-1!==document.documentElement.className.indexOf("svg_yes")}MBEM.decl("mini-suggest",{__constructor:function(){this.__base.apply(this,arguments),this._prevRequestText=null,this._focused=!1,this._empty=!0,this._setElements(),this._syncVal(),this._bindHandlers(),setTimeout(function(){document.activeElement===this._input&&this._onInputFocus()}.bind(this),0)},_setElements:function(){this._input=this.domElem},_bindHandlers:function(){this.bindTo(this._input,"focus",MBEM.eventProxy("_onInputFocus",this)).bindTo(this._input,"blur deactivate",MBEM.eventProxy("_onInputBlur",this)).bindTo(this._input,"input",MBEM.eventProxy("_onInput",this)),this.on("item-click",MBEM.eventProxy("_onItemClick",this)),9===document.documentMode&&this.bindTo(document,"selectionchange",(function(){document.activeElement===this._input&&this._onInput()}))},_onInputFocus:function(){this._fixScrollTop(),this._update(),this._checkAndShowPopup(),this._focused=!0,this._startInput()},_startInput:function(){this._inputStarted||(this._inputStarted=!0,this.trigger("start-input"))},_onInputBlur:function(){this._hidePopup(),this._focused=!1},_onInput:function(){this._input.value!==this._val&&(this._syncVal(),this._update(),this.trigger("input-change",{type:"user"}))},_checkAndShowPopup:function(){this._shouldShowPopup()&&this._showPopup()},_shouldShowPopup:function(){return!this._isShown&&!this._empty},_showPopup:function(){this._createPopup(),MBEM.cls.add(this.domElem,"mini-suggest_open"),this.trigger("popup-show"),this._isShown=!0},_hidePopup:function(){this._isShown&&(MBEM.cls.remove(this.domElem,"mini-suggest_open"),this.trigger("popup-hide"),this._isShown=!1)},_update:function(e){(e||this._prevRequestText!==this._val)&&(this._prevRequestText=this._val,!this.params.skipEmptyRequest||this._val?this._request(this._val,this._onResponse):this._renderItems([]))},_onResponse:function(e,t,i){var n=this._processResponse(t),o=e===this._prevRequestText;this.trigger("response",{data:t,items:n,url:i.url,duration:i.duration,relevant:o,text:e}),o&&this._renderItems(n)},_processResponse:function(e){return this.params.responseAdapter?this.params.responseAdapter(e):e},_renderItems:function(e){this._createPopup(),e.length?(this._popupContent.innerHTML=this._getItemsHTML(e),this.trigger("popup-update",{items:e}),this._empty=!1,this._focused&&this._checkAndShowPopup()):(this._popupContent.innerHTML="",this.trigger("popup-clear"),this._empty=!0,this._hidePopup()),this._syncItems(e)},_getItemsHTML:function(e){return e.reduce(this._renderItem.bind(this),"")},_renderItem:function(e,t,i){if(this.params.itemRenderer)return e+this.params.itemRenderer(t,i);var n=t[0];if(!this.__self.itemTypeIsSupported(n))return e;var o=this._buildItem(t,i),s=this._wrapItemLink(this._buildItemContent(t,o),o);return e+(s?"<"+o.tag+' class="'+o.className+'"'+this.__self.toHtmlAttrsString(o.attrs)+">"+s+"</"+o.tag+">":"")},_buildItem:function(e,t){return{tag:"li",className:"mini-suggest__item mini-suggest__item_type_"+e[0],attrs:{"data-index":t,"data-type":e[0]},content:{}}},_wrapItemLink:function(e,t){return t.linkAttrs?"<a"+this.__self.toHtmlAttrsString(t.linkAttrs)+">"+e+"</a>":e},_createPopup:function(){if(this._popup)return!1;var e=this._popup=document.createElement("div");e.className="mini-suggest__popup mini-suggest__popup_svg_"+(this.__self.hasSvg()?"yes":"no");var t=this._popupContent=document.createElement("ul");return t.className="mini-suggest__popup-content",t.setAttribute("role","listbox"),e.appendChild(t),this._appendPopup(e),this._popup},_appendPopup:function(e){MBEM.insertAfter(e,this._input)},_onPopupClick:function(e){var t=MBEM.closest(e.target,"mini-suggest__item");if(t){var i=t.getAttribute("data-text"),n=t.getAttribute("data-type");switch(n){case"tpah":this._handleTpahClick(e,t,i);break;case"fulltext":case"fact":this._changeText(i,"suggest-item",!1,(function(){this.trigger("item-click",this._getItemEventProps(t,n))}));break;case"nav":this.trigger("item-click",this._getItemEventProps(t,n)),this._touchClick(e)}}},_handleTpahClick:function(e,t,i){this._changeText(i+" ","tpah",!0,(function(){this.trigger("item-tpah",{itemIndex:0|t.getAttribute("data-index"),val:i})}))},_onItemClick:function(){this.params.resetOnSelect&&(this._renderItems([]),this._prevRequestText=null)},_syncVal:function(){this._setVal(this._input.value)},_syncItems:function(e){this._dataItems=e,this._items=MBEM.arrayFrom(this._popupContent.querySelectorAll(".mini-suggest__item"))},_removeItem:function(e){this._items.splice(this._items.indexOf(e),1)},_setVal:function(e){this._val=e,MBEM.cls.toggle(this.domElem,this.__self.className("","has-value","yes"),!!this._val)},_setInputVal:function(e){this._input.value=e},_changeText:function(e,t,i,n){this._input.focus(),i=i===undefined||i,this._setInputVal(e),this._syncVal(),this._moveCaret(),i&&(this._update(),this.trigger("input-change",{type:t})),n&&n.call(this)},_getMainUrlParams:function(t){var i={svg:e()?1:0,part:t,pos:this._getCaretPosition()};return this.params.getExtraUrlParams&&(i=MBEM.extend(i,this.params.getExtraUrlParams(t))),i},_getCaretPosition:function(){var e,t=this._val.length;return document.selection?((e=document.selection.createRange()).moveStart("character",-t),e.text.length):"number"==typeof this._input.selectionStart?this._input.selectionStart:t},_moveCaretToEnd:function(){var e=this._val.length;try{if("undefined"!=typeof this._input.createTextRange){var t=this._input.createTextRange();t.collapse(!1),t.select()}else"number"==typeof this._input.selectionStart&&(this._input.scrollLeft=999999,this._input.setSelectionRange(e,e))}catch(i){}},_moveCaretToStart:function(){try{this._input.scrollLeft=0,this._input.setSelectionRange(0,0)}catch(e){}},_moveCaret:function(){this._moveCaretToEnd()},_getItemEventProps:function(e,t,i,n){return{node:e,type:t,subtype:e.getAttribute("data-subtype"),byKeyboard:!!n,itemIndex:0|e.getAttribute("data-index"),val:"nav"===t?this._val:i||this._val}},_blur:function(){this._input.blur();try{document.activeElement&&document.activeElement.blur()}catch(e){MBEM.consoleError("No active element")}},_handleClick:function(){},_fixScrollTop:function(){window.pageYOffset<1&&(document.body.scrollTop=0)},_touchClick:function(e,t){"touchend"===e.type&&(t||e.target).click()}},{hasSvg:e,toHtmlAttrsString:function(e){var t="";for(var i in e)e.hasOwnProperty(i)&&(t+=" "+i+'="'+String(e[i]).replace(/"/g,"&quot;")+'"');return t},itemTypeIsSupported:function(e){return["fulltext","tpah","nav","fact"].indexOf(e)>-1},itemTypeIsNavigable:function(e){return"nav"===e},itemTypeIsSearchable:function(e){return["fulltext","fact"].indexOf(e)>-1}})}()},function(e,t){MBEM.decl("mini-suggest",{__constructor:function(){this._freezeFocus=0,this.__base.apply(this,arguments)},_onInputBlur:function(){Date.now()<this._freezeFocus?this._input.focus():this.__base.apply(this,arguments)},_blur:function(){this._freezeFocus=0,this.__base.apply(this,arguments)}})},function(e,t){MBEM.decl("mini-suggest",{__constructor:function(){this.__base.apply(this,arguments),window.Ya&&Ya.Rum&&Ya.Rum.sendTimeMark&&Ya.Rum.sendTimeMark("695.1309")},_getNavSource:function(){return"/"}})},function(e,t){MBEM.decl("mini-suggest",{_createPopup:function(){var e=this.__base.apply(this,arguments);return e&&(this._handleClick(this._popup,MBEM.eventProxy("_onPopupClick",this)),this.bindTo(this._popup,"mouseover",MBEM.eventProxy("_onMouseover",this)).bindTo(this._popup,"mouseout",MBEM.eventProxy("_onMouseout",this))),e},_onMouseover:function(e){var t=MBEM.closest(e.target,"mini-suggest__item");t&&this._selectItem(t)},_onMouseout:function(e){MBEM.closest(e.target,"mini-suggest__item")&&this._unselectAll()},_update:function(){this._unselectAll(),this.__base.apply(this,arguments)},_selectItem:function(e){this._unselectAll(),e&&MBEM.cls.add(e,"mini-suggest__item_selected_yes")},_unselectAll:function(){if(this._popup){var e=this._popupContent.querySelectorAll(".mini-suggest__item_selected_yes");MBEM.arrayFrom(e).forEach((function(e){MBEM.cls.remove(e,"mini-suggest__item_selected_yes")}))}},_handleClick:function(e,t){return this.bindTo(e,"mousedown",(function(e){e.preventDefault()})).bindTo(e,"click",(function(e){!e.button&&t&&t.call(this,e)})),this}})},function(e,t){MBEM.decl("mini-suggest",{_handleClick:function(e){return this.__base.apply(this,arguments).bindTo(e,"mousedown",(function(){this._freezeFocus=Date.now()+1e3})),this}})},function(e,t){MBEM.decl("mini-suggest",{__constructor:function(){this.__base.apply(this,arguments),this.on("popup-show",(function(){MBEM.channel("mini-suggest").trigger("show")})),this.on("input-change",(function(){MBEM.channel("mini-suggest").trigger("input-change")})),this.on("start-input",(function(){MBEM.channel("mini-suggest").trigger("start-input")}))}})},function(e,t){Date.now||(Date.now=function(){return(new Date).getTime()})},function(e,t){MBEM.offset=function(e){if(!e)return{top:0,left:0};var t=e.getBoundingClientRect(),i=document.documentElement.getBoundingClientRect();return{top:t.top-i.top,left:t.left-i.left}}},function(e,t){MBEM.closest=function(e,t){for(;e&&e!==document;){if(MBEM.cls.contains(e,t))return e;e=e.parentNode}}},function(e,t){MBEM.encodeUriComponent=function(e){try{return encodeURIComponent(e)}catch(t){e=e.replace(/[\ud800-\udbff](?![\udc00-\udfff])/g,"").replace(/([^\ud800-\udbff]|^)[\udc00-\udfff]/g,(function(e){return e.slice(0,-1)}));try{return encodeURIComponent(e)}catch(i){throw new URIError("  : "+e)}}}},function(e,t){MBEM.appendUrlParams=function(e,t){return e+(e.indexOf("?")>-1?"&":"?")+Object.keys(t).map((function(e){return e+"="+MBEM.encodeUriComponent(t[e])})).join("&")}},function(e,t){MBEM.throttle=function(e,t,i){var n,o,s,r=null,a=0;i||(i={});var c=function(){a=!1===i.leading?0:(new Date).getTime(),r=null,s=e.apply(n,o),r||(n=o=null)};return function(){var l=(new Date).getTime();a||!1!==i.leading||(a=l);var u=t-(l-a);return n=this,o=arguments,u<=0||u>t?(r&&(clearTimeout(r),r=null),a=l,s=e.apply(n,o),r||(n=o=null)):r||!1===i.trailing||(r=setTimeout(c,u)),s}}},function(e,t){MBEM.insertAfter=function(e,t){"function"==typeof t.insertAdjacentElement?t.insertAdjacentElement("afterend",e):t.parentNode.insertBefore(e,t.nextSibling)}},function(e,t){MBEM.encode=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}},function(e,t){MBEM.resolveUrl=function(e){return(/[/]{2}/.test(e)?"":"http://")+e}},function(e,t){MBEM.eventProxy=function(e,t){return function(){return t[e].apply(t,arguments)}}},function(e,t){MBEM.transitionendEvent=function(){var e=document.createElement("el"),t={transition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var i in t)if(e.style[i]!==undefined)return t[i]}},function(e,t){var i;i={},MBEM.channel=function(e){if(e!==undefined&&i[e])return i[e];var t=new MBEM.Observable;return e!==undefined&&(i[e]=t),t}},function(e,t){MBEM.decl("mini-suggest",{__constructor:function(){this.__base.apply(this,arguments),this.params.counter&&(this._isSendBeaconAvailable="sendBeacon"in navigator&&-1===(navigator.userAgent||"").indexOf("UCBrowser"),this._clearCounters(),this.on("submit",this._handleSubmit,this).on("request",this._handleRequest,this).on("response",this._handleResponse,this).on("start-input",this._handleStartInput,this).on("input-change",this._handleInputChange,this).on("popup-show",this._handlePopupShow,this).on("popup-update",this._handlePopupUpdate,this).on("item-click",this._handleItemClick,this).on("item-tpah",this._handleItemTpah,this).on("button-click",this._handleButtonClick,this).on("input-enter",this._handleInputEnter,this))},_handleInputEnter:function(){this._path.submit="keyboard"},_handleSubmit:function(){this._addAction("submit"),this._sendCounters()},_handleRequest:function(){++this._responses.rqs},_handleResponse:function(e,t){var i=Date.now();++this._responses.rsp,t.items.length||++this._responses.ersp,!t.relevant&&t.items.length&&++this._responses.lrsp,t.duration!==undefined&&(this._params.times+=(this._params.times?".":"")+t.duration),this._cachedUrls[t.url]&&i-this._cachedUrls[t.url]<6e4&&++this._responses.cchd,t.url&&(this._cachedUrls[t.url]=i),t.items.length&&(this._lastRenderTime=i),this._meta=t.data[2]||{}},_handlePopupUpdate:function(e,t){++this._responses.rndr,this._lastRenderTime&&(this._params.render_times+=(this._params.render_times?".":"")+(Date.now()-this._lastRenderTime),this._lastRenderTime=null),this._countItemTypes(t.items)},_handlePopupShow:function(){this._changePathState("not_used")},_handleItemClick:function(e,t){var i=t.node.getAttribute("data-log-type")||("nav"===t.type?"nav":t.personal?"history":"phrase");t.personal&&(this._path.personal="nah_used"),this._addAction(i,{index:t.itemIndex+1}),this._changePathState(t.byKeyboard?"keyboard":"mouse")&&(this._path.index=t.itemIndex+1),this._path.submit=t.byKeyboard?"keyboard":"click_by_mouse",++this._ratio.actionsCount,this.__self.itemTypeIsNavigable(t.type)&&this._sendCounters()},_handleItemTpah:function(e,t){this._changePathState("tpah"),this._path.index=0,this._addAction("word",{index:t.itemIndex+1}),++this._ratio.actionsCount,++this._responses.clks},_handleButtonClick:function(){++this._ratio.actionsCount,this._changePathState("suggest"),this._path.submit="button_by_mouse"},_handleInputChange:function(e,t){var i=Date.now();if(this._changePathState("edit"),this._path.index=0,"user"!==t.type&&"clear"!==t.type&&"tpah"!==t.type||(this._firstChangeTime=this._firstChangeTime||i,this._lastChangeTime=i),++this._ratio.actionsCount,"user"===t.type){var n=this._input.value.length-this._prevVal.length;n>0?this._addAction("add",{diffLength:n}):this._addAction("del",{diffLength:n})}else"clear"===t.type&&this._addAction("clear");"nah_used"===this._path.personal&&(this._path.personal="nah_not_used"),this._prevVal=this._input.value},_handleStartInput:function(){this._startInputTime=this._startInputTime||Date.now()},_changePathState:function(e){switch(e){case"not_used":if("not_shown"!==this._path.state)return!1;break;case"mouse":case"keyboard":case"tpah":if("edit"===this._path.state)return!1;break;case"edit":if("not_shown"===this._path.state||"not_used"===this._path.state)return!1;break;case"suggest":if("keyboard"!==this._path.state)return!1}return this._path.state=e,!0},_addAction:function(e,t){var i=Date.now(),n=t||{};!this._isReqIDAttached&&this._reqID&&this._attachReqID(),this._firstActionTime=this._firstActionTime||i,n.time=i-this._firstActionTime,n.name=e,this._tpah.push(n)},_sendCounters:function(){var e=this._getCounterUrl();this._clearCounters(),this._sendStatUrl(e)},_sendStatUrl:function(e){if((e+=(e.indexOf("?")>-1?"&":"?")+"_="+Date.now(),this._isSendBeaconAvailable)&&navigator.sendBeacon(e," "))return;MBEM.ajax(e)},_clearCounters:function(){this._params={text:"",times:"",render_times:""},this._path={service:this.params.counter.service,state:"not_shown",index:0,personal:"nah_not_shown",submit:"button_by_mouse"},this._ratio={len:0,queryLen:0,actionsCount:0},this._firstChangeTime=null,this._lastChangeTime=null,this._startInputTime=null,this._reqID=this.__self._generateReqID(this.params.counter.yandexuid),this._isReqIDAttached=!1,this._tpah=[],this._firstActionTime=0,this._prevVal=this._input.value,this._startValLength=this._input.value.length,this._responses={rqs:0,rsp:0,rndr:0,ersp:0,lrsp:0,clks:0,cchd:0},this._typeCounts={},this._cachedUrls={},this._lastRenderTime=0,this._meta={}},_attachReqID:function(){this._appendHiddenInput("suggest_reqid",this._reqID),this._isReqIDAttached=!0},_getCounterUrl:function(){return this.params.counter.url+"/"+this._getCounterUrlParams().join("/").replace(/(\/+)/g,"/")},_getParamsList:function(){return[{text:this._input.value,pos:this._getCaretPosition(),type_counts:JSON.stringify(this._typeCounts)},this.params.counter.params,this._getPath(),this._params,this._getRatio(),this._getChangeTimes(),this._getSession(),this._responses,{suggest_reqid:this._reqID},this._getTpah(),this._getMeta()]},_getPath:function(){return{path:[this._path.service,this._path.state,"p"+this._path.index,this._path.personal,this._path.submit].join(".")}},_getRatio:function(){var e=this._startValLength+this._tpah.reduce((function(e,t){return"add"===t.name||"del"===t.name?e+(t.diffLength||0):e}),0);return{ratio:[e>=0?e:this._input.value.length,this._input.value.length,this._ratio.actionsCount].join(".")}},_getChangeTimes:function(){var e=Date.now();return{since_first_change:e-(this._firstChangeTime||e),since_last_change:e-(this._lastChangeTime||e),total_input_time:e-(this._startInputTime||e)}},_getSession:function(){return{session:Date.now()+Math.round(1e4*Math.random())}},_getTpah:function(){return{tpah_log:"["+this._tpah.map((function(e){var t=[e.name,"p"+(e.index||0),e.time];return e.diffLength!==undefined&&t.push(e.diffLength),e.extend&&t.push.apply(t,e.extend),"["+t.join(",")+"]"})).join(",")+"]"}},_getCounterUrlParams:function(){return this._getParamsList().concat({"*data":"url="+document.location.origin}).reduce(function(e,t){return e.concat(this._getParams(t))}.bind(this),[]).concat(["/"])},_getParams:function(e){return Object.keys(e).reduce((function(t,i){return""===e[i]||t.push(i+"="+MBEM.encodeUriComponent(e[i]).replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%2C/g,",").replace(/\*/g,"%2A")),t}),[])},_getMainUrlParams:function(){var e=this.__base.apply(this,arguments);return this._reqID&&(e.suggest_reqid=this._reqID),e},_countItemTypes:function(e){e.forEach((function(e){var t=this._getItemType(e);t&&this._incTypeCount(t)}),this)},_getItemType:function(e){var t,i;return Array.isArray(e)&&(e[5]&&e[5].personal?t="pers":(t=e[0],i=e[5]&&e[5].type)),i&&(t+="_"+i),t},_incTypeCount:function(e){this._typeCounts[e]===undefined&&(this._typeCounts[e]=0),this._typeCounts[e]++,e.indexOf("pers")>-1&&"nah_not_shown"===this._path.personal&&(this._path.personal="nah_not_used")},_getMeta:function(){var e={};for(var t in this.__self.metaProps)e[this.__self.metaProps[t]]=this._meta[t]||"";return e}},{_generateReqID:function(e){return(e=e||this._random(9)+this._random(9))+Date.now().toString().slice(-7)+this._random(7)},_random:function(e){return Math.random().toString().slice(2,Math.min(e,10)+2)},metaProps:{exprt:"exprt",r:"region",log:"log"}})},function(e,t){MBEM.decl("mini-suggest",{__constructor:function(){this.__base.apply(this,arguments),this.params.counter&&this.on("item-select",this._handleItemSelect,this)},_handleItemSelect:function(e,t){t.personal?this._path.personal="nah_used":"nah_used"===this._path.personal&&(this._path.personal="nah_not_used"),this._changePathState("keyboard")&&(this._path.index=t.itemIndex+1),++this._ratio.actionsCount},_handleItemClick:function(){this._responses.clks++,this.__base.apply(this,arguments)}})},function(e,t){!function(){var e="XDomainRequest"in window?XDomainRequest:XMLHttpRequest,t={};function i(e){var i=0;return t[e]&&(i=Date.now()-t[e]),t[e]=null,i}MBEM.ajax=function(n,o){o=o||{};var s=new e;return function(e){t[e]=Date.now()}(n),s.open("get",n,!0),s.withCredentials=!0,s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status)try{o.successCallback&&o.successCallback.call(o.ctx,JSON.parse(s.responseText),{url:n,duration:i(n)})}catch(e){MBEM.consoleError("Incorrect suggestions JSON")}else o.errorCallback&&o.errorCallback(s.status,s.statusText,s.responseText)},o.timeout&&(s.timeout=o.timeout),s.send(),function(){s.abort()}}}()},function(e,t){MBEM.decl("mini-suggest",{_buildItem:function(e){var t=this.__base.apply(this,arguments),i="object"==typeof e[5]&&null!==e[5]?e[5].counter:e[5];return i&&(t.attrs["data-suggest-counter"]=(this.params.clickHost||"")+MBEM.encode(i)),t},_onItemClick:function(e,t){if(this.__base.apply(this,arguments),this.__self.itemTypeIsNavigable(t.type)){var i=t.node.getAttribute("data-suggest-counter");i&&((new Image).src=i,this._addMetrikaCookie(t.node.querySelector(".mini-suggest__item-link")))}},_addMetrikaCookie:function(e){var t=this._val,i=this._reqID,n=[t,e.href,this.params.navSource,i].map(MBEM.encodeUriComponent).join(":"),o=Date.now();document.cookie="sc_"+o+"="+n+";path=/watch;domain=."+(location.hostname.match(/yandex\..+$/)||[])[0]+";expires="+new Date(o+6e5).toUTCString()+";secure"+(this.params.sameSiteSupport?";SameSite=None":"")}})},function(e,t){MBEM.decl("mini-suggest",{__constructor:function(){this.__base.apply(this,arguments),this._reqidInCookie=this.params.counter&&this.params.counter.reqidInCookie,this._reqidInCookie&&this._detachReqID()},_addAction:function(e,t){if(this._reqidInCookie){var i=Date.now(),n=t||{};this._firstActionTime=this._firstActionTime||i,n.time=i-this._firstActionTime,n.name=e,this._tpah.push(n)}else this.__base.apply(this,arguments)},_handleSubmit:function(){(2===this._reqidInCookie&&this._tpah.length||this._reqidInCookie&&2!==this._reqidInCookie)&&this._attachReqID(),this.__base.apply(this,arguments)},_attachReqID:function(){1===this._reqidInCookie||2===this._reqidInCookie?this._setReqidCookie(this._reqID,3,new Date(Date.now()+3e3).toUTCString()):this.__base.apply(this,arguments)},_detachReqID:function(){this._setReqidCookie("",-1,"Thu, 01 Jan 1970 00:00:01 GMT")},_setReqidCookie:function(e,t,i){var n="."+(location.hostname.match(/yandex\..+$/)||[])[0];document.cookie="suggest_reqid="+e+";domain="+n+";max-age="+t+";expires="+i+";secure"+(this.params.sameSiteSupport?";SameSite=None":"")}})},function(e,t){MBEM.decl("mini-suggest",{__constructor:function(){this.__base.apply(this,arguments),this._enableCounterSrc=this.params.counter&&this.params.counter.src},_handleItemClick:function(e,t){this.__base.apply(this,arguments),!this._enableCounterSrc||"fulltext"!==t.type&&"fact"!==t.type||this._attachSrc()},_handleButtonClick:function(){this.__base.apply(this,arguments),this._enableCounterSrc&&this._attachSrc()},_attachSrc:function(){if(this._path.index>0&&this._meta[this.__self.metaProps.log]){var e=this._meta[this.__self.metaProps.log].match(/(sgtype:){0}([A-Z][a-z]*)/g),t=e&&e[this._path.index-1];t&&this._appendHiddenInput("src","suggest_"+t)}}})},function(e,t){MBEM.decl({block:"mini-suggest",modName:"re-request",modVal:"yes"},{__constructor:function(){this.__base.apply(this,arguments),this.params.counter&&this.on("re-request",this._handleReRequest,this).on("re-response",this._handleReResponse,this).on("re-popup-update",this._handleRePopupUpdate,this)},_handleReResponse:function(e,t){++this._reResponses.drsp,t.items.length||++this._reResponses.dersp,!t.relevant&&t.items.length&&++this._reResponses.dlrsp},_handleReRequest:function(){++this._reResponses.drqs},_handleRePopupUpdate:function(){++this._reResponses.drndr},_clearCounters:function(){this.__base.apply(this,arguments),this._reResponses={drqs:0,drsp:0,dlrsp:0,dersp:0,drndr:0}},_getParamsList:function(){var e=this.__base();return e.push(this._reResponses),e}})},function(e,t){MBEM.decl({block:"mini-suggest",modName:"re-request",modVal:"yes"},{_handleReResponse:function(e,t){this.__base.apply(this,arguments),t.relevant&&t.items.length&&(this._meta=t.data[2]||{})}})},function(e,t){MBEM.decl("mini-suggest",{__constructor:function(){this.__base.apply(this,arguments),this._selectedItem=-1,this._keyboardStartValue=this._val},_bindHandlers:function(){this.__base.apply(this,arguments),this.bindTo(this._input,"keydown",MBEM.eventProxy("_onKeydown",this)).bindTo(this._input,"keypress",MBEM.eventProxy("_onKeypress",this)).bindTo(this._input,"click",MBEM.eventProxy("_checkAndShowPopup",this)),this.on("input-change",MBEM.eventProxy("_onInputChange",this))},_onInputChange:function(e,t){"select"!==t.type&&"unselect"!==t.type&&(this._keyboardStartValue=this._val)},_onKeydown:function(e){var t,i=this.__self.keyboard;!this._popupContent||!this._isShown||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||e.which!==i.arrowUp&&e.which!==i.arrowDown?this._isShown&&e.which===i.esc&&(this._hidePopup(),this._unselectAll()):(e.preventDefault(),e.which===i.arrowUp?t=-1===this._selectedItem?this._items.length-1:this._selectedItem-1:e.which===i.arrowDown&&(t=this._selectedItem===this._items.length-1?-1:this._selectedItem+1),t<0?this._selectItem(null,t,!0):this._selectItem(this._items[t],t,!0))},_onKeypress:function(e){var t=this.__self.keyboard;if(e.which===t.enter){var i=this._selectedItem>-1&&this._items[this._selectedItem];if(e.preventDefault(),i){var n=i.getAttribute("data-type");this.trigger("item-click",this._getItemEventProps(i,n,null,!0))}else this.trigger("input-enter"),this._doSubmit()}},_selectItem:function(e,t,i){if(this.__base.apply(this,arguments),e){if(this._selectedItem=t===undefined?this._items.indexOf(e):t,i){var n=e.getAttribute("data-type"),o=e.getAttribute("data-text");this._changeText(o,"select",!1),this.trigger("item-select",this._getItemEventProps(e,n,o,!0),!0)}}else this._selectedItem=-1,this._changeText(this._keyboardStartValue,"unselect",!1)},_unselectAll:function(){this.__base.apply(this,arguments),this._selectedItem=-1},_onItemClick:function(e,t){this.__base.apply(this,arguments),"nav"===t.type&&t.byKeyboard&&this._openLinkByKeyboard(t)},_openLinkByKeyboard:function(e){var t=e.node.querySelector(".mini-suggest__item-link"),i=t.getAttribute("target"),n=t.getAttribute("href");if("_self"===i)setTimeout((function(){window.location=n}),0);else{var o=window.open("",i);o.opener=null,o.location=n}}},{keyboard:{enter:13,arrowUp:38,arrowDown:40,esc:27}})},function(e,t){MBEM.decl("mini-suggest",{_buildItem:function(e){var t=this.__base.apply(this,arguments),i=e[0],n=e[1],o=e[3],s=e[4],r=e[5];return"tpah"===i&&r&&r.tpah&&(n=n.slice(r.tpah[0],r.tpah[2])),t.content.title=MBEM.encode(n),t.content.info=o&&MBEM.encode(o),t.attrs.role="option",t.attrs["data-text"]=MBEM.encode(this._getItemText(e)),s&&(t.linkAttrs={href:MBEM.resolveUrl(s),target:MBEM.encode(e[5]&&e[5].target||"_blank"),rel:"noopener","class":"mini-suggest__item-link"}),t},_getItemText:function(e){var t=e[0],i=e[1],n=e[3],o=e[5];return o&&o.searchQuery||("fact"!==t||o&&o.inline?i:n)},_buildItemContentTitle:function(e,t){return t.content.title||""},_buildItemContentInfo:function(e,t){return t.content.info||""},_buildItemContentButton:function(e,t){return t.content.button?'<span class="mini-suggest__'+t.content.button+' mini-suggest__item-button"></span>':""},_buildItemContentAdds:function(){return""}})},function(e,t){MBEM.decl("mini-suggest",{_buildItem:function(e){var t=this.__base.apply(this,arguments);return e[5]&&e[5].hl&&(t.content.title=this._highlightText(e[1],e[5].hl)),e[5]&&e[5].inline&&(t.className+=" mini-suggest__item_inline"),t},_highlightText:function(e,t){var i=t.reduce((function(t,i){var n=i[0],o=i[1];return n!==t.lastIndex&&(t.text+=MBEM.encode(e.slice(t.lastIndex,n))),t.text+="<b>"+MBEM.encode(e.slice(n,o))+"</b>",t.lastIndex=o,t}),{text:"",lastIndex:0});return i.text+MBEM.encode(e.slice(i.lastIndex))}})},function(e,t){MBEM.decl("mini-suggest",{_buildItem:function(e){var t=this.__base.apply(this,arguments),i=e[0],n=e[5];if(n){var o=n.descr,s=n.mark,r=n.icon,a=n.type;s&&(s=Array.isArray(s)?s:[s],t.content.mark=s.map((function(e){return'<span class="mini-suggest__item-mark mini-suggest__item-mark_type_'+MBEM.encode(e)+'"></span>'})).join(""),t.className+=" mini-suggest__item_mark_yes"),o&&(o=Array.isArray(o)?o:[o],t.content.descr=o.map((function(e){return e?'<span class="mini-suggest__item-descr">'+MBEM.encode(e)+"</span>":""})).join("")),a&&(t.className+=" mini-suggest__item_subtype_"+a),r&&(t.content.icon='<span class="mini-suggest__item-icon mini-suggest__item-icon_size_'+MBEM.encode(r.size||"s")+'" style="background-image:url('+MBEM.encode(r.url)+');"></span>'),"nav"!==i&&"fact"!==i||(t.content.wrapper=['<div class="mini-suggest__item-content">',"</div>"]),n.img&&(n.img.url||n.img.icon)&&(t.content.thumb=this._buildThumb(n)),"nav"===i&&n.monochrome&&(t.className+=" mini-suggest__item_monochrome")}return t},_buildItemContent:function(e,t){return t.content.button&&(t.className+=" mini-suggest__item_with-button"),(t.content.thumb||"")+(t.content.wrapper&&t.content.wrapper[0]||"")+this._buildItemContentMain(e,t)+(t.content.wrapper&&t.content.wrapper[1]||"")},_buildThumb:function(e){var t="",i="",n="",o="";return e.img.badge&&!e.img.round&&(o+='<div class="mini-suggest__item-thumb-badge"',e.img.badgeColor&&(o+=' style="background-color:'+MBEM.encode(e.img.badgeColor)+';color:#333;"'),o+=">"+MBEM.encode(e.img.badge)+"</div>"),t+=" mini-suggest__item-thumb_orientation_"+(e.img.aspect&&!e.img.round?MBEM.encode(e.img.aspect):"square"),t+=" mini-suggest__item-thumb_size_"+(e.img.size?MBEM.encode(e.img.size):"m"),t+=e.img.shade?" mini-suggest__item-thumb_shade":"",t+=e.img.border||!e.img.icon&&"base"===e.type?" mini-suggest__item-thumb_border":"",t+=e.img.contain?" mini-suggest__item-thumb_contain":"",t+=e.img.cover?" mini-suggest__item-thumb_cover":"",t+=e.img.round?" mini-suggest__item-thumb_round":"",t+=e.img.icon?" mini-suggest__item-thumb_icon_"+e.img.icon:"",n+=e.img.color?"background-color:"+MBEM.encode(e.img.color)+";":"",'<div class="mini-suggest__item-thumb'+t+'"'+(i+=(n+=e.img.url?"background-image:url("+MBEM.encode(e.img.url)+");":"")?' style="'+n+'"':"")+">"+o+"</div>"},_buildItemContentAdds:function(e,t){return(t.content.mark||"")+(t.content.descr||"")}})},function(e,t){MBEM.decl("mini-suggest",{_buildItemContentMain:function(e,t){var i=this._buildItemContentTitle(e,t),n=this._buildItemContentInfo(e,t)+this._buildItemContentAdds(e,t)+this._buildItemContentButton(e,t);return!i||"nav"!==e[0]&&"fact"!==e[0]||(i='<span class="mini-suggest__item-title">'+i+"</span>"),"nav"!==e[0]&&"fact"!==e[0]||!e[5]||e[5].inline||(n='<div class="mini-suggest__item-subtitle">'+n+"</div>"),i+n},_buildItemContentInfo:function(e,t){var i=this.__base.apply(this,arguments),n="";return this._shouldAddContentInfoArrow(e)&&(n+='<span class="mini-suggest__item-info-arrow"></span>'),n+=t.content.icon||"",i&&(n+='<span class="mini-suggest__item-info">'+i+"</span>"),n},_shouldAddContentInfoArrow:function(e){return e[5]&&e[5].inline&&"fact"===e[0]&&!e[5].icon}})},function(e,t){MBEM.decl("mini-suggest",{_shouldAddContentInfoArrow:function(e){return this.__base.apply(this,arguments)||e[5]&&"mt"===e[5].type}})},function(e,t){var i,n;i=MBEM.blocks,n=MBEM.decl,MBEM.decl=function(e,t,o){if(t=t||{},"object"==typeof e&&e.modName){var s;for(var r in s=e.block in i?i[e.block].prototype:MBEM.prototype,t)t.hasOwnProperty(r)&&"function"==typeof t[r]&&function(){var i=e,n=s[r],o=t[r];t[r]=function(){return this._simpleCheckMod(i.modName,i.modVal)?o.apply(this,arguments):n&&this.__base?n.apply(this,arguments):void 0}}();e=e.block}return n(e,t,o)},MBEM.prototype.__internalConstructor=MBEM.override(MBEM.prototype.__internalConstructor,(function(e){this._modCache=e&&e.mods||this._extractInitMods(e),this.__base.apply(this,arguments)})),MBEM.prototype._extractInitMods=function(e){var t={};if(!e||!e.node)return t;for(var i,n,o=MBEM.cls.list(e.node.className),s=this.__self._name+"_",r=0;r<o.length;++r)0===o[r].indexOf(s)&&((n=(i=o[r].substring(s.length)).indexOf("_"))>-1?t[i.substring(0,n)]=i.substring(n+1):t[i]=!0);return t},MBEM.prototype._simpleCheckMod=function(e,t){return t===undefined?!!this._modCache[e]:this._modCache[e]===t}},function(e,t){MBEM.decl({block:"mini-suggest",modName:"request"},{_prepareRequestUrl:function(e,t){var i=MBEM.appendUrlParams(this.params.url,this._getMainUrlParams(e));return t&&(i=MBEM.appendUrlParams(i,t)),i}})},function(e,t){MBEM.decl({block:"mini-suggest",modName:"request",modVal:"jsonp"},{_request:function(e,t,i){var n=document.createElement("script"),o=this._initRequestCallback(),s=this._prepareRequestUrl(e,{callback:o}),r="undefined"!=typeof document.currentScript,a=r?Math.random().toString().substr(2,5):o;this._callbackStorage[a]={start:Date.now(),url:s,text:e,callback:t},n.dataset.id=a,n.src=s,n.onload=function(){r||delete window[o],delete this._callbackStorage[a],n.parentNode.removeChild(n)}.bind(this),n.onerror=function(){r||delete window[o],delete this._callbackStorage[a],n.parentNode.removeChild(n),i&&i.call(this)}.bind(this),document.head.appendChild(n),this.trigger("request",{text:e})},_initRequestCallback:function(){var e="undefined"!=typeof document.currentScript;if(this._callbackName&&e)return this._callbackName;var t=this._callbackName=(this.params.jsonpCallbackPrefix||"onSuggestResponse")+Math.random().toString().substr(2,5);return this._callbackStorage=this._callbackStorage||{},window[t]=function(i){var n;if(e?document.currentScript&&(n=this._callbackStorage[document.currentScript.dataset.id]):n=this._callbackStorage[t],n){var o=Date.now()-n.start;return n.callback.call(this,n.text,i,{url:n.url,duration:o})}}.bind(this),t}})},function(e,t){MBEM.decl({block:"mini-suggest",modName:"request",modVal:"xhr"},{_request:function(e,t,i){this.params.abortPrevXhr&&this._abortPrevXhr&&this._abortPrevXhr(),this._abortPrevXhr=MBEM.ajax(this._prepareRequestUrl(e),{successCallback:t.bind(this,e),errorCallback:i,ctx:this,timeout:this.params.xhrTimeout}),this.trigger("request",{text:e})}})},function(e,t){MBEM.decl({block:"mini-suggest",modName:"separate-popup",modVal:"yes"},{_bindHandlers:function(){this.__base.apply(this,arguments),this.bindTo(window,"orientationchange resize",this._repositionPopup.bind(this))},_createPopup:function(){if(this._popup)return!1;var e=this.__base.apply(this,arguments),t=this.params.popupMods,i=this.params.popupMix;for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];if(!o)continue;MBEM.cls.add(this._popup,"mini-suggest__popup_"+n+(!0===o?"":"_"+o))}if(i)for(var s=0;s<i.length;s++)MBEM.cls.add(this._popup,i[s]);return e},_appendPopup:function(e){(this.params.getPopupContainer&&this.params.getPopupContainer()||document.body).appendChild(e)},_repositionPopup:function(){this.__base.apply(this,arguments),this._popup&&(this._popup.style.top=MBEM.offset(this._input).top+this._input.offsetHeight+this.params.popupOffset+"px")},_showPopup:function(){this.__base.apply(this,arguments),MBEM.cls.add(this._popup,"mini-suggest__popup_visible"),this._repositionPopup()},_hidePopup:function(){this._isShown&&(this.__base.apply(this,arguments),MBEM.cls.remove(this._popup,"mini-suggest__popup_visible"))},getDefaultParams:function(){var e=this.__base.apply(this,arguments);return e.popupOffset=0,e}})},function(e,t){MBEM.decl({block:"mini-suggest",modName:"separate-popup",modVal:"yes"},{_repositionPopup:function(){this.__base.apply(this,arguments),this._popup&&(this._popup.style.width=this._input.offsetWidth+"px",this._popup.style.left=MBEM.offset(this._input).left+"px")}})},function(e,t){var i=function(){return Math.abs(window.innerWidth-document.documentElement.clientWidth)>1};MBEM.decl("mini-suggest",{_renderItems:function(){var e=i();this.__base.apply(this,arguments),e!==i()&&this._repositionPopup()},_repositionPopup:function(){if(this.__base.apply(this,arguments),this._popup){var e=this._input.getBoundingClientRect().width;MBEM.closest(this._input,"input_theme_normal")?this._popup.style.width=e-2+"px":MBEM.cls.contains(document.documentElement,"document_new-search-dark_yes")?this._popup.style.width=e+2+"px":this._popup.style.width=e+"px"}}})},function(e,t){MBEM.decl({block:"mini-suggest",modName:"personal",modVal:"yes"},{__constructor:function(){this.__base.apply(this,arguments),this._historyState=0,this._transitionendEvent=MBEM.transitionendEvent(),this._afterTransition=this._afterTransition.bind(this)},_onDeleteClick:function(e,t){MBEM.cls.add(t,"mini-suggest__item_hidden_yes"),t.addEventListener(this._transitionendEvent,this._afterTransition),setTimeout(function(){this._afterDelete(t)}.bind(this),350),MBEM.ajax(this.params.deleteUrl+MBEM.encodeUriComponent(t.getAttribute("data-text"))),this._historyState+=1},_afterDelete:function(e){var t=e.parentNode;t&&(t.removeChild(e),this._removeItem(e),0===t.childNodes.length&&this._update(!0))},_afterTransition:function(e){this._afterDelete(e.target)},_onPopupClick:function(e){var t=e.target;if(MBEM.cls.contains(t,"mini-suggest__delete")){var i=MBEM.closest(t,"mini-suggest__item_personal_yes");if(i)return void this._onDeleteClick(t,i)}this.__base.apply(this,arguments)},_getMainUrlParams:function(){var e=this.__base.apply(this,arguments);return e.hs=this._historyState,e},_buildItem:function(e){var t=this.__base.apply(this,arguments);return"fulltext"===e[0]&&e[5]&&e[5].personal&&(t=this._personalExtend(t)),t},_personalExtend:function(e){return e.className+=" mini-suggest__item_personal_yes",e.attrs["data-personal"]=1,e.content.button="delete",e},_getItemEventProps:function(e){var t=this.__base.apply(this,arguments);return t.personal=!!e.getAttribute("data-personal"),t}})},function(e,t){MBEM.decl("mini-suggest",{__constructor:function(){this.__base.apply(this,arguments),!this._val&&this.params.url&&this.params.url.indexOf("history=1")>-1&&this._update()}})},function(e,t){MBEM.decl({block:"mini-suggest",modName:"personal",modVal:"yes"},{_buildItem:function(e){var t=this.__base.apply(this,arguments);return"fact"===e[0]&&e[5]&&e[5].personal&&(t=this._personalExtend(t)),t},_removeItem:function(){this.__base.apply(this,arguments),this._selectedItem=this._items.indexOf(this._popupContent.querySelector(".mini-suggest__item_selected_yes"))}})},function(e,t){MBEM.decl("mini-suggest",{_onDeleteClick:function(){this.__base.apply(this,arguments),this.trigger("item-delete")}})},function(e,t){MBEM.decl({block:"mini-suggest",modName:"search",modVal:"yes"},{_setElements:function(){this.__base.apply(this,arguments),this._form=this.domElem,this._input=this.elem("input")[0],this._button=this.elem("button")[0],this._clear=this.elem("input-clear")[0]},_bindHandlers:function(){this.__base.apply(this,arguments),this._handleClick(this._clear,MBEM.eventProxy("_onClearClick",this))._handleClick(this._button,MBEM.eventProxy("_onSubmitClick",this)).bindTo(this._form,"submit",MBEM.eventProxy("_onFormSubmit",this))},_doSubmit:function(){var e=document.createEvent("Event");e.initEvent("submit",!0,!0),!1!==this._form.dispatchEvent(e)&&setTimeout(function(){this._form.submit()}.bind(this),0)},_onFormSubmit:function(){this.trigger("submit"),this._blur()},_onSubmitClick:function(e){e.preventDefault(),this.trigger("button-click"),setTimeout(this._doSubmit.bind(this),0)},_onClearClick:function(){document.activeElement!==this._input&&(this._renderItems([]),this._input.focus()),this._changeText("","clear")},_onItemClick:function(e,t){this.__base.apply(this,arguments),this.__self.itemTypeIsSearchable(t.type,t.subtype)&&setTimeout(function(){this._doSubmit()}.bind(this),0)},_onInputFocus:function(){MBEM.cls.add(document.body,"body_search_yes"),this.__base.apply(this,arguments)},_onInputBlur:function(){MBEM.cls.remove(document.body,"body_search_yes"),this.__base.apply(this,arguments)},_appendHiddenInput:function(e,t){var i=this._form[e];i||((i=document.createElement("input")).type="hidden",i.name=e,this._form.appendChild(i)),i.value=t}})},function(e,t){MBEM.decl({block:"mini-suggest",modName:"search",modVal:"yes"},{_onClearClick:function(){this._freezeFocus=Date.now()+500,this.__base.apply(this,arguments)},_onInputBlur:function(){this.__base.apply(this,arguments),Date.now()<this._freezeFocus&&MBEM.cls.add(document.body,"body_search_yes")}})},function(e,t){MBEM.decl({block:"mini-suggest",modName:"search",modVal:"yes"},{_processResponse:function(e){var t=this.__self.hasSvg()?"svg":"png";return e[1].map((function(e){if("string"==typeof e)return["fulltext",e];if("string"==typeof e[0]&&e[0].length){if("weather"===e[0]||"traffic"===e[0]){var i=e[5]||e[4];return["fact",e[1],e[1],e[2],null,{type:e[0],inline:!0,icon:{size:"l",url:"//yastatic.net/suggest-flag-icons/icon."+e[0]+"."+e[3].replace("-","minus-").replace("+","plus-").replace(/_/g,"-")+"."+t},hl:i&&i.hl,personal:i&&!!i.pers}]}return"fact"===e[0]&&e[5]&&"phone"===e[5].type?e:"fact"===e[0]||"mt"===e[0]?["fact",e[1],e[1],e[2],null,{type:"fact"!==e[0]?e[0]:"",inline:!0,icon:e[3]&&e[3].icon,hl:e[3]&&e[3].hl,personal:e[3]&&!!e[3].pers}]:"icon"===e[0]?["fact",e[1],e[1],e[2]&&e[2].fact||null,null,{inline:!0,hl:e[2]&&e[2].hl,icon:{url:e[2].icon.filter((function(e){return e[0]===t}))[0][1]},personal:e[2]&&!!e[2].pers}]:e}return["fulltext",e[1],e[1],null,null,{hl:e[2]&&e[2].hl,personal:e[2]&&!!e[2].pers}]}))}})},function(e,t){MBEM.decl({block:"mini-suggest",modName:"theme",modVal:"flat"},{_createPopup:function(){var e=this.__base.apply(this,arguments);return e&&MBEM.cls.add(e,"mini-suggest__popup_theme_flat"),e}})},function(e,t){MBEM.decl({block:"mini-suggest",modName:"autofocus",modVal:"yes"},{__constructor:function(){this._hasUserActivasion=!1,this.__base.apply(this,arguments),this._val&&(this._hasUserActivasion=!0)},_shouldShowPopup:function(){return this.__base.apply(this,arguments)&&this._hasUserActivasion},_onInput:function(){this.__base.apply(this,arguments),this._hasUserActivasion=!0,this._startInput()},_bindHandlers:function(){this.__base.apply(this,arguments),this.bindTo(this._input,"click",MBEM.eventProxy("_onInputClick",this))},_onInputClick:function(){this._hasUserActivasion||(this._hasUserActivasion=!0,this._checkAndShowPopup(),this._startInput())},_startInput:function(){this._hasUserActivasion&&this.__base.apply(this,arguments)}})},function(e,t){MBEM.decl("mini-suggest",{_bindHandlers:function(){this.__base.apply(this,arguments),this.on("response",this._onAheadResponse),this.on("item-delete",this._onItemDelete),this._bemInput=$(this._input).closest(".input").bem("input"),this._bemInput.on("ahead-fill",(function(){this._syncVal(),this._update()}),this)},_onAheadResponse:function(e,t){if(t.relevant){var i=t.data[2];this._bemInput.setAhead(t.text+(i&&i["continue"]||""))}},_onItemDelete:function(){this._bemInput.unsetAhead()}})},function(e,t){MBEM.decl("mini-suggest",{__constructor:function(){this._hasTabChange=MBEM.cls.contains(this.domElem,"mini-suggest_tab-change_yes"),this._tabChange=!1,this.__base.apply(this,arguments)},_showPopup:function(){this._tabChange||this.__base.apply(this,arguments)},_onInput:function(){this._tabChange=!1,this.__base.apply(this,arguments)},_bindHandlers:function(){if(this.__base.apply(this,arguments),this._hasTabChange){var e=!0;$(window).on("focus",function(){var t;try{t=document.activeElement}catch(i){}e||(e=!0,t===this._input&&(this._tabChange=!0),this._hidePopup())}.bind(this)).on("blur",function(){e=!1,this._hidePopup()}.bind(this)),this.bindTo(this._input,"click",(function(){this._tabChange&&(this._tabChange=!1,this._checkAndShowPopup())}))}}})},function(e,t){MBEM.decl("mini-suggest",{_buildItem:function(e){var t=this.__base.apply(this,arguments),i=e[5];if(i&&"ad"===i.type){var n=t.content;if(t.attrs["data-text"]=MBEM.encode(this._input.value),t.attrs["data-linkht"]=MBEM.encode(i.linkht),n.descr='<span class="mini-suggest__item-label">'+MBEM.encode(this.params.direct.label)+"</span>",i&&!i.warn&&i.age&&(n.age='<div class="mini-suggest__item-warning mini-suggest__item-warning_type_age">'+MBEM.encode(i.age)+"</div>"),i&&!i.ad&&i.warn){var o=i.warnlen?" mini-suggest__item-warning_type_"+MBEM.encode(i.warnlen):"";n.warn='<div class="mini-suggest__item-warning-wrap"><div class="mini-suggest__item-warning'+o+'">'+MBEM.encode(i.warn.replace(/&quot;/g,'"'))+(i.age?" &middot; "+MBEM.encode(i.age):"")+"</div></div>"}}return t},_buildItemContentTitle:function(e,t){return this.__base.apply(this,arguments)+(t.content.age||"")},_buildItemContentMain:function(e,t){return this.__base.apply(this,arguments)+(t.content.warn||"")}})},function(e,t){MBEM.decl({block:"mini-suggest",modName:"direct",modVal:"yes"},{__constructor:function(){this._adVisibilityChekers={},this._prevVisibilityCounterUrls={},this.__base.apply(this,arguments)},_renderItems:function(e){this.__base.apply(this,arguments),this._isShown&&this._checkVisibilityAdvItems(e)},_hidePopup:function(){if(this._isShown){for(var e in this._adVisibilityChekers)this._adVisibilityChekers.hasOwnProperty(e)&&clearTimeout(this._adVisibilityChekers[e]);this._adVisibilityChekers={}}this.__base.apply(this,arguments)},_showPopup:function(){this._dataItems&&this._checkVisibilityAdvItems(this._dataItems),this.__base.apply(this,arguments)},_checkVisibilityAdvItems:function(e){var t=e.filter((function(e){return e[5]&&"ad"===e[5].type})),i=this.params.direct,n={};if(t.forEach(function(e){var t=e[5].linkht;if(this._sendBSCounter(i.ad_counter),i.counter_delay&&i.delay_counters){if(this._sendBSCounter(i.delay_counters.found),this._prevVisibilityCounterUrls[t])return;n[t]=this._adVisibilityChekers[t]||setTimeout(function(){this._sendBSCounter(i.delay_counters.shown),this._sendVisibilityCounter(t)}.bind(this),i.counter_delay)}else this._sendVisibilityCounter(e[5].linkht)}.bind(this)),i.counter_delay){for(var o in this._adVisibilityChekers)this._adVisibilityChekers.hasOwnProperty(o)&&!n[o]&&(clearTimeout(this._adVisibilityChekers[o]),this._adVisibilityChekers[o]=null);this._adVisibilityChekers=n}},_onItemClick:function(e,t){var i=t.node.getAttribute("data-linkht");"nav"===t.type&&i&&this._sendVisibilityCounter(i),this.__base.apply(this,arguments)},_sendVisibilityCounter:function(e){this._prevVisibilityCounterUrls[e]||(this._prevVisibilityCounterUrls[e]=!0,(new Image).src=e)},_sendBSCounter:function(){}})},function(e,t){MBEM.decl({block:"mini-suggest",modName:"direct",modVal:"yes"},{_canCheckAdVisibility:function(){return this.__base.apply(this,arguments)&&this._hasUserActivasion}})},function(e,t){MBEM.decl("mini-suggest",{_sendBSCounter:function(e){window.home&&home.stat&&home.stat.logPath("show",e)}})},function(e,t){MBEM.decl("mini-suggest",{_setElements:function(){this.__base.apply(this,arguments),this._bemInput=$(this._input).closest(".input").bem("input"),this._bemInput.on("change",this._onBEMInput,this)},_bindHandlers:function(){this.__base.apply(this,arguments),this._form&&$(this._form).on("submit",function(e){e.originalEvent||this._onFormSubmit()}.bind(this))},_setInputVal:function(){this.__base.apply(this,arguments),setTimeout(function(){this._bemInput.trigger("change")}.bind(this),0)},_onBEMInput:function(e,t){t&&"sample"===t.source||this._onInput()}})},function(e,t){MBEM.decl({block:"mini-suggest",modName:"re-request",modVal:"yes"},{_onResponse:function(e,t,i){if(this.__base.apply(this,arguments),this._allowReRequest(t)){var n=this.params.reRequestTimeout;i.duration<n?(clearTimeout(this._reRequestTimeout),this._reRequestTimeout=setTimeout(function(){this._reRequest()}.bind(this),n-i.duration)):i.duration<10*n&&this._reRequest()}},_request:function(){clearTimeout(this._reRequestTimeout),this.__base.apply(this,arguments)},_reRequest:function(){MBEM.ajax(this._prepareReRequestUrl(this._val),{successCallback:this._onReResponse.bind(this,this._val),ctx:this}),this.trigger("re-request")},_prepareReRequestUrl:function(e){return MBEM.appendUrlParams(this.params.reRequestUrl,this._getMainUrlParams(e))},_onReResponse:function(e,t){var i=this._processResponse(t),n=e===this._prevRequestText;this.trigger("re-response",{data:t,items:i,relevant:n}),n&&i.length&&(this._popupContent.innerHTML=this._getItemsHTML(i),this._syncItems(i),this.trigger("re-popup-update"),this._empty=!1,this._focused&&this._checkAndShowPopup(),this._isShown&&this._checkVisibilityAdvItems(i))},_allowReRequest:function(e){return this._val===e[0]}})},function(e,t){MBEM.decl({block:"mini-suggest",modName:"re-request",modVal:"yes"},{_allowReRequest:function(e){return this.__base.apply(this,arguments)&&e[2]&&e[2].maybe_ads}})},function(e,t){MBEM.decl({block:"mini-suggest",modName:"a11y",modVal:"yes"},{__constructor:function(){this.__base.apply(this,arguments),this._suggestId=Math.random().toString(36).substr(2)},_selectItem:function(e){this.__base.apply(this,arguments),e&&(this._input.setAttribute("aria-activedescendant",e.id),e.setAttribute("aria-selected",!0))},_unselectAll:function(){if(this.__base.apply(this,arguments),this._popup){var e=this._input.getAttribute("aria-activedescendant");if(e){this._input.setAttribute("aria-activedescendant","");var t=document.getElementById(e);t&&t.setAttribute("aria-selected",!1)}}},_buildItem:function(e,t){var i=this.__base.apply(this,arguments);return i.attrs.id="suggest-item-"+this._suggestId+"-"+t,i.linkAttrs&&this.params.a11y&&this.params.a11y.nav&&(i.attrs["aria-roledescription"]=this.params.a11y.nav),i},_createPopup:function(){if(!this.__base.apply(this,arguments))return!1;this._popupContent.id="suggest-list-"+this._suggestId;var e=this._input.getAttribute("aria-controls");return this._input.setAttribute("aria-controls",(e?e+" ":"")+this._popupContent.id),this._popup}})},function(e,t){BEM.DOM.decl("home-arrow",{_onSampleClick:function(e){var t=this.findBlockInside("input");t&&(t.elem("control").attr("readonly",!0),t.val(e.text(),{source:"sample"}),this.trigger("sample-click"))},reEnable:function(){this.findBlockInside("input").elem("control").attr("readonly",!1)}},{live:function(){var e=function(e){this._onSampleClick(e.data.domElem),e.preventDefault()};this.liveBindTo("sample-link","pointerclick",e),this.liveBindKey("sample-link","space enter",e)}})},function(e,t){BEM.DOM.decl("yabrowser-promo",{_install:function(){this.params.yaCounterId&&(BEM.blocks["i-metrika"].add({id:this.params.yaCounterId,triggerEvent:!0}),this.params.bannerid&&BEM.blocks["i-bannerid"].save(this.params.bannerid))}},{live:function(){this.liveBindTo("icon-link text-link","pointerclick",(function(){return this._install()}))}})},function(e,t){BEM.DOM.decl({block:"yabrowser-promo",modName:"install",modVal:"download"},{_install:function(){return this.__base.apply(this),this._downloadInstance||(this._downloadInstance=BEM.create("i-install-download",this.params)),this._downloadInstance.download(),home.stat.logPath("click","dist.searchlink.browser.link"),!1}})},function(e,t){BEM.DOM.decl("home-tabs3",{onSetMod:{js:function(){var e=this;this._searchInput=this.findBlockOutside($(".search2 .input"),"input"),this._$elems=this.elem("search"),this._visibleMap={},this._searchInput.on("change",$.debounce((function(){e._updateUrls(this.val())}),300)),this.bindTo("more-switcher","click",this._createAndShowDropdown),this.bindKeyTo("more-switcher","space",this._createAndShowDropdown),this._recalcTabsThrottled=home.throttle(this._recalcTabs,100),setTimeout(function(){this._recalcTabsThrottled()}.bind(this),50),this.bindToWin("resize",this._recalcTabsThrottled),this.bindTo("list","scroll",(function(){this.elem("list").scrollLeft(0).scrollTop(0)}))}},_updateUrls:function(e){var t=this.params[e?"search":"href"],i=encodeURIComponent(e);this._$elems.each((function(e,n){$(n).attr("href",home.stringf(t[$(n).data("id")].replace(/%25/g,"%"),i))}))},_createAndShowDropdown:function(){if(!this._popupInited){this._popupInited=!0;var e,t=this.elem("more-switcher"),i=home.getData("home-tabs3.additionalTabs");e=$(home.view("popup2",{mods:{view:"default",theme:"normal",target:"anchor",autoclosable:"yes","alt-shadow":"yes"},mix:"dropdown2__popup",attrs:{role:"menu"},directions:["bottom-center","top-center","left-center"],hasTail:!0,mainOffset:10,content:home.view("home-tabs3__more",{top:home.view("home-tabs3__more-tabs-top",i),bottom:home.view("home-tabs3__more-tabs-bottom",i)})})),t.append(e),e.bem("popup2").onFirst("beforeOpen",(function(){home.stat.logDOMShow(this.domElem)})),this._$elems=this._$elems.add(this.findElem(e,"search")),this._updateUrls(this._searchInput.val()),this._$popup=e,this._recalcTabs()}},_recalcTabs:function(){var e=this.elem("link").filter(":not(.home-tabs3__more-switcher)"),t=this.elem("list").offset().top,i=!1;this._tabsList=[],e.toArray().forEach((function(e){var n=$(e),o=n.offset().top<t+50,s=n.data("id");o!==!!this._visibleMap[s]&&(this._visibleMap[s]=o?n.width():null,i=!0),o?(this._tabsList.push(s),n.removeAttr("tabindex").removeAttr("aria-hidden"),home.stat.logDOMShow(n,{visibilityCheck:!1})):n.attr("tabindex","-1").attr("aria-hidden","true"),this._$popup&&this._$popup.find('[data-id="'+s+'"]').parent().css("display",o?"none":"")}),this),i&&this._sendOrderStat()},_sendOrderStat:function(){var e=[],t=[],i={},n=home.getData("home-tabs3.additionalTabs.top",[]);this._tabsList.forEach((function(t){e.push(t+"="+this._visibleMap[t]),i[t]=1}),this),n.forEach((function(e){var n=e.id;i[n]||t.push(n)})),home.stat.logPath("tabs_order",e.join(",")),home.stat.logPath("tabs_popup_order",t.join(","))}})},function(e,t){!function(e){function t(e){var t=[];return e.replace(/(\d+)|\.|[^.\d]+/g,(function(e,i){i?t.push(Number(i)):t.push(e)})),t}e.compareVersions=function(e,i){if(e===i)return 0;if(e===undefined||i===undefined||null===e||null===i)return NaN;for(var n=t(String(e)),o=t(String(i)),s=Math.max(n.length,o.length),r=0;r<s;++r){var a=n[r],c=o[r];if(a===undefined)return-1;if(c===undefined)return 1;if("."===a&&"."!==c)return-1;if("."===c&&"."!==a)return 1;if(typeof a!=typeof c&&(a=String(a),c=String(c)),a!==c)return a>c?1:-1}return 0}}(home)},function(e,t){home.openWindow=function(e){var t=window.open("","_blank");t.opener=null,t.location=e}},function(e,t){BEM.decl("i-showed-counter",{},{setCounter:function(e){if(!e.elem&&!1!==e.useIntersection||!e.urls&&!e.callback&&!e.fakeMeasurer)return home.error.logError({block:"i-showed-counter",message:"Cannot send counters",meta:e,sourceType:"logic"}),!1;var t={elem:e.elem,callback:e.callback,urls:e.urls,blockId:e.blockId,useIntersection:e.useIntersection===undefined||e.useIntersection,showedTime:"number"!=typeof e.showedTime?2e3:e.showedTime,threshold:e.threshold||.5};return t.useIntersection&&(t.observer=BEM.blocks["i-intersection-observer-wrapper"].create(function(e){var i=e[e.length-1];t.inViewPort=i.intersectionRatio>=t.threshold,t.inViewPort?this._setSendTimer(t):this._removeSendTimer(t)}.bind(this),{threshold:t.threshold})),this._bindEvents(t),this._forceCounter.bind(this,t)},_forceCounter:function(e){this._removeSendTimer(e),this._onShowed(e)},_bindEvents:function(e){this.catchFromFrame(),e.removeSendTimer=this._removeSendTimer.bind(this,e),e.setSendTimer=this._setSendTimer.bind(this,e),e.observer?e.observer.observe(e.elem):BEM.blocks["i-visibilitychange"].waitForVisible((function(){e.setSendTimer(e)})),BEM.channel("sys").on({hidden:e.removeSendTimer,visible:e.setSendTimer}),this._logFunc({action:" ",params:{watchDelay:e.showedTime,type:e.blockId,url:e.urls}})},_unBindEvents:function(e){e.observer&&e.observer.unobserve(e.elem),BEM.channel("sys").un({hidden:e.removeSendTimer,visible:e.setSendTimer})},_setSendTimer:function(e){!e.inViewPort&&e.observer||(this._removeSendTimer(e),e.sendTimer=setTimeout(this._onShowed.bind(this,e),e.showedTime))},_removeSendTimer:function(e){e.sendTimer&&(clearTimeout(e.sendTimer),e.sendTimer=null)},_onShowed:function(e){e.observer&&home.stat.logPath("tech",e.blockId+".showed"),e.urls&&e.urls.length&&(e.urls.forEach((function(e){(new Image).src=e})),this._logFunc({action:" ",params:{watchDelay:e.showedTime,type:e.blockId,url:e.urls}})),e.callback&&e.callback(),BEM.channel("i-showed-counter").trigger("sent",{blockId:e.blockId}),this._unBindEvents(e)},_logFunc:function(e){home&&home.logBanner&&home.logBanner.log&&home.logBanner.log(e)},catchFromFrame:function(){this.frameListener||(window.addEventListener("message",function(e){var t=e&&e.data&&e.data.isc;t&&this._logFunc(t)}.bind(this)),this.frameListener=!0)}})},function(e,t){home.logBanner=function(){var e=home.getData("banner.logs")||[],t=!1,i=Date.now(),n=window.performance&&window.performance.now,o=function(e){console.log(e.time+"s",e.action,e.params)},s=n?function(){return Math.round(performance.now()/100)/10}:function(){return Math.round((Date.now()-i)/100)/10};home.logBanner={showLogs:function(){t=!0;for(var i=0;i<e.length;i++)o(e[i])},hideLogs:function(){t=!1},log:function(i){i&&(i.time=s(),e.push(i),t&&o(i))},setLogFunc:function(e){o=e}}},home.getData("banner.logsEnable")&&home.logBanner()},function(e,t){BEM.decl("i-measurers",{},{getScriptMeasurers:function(e,t){var i=e.scripts,n=e.actualVersion,o=e.nonce;i.forEach(function(e){this._loadScriptMeasurer(e.id,n,o)["catch"]((function(e){home.error.logError({block:"i-measurers",source:"network"},e)})).then((function(i){i&&i(t,e.conf,{actualVersion:n,nonce:o})}))}.bind(this))},_loadScriptMeasurer:function(e,t,i){return new Promise((function(n,o){window.Ya||(window.Ya={}),window.Ya.measurers&&window.Ya.measurers[e]?n(Ya.measurers[e]):home.loadScript(["//yastatic.net/pcode-static/measurers/",t,"/media/",e,".js"].join(""),(function(){n(window.Ya.measurers[e])}),(function(){o(new Error("Cannot load measurer: "+e))}),i)}))}})},function(e,t){BEM.DOM.decl({block:"popup",modName:"type",modVal:"modal"},{getDefaultParams:function(){var e=this.__base();return e.top="50%",e.left="50%",e},_isPercentVal:function(e){return"string"==typeof e&&e.indexOf("%")>0},show:function(e){return this._moveToContainer(),this.setMod("visibility","outside").setMod("adaptive","no"),this.repaint(e),this},repaint:function(e){this._moveToContainer(),e||(e={left:this.params.left,top:this.params.top});var t=this.getPopupSize();return this._isPercentVal(e.left)&&!e.marginLeft&&(e.marginLeft=t.width/(-100/parseInt(e.left,10))),this._isPercentVal(e.top)&&!e.marginTop&&(e.marginTop=t.height/(-100/parseInt(e.top,10))),this._show(e),this}})},function(e,t){!function(){"use strict";BEM.DOM.decl({name:"popup",modName:"focus",modVal:"capture"},{_onShown:function(){this.__base.apply(this,arguments),this.domElem.attr("tabindex","0").focus()},_onHidden:function(){this.__base.apply(this,arguments),this.domElem.removeAttr("tabindex")}})}()},function(e,t){BEM.DOM.decl({block:"popup",modName:"expand",modVal:"banner"},{addParamsAndShow:function(e){var t=$(window).height(),i=$(window).width(),n=Math.min(1200,Math.floor(i-400)),o=Math.floor(9*n/16);o>t-200&&(n=n*(t-200)/o,o=t-200),n=2*Math.floor(n/2),o=2*Math.floor(o/2),n<640||o<360?home.openWindow(e):($(".popup_expand_banner__inner",this.domElem).css({width:n,height:o}),this.show())},bindOnIframeMessage:function(e){$(window).on("message",(function(t){if(t=t.originalEvent,e&&t.source===e.contentWindow){var i;try{i=JSON.parse(t.data)}catch(n){return}i&&i.command&&"close"===i.command&&setTimeout((function(){this.hide()}),500)}}))},afterShow:function(){var e=this.domElem,t=this;this._addBg(),e.stop(!0).css(this._getTransitionParams()),setTimeout((function(){e.addClass("popup_expand_transition-on").css(t._getClearParams()),setTimeout((function(){t._addContent()}),t.params.duration)}),0),this.params.banner.showStat&&((new Image).src=this.params.banner.showStat),this._addResizeEvent()},beforeHide:function(e){var t=this.domElem,i=this;t.stop(!0,!0).css(this._getTransitionParams()),setTimeout((function(){t.css(i._getClearParams()).removeClass("popup_expand_transition-on"),i._removeContent(),e()}),this.params.duration),this.params.banner.closeStat&&((new Image).src=this.params.banner.closeStat)},_moveToContainer:function(){this._inContainer=!0},_getBannerCoords:function(){return $("."+this.params.iframeCls)[0].getBoundingClientRect()},_getPopupCoords:function(){return this.domElem[0].getBoundingClientRect()},_addBg:function(){$(".popup_expand_banner__inner",this.domElem).css({"background-color":this.params.banner.bg})},_addResizeEvent:function(){var e=this;$(window).bind("resize orientationchange",(function t(){e.hide(),$(window).unbind("resize orientationchange",t)}))},_addContent:function(){var e=$(".popup_expand_banner__inner",this.domElem),t=location.protocol||"http:",i=this.params.banner.src,n=this.params.banner.vars,o="";o=this.params.banner.html5?'<iframe class="popup__banner-iframe" name="bannerhtml5" src="'+i+'" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" width="100%" height="100%"></iframe>':"<object classid=clsid:D27CDB6E-AE6D-11cf-96B8-444553540000 codebase="+t+'//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab width=100% height=100% ><param name="allowScriptAccess" value="Always" ><param name=movie value="'+i+'" ><param name=menu value=false><param name=quality value=high><param name=wmode value=opaque><param name="flashvars" value="'+n+'" ><EMBED src="'+i+'"  flashvars="'+n+'" quality=high  allowScriptAccess=Always wmode=opaque menu=false swLiveConnect=FALSE WIDTH=100% HEIGHT=100% TYPE="application/x-shockwave-flash" PLUGINSPAGE="'+t+'//www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash"></EMBED> </object>',e.children().length||e.append(o)},_removeContent:function(){this.params.banner.eraseContent&&$(".popup_expand_banner__inner",this.domElem).html("")},_getTransitionParams:function(){var e=this._getBannerCoords(),t=this._getPopupCoords(),i=e.height/t.height;return{transform:"translate3d("+(e.left+e.width/2-(t.left+t.width/2))+"px, "+(e.top+e.height/2-(t.top+t.height/2))+"px, 0) scale("+i+","+i+")",opacity:0}},_getClearParams:function(){return{transform:"translate3d(0, 0, 0) scale(1, 1)",opacity:1}}})},function(e,t){!function(){function e(e){return(e||"").replace(/(^|\s)([-a-z]{1,2})(\s)/gi,"$1$2&nbsp;")}function t(e){return(e||"").replace(/(\d)\s(\d)/g,"$1&nbsp;$2")}function i(e){return(e||"").replace(/(\S)(\s)([^-a-z\d\s]{1,2})(\s|$)/gi,"$1&nbsp;$3$4")}function n(e){return(e||"").replace(/\s([-a-z\d.]{1,2})$/gi,"&nbsp;$1")}function o(e){return(e||"").replace(/(\s|^)([-a-z\d]{1,3}-[-a-z\d]{1,3})(\s|$)/gi,"$1<nobr>$2</nobr>$3")}home.prepareSpaces=e,home.prepareSpaces.digits=t,home.prepareSpaces.punctuation=i,home.prepareSpaces.shortEnding=n,home.prepareSpaces.aroundHyphen=o,home.prepareSpaces.full=function(s){return n(i(e(t(o(s)))))}}()},function(e,t){BEM.DOM.decl(home.cls.full("direct-close-block"),{onSetMod:{js:{inited:function(){var e=0===this.elem(home.cls.part("close-block")).length;this.bindTo(home.cls.part("close-button"),"click",(function(){e?(this.renderCloseBlock(),e=!1,setTimeout(function(){this.toggleMod(home.cls.part("state"),home.cls.part("closing"),home.cls.part("idle"))}.bind(this),50)):this.toggleMod(home.cls.part("state"),home.cls.part("closing"),home.cls.part("idle"))}))}}},renderCloseBlock:function(){var e={pseudo:"yes"};this.hasMod(home.cls.part("closing-theme"),home.cls.part("dark"))?e.violet="yes":e.blue="yes";var t=this.params.data||home.getData("direct.data."+this.params.id+".closeData"),i=[{options:"3-2",text:home.l10n("direct.not_interest")},{options:"14-2",text:home.l10n("direct.bought_already")},{options:"5-3",text:home.l10n("direct.spam")}].map((function(t){return home.view("home-link",{content:t.text,mods:e,mix:"direct-close-block__close-reason "+home.cls.full("direct-close-block")+"__close-reason",attrs:{"data-id":t.options},stat:""})})).join("");this.domElem.prepend(home.view("direct-close-block__close-block",{buttons:i}),home.view("direct-close-block__confirm-block",{})),t&&t.sendStat&&home.stat.logPath("click",t.statName+".close")},_onReasonClick:function(e){var t=e.data.domElem.data("id").split("-"),i=this.params.data&&this.params.data.abuseUrl||home.getData("direct.data."+this.params.id+".closeData.abuseUrl"),n=home.parseUrl(i);t.length>0&&(n.query.reason=t[0],n.query["action-id"]=t[1],(new Image).src=home.makeUrl(n),this.setMod(home.cls.part("state"),home.cls.part("confirmed")))}},{live:function(){return this.liveBindTo("close-reason","click",(function(e){return this._onReasonClick(e)})),!1}})},function(e,t){BEM.DOM.decl(home.cls.full("direct-desktop"),{onSetMod:{js:{inited:function(){BEM.channel("adb").trigger("rendered",{id:"desktop.main.tgo",elem:this.domElem[0]}),this._checkHeight(),this._directWarningAnimation(),this._initCounters(),this._calcOverflow()}}},_initCounters:function(){var e=home.getData("direct.counters");this._shows=e&&e.shows,this._winNotice=e&&e.winNotice,this._showsSent=!1,this._sendCounters()},_sendCounters:function(){this._shows&&!this._showsSent&&(this._sendForceShows=BEM.blocks["i-showed-counter"].setCounter({elem:this.domElem[0],urls:this._shows,callback:this._onSendShows.bind(this),blockId:"banner"})),this._winNotice&&!this._winSent&&BEM.blocks["i-showed-counter"].setCounter({elem:this.domElem[0],urls:this._winNotice,showedTime:0,callback:this._onSendWin.bind(this),blockId:"banner"})},_onSendShows:function(){this._showsSent=!0},_onSendWin:function(){this._winSent=!0},_checkHeight:function(){var e=this.elem(home.cls.part("header")),t=this.elem(home.cls.part("text"));e.outerHeight(!0)+t.outerHeight(!0)>88&&home.stat.logPath("text_overflow","direct.card")},_directWarningAnimation:function(){if(!this.getMod(home.cls.part("warning-med"))){var e=this.elem(home.cls.part("caption")),t=this.elem(home.cls.part("caption-message")),i=e.width(),n=t.outerWidth(),o=n-i,s=o/20,r="."+home.cls.full("direct-desktop__caption-message")+"{-webkit-transition: -webkit-transform 0s linear;transition: transform 0s linear;transform: translate(0);}."+home.cls.full("direct-desktop__caption-message_animated")+"{-webkit-transition: -webkit-transform "+s+"s linear;transition: transform "+s+"s linear;-webkit-transform: translate("+-o+"px);transform: translate("+-o+"px);}",a=home.debounce((function(e){t.toggleClass(home.cls.full("direct-desktop__caption-message_animated"),e)}),200);n<i||(this.__styleTag=document.createElement("style"),this.__styleTag.innerText=r,document.head.appendChild(this.__styleTag),this.domElem.on("mouseover",a.bind(null,!0)),this.domElem.on("mouseout",a.bind(null,!1)))}},destruct:function(){this.__styleTag&&document.head.removeChild(this.__styleTag),this.__base.apply(this,arguments)},_calcOverflow:function(){this.domElem.find(".i-multiline-overflow").each((function(){var e=$(this),t=e.data("lines");BEM.blocks["i-multiline-overflow"].calcOverflow(e,t)}))}},{live:function(){var e=this;return this.liveBindTo("mouseover",(function t(){!this._showsSent&&this._sendForceShows&&this._sendForceShows(),e.liveUnbindFrom("mouseover",t)})),!1}})},function(e,t){!function(){"use strict";BEM.decl("i-performance",{onSetMod:{js:{inited:function(){if(window.performance&&"onresourcetimingbufferfull"in window.performance&&"addEventListener"in window.performance){this._expandTimingBuffer=this._expandTimingBuffer.bind(this),window.performance.addEventListener("resourcetimingbufferfull",this._expandTimingBuffer);var e=window.performance.getEntriesByType("resource").length;e>=this.__self._DEFAULT_TIMING_BUFFER_SIZE?(this._timingBufferSize=Math.ceil(e/this.__self._DEFAULT_TIMING_BUFFER_SIZE)*this.__self._DEFAULT_TIMING_BUFFER_SIZE,this._expandTimingBuffer()):this._timingBufferSize=this.__self._DEFAULT_TIMING_BUFFER_SIZE}}}},checkUrlLoaded:function(e){var t=!0;return window.PerformanceObserver&&window.performance&&window.performance.getEntriesByName&&(t=!1,window.performance.getEntriesByName(e).forEach((function(e){"resource"===e.entryType&&(t=!0)}))),t},destruct:function(){this.__self._instance=null,"removeEventListener"in window.performance&&window.performance.removeEventListener("resourcetimingbufferfull",this._expandTimingBuffer),this.__base.apply(this,arguments)},_expandTimingBuffer:function(){this._timingBufferSize<this.__self._MAX_TIMING_BUFFER_SIZE?(this._timingBufferSize+=this.__self._DEFAULT_TIMING_BUFFER_SIZE,window.performance.setResourceTimingBufferSize(this._timingBufferSize)):window.performance.removeEventListener("resourcetimingbufferfull",this._expandTimingBuffer)}},{_DEFAULT_TIMING_BUFFER_SIZE:150,_MAX_TIMING_BUFFER_SIZE:1050,preparePerformanceBuffer:function(){this._instance||(this._instance=BEM.create(this.getName(),{}))},checkUrlLoaded:function(e){return this._instance||this.preparePerformanceBuffer(),this._instance.checkUrlLoaded(e)},destroy:function(){this._instance&&this._instance.destruct()}})}()},function(e,t){Date.now||(Date.now=function(){return(new Date).getTime()})},function(e,t){var i=function(){};i.prototype.sendCounts=function(e,t){var i,n,o,s,r=$("."+e),a=home.getData("rtb.counters");r&&r[0]&&a&&(i=a.shows,n=a.scriptMeasurers,o=a.mrcImpressions,s=a.winNotice,n&&BEM.blocks["i-measurers"].getScriptMeasurers(n,r[0]),s&&BEM.blocks["i-showed-counter"].setCounter({useIntersection:!1,blockId:"banner.winNotice",showedTime:0,urls:s}),o&&BEM.blocks["i-showed-counter"].setCounter({elem:r[0],blockId:"banner.mrcImpressions",showedTime:1e3,urls:o}),i&&i.length&&this.sendShowCounters(i,r,t))},i.prototype.sendShowCounters=function(e,t,i){var n,o;n=BEM.blocks["i-showed-counter"].setCounter({elem:t[0],blockId:"banner",urls:e,callback:function(){home.stat.logPath("show","rtb_vis.count"),t.off("mouseover",o)}}),o=function(){n(),t.off("click mouseover",o)},i||t.on("click mouseover",o)},i.prototype.addImageContent=function(){var e=home.getData("rtb.settings"),t=e&&e.mordaType;if(e&&t){var i={desktop:e.isNtp?home.cls.full("rtb-wrapper"):home.cls.full("rtb-border"),touch:home.cls.full("rtb-image")};BEM.channel("adb").trigger("rendered",{id:t+".main.rtb.image",elem:$("."+i[t])[0]}),this.sendCounts(i[t],e.isMedia),e.href&&$("."+i[t]).click((function(){home.openWindow(e.href)}))}},i.prototype.loadIframeContent=function(){var e,t,i=home.getData("rtb.settings");if(i){var n=home.cls.full("rtb-iframe__content"),o=home.cls.full("rtb-iframe"),s=$("."+home.cls.full("rtb")).parent(),r=i.mordaType+".main.rtb.iframe",a=$('<iframe class="'+n+'" frameborder="no" scrolling="no" allowtransparency="true" hidefocus="true" tabindex="-1" marginwidth="0" marginheight="0" sandbox="allow-same-origin allow-popups allow-popups-to-escape-sandbox allow-scripts allow-forms"></iframe>');$("."+o).html(a),i.indexSrc?(a[0].onload=function(){BEM.blocks["i-performance"].checkUrlLoaded(i.indexSrc)?(this.sendCounts(n,i.isMedia),i.expandedIndexSrc&&this.expand(i)):s.hide()}.bind(this),a[0].src=i.indexSrc):(r+=".aadb",e=i.html.replace("<head>",'<head><base href="'+i.basePath+'" target="_blank"></base>'),(t=a[0].contentDocument).open(),t.write(e),t.close(),this.sendCounts(n,i.isMedia)),BEM.channel("adb").trigger("rendered",{id:r,elem:$("."+n)[0]})}},i.prototype.sendPopupShowCounter=function(e){e.expandedTrackings&&!e.popupStatsSent&&(e.expandedTrackings.forEach((function(e){(new Image).src=e})),e.popupStatsSent=!0)},i.prototype.expand=function(e){var t=$("."+home.cls.full("rtb-iframe"));t.append('<div class="rtb__expand_innerclick"></div>'),t.addClass("rtb__expand").append('<div class="rtb__expand_inner"></div>');var i=$(".popup_expand_banner"),n=i?i.bem("popup"):null;n&&n.bindOnIframeMessage($(".rtb-iframe_expand",i)[0]),$(".rtb__expand_innerclick").click(function(){n&&(this.sendPopupShowCounter(e),n.addParamsAndShow(e.clickUrl)),$(window).trigger("bannerpopup.show")}.bind(this))},$((function(){var e=new i,t=home.getData("rtb.settings");t&&t.type&&("iframe"===t.type?e.loadIframeContent():"image"===t.type&&e.addImageContent())}))},function(e,t){var i=document.domain.match(/([^.]+(?:\.com?)?\.)?[^.]+$/)[0];try{window.top||(document.domain=i)}catch(n){}},function(e,t){BEM.DOM.decl("widgets",{onSetMod:{js:function(){if(window.Widget)if(this.save=home.debounce(this.save.bind(this),50),this._hiddenWidgets={},this.history=[],this.historyAcceptedPosition=0,this.personalSettings=this.params.settings,this.initWapi(),this.channel("widget").on("abort-add",this.changeThis((function(e,t){this.onAbortAdd(t)}))),this.channel("widget").on("commit",this.changeThis((function(e,t){this.commit(t),this._onUpdateWidgetList()}))),this.channel("widget").on("tuned",this.changeThis((function(e,t){this.enableActionButton(),this.history.push(t)}))),this.bindToWin("beforeunload",(function(){if(this.history.length!==this.historyAcceptedPosition&&this.hasMod("drag"))return"\n"+home.l10n("informationsMessages.settingsNotSaved")+"\n"})),this.params.editMode&&(this.collectWidgetsOnPage(),this.setMod("drag","on")),this.params.add&&this.isNewPattern()&&(this.collectWidgetsOnPage(),this.hasMod("drag")||this.setMod("drag","add"),this.addWidget(this.params.add)),home.getData("widgets.alt")){if(this.processHistoryState(),home.getData("widgets.altEdit")){var e=function(){var e=this.collectData();this.wsave(e,!1)}.bind(this);this.channel("widget").on("settingsSaved",e,this),this.bindToWin("widgetSettingsTuned",(function(t,i){"save"===i.state&&e()}))}}else this.getWidgets().forEach(function(e){"hidden"===e.getMod("mode")&&(this._hiddenWidgets[e.getId()]=1)}.bind(this))},drag:function(e,t,i){t?i||(Widget.Framework.setEdit(!0),this.recalculateWidgetCoords(),this.getParanja().appendTo(this.domElem[0]),this.bindDrag(),this.processHistoryState()):(Widget.Framework.setEdit(!1),this.getParanja().detach(),this.unbindDrag())}},_afterSetMod:function(){this.__base.apply(this,arguments),this.domElem.removeClass("i-bem widgets_js_inited")},_onUpdateWidgetList:function(){var e=this.findBlockOutside("b-page"),t=Widget.Framework.all(),i={};t.forEach((function(e){var t;e.params.removed||this._hiddenWidgets[e.id]||(t="Column"+e.params.position.split(":")[0],i[t]=1)}),this),home.view("widgets__check-arrow-middle",{Widgets:{NotEmptyColumns:i},Skin:this.params.skin})?e.setMod("arrow-middle","yes"):e.delMod("arrow-middle")},canAddWidget:function(e){return this.domElem.find(".widget:not(.widget_removed_yes)").length<50-(e||0)},initWapi:function(){var e=this.params,t=e.prototype,i={wauth:e.auth,layoutFixed:!e.editMode,addUrl:"/adddata/",formUrl:"/form.html?json=1",patternId:e.patternid,yu:e.yu,domain:e.domain,locale:e.locale,prototype:t,widgetStyle:e.widgetStyle,showPreferencesHandler:this.changeThis(this.showPrefs),gsid:this.params.gsid,version:e.version};t&&(i[t+"_prototype"]=t),e.geoid&&(i.geoid=Number(e.geoid)),Widget.Init(i)},showPrefs:function(e){this.findBlockOutside(e.$(),"widget").showPrefs()},showError:function(e){this.channel("catalog").trigger("error",e)},hideError:function(){this.channel("catalog").trigger("error")},collectWidgetsOnPage:function(){var e=Widget.Framework.all(),t={};e.forEach((function(e){e.params.is_default&&(t[e.classId]=!0)}),this),this.widgetsOnPage=t},getMoved:function(){var e={};return this.history.forEach((function(t){if("drag"===t.type&&t.from!==t.to){var i=t.id;e[i]?e[i].from===t.to?e[i]=null:e[i].to=t.to:e[i]={from:t.from,to:t.to}}}),this),e},collectData:function(){var e=Widget.Framework.all(),t=this.getMoved(),i=e.map((function(e){if(e.params.removed)return{id:e.id,removed:!0};e.markChanged(e.id in t);var i="";return e.params.saveWithPrefs&&(i=e.params.prefs.map((function(e){return encodeURIComponent(e[0])+"="+encodeURIComponent(e[1])})).join("&")),{id:e.id,coord:e.params.position,usrCh:e.params.usrCh,settings:i}}),this);return this.personalSettings=$.extend(!0,{},this.personalSettings),delete this.personalSettings.newpattern,{save:JSON.stringify({psettings:this.personalSettings,widgets:i})}},save:function(){var e=this.collectData();this.wsave(e,!0)},revert:function(){try{this.historyAcceptedPosition=this.history.length,window.location.href="/?ncrnd="+Math.random()}catch(e){}},reset:function(){window.confirm(home.l10n("informationsMessages.beforeReset"))&&this.wsave({"delete":1})},wsave:function(e,t,i){$.ajax({url:"/wsave",data:$.extend(e,{wauth:this.params.auth||this.params.wpAuth,yu:this.params.yu,prototype:this.params.prototype}),traditional:!0,type:"post",dataType:"json",success:this.changeThis((function(e){if(i||(this.historyAcceptedPosition=this.history.length),"ok"===e.result)if(t)this.channel("catalog").trigger("saved");else{var n=window.location;setTimeout((function(){window.location="//"+n.host}),500)}else this.showError(home.l10n("informationsMessages.cannotSaveSettings"))}))})},updatePersonalSettings:function(e,t){null===t?delete this.personalSettings[e]:this.personalSettings[e]=t,this.wsave({save:JSON.stringify({psettings:this.personalSettings})},!0,!0)},addWidget:function(e){var t=$("<div></div>").appendTo(this.domElem),i=home.parseUrl(location.href);if(!this.canAddWidget())return!1;this.widgets=null,Widget.Framework.add(e,t,{success:this.changeThis((function(e){var n;n=e.params.smart&&e.params.defplace&&e.params.defplace.match(/\d:\d/)&&this.checkInsertPosition(e.params.defplace)?e.params.defplace:this.getInsertPosition(),this.insertAt(n,t),e.params.saveWithPrefs=!(!i.query.settings||!e.params.prefs),e.params.position=n,e.markChanged(!e.params.defplace||e.params.defplace!==n||e.classId in this.widgetsOnPage,e.params.saveWithPrefs),e.init(),this.recalculateWidgetCoords();var o=this.findBlockInside(t,"widget");this.findBlocksInside({block:"widget",modName:"state",modVal:"add"}).forEach((function(e){e.accept()}));var s=o.domElem.offset();window.scrollTo(0,s.top),o.setMod("state","add"),this.history.push({type:"beforeAdd",elem:o}),e.params.open_settings_on_add&&1===e.params.havePrefsFrom&&this.showPrefs(e)})),error:this.changeThis((function(){this.hasMod("drag","add")?this.delMod("drag"):this.showError(home.l10n("informationsMessages.cannotSaveSettings"))}))},{sign:i.query.sign,settings:i.query.settings,showanyway:!!i.query.showanyway&&1})},onAbortAdd:function(){},commit:function(){this.save()},processHistoryState:function(){var e=window.location.hash.match(/^#open=(.+)/);if(window.history&&history.replaceState?$(window).one("load",(function(){var e=home.parseUrl(location.toString());["add","sign","settings","from"].forEach((function(t){delete e.query[t]})),e.search="",history.replaceState(null,null,home.makeUrl(e))})):window.location.hash="m"+this.params.patternid,e&&e[1])for(var t=this.findBlocksInside("widget"),i=0;i<t.length;i++)if(0===t[i].getId().indexOf(e[1]))return void t[i].showPrefs()},isNewPattern:function(){return window.location.hash!=="#m"+this.params.patternid},bindDrag:function(){var e,t,i;window.PointerEvent?(e="pointerdown mousedown",t="pointermove mousemove",i="pointerup pointercancel mouseup"):window.navigator.msPointerEnabled?(e="MSPointerDown mousedown",t="MSPointerMove mousemove",i="MSPointerUp MSPointerCancel mouseup"):window.ontouchstart!==undefined?(e="touchstart mousedown",t="touchmove mousemove",i="touchend touchcancel mouseup"):(e="mousedown",t="mousemove",i="mouseup"),this.bindToDoc(e,(function(e){var t=$(e.target).closest(".widget");if(t.length&&$(e.target).closest(".widget__drag").length&&!this.dragItem&&("mousedown"!==e.type||1===e.which)){var i=t.width(),n=t.height(),o=t.offset(),s=this.getDragPlace().show(),r=home.getTouchEvent(e);return s.css({height:t.outerHeight()+parseInt(t.css("marginBottom"),10)}),t.before(s).css({position:"absolute",left:o.left,top:o.top,width:i,height:n,"z-index":10,"margin-top":0,"box-shadow":"0 0 10px #aaa"}),this.dragWidth=t.outerWidth(),this.dragItem=t.appendTo("body"),this.dragPos={x:o.left-r.x,y:o.top-r.y},this.mouseY=r.y,this.widgetHeightHalf=n/2,this.recalculateParams(),this.placeRowIndex=s.index(),this.placeColumnIndex=this.getColumnFromChild(s).index,this.scrollAnimation=this.changeThis((function(){this.scroll(),this.scrollAnimation&&window.requestAnimationFrame(this.scrollAnimation)})),this.scrollAnimation(),!1}})),this.bindToDoc(t,(function(e){if(this.dragItem){if("mousemove"===e.type&&1!==e.which)return this.onMouseUp();var t=home.getTouchEvent(e),i=$(".rows"),n=i.width(),o=i.height();this.dragPos.x+t.x+this.dragWidth>n&&(t.x=n-this.dragWidth-this.dragPos.x),this.dragPos.x+t.x<0&&(t.x=-this.dragPos.x),this.dragPos.y+t.y>o&&(t.y=o-this.dragPos.y),this.mouseY=t.y,this.dragItem.css({left:this.dragPos.x+t.x,top:this.dragPos.y+t.y});var s=this.getColumn(t.x,t.y);if(s){var r=s.widgets,a=this.getDragPlace();if(r.length){if(s.index<3&&r[0].elem[0]!==this.dragItem[0])return;for(var c,l=0,u=r.length,d=this.dragPos.y+t.y+this.widgetHeightHalf;l<u&&d>r[l].center;)l++;(c=r[0].elem.index()+l)===this.placeRowIndex&&s.index===this.placeColumnIndex||(this.placeRowIndex=c,this.placeColumnIndex=s.index,0===l?a.insertBefore(r[0].elem):a.insertAfter(r[l-1].elem))}else a.appendTo(s.elems);return!1}}})),this.bindToDoc(i,this.onMouseUp),this.dragEvents=e+" "+t+" "+i},unbindDrag:function(){this.unbindFromDoc(this.dragEvents)},scroll:function(){var e,t=$(window),i=t.height(),n=t.scrollTop(),o=.2*i,s=0;this.mouseY&&((e=this.mouseY-n)<o?s+=e-o:e>i-o&&(s+=o-i+e),n+=20*s/o,s&&n>0&&n+i<$(document).height()&&t.scrollTop(n))},onMouseUp:function(){if(this.dragItem){var e=this.elem("drag-place"),t=this.dragItem;e.before(this.dragItem).hide(),this.dragItem.attr("style",""),this.dragItem=this.dragPos=null;var i=this.findBlockOn(t,"widget"),n=i.getInstance(),o=n.params.position;return this.recalculateWidgetCoords(),n.params.position!==o&&this.commit({type:"drag",id:i.getId(),from:o,to:n.params.position}),this.mouseY=0,this.scrollAnimation=null,$(window).trigger("DragEnd"),this._onUpdateWidgetList(),!1}},checkInsertPosition:function(e){e=e.split(":");var t=Number(e[0]),i=this.elem("col","td",t).find(".widget:not(.widget_removed_yes):not(.widget_mode_hidden)").toArray().length;return!(t<3)||!i},getColumn:function(e,t){for(var i,n=-1,o=0;o<this.colParams.length;o++){var s=this.colParams[o],r=e<s.left?s.left-e:e>s.right?e-s.right:0,a=t<s.top?s.top-t:t>s.bottom?t-s.bottom:0,c=Math.max(r,a);(c<n||-1===n)&&(n=c,i=s)}return i},getColumnFromChild:function(e){for(var t=e.closest(".widgets__col"),i=0;i<this.colParams.length;i++){var n=this.colParams[i];if(n.elems.is(t))return n}return undefined},getColumnWidgets:function(e){return e.find(".widget:not(.widget_removed_yes):not(.widget_mode_hidden)").map((function(){var e=$(this),t=e.offset();return{elem:e,center:t.top+e.height()/2}})).toArray()},getAllColumnWidgets:function(e){return e.find(".widget:not(.widget_removed_yes)").map((function(){return{elem:$(this)}})).toArray()},getDragPlace:function(){return this.dragPlace||($(this.domElem[0]).append('<div class="widgets__drag-place"></div>'),this.dropElemCache("drag-place"),this.dragPlace=this.elem("drag-place")),this.dragPlace},getInsertPosition:function(){var e,t,i=-1;return[3,4,5].forEach((function(n){var o,s=this.elem("col","td",n).find(".widget:not(.widget_removed_yes):not(.widget_mode_hidden)").toArray(),r=s.length;o=s.reduce((function(e,t){return e+$(t).height()}),0),(-1===i||o<i)&&(i=o,e=n,t=r+1)}),this),e+":"+t},getParanja:function(){return this.paranja||(this.paranja=$('<div class="widgets__paranja"></div>')),this.paranja},getWidgetById:function(e){return this.findBlockOn($("#wd-wrapper-"+e),"widget")},getWidgets:function(){if(!this.widgets){var e=this.elem("col");this.widgets=this.findBlocksInside(e,"widget")}return this.widgets},recalculateParams:function(e){return this.colParams=[1,2,3,4,5].map((function(t){var i=this.elem("col","td",t),n=i.offset();return n.index=t,n.elems=i,n.height=i.height(),n.bottom=n.top+n.height,n.width=i.width(),n.right=n.left+n.width,n.widgets=e?this.getAllColumnWidgets(i):this.getColumnWidgets(i),n}),this),this},recalculateWidgetCoords:function(){this.recalculateParams(!0),this.colParams.forEach((function(e,t){e.widgets.forEach((function(e,i){this.findBlockOn(e.elem,"widget").getInstance().params.position=t+1+":"+(i+1)}),this)}),this)},insertAt:function(e,t){e=e.split(":");var i=this.elem("col","td",e[0]),n=i.find(".widget:not(.widget_removed_yes):not(.widget_mode_hidden)"),o=n.length,s=Number(e[1])-1;o?0===s?$(n[0]).before(t):(s>o&&(s=o),$(n[s-1]).after(t)):i.append(t)},enableActionButton:function(){this.channel("catalog").trigger("enableAction")}})},function(e,t){BEM.DOM.decl({block:"widgets",modName:"drag",modVal:"on"},{_afterSetMod:function(e,t){this.__base.apply(this,arguments),"drag"===e&&"on"===t&&(this.getWidgets().forEach((function(e){e.setMod("drag","on")})),this.bindToEvents(),this.eventsToUndo=this.history.filter((function(e){return"remove"===e.type})).length),this.channel("catalog").on("inited",(function(){this.canAddWidget(0)}),this)},onSetMod:{drag:{"":function(){this.__base.apply(this,arguments),this.getWidgets().forEach((function(e){e.delMod("drag")})),this.channel("catalog").trigger("hide"),this.unbindFromEvents()}}},commit:function(e){"recover"!==e.type&&this.history.push(e),"remove"===e.type&&++this.eventsToUndo,this.canAddWidget("remove"===e.type?-1:0),this.enableActionButton()},undo:function(){for(var e;this.history.length&&(!e||"remove"!==e.type);)e=this.history.pop();this.toggleUndoButton(--this.eventsToUndo);var t=this.getWidgetById(e.id),i=t.getInstance().params;this.checkInsertPosition(i.position)?t.delMod("removed"):(t.markChanged(!0),this.insertAt(this.getInsertPosition(),t.domElem),t.delMod("removed"),this.recalculateWidgetCoords()),this.canAddWidget()},save:function(){if(this.history.length){var e=this.collectData();this.wsave(e)}else{var t=window.location;window.location="//"+t.host}},revert:function(){this.__base.apply(this,arguments),this.delMod("drag")},canAddWidget:function(e){var t=this.__base(e);return t?(this.hideError(),this.channel("catalog").trigger("unlockAdd"),this.toggleUndoButton(this.eventsToUndo)):(this.showError(home.l10n("informationsMessages.maxCount")),this.channel("catalog").trigger("lockAdd"),this.toggleUndoButton(!1)),t},toggleUndoButton:function(e){this.channel("catalog").trigger("toggleUndo",e)},bindToEvents:function(){this.channel("catalog").on("save",this.save,this).on("revert",this.revert,this).on("reset",this.reset,this).on("undo",this.undo,this).on("add",(function(e,t){this.addWidget(t)}),this)},insertAt:function(){this.__base.apply(this,arguments),this.canAddWidget()},onAbortAdd:function(){this.canAddWidget(-1)},unbindFromEvents:function(){this.channel("catalog").un("save revert reset undo add")}})},function(e,t){BEM.DOM.decl({block:"widgets",modName:"drag",modVal:"add"},{onAbortAdd:function(){this.delMod("drag")},commit:function(e){if("drag"!==e.type)if("add"===e.type){var t=this.getWidgetById(e.id);this.save(),this.delMod("drag"),t.delMod("drag")}else this.__base(e)},canAddWidget:function(){var e=this.__base.apply(this,arguments);return e||this.delMod("drag"),e}})},function(e,t){BEM.DOM.decl("w-rss",{onSetMod:{js:function(){var e,t,i,n,o,s=this,r=this.domElem,a=this.params.feedUrl,c=this.params.newsTimestamp,l=s.elem("list"),u=r.parent().parent().find("h2.b-widget__title,.widget__title"),d=s.elem("gradient"),h=s.elem("gradient-up"),m=s.elem("informer"),p=r.parent().find(".w-rss__arrow_type_up"),f=r.parent().find(".w-rss__arrow_type_down"),_=0===$(".i-ua_browser_touch").length,g=0,v=0,b=(new Date).getTime(),y=(new Date).getTime(),w=!1,k=!0,E=function(e,t){var i="up"===e?p:f,n="w-rss__arrow_hovered-"+("up"===e?"up":"down")+"_yes";t&&!i.get(0).clickable?(i.get(0).clickable=!0,i.css({cursor:"pointer"}),i.unbind("mouseenter").unbind("mouseleave").unbind("click").unbind("mousedown").unbind("mouseup").bind("click",(function(){$.browser&&$.browser.safari&&window.getSelection&&window.getSelection().empty();try{Lego.c("stred/pid=132/cid=71588/path="+P.widget.id+"."+e)}catch(t){}j.scroll(e)})),_&&i.bind("mouseenter",(function(){i.addClass(n)})).bind("mouseleave",(function(){clearTimeout(v),clearInterval(g),i.removeClass(n)})).bind("mousedown",(function(){if(v=setTimeout((function(){clearInterval(g),g=setInterval((function(){j.scroll(e)}),250)}),400),$.browser&&$.browser.opera)return!1})).bind("mouseup",(function(){clearTimeout(v),clearInterval(g)}))):!t&&i.get(0).clickable&&(i.get(0).clickable=!1,i.removeClass(n),i.css({cursor:"default"}),clearTimeout(v),clearInterval(g),i.unbind("mouseenter").unbind("mouseleave").unbind("click").unbind("mousedown").unbind("mouseup"))},x=!1,M=[],C=[],T=function(e){return window.wg&&wg.isColumnWide?!!wg.isColumnWide(e):1==e},S=function(e){return window.wg&&wg.isColumnNarrow?wg.isColumnNarrow(e):2==e},P=(i=(r.closest(".b-widget-data").attr("id")+"").substr(3),n=Widget.Framework.get(i),o=n.params.position.split(":")[0],t=r.hasClass("w-rss_type_text-img")?"text-img":r.hasClass("w-rss_type_magazine")?"magazine":"text",{widget:n,col:o,layout:T(o)?"horiz":"vert",mode:{compact:2==n._prefs.wht,large:3==n._prefs.wht},isHeightAuto:!n._prefs.wht,type:t}),I=P.widget.news.length,B=function(){if("vert"===P.layout&&s.hasMod("layout","horiz")?s.setMod("layout","vert"):"horiz"===P.layout&&s.hasMod("layout","vert")&&s.setMod("layout","horiz"),P.isHeightAuto&&(parseInt(P.widget._prefs.n,10)>8?(r.find(".w-rss__body").addClass("w-rss__body_height_large"),P.mode.large=!0):"horiz"===P.layout||S(P.col)||parseInt(P.widget._prefs.n,10)<=5||I<=5?(r.find(".w-rss__body").addClass("w-rss__body_height_compact"),P.mode.compact=!0):"vert"!==P.layout||S(P.col)||(r.find(".w-rss__body").removeClass("w-rss__body_height_compact"),P.mode.compact=!1)),"text-img"!==P.type||S(P.col))return l;var e=r.parent().find(".l-rss_type_"+P.layout).clone();return e.appendTo(l),e.find("tbody").html("")},O=B(),D=function(){return"text-img"!==P.type||S(P.col)?O.find("div.w-rss__item"):O.find("tr")},j={getCurrent:function(e,t){for(var i,n=0;n<e.length&&(i=$(e[n]).position().top)<t-2;)n++;return Math.abs(i-t)<2?{top:i,i:n,inside:!1}:{top:$(e[n-1]).position().top,i:n-1,inside:!0}},scroll:function(e){V();var t=D().toArray(),i=t.length-1,n=$(t[i]),o="up"===e?-1:1,r=s.elem("body").scrollTop(),a=s.elem("body").height(),c=n.position().top+n.height()-a,l=this.getCurrent(t,r),u=l.top,d=l.i,m=o<0&&u<r?d:d+o,p=!1;m=Math.max(0,Math.min(i,m));var f=$(t[m]).position().top;p=a-22<o*(f-r),d===i&&o>0&&(p=!0),p?(r+=o*(a-44),d=Math.min(d,m)):(r=f,d=m),r=Math.max(0,Math.min(c,r)),p?h.removeClass("i-hidden"):h.addClass("i-hidden"),s.elem("body").animate({scrollTop:r},100)},updateControls:function(){var e=D().toArray(),t=s.elem("body").scrollTop(),i=e.length-1,n=$(e[i]),o=s.elem("body").height(),r=n.position().top+n.height()-o;this.getCurrent(e,t).inside?h.removeClass("i-hidden"):h.addClass("i-hidden"),E("up",t>0),E("down",t<r),r-t<o&&!x&&U()},reset:function(){s.elem("body").animate({scrollTop:0},100)}},A=(e=r.parent().find(".w-rss__item").clone().remove(),function(t){var i=e.clone(),n=t.url;n=n.replace(/^https?:/,""),i.find(".w-rss__title").attr("href",n).html(t.title).addClass(home.getData("b-rss.linkTheme","")),i.find(".w-rss__date").addClass("text_gray_yes").html(t.date),t.descr?i.find(".w-rss__description").html(t.descr):i.find(".w-rss__description").remove();var o=i.find(".w-rss__preview");if(t.img){var s="magazine"===P.type&&P.mode.compact&&t.imgCompact||t.img;s=s.replace(/^https?:/,""),o.attr("href",n),o.css({"background-image":"url("+s+")"})}else i.addClass("w-rss__item_previewable_no"),o.remove();return i.show(),i}),R=r.parent().find(".l-rss_type_vert").find("tr:first").clone().remove(),N=r.parent().find(".l-rss_type_horiz").find("tr:first").clone().remove(),L=function(e){var t=[];if("text-img"!==P.type||S(P.col))for(var i=0,n=e.length;i<n;i++)e[i]&&(M.push(e[i]),$.merge(t,A(e[i])));else{var o,s=function(t,i){if(""===$(i).html()){var n=e.shift();n&&($(i).html('<div class="w-rss__item">'+A(n).html()+"</div>"),M.push(n))}},r=O.find("tr:last").eq(0);for(1===r.length&&r.find("td:not(.l-rss__gap)").each(s);e.length>0;)(o="vert"===P.layout?R.clone():N.clone()).find("td:not(.l-rss__gap)").each(s),$.merge(t,o)}O.append(t)},F=function(e,t){x=!0;var i={url:a,num:12,start:M.length+1,type:P.widget._prefs.type,"no-text":P.widget._prefs["no-text"]};"object"==typeof e&&$.extend(i,e),$.ajax({url:P.widget.params.src,dataType:"json",data:i,success:function(e){e&&e.news&&e.news.length>0&&(e.tstamp&&(c=e.tstamp),t(e))},complete:function(){x=!1,q()}})},U=function(){F({tstamp:c},(function(e){L(e.news),E("down",!0)}))},z=function(e){e=e||M,j.reset(),l.html(""),O=B(),M=[],L(e),E("down",!0),W()},H=function Y(){if(!r.get(0).isInited){r.get(0).isInited=!0;var e=r.height();if(l.height()>e){"magazine"===!P.type&&function(e){for(var t,i=D(),n=parseInt(i.eq(0).css("paddingBottom"),10),o=0,s=0;o<e&&s<100;){if(o+(t=$(i[s]).height())+n>e){e-o>t/2&&(o+=t);break}o+=t+n,s++}s<100&&s>0&&($(".w-rss__body",r).height(o),d.addClass("i-hidden"))}(e);var t=!0;r.closest(".b-widget-fixed").mouseenter((function(){f.removeClass("w-rss__arrow_visibility_hidden"),p.removeClass("w-rss__arrow_visibility_hidden")})).mouseleave((function(){f.addClass("w-rss__arrow_visibility_hidden"),p.addClass("w-rss__arrow_visibility_hidden")})).mousemove((function(){t&&(t=!1,V(),setTimeout((function(){t=!0}),250))})),s.elem("body").bind("scroll",$.debounce(j.updateControls,100,j)),E("down",!0),E("up",!0),E("up",!1)}else P.isHeightAuto&&(r.find(".w-rss__body").removeClass("w-rss__body_height_large"),r.find(".w-rss__body").addClass("w-rss__body_height_compact"),P.mode.compact=!0,P.mode.large=!1,P.isHeightAuto=!1,z(),r.get(0).isInited=!1,Y())}},W=function(){if("magazine"===P.type){var e=O.find("div.w-rss__item").eq(0);e.hasClass("w-rss__item_previewable_no")||e.addClass("w-rss__item_position_first")}H()},V=function(){y=(new Date).getTime()},q=function(){b=(new Date).getTime()};P.widget._onDropcallback=function(e){var t=e.split(":")[0];t!=P.col&&(T(t)!==P.layout==="horiz"||"text-img"===P.type&&(S(t)||S(P.col)))&&(P.col=t,P.layout=T(t)?"horiz":"vert",z()),P.col=t},$(document).bind("mousemove keydown",(function(){k&&!w&&(k=!1,setTimeout((function(){k=!0}),250),(new Date).getTime()-b>3e4&&(m.hasClass("w-rss__informer_visibility_hidden")?(w=!0,setTimeout((function(){F({start:0},(function(e){var t;w=!1,e.news.length>0&&((t=e.news).length>M.length||t[0].title!==M[0].title||t[0].date!==M[0].date)&&((new Date).getTime()-y>3e4?z(e.news):(m.removeClass("w-rss__informer_visibility_hidden"),C=e.news))}))}),Math.round(2e3*Math.random()+3e3))):(new Date).getTime()-y>3e4&&C.length>0&&(q(),z(C),C=[],m.addClass("w-rss__informer_visibility_hidden"))))})),u.append(m),u.addClass("b-widget__title_type_rss"),L(P.widget.news),W(),$.browser&&$.browser.msie&&"text-img"===P.type&&setTimeout((function(){var e=r.find(".w-rss__preview"),t=r.find("table td").eq(0).width();e.each((function(e,i){var n=$(i);n.hide(),n.css({width:t+"px"}),n.css({heigth:"70px"}),n.show()})),r.hide(),r.css({zoom:1}),r.show()}),600),setTimeout((function(){0===r.height()&&(r.parent().hide(),setTimeout((function(){r.parent().show()}),200))}),2e3),m.click((function(){C.length>0&&(z(C),C=[]),V(),m.addClass("w-rss__informer_visibility_hidden")}))}}})},function(e,t){var i=function(e,t,i){var n,o=e,s=t,r=i||!1,a=!1;function c(e){return i?n=setTimeout(o,e):(n=setInterval(o,e),a=!0),n}function l(){a&&(r?clearTimeout(n):clearInterval(n),a=!1)}return{start:function(){return c(s)},restart:function(e){return l(),c(e)},stop:function(){l()}}};window.WTimersHandler=function(){var e={};function t(t,i){return t in e&&i in e[t]}return{add:function(n,o,s){"undefined"!==e[n]&&"object"==typeof e[n]||(e[n]={}),s=s||{};var r,a,c,l=new i(o.fn,864e5,o.runOnce),u=l.start();if(e[n][u]=l,"startTimerOn"in s){var d=(r=n,a=u,c=o.delay,function(){t(r,a)&&e[r][a].restart(c)}),h=s.startTimerOn;setTimeout(d,h)}else e[n][u].restart(o.delay);if("stopTimerOn"in s){var m=function(){var i=n,o=u;return function(){t(i,o)&&(e[i][o].stop(),delete e[i][o])}}(),p=s.stopTimerOn;setTimeout(m,p)}return u},remove:function(i,n){return!!t(i,n)&&(e[i][n].stop(),delete e[i][n],!0)}}}},function(e,t){var i,n;"undefined"==typeof Widget&&(window.Widget=function(e,t){this._(e,t)},document.Widget=Widget,i=jQuery,n=new WTimersHandler,Widget.prototype={undef:function(e){return e},_:function(e,t){this._prefs={};var i=!!t.src&&t.src,n=!!t.wauth&&t.wauth,o=t.type?t.type:"raw";this.params=t,this.type=o,this.id=e,this.classId=e.replace(/-[0-9]+$/i,""),this.intClassId=t.intclassid,this.instanceId=e.replace(/^(.*)-([0-9]+)$/i,"$2"),this.htmlId=e,this.src=i,this.onLoad=this.onload=!1,this.bound=!1,""!==n&&this.setValue("wauth",n),this.savedUsrCh=this.params.usrCh},init:function(){var e=this;if(!this.bound){this.bound=!0;var t=function(){e.loadFromSrc({isBinding:!0})};if(Widget.Framework.register(this),"iframe-inside"!==this.type&&new Widget.Wrapper(this),this.params.prefs)for(var i=0;i<this.params.prefs.length;i++)!1!==this.params.prefs[i]&&this.setValue(this.params.prefs[i][0],this.params.prefs[i][1]);var n=Widget.Framework.widgetPrefs[this.id];if(n){for(var o in this._prefs)n[o]||(n[o]=this._prefs[o]);this._prefs=n}"iframe"===this.type&&(this._stylescallback=function(){e.loadFromSrc({isBinding:!0})}),this.params.css&&"iframe"!==this.type&&this.css(this.params.css),this.params.js&&"iframe"!==this.type?this.library(this.params.js,t):t()}},showPreloader:function(e){var t=this;function i(){t.$().html(Widget.Framework.params.preloader)}e?i():window.setTimeout((function(){(t._inlineLoading||t._inlinePending)&&i()}),100)},loadFromSrc:function(e){if(e||(e={noPreloader:!1,isBinding:!1}),!("inline"===this.type&&!1===this.src&&e.isBinding||("inline"!==this.type&&"iframe"!==this.type&&"json"!==this.type||(!e.noPreloader&&Widget.Framework._domloaded&&this.showPreloader("now"),this[this.type+"From"](this.src)),e.isBinding))){var t=Widget.Framework.params.rawBodyUrl+this.getWidgetId()+"?ncrnd="+Math.random()+"&prototype="+Widget.Framework.params.prototype;"raw"===this.type&&this.rawFrom(t+"&wauth="+this.getAuth()),"inline"===this.type&&!1===this.src&&this.inlineFrom(t)}},_autoValue:function(e,t){return parseInt(e,10)>0?parseInt(e,10)+"px":t},iframeElement:function(e,t,n){var o,s,r;e=this._createLoadUrl.apply(this,arguments),n?(o=this._autoValue(this.params.prefs_width,Widget.Framework.params.iframeWidth),s=this._autoValue(this.params.prefs_height,Widget.Framework.params.iframeHeight),r=this.wrapper.$$("prefs")):(o="100%",s=this._autoValue(this.params.height,Widget.Framework.params.iframeHeight),r=this.wrapper.$$("iframe"));var a=i.browser&&i.browser.msie&&"9.0"===i.browser.version,c=i('<iframe style="border:none" allowTransparency="true" frameborder="0"></iframe>').attr({id:r,src:a?"":e,name:r}).css({width:0,"min-width":o,height:s,margin:0,padding:0});i(document.documentElement).hasClass("m-sandbox")&&c.attr("sandbox","allow-scripts allow-popups allow-forms allow-same-origin");var l=home.getData("banner.cls.banner__dummy");if(l&&c.addClass(l),i.browser&&i.browser.msie){var u=function e(){c.unbind("load",e).css({position:"",visibility:""})};c.css({position:"absolute",visibility:"hidden"}).bind("load",u)}return a&&setTimeout((function(){c.attr("src",e)}),50),c},iframeFrom:function(e){var t=this;i(document).ready((function(){!function n(){t.$().length?function(){t.$().html("");try{var n=t.iframeElement(e,[]),o=n[0].src.split("#secure:");i.browser&&(i.browser.mozilla||i.browser.safari)?n.attr({src:o[0]+"&rnd="+Math.random()+(o.length>1?"#secure:"+o[1]:"")}).appendTo(t.$()):n.appendTo(t.$()),n.one("load",t.adjustFontSize.bind(t))}catch(s){window.console&&console.error(s)}}():setTimeout((function(){n()}),100)}()}))},jsonFrom:function(){var e=this._createLoadUrl.apply(this,arguments);i.getScript(e+"&ncrnd="+Math.random())},inlineFrom:function(){var e=this._createLoadUrl.apply(this,arguments),t=this;Widget.Framework.inlineLoading(1),this._inlineLoading=!0,i.get(e,(function(e){t.wrapper.$().css("height",""),t._inlineFromHtml(e)}))},rawFrom:function(e){var t=this;Widget.Framework.inlineLoading(1),this._inlineLoading=!0,i.get(e,(function(e){t._inlineFromHtml(e)}))},_inlineFromJson:function(e){return Widget.Framework.inlineLoading(1),this._inlineFromHtml(e)},_inlineLoading:!1,_inlinePending:"",_inlineFromHtml:function(e){if(!Widget.Framework._domloaded)return this._inlineLoading=!1,void(this._inlinePending=e);Widget.Framework.inlineLoading(-1);var t,n=/<script[^>]*>(?!<\/script>)((?:\s|\S)*?)<\/script>/gim;this.wrapper.$().hasClass("b-widget-fixed")&&this.wrapper.$().addClass("b-widget-fixed"),0===this.$().length&&i("<div />").attr({id:this.$$(),"class":"b-widget-data"}).appendTo(this.wrapper.$());var o=this.$();for(BEM.DOM.destruct(o,!0),o.html(e.replace(n,"").replace(Widget.Framework.params.idTemplate,this.id)),n.lastIndex=0;null!==(t=n.exec(e));)try{new Function("widget",t[1])(this)}catch(s){}this._inlineLoading=!1,this._inlinePending=!1,BEM.DOM.init(o),Widget.Framework._domloaded&&this.finalize()},_createLoadUrl:function(e,t,i){var n=[{locale:this.getLocale()}];if(n.concat(t),window.toCat&&window.toReg||n.push({frommorda:1}),e=this._addParams(e,n,i||"iframe"===this.type,i),this.params.prefs_secure){for(var o=[],s=0;s<this.params.prefs_secure.length;s++)this.params.prefs_secure[s][1]&&o.push(this.params.prefs_secure[s][0]+"="+this.params.prefs_secure[s][1]);o.length&&(e+="#secure:"+o.join(","))}return e},_addParams:function(e,t,i,n){if(i&&(Widget.Framework.params.fullproxyDomain?this._prefs["."]=Widget.Framework.params.fullproxyDomain+"|"+Widget.Framework.params.proxyDomain:this._prefs["."]=location.protocol+"//"+location.host+"|"+document.domain,!n)){var o=this.getWidgetStyle()||{};o.bg&&(this._prefs.widgetBg=o.bg),o.text&&(this._prefs.widgetText=o.text),o.link&&(this._prefs.widgetLink=o.link),o.hover&&(this._prefs.widgetHover=o.hover),o.decor&&(this._prefs.widgetDecor=o.decor),this._moving&&(this._prefs.widgetMoving=1)}for(var s=[t,[this._prefs]],r=y5Url(location.href),a={},c=0;c<s.length;c++)for(var l=0;l<s[c].length;l++){var u;if(s[c][l]instanceof Array)for(u=0;u<s[c][l].length;u++)null!==r.getParam(s[c][l][u])&&(a[s[c][l][u]]=r.getParam(s[c][l][u]));else for(u in s[c][l])"function"!=typeof s[c][l][u]&&"object"!=typeof s[c][l][u]&&(a[u]=s[c][l][u])}return y5Url(e).addParams(a).toString()},_disableAutoStats:!1,hookStats:function(){return Widget.Framework.hookStats(this)},disableAutoStats:function(){this._disableAutoStats=!0},onload:function(){},resetAuth:function(){this._splitterAuth=!1},getAuth:function(){return this.getValue("wauth")},_splittedAuth:!1,splitAuth:function(){return this._splittedAuth||(this._splittedAuth=Widget.Framework.splitAuth(this.getAuth())),this._splittedAuth},getWidgetId:function(){return this.splitAuth().id},getOwner:function(){return this.splitAuth().owner},getViewer:function(){return this.splitAuth().viewer},setValue:function(e,t){this._prefs[e]=t,"wauth"===e&&Widget.Framework.registerWauth(this)},getValue:function(e){return this._prefs[e]?this._prefs[e]:this.undef()},getBoolean:function(e){var t=this.getValue(e);return!0===t||"true"===t},_encodeValues:function(e){e===this.undef()&&(e=this._prefs);var t=y5Url("");return t.query(e),t.query()},setValues:function(e){for(var t in e)"function"!=typeof e[t]&&"object"!=typeof e[t]&&this.setValue(t,e[t])},saveValues:function(e,t){e===this.undef()&&(e=this._prefs),this.markChanged(!1,!0),this.setValues(e),i.ajax({url:(Widget.Framework.params.saveDomain||"")+Widget.Framework.params.formUrl,data:{widget:this.getWidgetId(),wauth:this.getAuth(),usrCh:this.params.usrCh,s:this._encodeValues(e)},dataType:"json",success:t})},dropValues:function(e){var t=this;i.ajax({url:(Widget.Framework.params.saveDomain||"")+Widget.Framework.params.formUrl,data:{widget:this.getWidgetId(),wauth:this.getAuth(),s:"DROP"},dataType:"json",success:function(i){Widget.Framework.widgetPrefs[t.id]=!1,e&&e(i)}})},reload:function(e,t,n){if(!this.pauseReload){i(".b-wdgt-control").appendTo("body");var o=this;if(this.wrapper){if(void 0!==t&&(this._prefs.showAnyway=t),"raw"===this.type)return Widget.Framework.reload(this,(function(){e&&e(),o.onload&&o.onload(),BEM.channel("widget").trigger("reload",{widget:o}),o.queueAutoReload()}),t,n);this.loadFromSrc({noPreloader:!0})}else{var s=location.host;s.indexOf("/")===s.length-1&&(s=s.substr(0,s.length-1));var r=location.pathname;0===r.indexOf("/")&&(r=r.substr(1)),location.href=this._addParams("//"+s+"/"+r,[],"isIframe")}}},setTitle:function(e){this.wrapper?this.wrapper.setTitle(e):Widget.Framework.xframe(this,"Widget::setTitle",e)},savePreferences:function(e){this.saveValues(e),this._updateOnHide=!0},dropPreferences:function(e){var t=this.getAuth();this._prefs={},this.setValue("wauth",t),this.wrapper?(this.dropValues(e),i(window).trigger({type:"widgetSettingsClosed",id:this.id})):Widget.Framework.xframe(this,"Widget::dropPreferences","",e)},showPreferences:function(){this.wrapper?this.wrapper.showPreferences():Widget.Framework.xframe(this,"Widget::showPreferences")},hidePreferences:function(){this.wrapper?(this._updateOnHide&&(this.loadFromSrc(),Widget.Framework.params.notifyChangesHandler(this)),this.wrapper.hidePreferences()):Widget.Framework.xframe(this,"Widget::hidePreferences",this._updateOnHide?"<>"+this._encodeValues():""),this._updateOnHide=!1},notifyCustomSave:function(){Widget.Framework.xframe(this,"Widget::notifyCustomSave")},setIFrameHeight:function(e){this.wrapper?this.wrapper.setIFrameHeight(e):Widget.Framework.xframe(this,"Widget::setIFrameHeight",e)},setIFrameWidth:function(e){this.wrapper?this.wrapper.setIFrameWidth(e):Widget.Framework.xframe(this,"Widget::setIFrameWidth",e)},setIFrameSize:function(e,t){this.wrapper?this.wrapper.setIFrameSize(e,t):Widget.Framework.xframe(this,"Widget::setIFrameSize",e+","+t)},setPreferencesFormWidth:function(e){this.wrapper?this.wrapper.setPreferencesFormWidth(e):Widget.Framework.xframe(this,"Widget::setPreferencesFormWidth",e)},setPreferencesFormHeight:function(e){this.wrapper?this.wrapper.setPreferencesFormHeight(e):Widget.Framework.xframe(this,"Widget::setPreferencesFormHeight",e)},setPreferencesFormSize:function(e,t){this.wrapper?this.wrapper.setPreferencesFormSize(e,t):Widget.Framework.xframe(this,"Widget::setPreferencesFormSize",e+","+t)},_calculateCss:function(e,t){var i=e.css(t),n=i.replace(/(\.[0-9]+)?px$/,"");return"height"!==t||"auto"!==i&&0!==parseInt(i,10)?i!==n?parseInt(i,10):0:document.body.scrollHeight},_sumCss:function(e,t){for(var i=0,n=0;n<t.length;n++)i+=this._calculateCss(e,t[n]);return i},adjustIFrameHeight:function(){var e=this;window.clearTimeout(this._adjustIFrameHeightTimeout),this._adjustIFrameHeightTimeout=window.setTimeout((function(){e._adjustIFrameHeight()}),100)},_adjustIFrameHeightPrevious:-1,_adjustIFrameHeightTimeout:!1,_adjustIFrameHeight:function(){var e;(e="iframe-inside"===this.type?i("body"):this.$()).css("overflow","hidden");var t=!1;e.css("margin-left")===e.css("margin-right")&&e.css("margin-right")===e.css("margin-top")&&e.css("margin-top")===e.css("margin-bottom")&&"0px"===e.css("margin-bottom")&&e.css("padding-left")===e.css("padding-right")&&e.css("padding-right")===e.css("padding-top")&&e.css("padding-top")===e.css("padding-bottom")&&"0px"===e.css("padding-bottom")&&(t=!0);var n=this._sumCss(e,["marginTop","marginBottom","height"]);t&&e.css("padding","1px");var o=this._sumCss(e,["marginTop","marginBottom","height"]);if(o>n&&(n=o),n!==this._adjustIFrameHeightPrevious)return i.browser&&i.browser.opera&&(n+=20),this._adjustIFrameHeightPrevious=n,this.setIFrameHeight(n)},library:function(e,t){var i=this;this._libraryLoading=!0,Widget.Framework.library(e,(function(){i._libraryLoading=!1,t?t():i.finalize()}))},css:function(e){return Widget.Framework.css(e)},iReload:function(e,t){if(this.stopAutoReload(),Widget.Framework.focused)Widget.Framework.addToReloadQueue(this,e,t),Widget.Framework.reloadQueueTimer&&clearTimeout(Widget.Framework.reloadQueueTimer),Widget.Framework.reloadQueueTimer=setTimeout((function(){Widget.Framework.processReloadQueue()}),Widget.Framework.reloadQueueTimeout);else{var n=function o(){i.browser&&i.browser.msie?i(document).unbind("focusin",o):i(window).unbind("focus",o),Widget.Framework.processReloadQueue()};Widget.Framework.addToReloadQueue(this,e,t),i.browser&&i.browser.msie?i(document).bind("focusin",n):i(window).bind("focus",n)}},stopAutoReload:function(){Widget.Framework.unsetAutoreload(this)},queueAutoReload:function(){Widget.Framework.setAutoreload(this)},finalize:function(){this.queueAutoReload(),this.onload&&this.onload(),this.onLoad&&this.onLoad(),this._disableAutoStats||this.hookStats(),i(window).trigger({type:"widgetLoaded",id:this.id})},countShow:function(e,t){csh_ifgsid&&!this._isNotReloaded&&csh_ifgsid(e,t)},addTimer:function(e,t){return n.add(this.id,e,t)},removeTimer:function(e){n.remove(this.id,e)},getWidgetStyle:function(){var e=this.params.position,t=Widget.Framework.params.widgetStyle;if(e||(e=window.wg&&wg._addedWidgetPosition),t&&e){var i=parseInt(e.split(":")[0],10),n={};for(var o in t[e]?n=t[e]:t.top&&i<=2?n=t.top:t.bottom&&i>2?n=t.bottom:t.all&&(n=t.all),t.def)t.def.hasOwnProperty(o)&&(n[o]||(n[o]=t.def[o]));return n}return""},appendStyle:function(e){var t=document.createElement("style");t.setAttribute("type","text/css"),document.getElementsByTagName("head").item(0).appendChild(t),t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))},adjustFontSize:function(){"iframe"===this.type&&this.$().find("iframe")[0].contentWindow.postMessage(JSON.stringify({type:"message",message:{name:"font-size",value:Widget.Framework.getFontSize()}}),"*")},addWidgetStyles:function(){try{if(i("script[nowidgetstyles='true']").length)return;"iframe-inside"===this.type&&this._prefs&&(this._prefs.widgetLink&&this.appendStyle(":link {color:#"+this._prefs.widgetLink+" !important;}"),this._prefs.widgetHover&&this.appendStyle(":link:hover {color:#"+this._prefs.widgetHover+" !important;}"),this._prefs.widgetText&&this.appendStyle("body {color:#"+this._prefs.widgetText+" !important;}"),this._prefs.widgetDecor&&this.appendStyle(":link {text-decoration: none! important;}"))}catch(e){window.console&&window.console.log&&console.log("unable to append widget styles",this._prefs.widgetBg,this._prefs.widgetText,this._prefs.widgetLink,this._prefs.widgetHover,this._prefs.widgetDecor)}},markChanged:function(e,t){this.params.usrCh|=(e?1:0)+(t?2:0)},$:function(e){return i("#"+this.$$(e))},$$:function(e){return Widget.Framework.params.idPrefix+this.id+(e===this.undef()?"":e)},getLocale:function(){return Widget.Framework.getLocale()},end:!0})},function(e,t){window.y5Url=function(){var e={UNDEF:"undefined"};e.Types={UNDEF:1,UNDEFINED:1,OBJECT:2,FUNCTION:4,NUMBER:8,STRING:16,BOOLEAN:32,DATE:1024,REGEXP:2048,ARRAY:4096,NULL:8192,EVENT:16384,NODE:32768,TYPES:{undefined:1,object:2,"function":4,number:8,string:16,boolean:32},type:function(e){var t=this.TYPES[typeof e];if(null===e)return this.NULL;if(t==this.OBJECT&&(e.nodeName||this.document(e)))return this.NODE;if(t==this.OBJECT||t==this.FUNCTION)switch(e.constructor){case Array:return this.ARRAY;case RegExp:return this.REGEXP;case Date:return this.DATE}return this.event(e)?this.EVENT:t},test:function(e,t){return!!(this.type(e)&t)},def:function(e){return typeof e!=t},undef:function(e){return typeof e==t},object:function(e){return"object"==typeof e},func:function(e){return"function"==typeof e},nativeFunc:function(e){return this.func(e)&&isNativeFunc.test(e.toString())},number:function(e){return"number"==typeof e},string:function(e){return"string"==typeof e},bool:function(e){return"boolean"==typeof e},nul:function(e){return null===e},array:function(e){return e instanceof Array},regexp:function(e){return e instanceof RegExp},date:function(e){return e instanceof Date},event:function(e){return e&&typeof e.type!=t&&typeof(e.stopPropagation||e.cancelBubble)!=t},element:function(e){return checkDomNode(e,Node.ELEMENT_NODE)},attribute:function(e){return checkDomNode(e,Node.ATTRIBUTE_NODE)},text:function(e){return checkDomNode(e,Node.TEXT_NODE)},document:function(e){return e&&typeof e.documentElement!=t||!1},comment:function(e){return checkDomNode(e,Node.COMMENT_NODE)},node:function(e){return e&&typeof e.nodeType!=t}};for(var t=e.UNDEF,i=e.Types,n=/^((((\w+):)\/\/)?(([\w\-\.]+\.\w+|localhost)(\:(\d+))?))?(\/?[^\?#]*)?(\?([^#]*))?(#(.*))?$/,o=/^(([\w]+:)?\/\/)?(([\d\w]|%[a-fA-f\d]{2,2})+(:([\d\w]|%[a-fA-f\d]{2,2})+)?@)?([\d\w][-\d\w]{0,253}[\d\w]\.)+[\w]{2,4}(:[\d]+)?(\/([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)*(\?(&?([-+_~.\d\w]|%[a-fA-f\d]{2,2})=?)*)?(#([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)?$/,s="E9F6F3EAE5EDE3F8F9E7F5FAF4FBE2E0EFF0EEEBE4E6FDFFF7F1ECE8F2FCE1FEB8C9D6D3CAC5CDC3D8D9C7D5DAD4DBC2C0CFD0CECBC4C6DDDFD7D1CCC8D2DCC1DEA8".match(/../g),r="%D0%B9%D1%86%D1%83%D0%BA%D0%B5%D0%BD%D0%B3%D1%88%D1%89%D0%B7%D1%85%D1%8A%D1%84%D1%8B%D0%B2%D0%B0%D0%BF%D1%80%D0%BE%D0%BB%D0%B4%D0%B6%D1%8D%D1%8F%D1%87%D1%81%D0%BC%D0%B8%D1%82%D1%8C%D0%B1%D1%8E%D1%91%D0%99%D0%A6%D0%A3%D0%9A%D0%95%D0%9D%D0%93%D0%A8%D0%A9%D0%97%D0%A5%D0%AA%D0%A4%D0%AB%D0%92%D0%90%D0%9F%D0%A0%D0%9E%D0%9B%D0%94%D0%96%D0%AD%D0%AF%D0%A7%D0%A1%D0%9C%D0%98%D0%A2%D0%AC%D0%91%D0%AE%D0%81".match(/.{6}/g),a={},c=encodeURIComponent,l=[".xml",".html",".xhtml",".jpg",".gif",".png",".css",".js",".xsl",".php",".py",".pl"],u=0,d=s.length,h=/%3B|%2C|%2F|%3F|%3A|%40|%26|%3D|%2B|%24/gi;u<d;u++)a[s[u]]=r[u];function m(e,t){return a[t]||e}function p(e){return e.replace(/%([A-Fa-f0-9]{2})/g,m)}function f(e){var t=e.replace(/\+/g,"%20");try{var i=decodeURIComponent(t);if(i==undefined)throw"malformed URI sequence";return i}catch(n){try{return decodeURIComponent(p(t))}catch(n){return unescape(t)}}}function _(e,t,n){i.undef(e[t])&&(e[t]=[]),i.array(n)?e[t]=e[t].concat(n):e[t].push(n)}function g(e,t){for(var i=e[t],n=i.length,o=new Array(n),s=c(t),r=0;r<n;r++)o[r]=s+"="+c(i[r]);return o}function v(e){for(var t,i,n,o={},s=e.replace(/\+/g,"%20").split("&"),r=0,a=s.length;r<a;r++)(i=(t=s[r].split("=")).shift())&&(n=t.length>1?t.join("="):t[0]||"",_(o,f(i),f(n)));return o}e.URL=function(e){var t=(e=i.def(e)?e.toString():window.location.href).match(n);if(t){if(this.Host=t[6]||"",this.Path=t[9]||"",t[6]){var o=t[6].substring(t[6].lastIndexOf("."));-1!=$.inArray(o,l)&&(this.Path=t[6],this.Host="")}this.Href=t[0],this.Proto=t[4]||"",this.Port=t[8]||0,this.Path=function(e){try{var t=decodeURI(e);if(t==undefined)throw"malformed URI sequence";return t}catch(i){try{return decodeURI(p(e))}catch(i){return unescape(e)}}}(this.Path),this.Query=v(t[11]||""),this.Hash=f(t[13]||"")}},e.URL.prototype={go:function(){window.location.href=this.toString()},toString:function(){var e="";if((this.Proto||this.Host)&&this.Host&&(e+=(this.Proto||"http")+"://"+this.Host,this.Port&&(e+=":"+this.Port)),this.Path){this.Host&&0!=this.Path.indexOf("/")&&(e+="/"),h.lastIndex=0;for(var t,i=0,n=[];t=h.exec(this.Path);)h.lastIndex>i&&t[0]&&(n.push(this.Path.slice(i,t.index)),n.push(t[0]),i=t.index+t[0].length);i!==this.Path.length&&n.push(this.Path.slice(i)),n[0]=encodeURI(n[0]);for(var o=[],s=0;s<n.length;s++)o[s]=s%2?n[s]:encodeURI(n[s]);e+=o.join("")}for(s=0;s<"".length;s++){var r="".charAt(s),a=encodeURIComponent(encodeURIComponent(r)),l=encodeURIComponent(encodeURIComponent(r.toUpperCase()));e.indexOf(a)>-1&&(e=e.replace(new RegExp(a,"g"),r)),e.indexOf(l)>-1&&(e=e.replace(new RegExp(l,"g"),r))}var u=this.query();return u&&(e+="?"+u),this.Hash&&(e+="#"+c(this.Hash)),e},clone:function(){return new e.URL(this.toString())},proto:function(){},host:function(){},port:function(){},path:function(){},hash:function(){},query:function(e){if(i.def(e))return this.clearQuery(),i.string(e)?this.Query=v(e):this.replaceParams(e),this;var t=[];for(var n in this.Query)t=t.concat(g(this.Query,n));return t.join("&")},queryKeys:function(){var e=[];for(var t in this.Query)e.push(t);return e.sort()},addParam:function(e,t){return _(this.Query,e,t),this},addParams:function(e){for(var t in e)_(this.Query,t,e[t]);return this},removeParams:function(e){for(var t=0,i=e.length;t<i;t++)delete this.Query[e[t]];return this},replaceParams:function(e){var t=[];for(var i in e)t.push(i);return this.removeParams(t),this.addParams(e),this},clearQuery:function(){return this.Query={},this},getParam:function(e){var t=this.Query[e];return t?t[0]:null},getParams:function(e){return this.Query[e]||[]}};var b=e.URL,y=b.prototype,w={proto:"Proto",host:"Host",port:"Port",path:"Path",hash:"Hash"};for(u in w)y[u]=function(e){return function(t){return i.def(t)?(this[e]=t,this):this[e]}}(w[u]);return y.get=y.toString,e.Url=function(e){return new b(e)},b.isValid=function(e){return o.test(e)},e.Url}()},function(e,t){var i;"undefined"!=typeof Widget&&"undefined"==typeof Widget.Wrapper&&(i=jQuery,Widget.Wrapper=function(e){this._(e)},Widget.Wrapper.prototype={undef:function(e){return e},_:function(e){this.widget=e,this.widget.wrapper=this,Widget.Framework._wrappers[this.$$()]=e},$:function(e){return i("#"+this.$$(e))},$$:function(e){return Widget.Framework.params.wrapperPrefix+(e==this.undef()?"wrapper":e)+Widget.Framework.params.wrapperPostfix+this.widget.id},setTitle:function(e){this.$("title").html((""+e).replace(/</g,"&lt;"))},getWindowSize:function(){var e=window;if("undefined"!=typeof e.innerWidth)return{width:e.innerWidth,height:e.innerHeight};var t=document[i.support.boxModel?"documentElement":"body"];return{width:t.clientWidth,height:t.clientHeight}},_px:function(e){return(""+e).match("^[0-9]+$")&&(e+="px"),e},setIFrameHeight:function(e){this.$().css("height",""),this.$("iframe").css("height",this._px(e))},setIFrameWidth:function(e){this.$("iframe").css("width",this._px(e))},setIFrameSize:function(e,t){this.$("iframe").css("height",this._px(t)).css("width",this._px(e))},setPreferencesFormWidth:function(e){var t=this.getWindowSize().width;e=t/e<2?t/2:e,this.$("prefs").css("width",this._px(e))},setPreferencesFormHeight:function(e){var t=this.getWindowSize().height;e=t/e<2?t/2:e,this.$("prefs").css("height",this._px(e))},setPreferencesFormSize:function(e,t){this.setPreferencesFormWidth(e),this.setPreferencesFormHeight(t)},showPreferences:function(){Widget.Framework.params.showPreferencesHandler(this.widget)},hidePreferences:function(){Widget.Framework.params.hidePreferencesHandler(this.widget)},showEditForm:function(e){return Widget.Framework.showEditForm(this.widget.id,e)}})},function(e,t){if("undefined"!=typeof Widget&&"undefined"==typeof Widget.Framework){!function(e){Widget.Framework={undef:function(e){return e},params:!1,_id:{},_prebindId:{},_wauth:{},_no:{},_widgets:[],_wrappers:{},_callbacks:{},_callbackId:1,widgetAutoReloadTimers:{},widgetReloadQueue:{},reloadQueueTimeout:5e3,reloadQueueTimer:null,widgetPrefs:{},getLocale:function(){return this.params.locale},getDomain:function(){return this.params.domain},get:function(e){return Widget.Framework._id[e]},getPrebind:function(e){return Widget.Framework._prebindId[e]},getByWauth:function(e){return Widget.Framework._wauth[e]},getByWrapperId:function(e){return Widget.Framework._wrappers[e]},getByClass:function(e){if(this._no[e]===this.undef())return[];for(var t=[],i=0;i<this._widgets.length;i++)this._widgets[i].classId===e&&(t[t.length]=this._widgets[i]);return t},updateNo:function(e,t){var i=parseInt((""+t).replace(/^[^-]+-/,""),10);return this._no[e]===this.undef()&&(this._no[e]=0),this._no[e]<=i&&(this._no[e]=i+1),this._no[e]},register:function(e){for(var t in this.registerWauth(e),this._id[e.id]=e,this.updateNo(e.classId,e.instanceId),e.intClassId&&this.updateNo(e.intClassId,e.instanceId),this._widgets=[],this._id)this._id.hasOwnProperty(t)&&(this._widgets[this._widgets.length]=this._id[t])},registerWauth:function(e){var t=e.getValue("wauth");""!==t&&(this._wauth[t]=e),e.resetAuth()},all:function(){return this._widgets},bindIframe:function(){var e=y5Url(location.href).getParam("wauth");if(e){this.inIframe=!0;var t=this.splitAuth(e),i=this.bind(t.id,{type:"iframe-inside",wauth:e});return this.setValuesFromUrl(i),i.addWidgetStyles(),document.documentElement.id=this.params.idPrefix+i.id,i}return this.inIframe=!1,!1},setEdit:function(e){if(!arguments.length)return this.params.edit;e=!!e,this.params.edit!==e&&(e?this.unsetAutoreload():this.setAutoreload(),this.params.edit=e)},getValuesFromUrl:function(e){var t=[];try{var i,n,o=y5Url(location.href);e!==this.undef()&&o.query(e);var s=o.queryKeys();for(i=0;i<s.length;i++)o.getParam(s[i])===this.undef()?t[t.length]=[s[i],""]:t[t.length]=[s[i],o.getParam(s[i])];if(o.Hash){var r,a=o.Hash.replace("secure:","").split(",");for(i=0,n=a.length;i<n;i++)r=a[i].split("="),t[t.length]=r}}catch(c){}return t},setValuesFromUrl:function(e){var t,i=this.getValuesFromUrl();try{t=location.protocol}catch(a){t="http:"}for(var n=0;n<i.length;n++)if("."===i[n][0]){var o=i[n][1].split("|");this.params.saveDomain=o[0].replace(/(http:|https:)/,t),this.params.fullproxyDomain=o[0],this.params.fullproxyUrl=this.params.saveDomain+this.params.proxyUrl,this.params.proxyDomain=o[1]}else if("locale"===i[n][0])this.params.locale=i[n][1];else{var s=i[n][1],r=i[n][0];"prefs_get"===r&&(s=JSON.parse(s)),e.setValue(r,s)}},_inlineLoadingCount:0,inlineLoading:function(e){this._inlineLoadingCount+=e,this.onInlineLoadingChange(this._inlineLoadingCount,e)},onInlineLoadingChange:function(){},bind:function(e,t){var i=this.prebind(e,t);return i.init(),i},prebind:function(e,t){var i=new Widget(e,t);return Widget.Framework._prebindId[e]=i,i},init:function(e){if(!1===this.params)this.params=e;else for(var t in e)e.hasOwnProperty(t)&&e[t]!==this.undef()&&(this.params[t]=e[t]);this.params.preloader=this.params.preloader.replace("#dataLoading#",this.params.dataLoadingText)},insert:function(t,i,n,o){var s=e(n),r=s.data("bem").widget,a=Widget.Bind(r.id,r.initParams);i.append(s),a.bound&&("raw"===a.type||"inline"===a.type&&!1===a.src)&&a.finalize(),o&&o(a,a.$().parent())},replace:function(e,t,i){var n,o=e.$(),s=e.id;BEM.DOM.destruct(o,!0),o.html(t),BEM.DOM.init(o);var r=Widget.Framework.get(s);return n=r.wrapper.$(),i&&i(r,n),r},reload:function(t,i,n,o){n&&(t._prefs.showAnyway=n);var s={wauth:t.getAuth(),wid:t.id,usrCh:t.params.usrCh,fixed:this.params.layoutFixed?"1":"",showanyway:t._prefs.showAnyway?1:0,prefs_get:t.params.prefs_get?JSON.stringify(t.params.prefs_get):"",locale:this.getLocale(),prototype:Widget.Framework.params.prototype,bg:t.getWidgetStyle().bg,version:Widget.Framework.params.version};o&&(s.istuning=1),this.params.gsid&&(s.g_sid=this.params.gsid),"undefined"!=typeof t.params.is_default&&(s.is_default=!0===t.params.is_default?1:0),!1!==Widget.Framework.widgetPrefs[t.id]?Widget.Framework.widgetPrefs[t.id]=t._prefs:Widget.Framework.widgetPrefs[t.id]=null,"iframe"===t.type&&(s["."]=this.params.fullproxyDomain+"|"+this.params.proxyDomain),e.get(this.params.addUrl,s,(function(e){Widget.Framework.replace(t,e,i)}))},add:function(t,i,n,o){var s,r,a=this.updateNo(t,"_topnews"===t?0:1);this.updateNo(t,a),"function"==typeof n?s=n:(s=n.success,r=n.error),o=o||{fixed:!1};var c=t+"-"+a,l={wauth:this.params.wauth,wid:c,smart:o.smart?"1":"",fixed:o.fixed?"1":"",locale:this.getLocale(),isAddition:1,prototype:this.params.prototype,version:Widget.Framework.params.version};this.params.gsid&&(l.g_sid=this.params.gsid),o.settings&&(l.settings=o.settings),o.sign&&(l.sign=o.sign),o.showanyway&&(l.showanyway=o.showanyway),e.ajax({url:this.params.addUrl,data:l,success:function(e){Widget.Framework.insert(c,i,e,s)},error:r})},fromJson:function(e,t){var i=this.getByWauth(e);i&&i._inlineFromJson(t)},splitAuth:function(e){var t=e.split(".");return t.length>4?{id:t[3],owner:t[6],viewer:t[5]}:{id:t[0],owner:t[1],viewer:t[2]}},scripts:{},library:function(t,i){var n=this.prepareLibrary(t),o=0,s=this;!function r(t){if(t!==s.undef()&&"loaded"!==s.scripts[t]){for(var a=0;a<s.scripts[t].length;a++)s.scripts[t][a]();s.scripts[t]="loaded"}if(o>=n.length)i!==s.undef()&&i();else{var c=n[o];o++,s.scripts[c]===s.undef()&&!1!==c?(s.scripts[c]=[],e.getScript(c,function(e){return function(){r(e)}}(c))):"loaded"===s.scripts[c]?r():s.scripts[c].push(r)}}()},prepareLibrary:function(e){var t=[];if(e instanceof Array)for(var i=0;i<e.length;i++)t=e[i]instanceof Array?t.concat(this.prepareLibrary(e[i][0],e[i][1])):t.concat(this.prepareLibrary(e[i]));return!1!==e&&(t=e),t},_css:{},css:function(t){t instanceof Array?this.loadCss(t):(t.any instanceof Array&&this.loadCss(t.any),e.browser&&e.browser.msie&&t.msie instanceof Array&&this.loadCss(t.msie),e.browser&&e.browser.msie||!(t.non_msie instanceof Array)||this.loadCss(t.non_msie))},loadCss:function(e){for(var t=0;t<e.length;t++)if(!this._css[e[t]]){this._css[e[t]]=!0;var i=document.createElement("link");i.rel="stylesheet",i.href=e[t],(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(i)}},_click:function(t){var i="//yandex.ru/clck/jclck/dtype=stred/pid="+this.params.statParams.pid+"/cid="+this.params.statParams.cid+"/path="+t+"/rnd="+Math.random()+"/*"+location.href.replace(/^[^/]+\/+/,"");try{e.ajax({type:"GET",url:i,dataType:"text"})}catch(n){}},_counter:function(){var t=e(this),i=(t.closest(".widget").attr("id")||"").replace(/^wd-wrapper-/,""),n=Widget.Framework.get(i),o=n.classId+".anchors";if(n){if(t.attr("rev")){var s=t.attr("rev");if("none"===s)return;o=o+"."+s}Widget.Framework._click(o)}},hookStats:function(t){var i=this;if("iframe-inside"===t.type)e("a, input[type=button], input[type=submit], button").on("mousedown.widgetstat",(function(){i._click(t.classId+".anchors")}));else if(t.wrapper.$("title").not(".yandex-hook-stat").mousedown((function(){i._click(t.classId+".title")})).addClass("yandex-hook-stat"),t.wrapper.$().length>0&&"raw"!==t.type){var n="#"+t.wrapper.$().attr("id")+" a:not(.yandex-hook-stat),";n+="#"+t.wrapper.$().attr("id")+" input[type=button],",n+="#"+t.wrapper.$().attr("id")+" input[type=submit],",n+="#"+t.wrapper.$().attr("id")+" button";try{e(n).off("mousedown.widgetstat").on("mousedown.widgetstat",(function(){var n=e(this),o=t.classId+".anchors";if(n.attr("rev")){var s=n.attr("rev");if("none"===s)return;o=o+"."+s}i._click(o)}))}catch(o){}}},_domloaded:!1,domLoaded:function(){if(this._domloaded)return!1;this._domloaded=!0;for(var e=0;e<this._widgets.length;e++)this._widgets[e]._inlineLoading?this._widgets[e].showPreloader():this._widgets[e]._inlinePending?this._widgets[e]._inlineFromHtml(this._widgets[e]._inlinePending):this._widgets[e].finalize()},setAutoreload:function(e){if(!0!==this.params.edit)if(e){var t=this.widgetAutoReloadTimers;if(e.params.rebind&&!t[e.id]){var i=1e3*e.params.rebind;t[e.id]=setTimeout((function(){t[e.id]=null,e.iReload()}),i)}}else for(var n=0;n<this._widgets.length;n++)this.setAutoreload(this._widgets[n])},unsetAutoreload:function(e){if(e){var t=this.widgetAutoReloadTimers,i=t[e.id];i&&(clearTimeout(i),t[e]=null)}else for(var n=0;n<this._widgets.length;n++)this.unsetAutoreload(this._widgets[n])},_storeCallback:function(e){return this._callbacks[this._callbackId]=e,this._callbackId++},_freeCallback:function(e){var t=this._callbacks[e];return delete this._callbacks[e],t},_postMessageTransport:function(e,t,i){var n={action:"message",wauth:e.getValue("wauth"),params:{message:t}},o=this.params.fullproxyDomain;i&&(n.params.callbackId=this._storeCallback(i)),window.parent.postMessage(JSON.stringify(n),o)},_iframeTransport:function(e,t,i){var n=this.params.fullproxyUrl;if(0===n.indexOf("http:")||0===n.indexOf("https:")||"/"===n.charAt(0)){this._xframe&&document.body.removeChild(this._xframe);var o=document.createElement("iframe");o.style.visibility="hidden",o.style.position="absolute",o.name="widget"+(Math.random()+"").substr(3,7),o.style.top=o.style.left=o.style.width=o.style.height=0,this._xframe=document.body.insertBefore(o,document.body.firstChild),this.xframeSrc(this._xframe,n+"#"+t,i)}},xframe:function(e,t,i,n){try{var o,s=y5Url();s.clearQuery(),s.addParams({wauth:e.getAuth(),name:t,value:i}),s.hash(encodeURIComponent(s.query())),s.clearQuery(),o=this.params.proxyDomain+"&"+s.hash(),"postMessage"in window?this._postMessageTransport(e,o,n):this._iframeTransport(e,o,n)}catch(r){}},_isCorrectWauth:function(e){var t=this.splitAuth(e),i=this.get(t.id);return!!i&&i.getValue("wauth")===e},onWindowMessage:function(e){var t,i;try{t=JSON.parse(e.data)}catch(n){return}t&&("callback"===t.action?t.params&&t.params.callbackId&&(i=this._freeCallback(t.params.callbackId))&&i():t.wauth&&this._isCorrectWauth(t.wauth)&&t.params&&t.params.message&&(this.xframeGet(t.params.message),t.params.callbackId&&e.source.postMessage(JSON.stringify({action:"callback",params:{callbackId:t.params.callbackId}}),e.origin)))},xframeGet:function(t){if(!this.inIframe){t.indexOf("wauth%3D")>0&&(t=decodeURIComponent(t));var i=new y5Url;i.query(t.replace(/^#/,""));var n=this.splitAuth(i.getParam("wauth")),o=this.get(n.id),s=i.getParam("value");if(o)switch(i.getParam("name")){case"Widget::setTitle":o.setTitle(s);break;case"Widget::setIFrameHeight":o.setIFrameHeight(s);break;case"Widget::setPreferencesFormWidth":o.setPreferencesFormWidth(s);break;case"Widget::setPreferencesFormHeight":o.setPreferencesFormHeight(s);break;case"Widget::setPreferencesFormSize":var r=s.split(",");o.setPreferencesFormSize(r[0],r[1]);break;case"Widget::showPreferences":o.showPreferences();break;case"Widget::hidePreferences":var a,c=decodeURIComponent(t).split("<>");for(s=[],a=1;a<c.length;a++)s[s.length]=c[a];s=s.join("<>");var l={},u=this.getValuesFromUrl(s);for(a=0;a<u.length;a++)l[u[a][0]]=u[a][1];(i.Query.wauth||[])[0]===o.getAuth()&&(""!==i.getParam("value")&&o.setValues(l),setTimeout((function(){o.loadFromSrc()}),200),this.params.notifyChangesHandler(o)),e(window).trigger({type:"widgetSettingsTuned",id:o.id},{state:s?"save":"close"}),o.hidePreferences();break;case"Widget::dropPreferences":o.dropPreferences(),e(window).trigger({type:"widgetSettingsDropped",id:o.id});break;case"Widget::notifyCustomSave":e(window).trigger({type:"widgetSettingsTuned",id:o.id},{state:"save"})}}},xframeSrc:function(t,i,n){var o;if(e.browser&&e.browser.msie){(o=t.cloneNode(!0)).style.position="absolute",o.style.visibility="hidden",o.id="";e(o).bind("load",(function r(){e(o).unbind("load",r),o.style.position="",o.style.visibility="",n&&n()})),o.src=i+"&rnd="+Math.random();try{document.body.appendChild(o)}catch(s){}}else e(t).one("load",(function(){n&&n()})),t.src=i+"&rnd="+Math.random()},addToReloadQueue:function(e,t,i){e.id&&(this.widgetReloadQueue[e.id]={flag:!0,widget:e,callback:t,randomDelay:i})},processReloadQueue:function(){var e,t=function(e,t,i){i=i!==undefined?i:3e4;var n=Math.round(Math.random()*i);setTimeout((function(){e.reload(t),e._isNotReloaded=!0}),n)};for(var i in this.widgetReloadQueue)this.widgetReloadQueue.hasOwnProperty(i)&&(e=this.widgetReloadQueue[i]).flag&&(t(e.widget,e.callback,e.randomDelay),e.flag=!1)},showEditForm:function(t,i,n){var o=this.get(t);if(o.params.prefs_src!==this.undef()&&""!==o.params.prefs_src){var s=o.iframeElement(o.params.prefs_src,[],!0),r=s.attr("src");e(i).empty().append(s),s.attr("src",r+"&rnd="+Math.random()),s.bind("load",n)}else e.get(this.params.formUrl,{widget:o.getWidgetId(),wauth:o.getAuth(),dataType:"json",prefs_get:o.params.prefs_get?JSON.stringify(o.params.prefs_get):""},n)},getFontSize:function(){return this._fontSize||(this._fontSize=e(".widget").css("font-size")),this._fontSize},end:!0},Widget.Framework.init({jsonUrl:"",addUrl:"/adddata/",rawBodyUrl:"/inline/",formUrl:"/form.html",proxyUrl:"/xframeproxy.html",wauth:!1,idTemplate:/WIDGETID/g,idPrefix:"wd-",wrapperPrefix:"wd-",wrapperPostfix:"-",iframeHeight:"auto",iframeWidth:400,layoutFixed:!1,statParams:{pid:132,cid:2947},patternId:!1,yu:!1,is_default:!1,geoid:!1,region:!1,havePrefsFrom:!1,isWidgetNormal:!1,open_settings_on_add:!1,title:"",prefs_get:!1,locale:"ru",domain:"ru",dataLoadingText:" ",showPreferencesHandler:function(){},hidePreferencesHandler:function(){},notifyChangesHandler:function(){},preloader:"<div>#dataLoading#</div>"})}(jQuery),Widget.GetInstance=function(e){return Widget.Framework.get(e)},Widget.GetInstanceByWauth=function(e){return Widget.Framework.getByWauth(e)},Widget.Init=function(e){return Widget.Framework.init(e)},Widget.Bind=function(e,t){return Widget.Framework.bind(e,t)},Widget.BindOnAdd=function(e,t){return Widget.Framework.prebind(e,t)},$(document).ready((function(){Widget.Framework.domLoaded()})),Widget.Framework.focused=!0,$.browser&&$.browser.msie?($(document).bind("focusout",(function(){Widget.Framework.focused=!1})),$(document).bind("focusin",(function(){Widget.Framework.focused=!0}))):($(window).focus((function(){Widget.Framework.focused=!0})),$(window).blur((function(){Widget.Framework.focused=!1})));var i=Widget.Framework.bindIframe();i?window.widget=i:(window.WidgetMessaging=function(e){Widget.Framework.xframeGet(e)},$(window).on("resize",$.debounce((function(){var e=$(".widget").css("font-size");e!==Widget.Framework._fontSize&&(Widget.Framework._fontSize=e,Widget.Framework.all().forEach((function(e){e.adjustFontSize()})))}),200))),"postMessage"in window&&$(window).bind("message",(function(e){Widget.Framework.onWindowMessage(e.originalEvent)}))}},function(e,t){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){"use strict";if(e===undefined||null===e)throw new TypeError("Cannot convert first argument to object");for(var i=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(o!==undefined&&null!==o)for(var s=Object.keys(Object(o)),r=0,a=s.length;r<a;r++){var c=s[r],l=Object.getOwnPropertyDescriptor(o,c);l!==undefined&&l.enumerable&&(i[c]=o[c])}}return i}})},function(e,t,i){(function(e){!function(){if(e.Ya=e.Ya||{},!e.Ya.streamCms){e.Ya.streamCms=new function(){},Ya.streamCms.settings={exp:{}}}}()}).call(this,i(1))},function(e,t){home.yellowskin=function(e,t){var i;return-1===t.indexOf("appsearch_header=1")&&((i=home.parseUrl(t)).query.appsearch_header=1,t=home.makeUrl(i)),home.makeUrl({scheme:"yellowskin",query:home.deepExtend({url:t},e)})}},function(e,t){function i(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(e,t)}(e))){var t=0,i=function(){};return{s:i,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s,r=!0,a=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return r=e.done,e},e:function(e){a=!0,s=e},f:function(){try{r||null==o["return"]||o["return"]()}finally{if(a)throw s}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}BEM.DOM.decl("traffic",{onSetMod:{js:{inited:function(){var e=this.elem("geo-list");e.length&&this._autosizeGeoList(e)}}},_autosizeGeoList:function(e){var t=this,n=function(){var n,o,s=t.elem("geo-list-item").toArray(),r=(null===(n=e.offset())||void 0===n?void 0:n.top)||0,a=i(s);try{for(a.s();!(o=a.n()).done;){var c,l=o.value,u=$(l);((null===(c=u.offset())||void 0===c?void 0:c.top)||0)-r>10&&t.setMod(u,"hidden","yes")}}catch(d){a.e(d)}finally{a.f()}};e.on("scroll",(function(){e.scrollLeft(0).scrollTop(0)})),this.bindToWin("resize",home.throttle((function(){t.delMod(t.elem("geo-list-item"),"hidden"),n()}),100)),n()}})},function(e,t){home.decline=function(e,t){return t&&t.length?0===e&&t[3]?t[3]:t[1]||t[2]?t[2]?((e%=100)>=20&&(e%=10),1===e?t[0]:e>1&&e<5?t[1]:t[2]):e>=0&&e<=1?t[0]:t[1]:t[0]:""}},function(e,t){BEM.DOM.decl({block:"menu",modName:"type",modVal:"radio"},{getVal:function(){var e=this.getItems("checked","yes")[0];return e&&this.elemParams(e).val},setVal:function(e){return this.getItems().forEach((function(t){this.elemParams(t).val===e?this.setMod(t,"checked","yes"):this.delMod(t,"checked")}),this),this._onChange(),this},_onItemClick:function(e,t,i){this.__base.apply(this,arguments),this.hasMod(e,"checked","yes")||(this.delMod(this.elem("item","checked","yes"),"checked"),this.setMod(e,"checked","yes"),this._onChange())}})},function(e,t){BEM.DOM.decl("head-options2",{hidePopup:function(){this._popup&&this._popup.delMod("visible")},hasPopupVisible:function(){return this._popup&&this._popup.hasMod("visible","yes")}},{live:function(){return this.liveInitOnBlockInsideEvent("beforeOpen","dropdown2",(function(e){var t=e.block.getPopup(),i=this;this._popup=t,t.findBlockInside("menu").on("click",(function(e,t){clearTimeout(i._closeTimer),i._closeTimer=setTimeout((function(){i.hidePopup()}),350),"hidden-blocks"===t.item.data("type")&&BEM.blocks["hidden-blocks-popup"].show()}))})),!0}})},function(e,t){BEM.DOM.decl("hidden-blocks-popup",{onSetMod:{js:{inited:function(){var e=this.findBlockOutside("modal");e.on("afterClose",(function(){home.stat.logPath("click","hidden_blocks_popup.cancel")})),this.findBlockInside("cancel","button").on("click",(function(){e.delMod("visible")}),this),this.findBlockInside("submit","button").on("click",(function(){var e=[],t=[];this.elem("item").toArray().forEach((function(i){var n=$(i),o=this.findBlockInside(n,"tumbler").hasMod("checked","yes"),s=n.data("layoutName");(o?t:e).push(s)}),this),home.stat.logPath("click","hidden_blocks_popup.save",{callback:function(){location.href=home.addQueryToUrl(home.getData("hidden-blocks-popup.changeUrl"),{fold:e.join(","),unfold:t.join(",")})}})}),this),BEM.blocks.tumbler.on(this.domElem,"change",(function(e,t){if(!this._updateInternalState){var i=e.target.domElem.closest("[data-layout-name]").data("layoutName");home.stat.logPath("click","hidden_blocks_popup.item."+i+"."+(t.checked?"show":"hide"))}}),this)}}},_updateHiddenState:function(e){home.getData("hidden-blocks-popup.blocks").forEach((function(t){t.layoutName in e||(e[t.layoutName]=t.isHidden)})),this._updateInternalState=!0,this.elem("item").toArray().forEach((function(t){var i=$(t),n=i.data("layoutName");this.findBlockInside(i,"tumbler").toggleMod("checked","yes",!e[n])}),this),this._updateInternalState=!1}},{show:function(){if(!this._popup){var e=$(home.view("modal",{content:home.view("hidden-blocks-popup__content",home.getData("hidden-blocks-popup.blocks"),{}),mods:{autoclosable:"yes",theme:"normal","scrollbar-hider":"yes"}})).appendTo("body");BEM.DOM.init(e),this._popup=e.bem("modal"),this._instance=this._popup.findBlockInside("hidden-blocks-popup")}this._instance._updateHiddenState(this._hiddenMap),this._popup.setMod("visible","yes")},_init:function(){this._hiddenMap={},BEM.channel("media-service").on("collapse",(function(e,t){this._hiddenMap[t.layoutName]=!0}),this)}}),$((function(){BEM.blocks["hidden-blocks-popup"]._init()}))},function(e,t){BEM.DOM.decl("modal",{onSetMod:{js:{inited:function(){this._popup=this.findBlockOn("popup2")}},visible:function(e,t){var i=t?"Open":"Close",n=this.elem("content"),o=window.getComputedStyle?window.getComputedStyle(n[0]):n[0].currentStyle,s=parseFloat(o.animationDuration)>0?"animationend":parseFloat(o.webkitAnimationDuration)>0?"webkitAnimationEnd":"",r=function(){this.trigger("after"+i)};this.trigger("before"+i)._popup.setMod(e,t),s?n.one(s,r.bind(this)):this.afterCurrentEvent(r)}},destruct:function(){this.delMod("visible").__base.apply(this,arguments)},setContent:function(e){return BEM.DOM.update(this.elem("content"),e),this}},{live:!0})},function(e,t){BEM.DOM.decl("modal",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._enforceRepaint=this._enforceRepaint.bind(this)}},visible:{yes:function(){this.__base.apply(this,arguments),window.attachEvent&&this.elem("content")[0].attachEvent("onresize",this._enforceRepaint)},"":function(){this.__base.apply(this,arguments),window.detachEvent&&this.elem("content")[0].detachEvent("onresize",this._enforceRepaint)}}},_enforceRepaint:function(){this.domElem[0].className+=""}})},function(e,t){BEM.DOM.decl("modal",{attachToScope:function(e){return this._popup.attachToScope(e)}})},function(e,t){BEM.DOM.decl("modal",{},{live:function(){var e=this.__base.apply(this,arguments);function t(){this.delMod("visible")}return this.liveBindTo("close","pointerclick",t),this.liveBindKey("close","space enter",t),e}})},function(e,t){BEM.DOM.decl({block:"modal",modName:"autoclosable",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._preventHideByClick=!1}},visible:{yes:function(){this.__base.apply(this,arguments),this.bindTo("content","pointerdown pointerclick",this._setPreventHideByClick).bindTo("pointerclick",this._onPointerClick)._popup.on("beforeClose",this._onPopupClose,this)},"":function(){this.__base.apply(this,arguments),this.unbindFrom("content","pointerdown pointerclick").unbindFrom("pointerclick")._popup.un("beforeClose",this._onPopupClose,this)}}},_setPreventHideByClick:function(e){this._preventHideByClick=!0},_onPointerClick:function(e){this._preventHideByClick||this.delMod("visible"),this._preventHideByClick=!1},_onPopupClose:function(){this.delMod("visible")}})},function(e,t){BEM.DOM.decl({block:"modal",modName:"theme",modVal:"normal"},{onSetMod:{visible:{yes:function(){this.setMod("has-animation","yes").__base.apply(this,arguments)}}}})},function(e,t){BEM.DOM.decl({block:"modal",modName:"scrollbar-hider",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.on({beforeOpen:this._toggleScrollbar.bind(this,!1),afterClose:this._toggleScrollbar.bind(this,!0)})}}},_toggleScrollbar:function(e){var t;t=e?0:this._getCurrentScrollWidth(),BEM.DOM.scope.css("margin-right",t).toggleClass("body_modal_yes",!e)},_getCurrentScrollWidth:function(){var e=document.documentElement;return"number"==typeof window.innerWidth?window.innerWidth-e.clientWidth:e.scrollHeight>e.clientHeight?this._getScrollWidth():0},_getScrollWidth:function(){if(null!==this._scrollWidth)return this._scrollWidth;var e=$("<div>").css({position:"absoulte",left:0,top:0,overflow:"scroll",width:200,height:200}).appendTo("body");return this._scrollWidth=200-e[0].scrollWidth,e.remove(),this._scrollWidth}})},function(e,t){BEM.DOM.decl({block:"tumbler"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._inputValues=this.elemParams(this.elem("input"))._values,this._labelsLength=this.elem("label").length,this._buttonWidth=this.elem("button").width(),this._maxLeft=this.elem("box").width()-this._buttonWidth}},checked:function(e,t){var i=this._inputValues[t?1:0],n=2===this._labelsLength?this.elem("text","side",t?"right":"left")[0].id:this.elem("text").length?this.elem("text")[0].id:"";this.elem("input").attr("aria-labelledby",n).val(i).prop("checked",t),this.elem("button").attr("aria-pressed",Boolean(t)),this.trigger("change",{checked:Boolean(t),value:this.val()})},disabled:function(e,t){this.__base.apply(this,arguments),this.findBlockOn("button","button2").setMod("disabled",t),this.elem("input").prop("disabled",Boolean(t))}},val:function(e){return void 0===e?this.elem("input").val():-1===this._inputValues.indexOf(e)||this.val()===e?this:this._toggle()},_toggle:function(){return this.toggleMod("checked","yes",!this.elem("input").prop("checked")),this},_onPointerpress:function(e){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(e){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onStickerClick:function(){this._toggle(),this.findBlockOn(this.elem("button"),"button2").setMod("focused","yes")},_onLabelClick:function(e){this._shouldChange(e)&&(this._toggle(),this.findBlockOn(this.elem("button"),"button2").setMod("focused","yes"))},_onButtonClick:function(){this._toggle()},_onButtonFocus:function(){this.setMod(this.elem("button"),"focused","yes"),this.setMod("focused","yes")},_onButtonBlur:function(){this.delMod(this.elem("button"),"focused"),this.delMod("focused")},_shouldChange:function(e){var t="left"===this.getMod(e.data.domElem,"side");if(2===this._labelsLength){var i=!t&&this.elem("input").prop("checked");if(t&&!this.elem("input").prop("checked")||i)return!1}return!0}},{live:function(){return this.liveInitOnBlockInsideEvent("focus","button2",(function(){this.hasMod("disabled")||this._onButtonFocus()})).liveInitOnBlockInsideEvent("blur","button2",(function(){this.hasMod("disabled")||this._onButtonBlur()})).liveInitOnBlockInsideEvent("click","button2",(function(e){this.hasMod("disabled")||this._onButtonClick()})).liveBindTo("pointerpress",(function(e){this.hasMod("disabled")||this._onPointerpress(e)})).liveBindTo("sticker","pointerclick",(function(e){this.hasMod("disabled")||this._onStickerClick()})).liveBindTo("label","pointerclick",(function(e){this.hasMod("disabled")||this._onLabelClick(e)})).liveBindTo("button","keydown",(function(e){e.shiftKey||e.ctrlKey||e.altKey||e.metaKey||BEM.blocks.keycodes.is(e.keyCode,"SPACE","LEFT","UP","RIGHT","DOWN")&&e.preventDefault()})).liveBindTo("button","keyup",(function(e){var t=BEM.blocks.keycodes,i=e.keyCode;e.shiftKey||e.ctrlKey||e.altKey||e.metaKey||(t.is(i,"LEFT","UP")?this.delMod("checked"):t.is(i,"RIGHT","DOWN")&&this.setMod("checked","yes"))})),this.__base()}})},function(e,t){BEM.DOM.decl("tumbler",{_onPointerenter:function(e){this.hasMod(this.elem("button"),"hovered")||this.setMod("hovered","yes")},_onPointerleave:function(e){this.delMod("hovered")},_onButtonPointerenter:function(e){this.hasMod("view","classic")&&this.delMod("hovered").setMod(this.elem("button"),"hovered","yes")},_onButtonPointerleave:function(e){this.hasMod("view","classic")&&this.delMod(this.elem("button"),"hovered").setMod("hovered","yes")}},{live:function(){return this.liveBindTo("box","pointerover pointerout",(function(e){this.hasMod("disabled")||this.elem("box")[0].contains(e.relatedTarget)||("pointerover"===e.type?this._onPointerenter(e):this._onPointerleave(e))})).liveBindTo("button","pointerover pointerout",(function(e){this.hasMod("disabled")||this.elem("button")[0].contains(e.relatedTarget)||("pointerover"===e.type?this._onButtonPointerenter(e):this._onButtonPointerleave(e))})),this.__base()}})},function(e,t){BEM.DOM.decl({block:"button2",baseBlock:"control"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments)}},pressed:{yes:function(){if(this.hasMod("disabled"))return!1;this.trigger("press")},"":function(){this.trigger("release")}},checked:{yes:function(){this.trigger("check").domElem.attr("aria-pressed","true")},"":function(){this.trigger("uncheck").domElem.attr("aria-pressed","false")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("pressed")}},focused:{"":function(){this.__base.apply(this,arguments),this.delMod("pressed")}},progress:{yes:function(){this.setMod("disabled","yes")},"":function(){this.delMod("disabled")}}},getText:function(){return this.elem("text").text()},setText:function(e){return this.elem("text").text(e),this},_onClick:function(e){(!this._preventClick||e.detail>0)&&this.trigger("click",this._buildClickEventData(e)),this._preventClick=!1},_processClick:function(e){this.trigger("click",this._buildClickEventData(e))},_onPointerpress:function(e){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onKeydown:function(e){var t=e.keyCode,i=BEM.blocks.keycodes;i.is(t,this.params.pressKeys)&&(this.setMod("pressed","yes"),i.is(t,this.params.prvntKeys)&&e.preventDefault())},_onKeyup:function(e){var t=e.keyCode,i=BEM.blocks.keycodes;i.is(t,this.params.prvntKeys)&&e.preventDefault(),i.is(t,this.params.pressKeys)&&(this.delMod("pressed"),i.is(t,this.params.clickKeys)&&(this._preventClick=!0,this._processClick(e)))},_buildClickEventData:function(e){return{domEvent:e,isModKey:e.ctrlKey||e.altKey||e.metaKey||e.shiftKey}},getDefaultParams:function(){return $.extend(this.__base(),{pressKeys:["SPACE","ENTER"],prvntKeys:[],clickKeys:[]})}},{live:function(){return this.liveBindTo("pointerpress",(function(e){this.hasMod("disabled")||this._onPointerpress(e)})).liveBindTo("pointerclick",(function(e){this.hasMod("disabled")||this._onClick(e)})).liveBindTo("keydown",(function(e){this._onKeydown(e)})).liveBindTo("keyup",(function(e){this._onKeyup(e)})),this.__base()}})},function(e,t){BEM.DOM.decl("button2",{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered")}}},_onPointerenter:function(){this.setMod("hovered","yes")},_onPointerleave:function(){this.delMod("hovered")},_onClick:function(){this.__base.apply(this,arguments),this._isDestructing||this.setMod("focused","yes")}},{live:function(){return 8===BEM.blocks["i-ua"].ie&&this.liveBindTo("dblclick",(function(e){this.hasMod("disabled")||this._onClick(e)})),this.liveBindTo("pointerover pointerout",(function(e){this.hasMod("disabled")||this.domElem[0].contains(e.relatedTarget)||("pointerover"===e.type?this._onPointerenter(e):this._onPointerleave(e))})).liveBindTo("mousedown",(function(e){e.preventDefault()})),this.__base()}})},function(e,t){BEM.DOM.decl("notifier",{onSetMod:{js:{inited:function(){this.win=window,this._popupInited=!1,this.hasMod("has-unread")&&this.setMod("animation-active","yes"),this._fetchCounter()}},"has-unread":{yes:function(){this.setMod("animation-active","yes")},"":function(){this.domElem.attr("aria-label",BEM.I18N("notifier","no-new-notifications"))}},"animation-active":{yes:function(){this._subscribeOnAnimationEnd()}},opened:{yes:function(){this.domElem.attr("aria-expanded",!0)},"":function(){this.domElem.attr("aria-expanded",!1)}}},_subscribeOnAnimationEnd:function(){var e=this.elem("clapper");e.on("animationend",function t(){this.delMod("animation-active"),e.off("animationend",t)}.bind(this))},_initPopup:function(){if(this._popupInited)return!1;this._popup=this.getPopup(),this._popup.on("beforeOpen beforeClose",function(){var e=this._popup.hasMod("visible","yes");this.toggleMod("opened","yes",!e),this._rpcBridge!==undefined&&this._rpcBridge.contrAgent.win!==undefined&&this._rpcBridge.invokeMethod("updatePopupState",!e),e?this._firstOpen=!1:(this.delMod("has-unread"),this._firstOpen="undefined"==typeof this._firstOpen||undefined)}.bind(this)),this._popupInited=!0},_fetchCounter:function(){var e={url:this._getCounterUrl(),dataType:"json",type:"GET",xhrFields:{credentials:"include",withCredentials:!0}};return $.ajax(e).promise().then(this._prepareCounter.bind(this),this.onFetchCounterError.bind(this))},_prepareCounter:function(e){var t={counter:0,services:[],context:{}};e&&(e.unviewed_count&&e.services&&(t.counter=this._convertToUint(e.unviewed_count),t.services=Object.keys(e.services)),e.context&&(t.context=e.context)),this.onFetchCounterSuccess(t)},onFetchCounterSuccess:function(e){e.counter&&this.onUpdateCounter(e.counter,e.services,e.context)},onFetchCounterError:function(){},_convertToUint:function(e){var t=Number(e)||0;return t>=0&&this._isInteger(t)?t:0},_isInteger:function(e){return(0^e)===e},_getHost:function(){return"https://"+(this.params.apiHost&&-1!==this.params.apiHost.indexOf("yandex-team")?"bell.yandex-team":"yandex")+this._getTld()},_getCounterUrl:function(){return this.params.counterHandle||this._getHost()+"/bell/api/v1/get-ticker"},_getIframeUrl:function(){var e,t=[];return e=this.params.iframeUrl?this.params.iframeUrl:this.params.baseUrl.indexOf(".yandex-team.")>=0?"https://gnc.yandex-team.ru/frame":"https://yandex"+this._getTld()+"/gnc/frame",this.hasMod("no-login")&&-1===e.indexOf("no_login")&&t.push("no_login=1"),this.params.utmSourceService&&-1===e.indexOf("utm_source_service")&&t.push("utm_source_service="+this.params.utmSourceService),this.params.env&&t.push("env="+this.params.env),t.length>0?e+(-1===e.lastIndexOf("?")?"?":"&")+t.join("&"):e},_getLoaderUrl:function(){return this.params.loaderUrl||this.params.baseUrl+"/iframe-loader/"+this.params.loaderVersion+"/index.min.js"},_insertLoaderScript:function(e){var t=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],i=document.createElement("script");i.setAttribute("src",this._getLoaderUrl()),t.insertBefore(i,t.lastChild),i.onload=e},_loadIframe:function(){var e={iframeUrl:this._getIframeUrl(this.params.lang),container:this.findElem(this._popup.domElem,"content").get(0)};this._atom=new window.LegoIframeLoader(e),this._rpcBridge=this._atom.getRPCBridge(this),this._atom.on("init",function(e,t){this._onIframeLoad(t)}.bind(this)),this._atom.init(),this._atom.iframe&&(this._atom.iframe.style.transform="")},getPopup:function(){return this._popup||this.findBlockOn("popup","popup2")},init:function(){if(this._rpcBridge)return this;window.LegoIframeLoader?this._loadIframe():this._insertLoaderScript(this._loadIframe.bind(this))},onIconClick:function(e){this._silentLoad=!1,!this._popupInited&&this._initPopup(),this._rpcBridge||this.init(),this._popup.toggleMod("visible","yes")},onDataLoad:function(e){this.setMod(this._popup.domElem,"loaded","yes"),this._hasLoaded=!0,this._popup.hasMod("visible","yes")&&!this._silentLoad&&this._rpcBridge.invokeMethod("resetUnviewed",{})},onUpdateCounter:function(e,t,i){e=!e||e<0?0:e,t=t||[],i=i||{},this._counter=e;var n=!this._firstOpen&&Boolean(e);if(this.toggleMod("has-unread","yes",n),e&&this._firstOpen===undefined){var o="-counter="+e+",-is_login="+!this.hasMod("no-login");t.length&&(o+=",-services="+t.join(".")),i.exp_boxes&&(o+=",-exp_boxes="+encodeURIComponent(i.exp_boxes)),this.count("3027.1228.487",o,null,{reqid:BEM.blocks["i-global"]&&BEM.blocks["i-global"].param("reqid")||""})}this._firstOpen&&(this._firstOpen=!1),this.elem("ticker").text(Math.min(99,e)),n&&this.domElem.attr("aria-label",BEM.I18N("notifier","new-notifications",{count:e}))},updateCounterWithParams:function(e,t){this._rpcBridge!==undefined&&this._rpcBridge.contrAgent.win!==undefined&&this._rpcBridge.invokeMethod("updateCounterWithParams",{counterParams:e,referrer:t})},_onIframeLoad:function(e){this._rpcBridge.contrAgent.win=e.iframeWin,this._rpcBridge.invokeMethod("onIframeLoad",this.getIframeParams())},getIframeParams:function(){return{source:this.params.source,serviceDatabaseId:this.params.serviceDatabaseId,services:this.params.services,domain:this.params.domain||this.params.tld,counterParams:this.params.counterParams,referrer:this.params.referrer,apiHost:this.params.apiHost,apiHost2:this.params.apiHost2,silent:this._silentLoad}},onInit:function(e){},getDefaultParams:function(){return{baseUrl:"https://gcn.yandex-team.ru",loaderVersion:"stable",iframeVersion:"stable",lang:"ru",referrer:location.href}},count:function(e,t,i,n){t=t||"",i=i||"";n=n||{};var o=["reqid","yuid","serpid","service","ui"].reduce((function(e,t){return e+(n[t]?"/"+t+"="+n[t]:"")}),""),s="//yandex"+this._getTld()+"/clck/click/pid=900/cid="+i+"/dtype=stred"+(e?"/path="+e:"")+(t?"/vars="+t:"")+o+"/cts="+(new Date).getTime()+"/*"+document.location.href;document.createElement("IMG").src=s},_getTld:function(){var e=document.location.host.match(/^.*(\..+)$/);return e?e[1]:".ru"},destruct:$.noop},{live:function(){this.liveBindTo("click",(function(e){this.onIconClick(e)}))}})},function(e,t){BEM.DOM.decl("notifier",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments)}},opened:{yes:function(){this.__base.apply(this),this.domElem.attr("aria-expanded","true"),home.stat.logPath("click",this.params.from+".notifier.popup.show")},"":function(){this.__base.apply(this),this.domElem.attr("aria-expanded","false"),home.stat.logPath("resize",this.params.from+".notifier.popup.close")}}},_fetchCounter:function(){if(this.__self._fetchPromise)return this.__self._fetchPromise.then(this.onUpdateCounter.bind(this));var e=this.__base.apply(this,arguments);return this.__self._fetchPromise=e,e.fail((function(e){var t=e&&e.responseJSON&&e.responseJSON.error;"DataNotFoundError"!==t&&home.error.logError({block:"notifier",method:"_fetchCounter",message:"Cannot load counter: "+(t||e&&e.status||"unknown"),sourceType:"network"})}))},onUpdateCounter:function(e){return void 0!==e&&(this.__base.apply(this,arguments),e?this.domElem.attr("aria-label",home.l10n("notifications.unread_full").replace("%count",e).replace("%word",home.decline(e,home.l10n("notifications.unread_word")))):this.domElem.attr("aria-label",home.l10n("notifications.no_unread"))),e},onFetchCounterSuccess:function(e){this.__base.apply(this,arguments),0===e.counter&&this.domElem.attr("aria-label",home.l10n("notifications.no_unread"))}},{hide:function(){$(".notifier").each((function(){var e=$(this);if(e.hasClass("notifier_js_inited")){var t=e.bem("notifier");t&&t.getPopup().delMod("visible")}}))}})},function(e,t){BEM.DOM.decl("notifier",{},{live:function(){this.__base.apply(this),this.liveBindKey("enter space",(function(e){e.preventDefault(),this.onIconClick(e)}))}})},function(e,t){BEM.DOM.decl("notifier",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments)}}},_initPopup:function(){this.__base.apply(this,arguments),this._popup.attachToScope(),this._popup.setAnchor(this.elem("box"))}})},function(e,t){BEM.DOM.decl({block:"notifier",modName:"no-login",modVal:"yes"},{_fetchCounter:function(){this.params.iframeUrl&&this.params.iframeUrl.indexOf("no_login=1")>=0||this.__base.apply(this,arguments)},_getFakeNotificationIds:function(){return this.params.fakeIds||["0","1","2"]},_getYndxNotificationIds:function(e){try{var t=window.localStorage.getItem("yndx-notification"+(e?":"+e:""));return t?JSON.parse(t):[]}catch(i){return[]}}})},function(e,t){BEM.DOM.declMix("mix-tabber-slide",{_changeTab:function(){var e,t=this._$panel.outerHeight();this.__base.apply(this,arguments),e=this._$panel.outerHeight(),this._animateHeight(t,e)},_onPanelReplace:function(){var e,t=this._$panel.outerHeight();this.__base.apply(this,arguments),e=this._$panel.outerHeight(),this._animateHeight(t,e)},_animateHeight:function(e,t){var i=this.elem("panels");i.addClass("mix-tabber-slide__panels").height(e),setTimeout((function(){i.height(t).onceAnimationEnd("animation",350,(function(){i.height(""),BEM.blocks["i-reposition-event"].trigger()}))}),50)}})},function(e,t){BEM.DOM.decl({block:"covid",baseMix:["mix-tabber","mix-tabber-labels","mix-tabber-labels-keyboard","mix-tabber-slide","mix-tabber-slide2","mix-tabber-wheel"]},{},{})},function(e,t){BEM.DOM.decl("covid-athome",{_onClose:function(e){this._yabsSend(e),this.destruct()},_yabsSend:function(e){var t=e.data.domElem,i=this.params.closeUrl,n=t.attr("href"),o="_blank"===t.attr("target");i&&BEM.blocks["i-yabs-sender"].sendClose(e,i,o?undefined:n)}},{live:function(){this.liveBindTo("close","click",(function(e){this._onClose(e)})),this.liveBindKey("close","space enter",(function(e){this._onClose(e)})),this.liveBindTo("more","click",(function(e){this._yabsSend(e)}))}})},function(e,t){BEM.DOM.decl({block:"covid-speed",baseMix:["mix-tabber","mix-tabber-labels","mix-tabber-labels-keyboard","mix-tabber-slide2","mix-tabber-wheel"]},{onSetMod:{js:{inited:function(){for(var e in this.__base.apply(this,arguments),this._dates={},this._activePopupAnchor=null,this._activePopup=null,this.params.tabs)if(this.params.tabs.hasOwnProperty(e)){this._dates[e]=this._dates[e]||{};for(var t=0;t<this.params.tabs[e].dates.length;t++){var i=this.params.tabs[e].dates[t];this._dates[e][i.date]=i}}this._createAnchors(),document.addEventListener("visibilitychange",function(){document.hidden&&this._hideActivePopup()}.bind(this))}}},_createAnchors:function(){this.elem("histogram-wrapper").each((function(e,t){var i=0;$(t).find("[data-date]").each((function(){var e=document.createElement("div"),n=i,o=+$(this).attr("width")+(+$(this).attr("x")-n);i=n+o,e.setAttribute("data-date",$(this).attr("data-date")),e.setAttribute("style",home.makeStyle({position:"absolute",top:0,left:n+"px",width:o+"px",height:"100%"})),$(t).append(e)}))}))},_onHover:function(e){if(!this._activePopupAnchor||this._activePopupAnchor!==e.target){this._hideActivePopup();var t=e.target.classList.contains("covid-speed__badge")?"badge":"column",i=e.target&&$(e.target).data("date"),n=i&&this._dates[this._selectedKey]&&this._dates[this._selectedKey][i];n&&(n.popup||(n.popup=this._createPopup(e.target,{from:t,dates:this.params.tabs[this._selectedKey]&&this.params.tabs[this._selectedKey].dates,cases:n.cases,new_cases:n.new_cases,cured:n.cured,deaths:n.deaths,date:n.date})),this._activePopupAnchor=e.target,this._activeColumn=this._$panel.find('rect[data-date="'+i+'"]')[0],this._activePopup=n.popup,n.popup.setMod("visible","yes"),this._activeColumn&&(this._activeColumn.setAttribute("class","covid-speed__histogram-column_hover"),home.stat.logPath("show","covid_speed.popup",{customParams:{targetColumnDate:i}})))}},_createPopup:function(e,t){var i="badge"===t.from;t.disableColumnBorderRadius=$(".i-ua_browser_msie,.i-ua_browser_edge").length;var n=$(home.view("popup2",{mods:{view:"default",theme:"normal",target:"anchor","alt-shadow":"yes"},directions:i?["bottom-center"]:["bottom-left"],mix:"covid-speed__popup-wrapper covid-speed__popup-wrapper_from_"+t.from,hasTail:!0,mainOffset:12,tailOffset:i?0:15,secondaryOffset:i?0:-15,content:home.view("covid-speed__popup",t)})).appendTo("body");BEM.DOM.init(n);var o=this.findBlockInside(n,"popup2");return o.setAnchor($(e)),o},_hideActivePopup:function(){this._activePopupAnchor&&(this._activePopup.delMod("visible"),this._activePopupAnchor=null,this._activeColumn&&this._activeColumn.setAttribute("class",""))}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("mouseover",(function(e){this._onHover(e)})),this.liveBindTo("mouseout",(function(){this._hideActivePopup()}))}})},function(e,t){BEM.DOM.decl("services-new",{onSetMod:{js:function(){this._bindSearchScenario(),this._initPromo()}},_initPromo:function(){var e=this.elem("promo"),t=this.elem("promo-bubble"),i=this.elem("onboarding").length;e.length&&e.data("showUrl")&&((new Image).src=e.data("showUrl")),t.length&&"visible"===t.css("visibility")&&(home.stat.logPath("show",this.elem("promo-bubble").data("counter")),setTimeout(this._hidePromoBubble.bind(this),1e3*(this.params.sidePopupHideTimeout||10)),i&&home.localStorage.setItem("home:doNotShowServicesNewOnboarding","1"),this.bindToDoc("pointerclick",function(e){$(e.target).closest(t).length||this._hidePromoBubble()}.bind(this)))},_bindSearchScenario:function(){var e=this;this._searchInput=this.findBlockOutside($(".search2 .input"),"input"),this._searchItems=this.elem("item","search","yes"),this._searchInput&&this._searchInput.on("change",$.debounce((function(){e._updateUrls(this.val())}),300))},_updateUrls:function(e){var t=encodeURIComponent(e);this._urls||(this._urls={},(home.getData("services-new.data.fullList")||[]).forEach(function(e){this._urls[e.service]={url:e.url,search:e.search}}.bind(this))),this._searchItems.each(function(e,i){$(i).attr("href",home.stringf(this._urls[$(i).data("id")][t?"search":"url"].replace(/%25/g,"%"),t))}.bind(this))},_onPromoClick:function(e){var t=e.data("clickUrl");t&&((new Image).src=t)},_hidePromoBubble:function(){this.delMod(this.elem("promo-bubble"),"visible")}},{live:function(){return this.__base.apply(this,arguments),this.liveBindTo("promo","pointerclick",(function(e){this._onPromoClick(e.data.domElem)})),this.liveBindKey("promo","enter",(function(e){this._onPromoClick(e.data.domElem)})),!1}})},function(e,t){BEM.DOM.decl({block:"services-new",modName:"more",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._isPopupOpened=!1,this.bindToWin("resize",this._onResize),MBEM.channel("mini-suggest").on("show",this._togglePopup.bind(this,!1)),this._recalcItems()}}},_onResize:function(){this._popup&&(this._updatePopupContentWidth(),this._updatePopupOffset()),this._recalcItems()},_togglePopup:function(e){if("boolean"!=typeof e&&(e=!this._isPopupOpened),!this._popup){if(!e)return;this._createPopup()}!1===e&&(this._popup._preventHideByClick=!1),this._popup.toggleMod("visible","yes",e)},_createPopup:function(){var e=$(home.view("popup2",{mods:{view:"default",target:"anchor",autoclosable:"yes"},directions:["bottom-left"],mix:"services-new__more-popup",mainOffset:0,secondaryOffset:0,content:home.view("services-new__more-popup",home.getData("services-new.data"))})).appendTo("body");BEM.DOM.init(e),this._popup=this.findBlockInside(e,"popup2"),this._popup.setAnchor(this.elem("more-popup-anchor")),this._popup.onFirst("beforeOpen",(function(){home.stat.logPath("show","services_new.popup.show"),home.stat.logDOMShow(e,{visibilityCheck:!1})})),this._popup.onFirst("beforeClose",(function(){home.stat.logPath("click","services_new.popup.close")})),this.bindTo(this.findElem(this._popup.domElem,"more-popup-close"),"click",this._togglePopup),this.bindKeyTo(this.findElem(this._popup.domElem,"more-popup-close"),"space enter",this._togglePopup),this._popup.on("beforeOpen",this._beforeOpenPopup.bind(this)),this._popup.on("beforeClose",this._beforeClosePopup.bind(this)),this._searchInput&&(this._searchItems=this._searchItems.add(this.findElem(this._popup.domElem,"item","search","yes")),this._updateUrls(this._searchInput.val()))},_updatePopupContentWidth:function(){this._popup.domElem.find(".services-new__more-popup-content").css("width",this.elem("content").width())},_updatePopupOffset:function(){var e=this.domElem.offset(),t=this.domElem.find(".services-new__item").offset(),i=$(".home-arrow__search"),n=parseInt(this._popup.domElem.css("padding-top"),10),o=parseInt(this._popup.domElem.css("padding-left"),10),s=t.left-e.left-o,r=t.top-e.top-n,a=i.length&&"before-arrow"!==this.getMod("position")?i.offset().top+i.height()-e.top+8:-Infinity,c=Math.max(r,a);this._popup.setParams({mainOffset:c,secondaryOffset:Math.max(10-e.left,s)})},_recalcItems:function(){var e=this.elem("item"),t=this.elem("list").offset().top;e.toArray().forEach(function(e){var i=$(e),n=i.offset().top<t+60,o=i.data("id");n?(i.removeAttr("tabindex").removeAttr("aria-hidden"),home.stat.logDOMShow(i,{visibilityCheck:!1})):i.attr("tabindex","-1").attr("aria-hidden","true"),this._popup&&this._popup.domElem.find('[data-id="'+o+'"]').css("display",n?"none":"")}.bind(this))},_beforeOpenPopup:function(){this._updatePopupContentWidth(),this._updatePopupOffset(),this._recalcItems(),this.elem("more").attr("aria-expanded","true"),this.channel("banner").trigger("overlapping",!0),this._isPopupOpened=!0},_beforeClosePopup:function(){this.elem("more").attr("aria-expanded","false"),this.channel("banner").trigger("overlapping",!1),this._isPopupOpened=!1}},{live:function(){return this.__base.apply(this,arguments),this.liveBindTo("more","pointerclick",(function(e){this._togglePopup(),e.preventDefault()})),this.liveBindKey("more","enter",(function(e){this._togglePopup(),e.preventDefault()})),!1}})},function(e,t){BEM.DOM.decl("desk-notif",{onSetMod:{js:function(){!!$(".navi").length?(this._bindEvents(),BEM.channel("navi").on("show-item",function(e,t){this.findBlockInside(t.item,"desk-notif-card").onShow()}.bind(this))):(this._initStatInfo(),this._sendStat())}},_bindEvents:function(){BEM.channel("navi").on("ready",function(){this._initStatInfo(),this._sendStat()}.bind(this))},_initStatInfo:function(){this._cardsStatInfo=this.params.serverCards.map(this._getStatObject)},_getStatObject:function(e){return{name:e,height:$(".desk-notif-card_"+e+"_yes").outerHeight(!0)}},_toStatFormat:function(e){return e.replace(/-/g,"_")},_sendStat:function(){var e=this._cardsStatInfo.map((function(e){return this._toStatFormat(e.name)+"="+e.height}),this).join(",");home.stat.logPath("notifications_height",e)}})},function(e,t){home.makeStyle=function(e){if(!e)return"";var t="";for(var i in e)if(e.hasOwnProperty(i)){if(!e[i]&&0!==e[i])continue;t&&(t+=";"),t+=i+":"+String(e[i])}return t}},function(e,t){BEM.DOM.decl("desk-notif-card",{onSetMod:{js:function(){this.__base.apply(this,arguments),this._initDropDownMenu(),BEM.channel("desk-notif-card").on("ban",this._onBanMessage,this),this.elem("toggler").length&&(this.bindTo("toggler","pointerclick",this._togglerOnClick),this.bindKeyTo("toggler","space enter",(function(e){this._togglerOnClick(),e.preventDefault()}))),this.bindTo("mouseenter mouseleave",(function(e){this.toggleMod("hovered","yes","mouseenter"===e.type)}));var e=this.params.closeUrl;e&&this.bindTo("link","click",(function(t){var i=$(t.target),n="_blank"===i.attr("target")?undefined:i.attr("href");BEM.blocks["i-yabs-sender"].sendClose(t,e,n)})),this._isVisible()&&this.onShow();var t=this.findBlockOutside("rotate-items");t&&t.on("show-item",(function(e,t){this.domElem.closest(t.item).length&&this.onShow()}),this)},"inner-menu":function(){this.afterCurrentEvent(this._calcShift)},hovered:function(){this.afterCurrentEvent(this._calcShift)},focused:function(){this.afterCurrentEvent(this._calcShift)}},onShow:function(){if(!this.sentShowUrl){var e=this.params.linkNext;e&&BEM.blocks["i-yabs-sender"].sendShow(e),this.sentShowUrl=!0}},_togglerOnClick:function(){var e=this.hasMod("minified","yes");this.delMod("hovered"),this.toggleMod("minified","yes"),this._saveState(e?"expanded":"minified"),home.stat.logDOMShow(this.domElem),home.stat.logPath("click","notifications.mail.login.resize."+(e?"big":"small")),this.channel("desk-notif-card").trigger("toggled")},_initDropDownMenu:function(){this.bindTo("popup-action","pointerclick",(function(e){this.dropdown.delMod("opened"),this._onActionClick(e)})),this.bindKeyTo("popup-action","space enter",(function(e){"a"!==e.data.domElem.prop("tagName").toLowerCase()&&this.dropdown.delMod("opened"),this._onActionClick(e)})),BEM.blocks.dropdown2.on(this.domElem,"beforeOpen",(function(){this.dropdown=this.findBlockInside("dropdown2"),this.setMod("inner-menu","toggled"),home.stat.logDOMShow(this.elem("options"),{visibilityCheck:!1})}),this),BEM.blocks.dropdown2.on(this.domElem,"beforeClose",(function(){this.delMod("inner-menu")}),this)},_onBanMessage:function(e,t){t.name===this.params.name&&t.type===this.params.type&&this._onAction("ban")},_toggleExpanded:function(e){var t=this.hasMod("expanded"),i=t?"expand":"collapse",n=home.l10n("desktopNotifications.menu."+i),o=this.elem("action","type","expand");e=e||{},o.attr("title",n),o.attr("aria-label",n),this.toggleMod("expanded","yes"),this.toggleMod("minified","yes"),e.save&&this._saveState(t?"minified":"expanded"),this.domElem.removeAttr("data-statlog")},_sendAction:function(e){var t=this.params&&this.params.actions,i=t&&t[e];i&&i.href&&((new Image).src=i.href)},_hideCard:function(){BEM.channel("navi").trigger("closed",{item:this.domElem,delay:400}),this.setMod("state","hidden")},_isVisible:function(){var e=this.findBlockOutside("navi__item");if(e){if(!e.hasMod("hide","yes")&&!e.hasMod("disabled","yes"))return!0}else if(!this.domElem.closest(".rotate-items__item_hidden_focusable").length)return!0;return!1},_showClientCard:function(e){this.hasError||!this.hasMod("state","hidden")&&!this.hasMod("transparent","yes")?this._isVisible()&&home.stat.logDOMShow(this.domElem):(this.delMod("loading"),this.domElem.appendTo(this.domElem.parent()),this.delMod("state"),this.delMod(e?"position":"transparent"),setTimeout(function(){this.delMod(e?"transparent":"position"),home.stat.logDOMShow(this.domElem)}.bind(this),0))},_saveState:function(e){var t=this.params.actions&&this.params.actions[e]&&this.params.actions[e].href;t||(t=this.params.save&&this.params.save[e]),t&&setTimeout((function(){try{var e=$(".desk-notif-card__frame");e.length||(e=$('<iframe class="desk-notif-card__frame" name="desk-notif-card__frame" style="display:none"></iframe>'),$("body").append(e)),e.attr("src",t)}catch(i){}}),300)},_onAction:function(e){switch(e){case"toggle":break;case"close":case"ban":this._hideCard();break;case"expand":return void this._toggleExpanded({save:!0});case"settings":return}this._sendAction(e)},_onActionClick:function(e){var t=$(e.data.domElem),i=this.getMod(t,"type");"setup"!==i&&"settings"!==i&&e.preventDefault(),"ban"===i?BEM.channel("desk-notif-card").trigger("ban",{name:this.params.name,type:this.params.type}):i&&this._onAction(i,e)},_calcShift:function(){var e=this._isShifted();this.toggleMod("shifted","yes",e)},_isShifted:function(){return(this.hasMod("inner-menu")||this.hasMod("hovered")||this.hasMod("focused"))&&this.hasMod("actions","yes")}},{live:function(){return this.liveBindTo("action","pointerclick",(function(e){this._onActionClick(e)})),this.liveBindKey("action","space enter",(function(e){this._onActionClick(e)})),this.liveBindTo("focusin focusout",(function(e){var t=$("html").hasClass("utilityfocus");this.toggleMod("focused","yes","focusin"===e.type&&t)})),!1}})},function(e,t){BEM.DOM.decl({block:"desk-notif-card",modName:"switchable",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this._bindEvents()}},_bindEvents:function(){this.bindKeyTo("switch","space enter",this._switchDirection),this.bindTo("switch","pointerclick",this._switchDirection),this.bindTo("switch","mouseover mouseout focus blur",(function(e){this.toggleMod("switch-hovered","yes","mouseover"===e.type||"focus"===e.type)}))},_switchDirection:function(){}})},function(e,t){BEM.DOM.decl({block:"desk-notif-card",modName:"disaster",modVal:["yes","fatal"]},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.popup=this.findBlockOn("disaster-popup","popup"),this.popup&&(this.bindTo("link","click",this._showPopup),this.bindKeyTo("link","space enter",this._showPopup),this.params.openPopup&&this.popup.show())}},_showPopup:function(e){this.popup.show(),home.stat.logDOMShow(this.popup.domElem),e.preventDefault()}})},function(e,t){BEM.DOM.decl({block:"popup",modName:"wrapped",modVal:"yes"},{onSetMod:{visibility:{visible:function(){this.__base(),this._wrap()},"":function(){this.__base(),this._unwrap()}},wrapped:{"":function(){this._unwrap()}}},_wrap:function(){this._wrapper||(this._wrapper=this.elem("wrapper").detach()),this._wrapper&&this.domElem.wrap(this._wrapper)},_unwrap:function(){this._wrapper&&this.domElem.unwrap()},_captureZIndex:function(){var e=this._zIndex,t=this.__base.apply(this,arguments);return this._zIndex!==e&&this.elem("wrapper").css("z-index",this._zIndex),t},destruct:function(){this._unwrap(),this.__base()}})},function(e,t){var i;i={},BEM.DOM.decl({block:"popup",modName:"body-scroll",modVal:"no"},{onSetMod:{visibility:function(){return this.afterCurrentEvent((function(){this.domElem&&this.hasMod("visibility","visible")?i[this.params.uniqId]=!0:delete i[this.params.uniqId],this._manageScopeOverflow()})),this.__base()}},destruct:function(){var e=this.params.uniqId;i[e]&&(delete i[e],this._manageScopeOverflow()),this.__base.apply(this,arguments)},_enableScroll:function(){return this._scope.css({overflow:""}),this},_disableScroll:function(){return this._scope.css({overflow:"hidden"}),this},_manageScopeOverflow:function(){var e=Object.keys(i).length;0===e?this._enableScroll():1===e&&this._disableScroll()}})},function(e,t){BEM.DOM.decl({block:"popup",modName:"behaviour",modVal:"scrollable"},{getDefaultParams:function(){var e=this.__base();return e.top=20,e}})},function(e,t){BEM.DOM.decl({block:"popup",modName:"position",modVal:"fixed"},{addChild:function(e){this.__base.apply(this,arguments),e.setMod("watch-scroll","no")},_onFirstFocusableKeyDown:function(e){e.ctrlKey||e.altKey||e.metaKey||e.shiftKey&&e.which===BEM.blocks.keycodes.TAB&&(e.preventDefault(),this._lastFocusable.focus())},_onLastFocusableKeyDown:function(e){e.shiftKey||e.ctrlKey||e.altKey||e.metaKey||e.which===BEM.blocks.keycodes.TAB&&(e.preventDefault(),this._firstFocusable.focus())}})},function(e,t){BEM.DOM.decl({block:"popup",modName:"position",modVal:"fixed"},{getOwnerPos:function(){var e=this.__base.apply(this,arguments);if(this._owner){var t=this._viewport;e.top-=t.scrollTop(),e.left-=t.scrollLeft()}return e}})},function(e,t){BEM.DOM.decl({block:"desk-notif-card",modName:"rates",modVal:"yes"},{onSetMod:{js:{inited:function(){this.initListeners()}}},destruct:function(){var e=home.getData("inline-stocks.xivas")||[],t=this._onXivaEvent,i=this._onStocksChangedEvent;BEM.channel("stocks").un("changed",i),e.forEach((function(e){BEM.blocks["i-xiva"].stopListen(e.ch,t)}))},initListeners:function(){var e=home.getData("inline-stocks.xivas")||[],t=this,i=this._onXivaEvent=function(e){t.onXivaEvent(e.dt)},n=this._onStocksChangedEvent=function(e,i){t.onXivaEvent(i)};e.forEach((function(e){BEM.blocks["i-xiva"].listen(e.ch,e.ts,i)})),BEM.channel("stocks").on("changed",n)},onXivaEvent:function(e){if(e.id===this.params.rateId){e=e.data&&e.data[0]||e.data;try{var t=this.params.precision,i=e["value"+t]||e.value,n=e["delta"+t]||e.delta,o=Number((n||"").replace("","-").replace(/[+%]/g,"").replace(",","."));this.elem("rate-info-value").text(i),this.elem("rate-info-delta").text(n);var s=o>0?"up":"down";if(this.setMod(this.elem("rate-info"),"delta",s),e.history){var r=home.view("desk-notif__rate-chart",{values:e.history.reverse()});this.findElem("rate-image").replaceWith(r)}}catch(a){home.error.logError({block:"desk-notif-card_rates",method:"onXivaEvent",meta:{id:this.params.rateId}},a)}}}})},function(e,t){BEM.DOM.decl({block:"desk-notif-card",modName:"route",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.routes={},this.placeholder={gohome:this.elem("route-gohome"),gowork:this.elem("route-gowork")},this.setMod("loading","yes"),this._changeDirectionTo(this._getDirection()),this.hasMod("confirm-promo")&&(this.bindTo(this.elem("points-confirm","action","open-popup"),"click",this._onPointsConfirm),this.bindKeyTo(this.elem("points-confirm","action","open-popup"),"space enter",this._onPointsConfirm),this.bindTo(this.elem("points-confirm","action","reject"),"click",this._onPointsReject),this.bindKeyTo(this.elem("points-confirm","action","reject"),"space enter",this._onPointsReject),this.params["user-points"].promoMode||this._saveState("full"))},direction:function(e,t,i){this.findElem(this.findElem("route-"+t),"link").attr("tabindex","0"),i&&this.findElem(this.findElem("route-"+i),"link").attr("tabindex","-1")},hovered:{yes:function(){this.hasMod("confirm-promo")&&this._loadUserPointsBundle({preload:!0})}}},_changeDirectionTo:function(e){var t=this;return this.direction=e,this.setMod("direction",this.direction),this.from="gohome"===e?"gowork":"gohome",this._getRouterData().then(this._renderRoute.bind(this)).then(this._showRoute.bind(this)).then(this._showClientCard.bind(this,this.isShowWithoutMotion)).then((function(){BEM.channel("navi").trigger("loaded",{name:"route",item:t.domElem})})).fail(this._errorHandler.bind(this))},_errorHandler:function(e){this.hasError=!0,BEM.channel("navi").trigger("failed",{name:"route",item:this.domElem}),this.setMod("loading","no");var t=this.from;this.from=this.direction,this.direction=t,home.stat.logPath("tech","notifications.route.error"+e),this._hideCard()},_switchDirection:function(){return this._changeDirectionTo(this.from).then(this._saveDirection.bind(this)).then((function(){BEM.channel("navi").trigger("height-change",{delay:150})})),!1},_saveLastDirection:function(e){home.localStorage&&!home.localStorage.disabledLS&&home.localStorage.setItem("traffic."+this.params.id+".lastDirection",e)},_saveDirection:function(){var e;home.localStorage&&!home.localStorage.disabledLS&&(e="gowork"===this._getAutoDirectionTime()?this.__self._getWorkEnd():this.__self._getHomeEnd(),home.localStorage.setItem("traffic."+this.params.id,JSON.stringify({direction:this.direction,validUntil:e})))},_showRoute:function(){this.elem("route-placeholder").height(this.placeholder[this.direction].height()),setTimeout(function(){this.setMod("loading","no")}.bind(this),50)},_renderRoute:function(){var e,t=this.direction,i=this.placeholder[t],n=this.routes[t],o="";n.jamsNumber>6?e="red":n.jamsNumber>3?e="yellow":n.jamsNumber>=0?e="green":n.isBlocked&&(e="blocked"),e&&(o="desk-notif-card__icon_traffic_"+e);var s=n.title+" "+n.timeText,r=n.otherWayShow&&n.inBypassText.replace("%s",n.otherWayTimeBenefitText);i.html(home.view("desk-notif-card__inner",{title:home.view("home-link",{href:n.href,mix:" desk-notif-card__link",attrs:{"data-statlog":"notifications.route."+t+".card",tabindex:-1},mods:{black:"yes",pseudo:"yes"},content:s},{}),titleDesc:{mix:"desk-notif-card__style_text"},details:n.otherWayShow?home.view("home-link",{href:n.aroundHref,content:r,mix:" desk-notif-card__details-link",attrs:{"aria-label":r,"data-statlog":"notifications.route."+t+".bypass"},mods:{pseudo:"yes"}},{}):"",iconClass:o}))},_getDirection:function(){var e,t="traffic."+this.params.id;if(home.localStorage&&!home.localStorage.disabledLS){e=home.localStorage.getItem(t+".lastDirection");var i=home.localStorage.getItem(t);if(i){var n=JSON.parse(i);if(home.now().getTime()<n.validUntil)return this.isShowWithoutMotion=!0,n.direction}}var o=this._getAutoDirection();return e===o?this.isShowWithoutMotion=!0:this._saveLastDirection(o),o},_getRouterData:function(){return this.__self._getRouterDataOrCachedRawData(this.params.apiUrls[this.direction]).then(function(e){var t,i;e.isBlocked?this.routes[this.direction]={title:this.params.pointTitles[this.direction],timeText:e.description,href:e.direct&&e.direct.mapUrl,isBlocked:!0}:(e.direct.isBlocked?t=e.bypass:(t=e.direct,i=e.bypass),this.routes[this.direction]={title:this.params.pointTitles[this.direction],timeText:t.timeText,inBypassText:i&&i.label,otherWayTimeBenefitText:i&&i.timeTextDelta,jamsNumber:e.jamsRate,href:t.mapUrl,aroundHref:i&&i.mapUrl,otherWayShow:!!i})}.bind(this))},_getAutoDirection:function(){return this.params.direction?this.params.direction:this._getAutoDirectionTime()},_getAutoDirectionTime:function(){if(this.params.directionTime)return this.params.directionTime;var e=home.now().getHours();return e<15&&e>=3?"gowork":"gohome"},_loadUserPointsBundle:function(e){return e=e||{},this._userPointsBundle||(this._userPointsBundle=home.bundles.load("user-points"),this._userPointsBundle["catch"](function(){this._userPointsBundle=null,home.error.logError({block:this.__self.getName(),method:"_loadUserPointsBundle",message:"Failed to load bundle"}),e.preload||(this.setMod(this.elem("points-confirm-wrapper"),"load-failed","yes"),setTimeout(function(){this.delMod(this.elem("points-confirm-wrapper"),"load-failed")}.bind(this),300))}.bind(this))),this._userPointsBundle},_onPointsConfirm:function(){return this._loadUserPointsBundle().then(function(){this._switchPromoToMinMode();var e=BEM.blocks["user-points"];e.on("hide",this._onUserPointsClose,this),e.on("points",this._onUserPointsUpdate,this),e.open(this.params["user-points"])}.bind(this)),!1},_onPointsReject:function(){return this._hideCard(),this._saveState(""),this._sendAction("ban"),!1},_switchPromoToMinMode:function(){this.delMod(this.findElem("points-screen","screen","big"),"visibility"),this.setMod(this.findElem("points-screen","screen","small"),"visibility","visible"),this._saveState("min"),home.stat.logDOMShow(this.domElem)},_onUserPointsClose:function(){BEM.blocks["user-points"].un("hide",this._onUserPointsClose,this),BEM.blocks["user-points"].un("points",this._onUserPointsUpdate,this)},_onUserPointsUpdate:function(e,t){var i=BEM.blocks["i-global"],n={GeohelperHost:i.param("geohelperHost"),MordaZone:i.param("mordaZone"),Locale:i.param("locale")};this.params.apiUrls={gohome:home.view("route__api-url",{start:t.work,finish:t.home,from:"notif"},n),gowork:home.view("route__api-url",{start:t.home,finish:t.work,from:"notif"},n)},this.delMod("confirm-promo"),this.setMod("updating","yes"),this._changeDirectionTo(this._getDirection()).then(function(){this.delMod("updating")}.bind(this)),this._saveState("")},_saveState:function(e){var t=this.params["user-points"];t.promoMode!==e&&""!==t.promoMode&&(t.csl&&((new Image).src=t.csl+"&empty=1&exdp="+e),t.promoMode=e)}},{_getWorkEnd:function(){var e=home.now();return new Date(e.getFullYear(),e.getMonth(),e.getDate(),15).getTime()},_getHomeEnd:function(){var e=home.now();return e.getHours()<3?new Date(e.getFullYear(),e.getMonth(),e.getDate(),3).getTime():new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,3).getTime()},_getRouterDataOrCachedRawData:function(e){var t=this,i=t.cache[e];if(i&&i.timestamp>home.now().getTime())return $.when(JSON.parse(i.data));return $.ajax({method:"get",url:e,cache:!1,timeout:1e4}).then((function(i){if(!i||!i.direct)return $.Deferred().reject("parseData").promise();if(!i.direct.time||i.bypass&&!i.bypass.time)return $.Deferred().reject("zeroResponse").promise();var n=i.bypass&&i.bypass.timeText;return i.isBlocked||i.direct.timeText||n?(t.cache[e]={data:JSON.stringify(i),timestamp:home.now().getTime()+3e5},i):$.Deferred().reject("parseData").promise()}),(function(t,i,n){return home.error.logAjaxError({block:"desk-notif-card",message:"notif-card._getRouterDataOrCahedRawData: ajax",url:e,source:"geohelper/router"},t,i,n),$.Deferred().reject("getData").promise()}))},cache:{}})},function(e,t){BEM.DOM.decl({block:"desk-notif-card",modName:"domik",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this._initMailCountUpdate()}},_initMailCountUpdate:function(){this.params.uid&&this.channel("mail").on("update",function(e,t){this.params.uid===t.uid&&this._updateMailCounter(e,t)}.bind(this))},_updateMailCounter:function(e,t){this.elem("mail-count").text(t.value||home.l10n("desktopNotifications.mail.empty"))}})},function(e,t){BEM.DOM.decl({name:"desk-notif-card",modName:"zen",modVal:"yes"},{onSetMod:{js:function(){this._wasShowed=!1,this._showSended=!1,this.__base.apply(this,arguments);var e=$(".infinity-zen");if(e.length){var t=$(".zen-lib");if(t.length){var i=t.bem("zen-lib");i.onFirst("promoCards",(function(e,t){this._showZenCard(this._choosePromoCard(t)),BEM.channel("navi").trigger("loaded",{name:"zen",item:this.domElem}),BEM.channel("navi").trigger("height-change",{delay:0})}),this),i.on("error",function(){this.hasMod("in-group")?this.domElem.trigger("rotate-items:hide"):BEM.channel("navi").trigger("failed",{name:"zen",item:this.domElem}),this._hideCard()}.bind(this));var n=e.bem("infinity-zen");n.forceLoad()}}}},_choosePromoCard:function(e){if(this.params.norotation)return e[0];var t=e[0]&&e[0].id,i=home.localStorage.getItem("home:zen:promo-pack-id"),n=t===i?Number(home.localStorage.getItem("home:zen:promo-show-count"))+1:0,o=n%e.length;return home.localStorage.setItem("home:zen:promo-show-count",n),t!==i&&home.localStorage.setItem("home:zen:promo-pack-id",t),e[o]},_showZenCard:function(e){if(e){var t="notifications.zen.card",i=this.hasMod("in-group","yes");i&&(t+="."+this.params.groupCounter),this.elem("card").empty().append(home.view("desk-notif-card__zen-layout",{link:"",domainTitle:home.htmlFilter(home.capitalize(e.domainTitle.toLowerCase())),title:home.htmlFilter(e.title)})).attr("tabindex",0).attr("data-statlog",t);var n=function(i){e.sendPreviewClick();var n=0!==e.rowIndex?window.innerHeight/2-e.container.scrollHeight/2:75,o=$(".media-grid").bem("media-grid");o.hasMod("collapsed","yes")&&o.delMod("collapsed"),e.scrollTo({animate:!0,highlight:!0,offsetTop:n}),"keydown"===i.type&&home.stat.logPath("click",t),i.preventDefault()};this.bindTo("card","pointerclick",n),this.bindKeyTo("card","space enter",n),this._showClientCard(!0),i?(this._promoCard=e,this._wasShowed&&this._sendShow(e)):(this._sendShow(e),home.stat.logPath("show",t))}},onShow:function(){this.__base.apply(this,arguments),this._wasShowed=!0,this._sendShow(this._promoCard)},_sendShow:function(e){!this._showSended&&e&&(this._showSended=!0,e.sendPreviewShow())}})},function(e,t){BEM.DOM.decl({block:"desk-notif-card",modName:"promo",modVal:"yes"},{onSetMod:{js:function(){if(this.__base.apply(this,arguments),BEM.blocks["i-multiline-overflow"].calcOverflow(this.elem("style-text"),4,"desk-notif-card_promo_yes"),this.params.scroll){if(!$("."+this.params.scroll).length)return void home.error.logError({block:"desk-notif-card_promo_yes",method:"desk-notif-card:onSetMod:js",message:"Block not found"});this.bindTo("link","click",this._onClick),this.bindKeyTo("link","space enter",this._onClick),this.params.doScroll&&this._scroll()}}},_onClick:function(e){this._scroll(),e.preventDefault()},_scroll:function(){var e=$("."+this.params.scroll),t=$(".media-grid"),i=t.bem("media-grid");e.closest(t).length&&i.hasMod("collapsed")&&i.delMod("collapsed"),$("html,body").stop().animate({scrollTop:e.offset().top-40},"slow")}})},function(e,t){BEM.DOM.decl({block:"desk-notif-card",modName:"district",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),BEM.blocks["i-multiline-overflow"].calcOverflow(this.elem("district-detail"),4,"desk-notif-card_district_yes")}}})},function(e,t){BEM.DOM.decl({block:"desk-notif-card",modName:"stream",modVal:"yes"},{onSetMod:{js:function(){this.isThumbnail=this.params.isThumbnail,this.__base.apply(this,arguments),BEM.blocks["i-multiline-overflow"].calcOverflow(this.elem("stream-text"),2,"desk-notif-card_stream_yes"),BEM.blocks["i-multiline-overflow"].calcOverflow(this.elem("stream-status-inner"),1,"desk-notif-card_stream_yes"),BEM.blocks["i-multiline-overflow"].calcOverflow(this.elem("stream-title"),this.params.line_count,"desk-notif-card__stream-title"),BEM.blocks["i-multiline-overflow"].calcOverflow(this.elem("stream-reference"),2,"desk-notif-card__stream-reference"),this._getCardData()}},_getCardData:function(){var e=this.params.clientNotificationId||"ChFDQVRFR19NSVhFRF9WSURFTxIFbW9yZGEgACgB",t={carousel_id:e,limit:20,from:"morda_notification"},i=Ya.Rum.getTime();Ya.streamCms.getCarouselItems(t).then(function(e){if(!e||!e.length)return Promise.reject(new Error("Incorrect data"));var t=e[this.__self.notificationShowsCount++],n=this._getStreamCard(t);this._drawingSuccessed(),this._showStreamCard(n),home.streamRum.sendBlockShowDelta("desk-notif",{requestStart:i,countInitial:!0})}.bind(this))["catch"](function(t){t&&Ya.streamCms.onError({block:this.__self.getName(),message:"_getCardData: fail",method:"_getCardData",meta:{carouselId:e},source:"vh",sourceMethod:"carousel"},t),this._drawingFailed()}.bind(this))},_getRandomItem:function(e){return e[Math.floor(Math.random()*e.length)]},_getStreamCard:function(e){var t={isClient:!0,title:e.title,cardTitle:home.l10n("desktopNotifications.stream.ether")};"channel"===e.content_type_name?(t.type=e.content_type_name,t.channel_id=e.channel_id,t.content_id=e.content_id):t.content_id=e.content_id,e.blogger?t.subtitle=e.blogger.title:e.genres&&e.genres.length&&(t.subtitle=e.genres[0]),e.release_year&&(t.year=e.release_year),e.thumbnail&&this.isThumbnail&&(t.thumb=home.getVideoThumbUrl({url:e.thumbnail,size:"156x88",block:"desk-notif-card_stream_yes",retinaScale:home.view("retina-scale__is-big")?2:1}));var i=Ya.streamCms.addReqIdsByDocument(t,"carousel");return this._reqIds={frontend_vh_reqid:i.frontendVhReqId,recommender_reqid:i.recommenderReqId},i},_showStreamCard:function(e){var t="channel"===e.type?home.l10n("desktopNotifications.stream.live"):e.cardTitle,i=home.view("desk-notif-card__title",{title:t,titleDesc:{mix:"desk-notif-card__style_bold"}}),n=home.view("desk-notif-card__details",{details:home.view("desk-notif-card__stream-details",e)});this.elem("card").empty().append('<div class="desk-notif-card__icon desk-notif-card__stream-icon"></div>').append(i).append(n),this._showClientCard(!0)},onShow:function(){this.__base.apply(this,arguments),home.stat.logPath("show","notifications.stream.card.realshow",{customParams:this._reqIds})},_drawingFailed:function(){this.hasMod("in-group")?this.domElem.trigger("rotate-items:hide"):BEM.channel("navi").trigger("failed",{name:"stream",item:this.domElem}),this._hideCard()},_drawingSuccessed:function(){BEM.channel("navi").trigger("loaded",{name:"stream",item:this.domElem}),BEM.channel("navi").trigger("height-change",{delay:0})}},{notificationShowsCount:0})},function(e,t){var i;(i=Ya.streamCms.constructor).prototype._programTypes={"vod-episode":"VodProgram",episode:"Episode"},i.prototype._initStores=function(){this._channelsById={},this._channelsWhiteList={},this._isLoadChannels=!1,this._gettingResourceById={},this._channelsList=[],this._channelsIcon=[],this._episodesById={},this._series={byId:{}},this._seasons={byId:{},bySeriesId:{}},this._seriesEpisodes={byId:{},bySeasonId:{}},this._themes={byId:{},byResourceId:{}},this._blogger={byId:{}},this._carousels={byId:{},paginators:{}},this._filters={paginators:{}},this._feeds={paginators:{}},this._highlightsById={},this._highlightsList={},this._cacheHash={tag:{},carousel:{},filter:{},collection:{}},this._reqIdsById={},this._isFullData={}},i.prototype._logBanned=function(e,t,i){var n=e&&(e.set||e.items)||[],o=n.filter((function(e){return e&&e.banned})).length,s="",r=i.sourceMethod;n.length||t.offset||!t.limit||(s="empty set"),t.limit/2<o&&(s="many banned resources"),s&&(s=(r?r+" -> ":"")+s,this.onError({message:s,method:"_logBanned",meta:Object.assign({bannedCount:o},t,this.getMetaToVhError(e),i.meta||{}),source:"vh",sourceMethod:r}))},i.prototype._getProgramConstructor=function(e){var t=this._programTypes[e];if(t)return Ya.streamModules[t]},i.prototype.storeResource=function(e,t){var i;return t=t||{},e?("vod-episode"===e.content_type_name?(this.storeSeriesEpisode(e),i=this.getCachedSeriesEpisode(e.content_id)):"season"===e.type?(this.storeSeason(e),i=this.getCachedSeason(e.content_id)):"vod-library"===e.content_type_name?(this.storeSeries(e),i=this.getCachedSeries(e.content_id)):"episode"===e.content_type_name?i=this.storeEpisode(e):"channel"===e.content_type_name&&(i=this.storeChannel(e)),i?(this.storeReqIdsById({response:t.response,sourceMethod:t.sourceMethod,id:i.content_id}),i):(this.onError({method:"storeResource",message:"storeResource -> couldn't store resource",meta:Object.assign(this.getMetaToVhError(t.response),{content_id:e.content_id,content_type:e.content_type_name}),source:"vh",sourceMethod:t.sourceMethod}),null)):(this.onError({method:"storeResource",message:"storeResource -> empty resource",source:"vh",meta:this.getMetaToVhError(t.response),sourceMethod:t.sourceMethod}),null)},i.prototype.getCachedSeriesEpisode=function(e){return this._seriesEpisodes.byId[e]},i.prototype.getCachedSeason=function(e){return this._seasons.byId[e]},i.prototype.getCachedSeries=function(e){return this._series.byId[e]},i.prototype.getChannelByContentId=function(e){return this._channelsById[e]},i.prototype.getChannelSettings=function(e){return this._channelsWhiteList[e]},i.prototype.storeSeriesEpisode=function(e){if(this.storeSeriesEpisodes)this.storeSeriesEpisodes([e]);else{var t=this.getProgramInstance(e);this._seriesEpisodes.byId[t.content_id]=t}},i.prototype.storeSeason=function(e){this._seasons.byId[e.content_id]=e},i.prototype.storeSeries=function(e){var t=new Ya.streamModules.VodLibrary(e),i=t.includes&&t.includes[0];i&&i.season&&this.storeFirstSeriesEpisodes&&(this.storeFirstSeriesEpisodes(i.season.id,t.includes),t.season||(t.season={id:i.season.id}),delete t.includes),Ya.streamModules.utils&&Ya.streamModules.utils.getBadLuck&&Ya.streamModules.utils.getBadLuck(this.settings.exp.stream_disable_thumbs_chance)&&(delete t.thumbnail,delete t.ya_video_preview,delete t.onto_poster),this._series.byId[t.content_id]=t},i.prototype.storeChannel=function(e){var t=this.settings.exp&&this.settings.exp.stream_personal_next&&Ya.streamCms.isPersonalChannel&&Ya.streamModules.channelUtils.isPersonal(e);return("belarus"===this.settings.geoLocation||t)&&(e.status=e.status||[],Array.isArray(e.status)?e.status.push("hide_schedule"):e.status.hide_schedule=1),this._storeChannel?this._storeChannel(e):this.storeChannelById(e)},i.prototype.storeEpisode=function(e){var t;return this.storePrograms?this.storePrograms([e])[0]:(t=this.getProgramInstance(e),this._episodesById[t.cache_id||t.content_id]=t,t)},i.prototype.storeChannelById=function(e){var t;return this.overrideChannel(e),t=new Ya.streamModules.Channel(e),this._channelsById[t.content_id]=t,t},i.prototype.getProgramInstance=function(e){this.overrideProgram(e),this.isTurboApp()&&this.overridePartnerId(e,this.settings.turboAppPartnerIdList);var t=this._getProgramConstructor(e.content_type_name);if(t)return new t(e);var i=Object.keys(this._programTypes);throw new TypeError('Invalid type "'+e.content_type_name+'", valid types: '+i)},i.prototype.overrideProgram=function(e){var t=this.settings,i=t.override&&t.override[e.content_id];Ya.streamModules.programUtils.overrideProgram(e,{override:i,originalSourceIcons:t.originalSourceIcons,fakeTime:t.fakeTime})},i.prototype.overrideChannel=function(e){var t=this.settings.resourceOverride&&this.settings.resourceOverride[e.content_id];if(t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},i.prototype.prepareReqIds=function(e){return{recommender:(e=e||{}).reqid,vh:e["apphost-reqid"]}},i.prototype.storeReqIdsById=function(e){var t=e||{},i=t.sourceMethod,n=t.id;i&&n&&(this._reqIdsById[n]||(this._reqIdsById[n]={}),this._reqIdsById[n][i]=this.prepareReqIds(e.response))},i.prototype.getReqIdsById=function(e){var t=e||{},i=t.id,n=t.sourceMethod;return n&&i&&this._reqIdsById[i]&&this._reqIdsById[i][n]||{}},i.prototype.addReqIdsByDocument=function(e,t){var i=Ya.streamCms.getReqIdsById({id:e.content_id,sourceMethod:t});return e.frontendVhReqId=i.vh,e.recommenderReqId=i.recommender,e},i.prototype.addReqIdsByDocuments=function(e,t){return e.map((function(e){return Ya.streamCms.addReqIdsByDocument(e,t)}))},Ya.streamCms._initStores()},function(e,t,i){(function(e){!function(e){e.Ya=e.Ya||{},e.Ya.streamModules=e.Ya.streamModules||{}}("undefined"!=typeof window?window:void 0!==e&&e||window)}).call(this,i(1))},function(e,t){!function(){function e(e){for(var t in Ya.streamModules.branding.prepare(e),e)e.hasOwnProperty(t)&&(this[t]=e[t]);var i=this.channelSettings=Ya.streamCms.getChannelSettings(this.parent_id);this.meta=this.meta||{},Ya.streamModules.programUtils.isVhDocument(this)?Ya.streamModules.programUtils._validateStreams(this):Ya.streamModules.programUtils.validateExternalResource(this),Ya.streamCms.settings&&Ya.streamCms.settings.adsDisabled&&this.disableAds(),this.isPersonalChannel()&&(this.cache_id=i.content_id+"_"+this.content_id)}e.prototype.isPersonalChannel=function(){return Ya.streamModules.programUtils.isPersonalChannel(this)},e.prototype.disableAds=function(){Ya.streamModules.programUtils.disableAds(this)},e.prototype._validateSourceUrl=function(e){return Ya.streamModules.programUtils._validateSourceUrl(this,e)},e.prototype.getContentId=function(){return Ya.streamModules.programUtils.getContentId(this)},e.prototype.start=function(){return Ya.streamModules.programUtils.start(this)},e.prototype.end=function(){return Ya.streamModules.programUtils.end(this)},e.prototype.is=function(e){return Ya.streamModules.programUtils.is(this,e)},e.prototype.ended=function(e){return Ya.streamModules.programUtils.ended(this,e)},e.prototype.fromFuture=function(){return Ya.streamModules.programUtils.fromFuture(this)},e.prototype.screwTime=function(e){return Ya.streamModules.programUtils.screwTime(this,e)},e.prototype.canPlay=function(e){return Ya.streamModules.programUtils.canPlay(this,e)},e.prototype.canRestart=function(e){return Ya.streamModules.programUtils.canRestart(this,e)},e.prototype.eq=function(e){return Ya.streamModules.programUtils.eq(this,e)},e.prototype.getStickerpack=function(e){return Ya.streamModules.programUtils.getStickerpack(this,e)},e.prototype.getPersonalReaction=function(){return Ya.streamModules.programUtils.getPersonalReaction(this)},e.prototype.isForbidden=function(){return Ya.streamModules.programUtils.isForbidden(this)},e.prototype.canSetLikes=function(){return Ya.streamModules.programUtils.canSetLikes(this)},Ya.streamModules.GenericProgram=e}()},function(e,t){var i;(i=Ya.streamCms.constructor).prototype.sortByWeight=function(e,t){return(+t.weight||0)-(+e.weight||0)},i.prototype.sortByStartTime=function(e,t){return e.start_time-t.start_time},i.prototype.setCacheTimer=function(e,t,i){clearInterval(this._cacheTimer[t]);var n=home.now()/1e3,o=Math.max(n,e-300);if(!(e<o)){var s=o+(e-o)*Math.random();this._cacheTimer[t]=setInterval(function(){home.now()/1e3>s&&(clearInterval(this._cacheTimer[t]),i(e))}.bind(this),1e3)}},i.prototype.destroyCacheTimer=function(e){clearInterval(this._cacheTimer[e]),delete this._cacheTimer[e]},i.prototype._cacheTimer={},i.prototype.getProgramType=function(e){return e?"episode"===e.content_type_name?"catchup":"series"===e.onto_category||"anim_series"===e.onto_category?"series":"anim_film"===e.onto_category?"anim_film":"film"===e.onto_category?"film":"blog":""},i.prototype.dayStart=function(e){var t=e?new Date(1e3*e):home.now();t.getHours()<5&&t.setDate(t.getDate()-1);var i=t.getFullYear(),n=t.getMonth(),o=t.getDate();return new Date(i,n,o,5)/1e3|0},i.prototype.setNextFetchTime=function(e){this._nextFetchTime=e},i.prototype.getNextFetchTime=function(){return this._nextFetchTime||0},i.prototype.overridePartnerId=function(e,t){if(t){var i=t[e.adConfig&&e.adConfig.partner_id];e.adConfig&&i&&(e.adConfig.partner_id=i)}},i.prototype.isTurboApp=function(){return home.getData("stream.isTurboApp")},i.prototype.processBeacon=function(e){e&&("undefined"!=typeof(e="string"==typeof e?{url:e}:e).timeout?setTimeout((function(){(new Image).src=e.url}),1e3*e.timeout):(new Image).src=e.url)},i.prototype.redirectYandexsport=function(){return home.getData("stream.redirectYandexsport")}},function(e,t){var i,n,o,s,r,a;n="announce",o="void",s="vod-episode",r="vod-library",a="episode",(i={}).isVoidProgram=function(e){return Boolean(e&&e.content_type_name===o)},i.isVodLibrary=function(e){return Boolean(e&&e.content_type_name===r)},i.isAnnounceProgram=function(e){return Boolean(e&&e.content_type_name===n)},i.isVodProgram=function(e){return Boolean(e&&e.content_type_name===s)},i.isLiveProgram=function(e){return Boolean(e&&e.content_type_name===a&&e.can_play_till===e.end_time)},i.isCatchupProgram=function(e){return Boolean(e&&e.content_type_name===a&&e.can_play_till!==e.end_time)},i.isGenericProgram=function(e){return Boolean(e&&e.content_type_name)},i.canRestart=function(e,t){return!this.isLiveProgram(e)&&!this.isAnnounceProgram(e)&&(this.isCatchupProgram(e)&&Ya.streamCms.settings.isTouch?this.canPlay(e,t)&&this.end(e)<t:this.canPlay(e,t))},i.getProgramTitle=function(e){return e.title===e.program_title?e.title:e.title&&e.program_title?e.program_title+". "+e.title:e.title||e.program_title},i.getStickerpack=function(e,t){if(this.isAnnounceProgram(e))return!1;if(this.isVodProgram(e))return!1;t=t||{};var i=this.is(e,home.now()/1e3),n=t.status||{},o=e.stickerpack||t.stickerpack||"new_default7";return!(!i||!n.force_emoji||"disabled"===o)&&o},i.getContentId=function(e){if(!e)return null;if(this.isVoidProgram(e)){var t=e.meta&&e.meta.nextProgram;return!t||this.isVoidProgram(t)?null:this.isGenericProgram(t)&&this.getContentId(t)}if(this.isAnnounceProgram(e)){var i=(e.meta||{}).awaiting;return i&&this.isGenericProgram(i)?this.getContentId(i):null}return e.content_id},i.isForbidden=function(e){var t=Ya.streamCms.forbidden||{};return this.isVodLibrary(e)?t[e.content_id]:e.meta.forbidden||t[e.content_id]||e.parent_channel_id&&t[e.parent_channel_id]||e.parent_vod_lib_id&&t[e.parent_vod_lib_id]||e.parent_id&&t[e.parent_id]},i.getLicense=function(e){return e&&e.ottParams?(e.ottParams.licenses||[]).filter((function(e){return Boolean(e.primary)}))[0]:null},i.isSVODContent=function(e){return Boolean(e&&"SVOD"===e.monetizationModel)},i.isESTContent=function(e){return Boolean(e&&"EST"===e.monetizationModel)},i.isTVODContent=function(e){return Boolean(e&&"TVOD"===e.monetizationModel)},i.isPaidProgram=function(e){return this.isTVODContent(e)||this.isESTContent(e)},i.isRentedProgram=function(e){return this.isTVODContent(e)&&e.active},i.isPurchasedProgram=function(e){return this.isESTContent(e)&&e.active},i.isTopProgram=function(e){return Boolean(e&&e.top_position)},i.is=function(e,t){return(this.isAnnounceProgram(e)||t>=this.start(e))&&t<=this.end(e)},i.canPlay=function(e,t){if(this.isVoidProgram(e))return!1;if(this.isLiveProgram(e))return this.start(e)<t&&t<this.end(e);if(this.isAnnounceProgram(e))return!1;if(this.isCatchupProgram(e)){var i=this.start(e),n=e.can_play_till;return!e.blacked&&t>=i&&t<n}return!0},i.start=function(e){return e.start_time||e.release_date_ut},i.end=function(e){return e.end_time},i.ended=function(e,t){return t>this.end(e)},i.fromFuture=function(e){return this.start(e)>Math.ceil(home.now()/1e3)},i.canSetLikes=function(e){return!!e&&!!this.isVhDocument(e)&&(!(!this.isPersonalChannel(e)||!Boolean(this.getContentId(e)))||!this.isVoidProgram(e)&&Boolean(this.getContentId(e)))},i._checkSourceUrlForError=function(e,t){var i;return!t||!(!this.isLiveProgram(e)||!(i=home.parseUrl(t).query).start&&!i.end)},i._validateStreams=function(e){var t,i="future_vod"===this.isForbidden(e),n=e.streams||[];this.isVoidProgram(e)||this.isAnnounceProgram(e)||i||(t=n.some((function(t){return this._checkSourceUrlForError(e,t.url)}),this),n.length&&!t||Ya.streamCms.onError({method:"_validateStreams",message:n.length?"invalid streams":"empty streams",meta:{content_id:e.content_id,streams:e.streams},source:"vh"}))},i.isVhDocument=function(e){return Boolean(!e.player_config||"vh-no-iframe"===e.player_config.player_id)},i.validateExternalResource=function(e){var t=e.player_config||{},i=e.original_source||{};"vod-episode"!==e.content_type_name&&Ya.streamCms.onError({method:"_validateExternalResource",message:"invalid content_type_name",meta:{content_id:e.content_id,content_type_name:e.content_type_name},source:"vh"}),t.player_id||Ya.streamCms.onError({method:"_validateExternalResource",message:"empty player_id",meta:{content_id:e.content_id},source:"vh"}),t.html_video_player||t.html_autoplay_video_player||Ya.streamCms.onError({method:"_validateExternalResource",message:"empty html_video_player",meta:{content_id:e.content_id},source:"vh"}),i.url||Ya.streamCms.onError({method:"_validateExternalResource",message:"empty original source url",meta:{content_id:e.content_id},source:"vh"})},i.updateSerialTitle=function(e){if(this.isVodProgram(e)){var t=e.series;t&&(e.isSerial=!0,e.program_title=t.series_name,e.title=t.episode_name||e.title)}},i.getNextProgram=function(e){if(this.isVoidProgram(e)){var t=e.meta&&e.meta.nextProgram;return this.isGenericProgram(t)&&t}},i.setStreamsByChannel=function(e,t){this.isVoidProgram(e)&&(e.streams=t.streams,e.stream=t.stream,e.adConfig=t.adConfig)},i.isPersonalChannel=function(e){var t=e&&e.channelSettings;return Boolean(t&&"personal"===t.channel_type)},i.disableAds=function(e){e.ads_disabled=!0},i.screwTime=function(e,t){return t<this.start(e)-10&&t>=e.start_time?e.start_time-1:t>this.end(e)+10&&t<=e.end_time?e.end_time+1:t},i.eq=function(e,t){return t&&t.content_id===e.content_id},i.getPersonalReaction=function(e){return e&&e.ugc_likes},i.shouldGenerateAnnounce=function(e,t){if(!e)return!1;var i=this.isVoidProgram(e),n=this.isAnnounceProgram(e),o=this.fromFuture(e),s=i&&t.status.auto_announce,r=this.canPlay(e,home.now()/1e3),a=this.getLicense(e)||{};return!(!n&&!this.isForbidden(e)&&(!this.isSVODContent(a)||a.active)&&(!this.isPaidProgram(a)||this.isPurchasedProgram(a))&&!o&&(i||r)&&!s)},i.hasSeries=function(e){return Boolean(e&&e.season&&e.season.id)},i.overrideProgram=function(e,t){var i=t.override;if(i)for(var n in i)i.hasOwnProperty(n)&&("start_time"===n||"end_time"===n?e["fake_"+n]=i[n]:e[n]=i[n]);if(e.fakeTime=t.fakeTime,e.original_source&&!e.original_source.icon&&!this.isVhDocument(e)){var o=e.player_config||{};t.originalSourceIcons[o.player_id]&&(e.original_source.icon=t.originalSourceIcons[o.player_id])}},Ya.streamModules.programUtils=i},function(e,t){!function(e){function t(){}t.prototype.prepare=function(e){var t=e.auto_fields;if(t&&"object"==typeof t){var i={branding_image:"image",branding_logo:"logo",branding_touch:"touch-image",co_branding_title:"co-title",co_branding_logo:"co-image",co_branding_logo_link:"co-href",branding_url:"co-bg-href",branding_text:"co-text"};Object.keys(i).map((function(n){t[n]&&(e.branding||(e.branding={}),e.branding[i[n]]=t[n])}))}},e.branding=new t}(Ya.streamModules||(Ya.streamModules={}))},function(e,t){!function(){"use strict";var e="YA_PREMIUM",t="KP_BASIC",i="YA_PLUS",n="YA_PLUS_3M",o="YA_PLUS_KP",s="YA_PLUS_KP_3M",r={YA_PLUS:0,KP_BASIC:1,YA_PREMIUM:2};function a(r){switch(r){case n:case o:case s:case i:return i;case t:return t;case e:return e;default:a={block:"home.yaplus",method:"mapExtraPlusToBasicPlus",message:"Unknow type of subcribe"},home.canUseDOM.check()?home.error.logError(a,c):home.error(a,c)}var a,c}var c=function(e){return e.reduce((function(e,t){var i=a(t);return i&&e.push(i),e}),[]).sort((function(e,t){return r[e]-r[t]}))};home.yaplus={},home.yaplus.getCheapest=function(e){return c(e)[0]},home.yaplus.getMostExpansive=function(e){return c(e)[e.length-1]},home.yaplus.shouldBuySubscribe=function(e,t){if(!e)return!0;var i=home.yaplus.getCheapest(t);return e===n&&-1===t.indexOf(n)||r[e]<r[i]},home.yaplus.getSubscribes=function(e){var t=e.ya_plus;return"episode"!==e.content_type_name||t||(t=e.channelSettings&&e.channelSettings.ya_plus),t||[]},home.yaplus.isPlusContent=function(e){return!!home.yaplus.getSubscribes(e).length}}()},function(e,t){!function(){var e=Ya.streamModules.GenericProgram;function t(){e.apply(this,arguments)}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Ya.streamModules.CatchupProgram=t}()},function(e,t){!function(){var e=Ya.streamModules.GenericProgram;function t(){this.isLive=!0,e.apply(this,arguments)}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Ya.streamModules.LiveProgram=t}()},function(e,t){var i,n;i=Ya.streamModules.CatchupProgram,n=Ya.streamModules.LiveProgram,Ya.streamModules.Episode=function(e){return e.can_play_till===e.end_time?new n(e):new i(e)}},function(e,t){!function(){var e=Ya.streamModules.GenericProgram;function t(){e.apply(this,arguments),this.updateSerialTitle()}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.updateSerialTitle=function(){Ya.streamModules.programUtils.updateSerialTitle(this)},Ya.streamModules.VodProgram=t}()},function(e,t){!function(){function e(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);this.channelSettings=Ya.streamCms.getChannelSettings(this.parent_id)}e.prototype.isForbidden=function(){return Ya.streamModules.programUtils.isForbidden(this)},Ya.streamModules.VodLibrary=e}()},function(e,t){!function(){function e(e){for(var t in this.raw=e,e)e.hasOwnProperty(t)&&(this[t]=e[t]);this.status=Array.isArray(this.status)?this.transformStatus(e.status):e.status||{},this.meta=e.meta||{}}e.prototype.isProjectChannel=function(){return Boolean(this.meta&&this.meta.project_alias)},e.prototype.isPersonalChannel=function(){return Ya.streamCms.isPersonalChannel(this.content_id)},e.prototype.isPersonal=function(){return Ya.streamModules.channelUtils.isPersonal(this)},e.prototype.transformStatus=function(e){var t={};return e&&e.forEach((function(e){t[e]=1})),t},Ya.streamModules.Channel=e}()},function(e,t){var i;i={isPersonal:function(e){return Boolean(e&&"personal"===e.channel_type)}},Ya.streamModules.channelUtils=i},function(e,t){var i;(i=Ya.streamCms.constructor).prototype.getCarouselItems=function(e){var t=this._prepareCarousel({carousel_id:e.carousel_id});return this.getCarousel(t,e)},i.prototype.getCarousel=function(e,t){return this._carousels.paginators[e.carousel_id].get(t)},i.prototype._fetchCarouselItems=function(e){var t={carousel_id:e.carousel_id,limit:e.limit,offset:e.offset,delete_filtered:0,synchronous_scheme:1},i=this._cacheHash.carousel[e.carousel_id];return i&&(t.docs_cache_hash=i),this.settings.exp.stream_external_players&&(t.add_external_hosts=1),e.from&&(t.from=e.from),(this.settings.exp.stream_morda_graphql&&this.settings.isMorda?this.fetchCarousel(t,"morda"):this.settings.exp.ether_graphql?this.fetchCarousel(t):this.ajax("carousel",t)).then(function(i){var n;return this._logBanned(i,t,{sourceMethod:"carousel"}),n=this._prepareCarouselItems(i.set||[],{sourceMethod:"carousel",response:i}),i.cache_hash&&(this._cacheHash.carousel[e.carousel_id]=i.cache_hash),n}.bind(this),function(e){return Promise.reject(this.onError({method:"_fetchCarouselItems",source:"vh",sourceMethod:"carousel",meta:t},e))}.bind(this))},i.prototype._prepareCarouselItems=function(e,t){return e.map((function(e){return e.banned||"channel"===e.content_type_name&&e.status&&-1!==e.status.indexOf("hidden")?null:this.storeResource(e,t)}),this)},i.prototype._prepareCarousel=function(e,t){var i=e.carousel_id,n=this.getCachedCarouselById(i);return e.banned?null:(n?(n.title=n.title||e.title,n.has_vertical=n.has_vertical||e.has_vertical):((n=e).content_type_name="carousel",Ya.streamCms.storeCarouselIncludes(n,t),this._carousels.byId[i]=n),n.blogger&&Ya.streamCms.storeBlogger&&(Ya.streamCms.storeBlogger(n.blogger),n.blogger_id=n.blogger.id,delete n.blogger),n.theme&&Ya.streamCms.storeTheme&&(Ya.streamCms.storeTheme(n.theme),n.theme_id=n.theme.id,delete n.theme),e.cache_hash&&(this._cacheHash.carousel[e.carousel_id]=e.cache_hash),n)},i.prototype.storeCarouselIncludes=function(e,t){var i,n=e.carousel_id,o=t&&t.numDocs;e.includes=e.includes||[],e.set=[],e.set=Ya.streamCms._prepareCarouselItems(e.includes,t),Ya.streamCms._carousels.paginators[n]||(n&&(i=function(e){return e.carousel_id=n,Ya.streamCms._fetchCarouselItems(e)}),Ya.streamCms._carousels.paginators[n]=new Ya.streamModules.Paginator(e.set,i,o)),e.set=e.set.filter(Boolean),delete e.includes},i.prototype.getCachedCarouselById=function(e){return this._carousels.byId[e]},i.prototype.updateCarouselReaction=function(e,t){var i=this.getCachedCarouselById(e);i&&(i.reaction=t)},i.prototype.storeCarouselsSettings=function(e){this._carouselsSettings=e},i.prototype.getCarouselsSettings=function(){if(this._gettingCarouselsSettings)return this._gettingCarouselsSettings;var e=this.getCachedCarouselsSettings();return this._gettingCarouselsSettings=e?Promise.resolve(e):Promise.resolve(Object.assign({publisherUploadUrl:this.settings.publisherUploadUrl,passportHost:this.settings.passport&&this.settings.passport.host,pusherSupported:this.settings.pusherSupported,logged:this.settings.logged,userRatingDisabled:this.settings.userRatingDisabled,videoPreviewDisabled:this.settings.videoPreviewDisabled,enableSupInCard:this.settings.enableSupInCard,streamFavorites:this.settings.streamFavorites,supCardTimeLimit:this.settings.supCardTimeLimit,yaplusSettings:this.settings.yaplusSettings,videohub:this.settings.videohub},this.settings.carouselsSettings)).then(function(e){return this.storeCarouselsSettings(e),this.getCachedCarouselsSettings()}.bind(this)),this._gettingCarouselsSettings},i.prototype.getCachedCarouselsSettings=function(){return this._carouselsSettings}},function(e,t){!function(){function e(e,t,i){if(this._set=e||[],this._fetcher=t||null,this._getting={},this._locks={},this._checkState=this.getStateLock("paginator"),i){var n={limit:i};this.store(e,n)}}e.prototype.getStateLock=function(e){var t=Math.random(),i=this._locks;return i[e]=t,function(){return i[e]===t}},e.prototype.get=function(e){var t=((e=e||{}).limit||0)+"_"+(e.offset||0);return this._getting[t]||(this._getting[t]=this._get(e,t).then(function(){return this._getInterval(e).filter(Boolean)}.bind(this),function(e){return delete this._getting[t],Promise.reject(e)}.bind(this))),this._getting[t]},e.prototype._get=function(e){var t=this._findMissing(e),i=Promise.resolve(),n=this._checkState;return t&&this._fetcher&&(t=Object.assign({},e,t),i=this._fetcher(t).then(function(e){n()&&this._store(e,t)}.bind(this))),i},e.prototype.store=function(e,t){return this._store(e,t)},e.prototype._store=function(e,t){var i,n=(t=t||{}).limit,o=t.offset||0;n>(e=e||[]).length&&(i=o+e.length)!==this._remoteTotal&&(this._remoteTotal=i),e.forEach((function(e,t){this._set[t+o]=e}),this)},e.prototype._findMissing=function(e){var t,i,n,o=this._remoteTotal,s=o!==undefined,r=e.limit||0,a=e.offset||0,c=r;if(s&&r&&r+a>o&&(c=Math.max(o-a,0)),c)return i=c-(t=this._getInterval({limit:c,offset:a})).length,(n=this._findGap(t))[0]!==undefined?{limit:(i?c:n[1]+1)-n[0],offset:a+(n[0]||0)}:i?{limit:i,offset:a+(c-i)}:void 0},e.prototype._findGap=function(e){var t,i=[];for(t=0;t<e.length;t++)e[t]===undefined&&(i[0]===undefined&&(i[0]=t),i[1]=t);return i},e.prototype._getInterval=function(e){var t=(e=e||{}).limit||0,i=e.offset||0;return i||(i=0),t?this._set.slice(i,t+i):[]},e.prototype.removeByContentId=function(e){this._set=this._set.filter((function(t){return!t||!t.content_id||t.content_id!==e})),this._getting={}},e.prototype.addItem=function(e){this._set=[e].concat(this._set),this._getting={}},e.prototype.clear=function(){this._getting={},this._set=[],this._checkState=this.getStateLock("paginator")},Ya.streamModules.Paginator=e}()},function(e,t){!function(){function e(){}e.prototype._getSubpage=function(){return this._timing||(this._timing=Ya.Rum.makeSubPage("stream")),this._timing},e.prototype.sendBlockShowDelta=function(e,t){if(e){t=t||{};var i="component.show.",n=Ya.Rum.getTime();window.requestAnimationFrame&&requestAnimationFrame(function(){var o=Ya.Rum.getTime();t.countInitial&&Ya.Rum.sendDelta(i+"initial."+e,o,this._getSubpage()),t.requestStart&&Ya.Rum.sendDelta(i+"request."+e,o-t.requestStart,this._getSubpage()),Ya.Rum.sendDelta(i+"render."+e,o-n,this._getSubpage())}.bind(this))}else home.error.logError({message:"no blockName",source:"code",method:"sendBlockShowDelta",block:"home-stream-rum"})},e.prototype.getTime=function(){return Ya.Rum.getTime()},e.prototype.timeEnd=function(e,t){var i;t!==undefined&&(i=Ya.Rum.getTime()-t,Ya.Rum.sendDelta(e,i,this._getSubpage()))},home.streamRum=new e}()},function(e,t){!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i(i.s="./src/entry/morda.ts")}({"../../node_modules/tslib/tslib.es6.js":function(e,t,i){"use strict";i.r(t),i.d(t,"__extends",(function(){return o})),i.d(t,"__assign",(function(){return s})),i.d(t,"__rest",(function(){return r})),i.d(t,"__decorate",(function(){return a})),i.d(t,"__param",(function(){return c})),i.d(t,"__metadata",(function(){return l})),i.d(t,"__awaiter",(function(){return u})),i.d(t,"__generator",(function(){return d})),i.d(t,"__createBinding",(function(){return h})),i.d(t,"__exportStar",(function(){return m})),i.d(t,"__values",(function(){return p})),i.d(t,"__read",(function(){return f})),i.d(t,"__spread",(function(){return _})),i.d(t,"__spreadArrays",(function(){return g})),i.d(t,"__await",(function(){return v})),i.d(t,"__asyncGenerator",(function(){return b})),i.d(t,"__asyncDelegator",(function(){return y})),i.d(t,"__asyncValues",(function(){return w})),i.d(t,"__makeTemplateObject",(function(){return k})),i.d(t,"__importStar",(function(){return E})),i.d(t,"__importDefault",(function(){return x})),i.d(t,"__classPrivateFieldGet",(function(){return M})),i.d(t,"__classPrivateFieldSet",(function(){return C}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function o(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var s=function(){return(s=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function r(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}function a(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r}function c(e,t){return function(i,n){t(i,n,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}c((n=n.apply(e,t||[])).next())}))}function d(e,t){var i,n,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),"throw":a(1),"return":a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=2&s[0]?n["return"]:s[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,n=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=r.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(a){s=[6,a],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function h(e,t,i,n){n===undefined&&(n=i),e[n]=t[i]}function m(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||(t[i]=e[i])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,o,s=i.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)r.push(n.value)}catch(a){o={error:a}}finally{try{n&&!n.done&&(i=s["return"])&&i.call(s)}finally{if(o)throw o.error}}return r}function _(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}function g(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<i;t++)for(var s=arguments[t],r=0,a=s.length;r<a;r++,o++)n[o]=s[r];return n}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function b(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=i.apply(e,t||[]),s=[];return n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n;function r(e){o[e]&&(n[e]=function(t){return new Promise((function(i,n){s.push([e,t,i,n])>1||a(e,t)}))})}function a(e,t){try{(i=o[e](t)).value instanceof v?Promise.resolve(i.value.v).then(c,l):u(s[0][2],i)}catch(n){u(s[0][3],n)}var i}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function y(e){var t,i;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(i=!i)?{value:v(e[n](t)),done:"return"===n}:o?o(t):t}:o}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=p(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(t){return new Promise((function(n,o){(function(e,t,i,n){Promise.resolve(n).then((function(t){e({value:t,done:i})}),t)})(n,o,(t=e[i](t)).done,t.value)}))}}}function k(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function x(e){return e&&e.__esModule?e:{"default":e}}function M(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function C(e,t,i){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,i),i}},"../../node_modules/webpack/buildin/global.js":function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(n){"object"==typeof window&&(i=window)}e.exports=i},"../../tmpl/stream-react/src/lib/error/index.ts":function(e,t,i){"use strict";function n(e){return e instanceof Error}function o(e){return!n(e)}function s(e){return e instanceof SyntaxError}i.r(t),i.d(t,"isError",(function(){return n})),i.d(t,"isSyntaxError",(function(){return s})),i.d(t,"isNotErrorData",(function(){return o}))},"../../tmpl/stream-react/src/lib/url/index.ts":function(e,t,i){"use strict";i.r(t),i.d(t,"addQueryToUrl",(function(){return l})),i.d(t,"makeUrl",(function(){return c})),i.d(t,"parseUrl",(function(){return a})),i.d(t,"parseSearch",(function(){return s})),i.d(t,"redirectPageToUrl",(function(){return u}));var n=/^(?:(.*?):)?\/\/([^/?#\s]+)(\/?.*)$/,o=/^(\/?[^?#\s]*)(?:\?([^#]+))?(?:#(.*))?$/;function s(e,t){return e.split("&").reduce((function(e,i){if(!i)return{};var n,o,s=i.match(/([^=]*)=(.*)/);if(s)try{n=decodeURIComponent(s[1]),o=decodeURIComponent(s[2])}catch(r){return e}else{try{n=decodeURIComponent(i)}catch(r){return e}o=""}return n in e&&t?("string"==typeof e[n]&&(e[n]=[e[n]]),e[n].push(o)):e[n]=o,e}),{})}function r(e){var t=[];if(!e)return"";for(var i in e)if(e.hasOwnProperty(i)&&e[i]!==undefined&&null!==e[i]){var n=e[i];"object"!=typeof n&&(n=[n]);for(var o=0;o<n.length;++o)t.push(encodeURIComponent(i)+(""!==n[o]?"="+encodeURIComponent(n[o]):""))}return t.length?"?"+t.join("&"):""}function a(e,t){var i,r=e.match(n);if(r?i=r[3].match(o):(r=[],i=e.match(o)),!r&&!i)throw new TypeError('Invalid url "'+e+'"');var a={scheme:r[1]||"",host:r[2]||"",path:i&&i[1]||"",search:i&&i[2]||"",hash:i&&i[3]||"",query:{}};return a.query=s(a.search,t&&t.multi),a}function c(e){var t="";return!e.scheme||!e.host&&e.path||(t+=e.scheme+"://"),e.host&&(e.scheme||(t+="//"),t+=e.host),t&&(e.path&&0!==e.path.indexOf("/")||!e.path)&&"/"!==t.charAt(t.length-1)&&(t+="/"),t+=e.path||"",t+=r(e.query),e.hash&&(t+="#"+e.hash),t}function l(e,t){return e.replace(o,(function(e,i,n,o){var a=n?s(n):{};for(var c in t)t.hasOwnProperty(c)&&(a[c]=t[c]);return i+r(a)+(o?"#"+o:"")}))}var u=function(e){Ya.streamModules.utils.redirectPageToUrl(e)}},"./src/core/index.ts":function(e,t,i){"use strict";i.r(t),i.d(t,"EtherCms",(function(){return s}));var n=i("./src/modules/init/index.ts");function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var s=function(){function e(t){if(o(this,"_inited",!1),o(this,"forbidden",{}),o(this,"settings",{exp:{}}),o(this,"apiUrl","https://frontend.vh.yandex.ru/v23/"),o(this,"graphqlUrl","https://frontend.vh.yandex.ru/graphql"),o(this,"_errorLib",{logError:function(e,t){t&&console.error(t),console.log(e)}}),o(this,"_rumLib",{timeEnd:function(e,t){console.log(e,t)},getTime:function(){return Number(new Date)}}),o(this,"_sessionParams",void 0),o(this,"_baseParams",void 0),o(this,"reqparamsCms",void 0),t)return Object.assign(t,this),Object.getOwnPropertyNames(e.prototype).forEach((function(i){"constructor"!==i&&(t.constructor.prototype[i]=e.prototype[i])})),t}return e.prototype.init=function(e){this._inited||(Object(n.init)(this,e),this._inited=!0)},e}()},"./src/entry/morda.ts":function(e,t,i){"use strict";i.r(t),function(e){var n=i("./src/modules/instance/index.ts");i.d(t,"etherCmsInstance",(function(){return n.etherCmsInstance}));var o=i("./src/modules/carousel/index.ts"),s=i("./src/modules/personal-schedule/index.ts"),r=i("./src/modules/session/index.ts"),a=i("./src/modules/ajax/index.ts"),c=i("./src/modules/error/index.ts");Object.assign(n.etherCmsInstance.constructor.prototype,{getSessionParams:r.getSessionParams,setSessionParams:r.setSessionParams,ajax:a.ajax,getMetaToVhError:a.getMetaToVhError,onError:c.onError,fetchCarousel:o.fetchCarousel,fetchPersonalSchedule:s.fetchPersonalSchedule}),e.Ya=e.Ya||{},e.Ya.streamCms=n.etherCmsInstance}.call(this,i("../../node_modules/webpack/buildin/global.js"))},"./src/modules/ajax/index.ts":function(e,t,i){"use strict";i.r(t),i.d(t,"ajax",(function(){return u})),i.d(t,"getMetaToVhError",(function(){return d})),i.d(t,"getApiUrl",(function(){return c})),i.d(t,"sendFetchTimeMark",(function(){return l}));var n=i("../../node_modules/tslib/tslib.es6.js"),o=i("./src/modules/instance/index.ts"),s=i("./src/modules/error/index.ts"),r=i("./src/modules/load/index.ts"),a=i("./src/modules/data-error/index.ts");function c(e,t){var i=o.etherCmsInstance.apiUrl,n={serverdata:"/efir/api/appdata",timestamp:"/efir/api/timestamp",channels:"/portal/tvstream_json/channels",player:"".concat(i,"player/").concat(t,".json"),episodes:"".concat(i,"episodes.json"),mychannel:"".concat(i,"mychannel/episodes.json"),doc2doc:"".concat(i,"doc2doc"),feed:"".concat(i,"feed.json"),carousel:"".concat(i,"carousel_videohub.json"),collection:"".concat(i,"collection"),blogger:"".concat(i,"blogger"),theme:"".concat(i,"theme"),search:"".concat(i,"search"),series_seasons:"".concat(i,"series_seasons.json"),series_episodes:"".concat(i,"series_episodes.json"),my_subscriptions:"".concat(i,"my_subscriptions"),filter_identities:"".concat(i,"filter_identities"),favorites:"".concat(i,"favorites"),top_carousels:"".concat(i,"top_carousels.json")};return n[e]?n[e]:(Object(s.onError)({method:"getApiUrl",message:"wrong api name: "+e,source:"code",meta:{name:e}}),undefined)}function l(e,t){var i="cms.fetch."+e;o.etherCmsInstance._rumLib.timeEnd(i,t)}function u(e,t){var i,u=o.etherCmsInstance._baseParams,d=["channels","serverdata","timestamp"].indexOf(e)<0,h=t&&t.content_id,m=c(e,h),p=Object(n.__assign)(Object(n.__assign)({},t),u);return m?(t&&t.from&&(p.from=t.from),"serverdata"===e&&(delete p.reqid,delete p.hash),i=o.etherCmsInstance._rumLib.getTime(),Object(r.load)({url:m,name:e,data:p,xhrFields:{withCredentials:!0}}).then((function(t){return i&&l(e,i),d&&Object(a.checkErrors)(t),t}))):Promise.reject(Object(s.onError)({message:"ajax: no url"}))}function d(e){var t={};return e&&(t.reqid=e.reqid,t.apphostReqid=e["apphost-reqid"],e["search-reqid"]&&(t.searchReqid=e["search-reqid"])),t}},"./src/modules/carousel/index.ts":function(e,t,i){"use strict";i.r(t),i.d(t,"fetchCarousel",(function(){return o}));var n=i("./src/modules/graphql/index.ts");function o(e,t){return void 0===t&&(t="simple"),e.limit=e.limit||20,Object(n.gqlFetch)({name:"carousel",params:e,scheme:t})}},"./src/modules/data-error/index.ts":function(e,t,i){"use strict";i.r(t),i.d(t,"checkErrors",(function(){return o}));var n=i("./src/modules/instance/index.ts");function o(e){var t=e.errors,i={invalid_region:"region",no_licenses:"licenses",old_browser:"browser",future_vod_release:"future_vod"},o=["invalid_region","no_licenses","old_browser"];n.etherCmsInstance.settings.disableFutureVod||o.push("future_vod_release"),o.map((function(o){var s=t&&t[o]?t[o]:[];e.error===o&&e.content&&s.push(e.content.content_id),s.forEach((function(e){n.etherCmsInstance.forbidden[e]=i[o]}))}))}},"./src/modules/error/index.ts":function(e,t,i){"use strict";i.r(t),i.d(t,"onError",(function(){return a})),i.d(t,"getErrorParams",(function(){return r}));var n=i("../../node_modules/tslib/tslib.es6.js"),o=i("./src/modules/instance/index.ts"),s=i("./src/modules/session/index.ts");function r(e,t){var i=Object(n.__assign)(Object(n.__assign)({},t.meta),e.meta),o=Object(s.getSessionParams)();return o&&(i.from=o.from,i.from_block=o.from_block),t.message&&t.message!==e.message&&(e.message=(e.message?e.message+"; ":"")+t.message||""),e.block=e.block||"stream-cms",e.method=e.method||"onError",e.sourceType=e.sourceType||"logic",e.meta=i,Object.assign(t,e),e}function a(e,t,i){t||(t=new Error(e.message||e.method||"onError")),e=r(e,t);var n=function(){e.message===t.message&&delete e.message,o.etherCmsInstance._errorLib.logError(e,t)};return i?setTimeout(n,0):n(),t}},"./src/modules/graphql/index.ts":function(e,t,i){"use strict";i.r(t),i.d(t,"gqlFetch",(function(){return w})),i.d(t,"parseHandlerData",(function(){return u})),i.d(t,"parseGraphQl",(function(){return d})),i.d(t,"buildParams",(function(){return h})),i.d(t,"buildHandlerQueryComponent",(function(){return m})),i.d(t,"buildQuery",(function(){return p})),i.d(t,"sendRequest",(function(){return f})),i.d(t,"collectQueue",(function(){return y}));var n=i("../../node_modules/tslib/tslib.es6.js"),o=i("../../tmpl/stream-react/src/lib/error/index.ts"),s=i("./src/modules/graphql_handlers/index.ts"),r=i("./src/modules/instance/index.ts"),a=i("./src/modules/load/index.ts"),c=i("./src/modules/ajax/index.ts"),l=i("./src/modules/error/index.ts");function u(e,t){var i=e.status_code>=200&&e.status_code<400;if(i&&e.content)return e.content;var o={method:"".concat(t," parseHandlerData"),meta:Object(n.__assign)(Object(n.__assign)({},Object(c.getMetaToVhError)(e.content)),{status:e.status_code})};return i?(o.message=t+" empty content",Object(l.onError)(o)):(o.message=t+" bad status",Object(l.onError)(o))}function d(e){return s.handlers.reduce((function(t,i){return e[i]&&(t[i]=u(e[i],i)),t}),{})}function h(e){return JSON.stringify(e).replace(/"(\w+)":/g,"$1:").replace(/^{/,"(").replace(/}$/,")")}function m(e,t){var i=h(Object(n.__assign)(Object(n.__assign)({},t),e.params)),o=s.schemes[e.scheme||"simple"].join(" ");return"".concat(e.name).concat(i," {").concat(o,"}")}function p(e,t){var i=Object.keys(e).map((function(i){return m(e[i],t)})).join(" ");return"{".concat(i,"}")}function f(e){var t=p(e,r.etherCmsInstance._baseParams);return Object(a.load)({url:r.etherCmsInstance.graphqlUrl,method:"POST",data:t,xhrFields:{withCredentials:!0}}).then(d)}function _(e,t){var i;return void 0===t&&(t={}),Object.assign({},t,((i={})[e.name]=e,i))}i.d(t,"schemes",(function(){return s.schemes})),i.d(t,"handlers",(function(){return s.handlers}));var g,v=0;var b={};function y(e){return g||(g=new Promise((function(e){setTimeout((function(){e(f(b)),b={},g=null,v=0}),0)}))),t=e.name,i=b,("carousel"===t||"collection"===t?Boolean(i.carousel||i.collection):Boolean(i[t]))||v>=10?f(_(e)):(b=_(e,b),v++,g);var t,i}function w(e){var t=e.name,i=r.etherCmsInstance.settings.exp.ether_graphql_queue,n=r.etherCmsInstance._rumLib.getTime();return(i?y(e):f(_(e))).then((function(e){var i=e[t];return Object(o.isNotErrorData)(i)?(n&&Object(c.sendFetchTimeMark)(t,n),i):Promise.reject(i)}))}},"./src/modules/graphql_handlers/index.ts":function(e,t,i){"use strict";i.r(t),i.d(t,"schemes",(function(){return n})),i.d(t,"handlers",(function(){return o}));var n={simple:["content_id","content_type_name","parent_id","streams","adConfig","ottParams","release_date_ut","channel_id","subtitle","description","original_source","auto_fields","title","program_title","views_count","live","release_year","genres","onto_id","ugc_token","onto_category","ya_video_preview","deep_hd","stream_quality","duration","thumbnail","onto_poster","ugc_rating","percentage_score","ugc_not_interested_token","ugc_not_interested","rating_kp","start_time","end_time","can_play_till","blogger","blogger_id","ugc_likes","favorite_id","restriction_age","kinopoisk_id","theme","main_color","series","season","episode_number","parent_vod_lib_id","is_special_project","meta","skippableFragments","sport","sport_event","supertag","likes","dislikes","top_position","progress"],short:["content_id","content_type_name","parent_id","streams","adConfig","ottParams","release_date_ut","channel_id","title","genres","onto_category","ya_video_preview","deep_hd","stream_quality","duration","thumbnail","rating_kp","can_play_till","blogger","ugc_likes","favorite_id","restriction_age","theme","main_color","series","season","episode_number","parent_vod_lib_id","meta","skippableFragments"],morda:["content_id","content_type_name","parent_id","streams","release_date_ut","channel_id","title","genres","onto_category","ya_video_preview","deep_hd","duration","thumbnail","rating_kp","can_play_till","blogger","ugc_likes","favorite_id","restriction_age","onto_poster","release_year","release_date_ut","theme","main_color","start_time","end_time","supertag_title"],publisher:["id","title","avatar","bg","can_subscribe","can_upload","subscribe_id","subscribed","content_type_name","edit"],filter:["type","id","title","begin","end","step","values","value","icon"]},o=["doc2doc","carousel","feed","player","bulk","collection","blogger","theme","series_episodes","series_seasons","channels_regions","episodes","mychannel","favorites","search","top_carousels","my_subscriptions","filter_identities"]},"./src/modules/init/index.ts":function(e,t,i){"use strict";i.r(t),i.d(t,"init",(function(){return s}));var n=i("../../node_modules/tslib/tslib.es6.js"),o=i("./src/modules/error/index.ts");function s(e,t){var i,s;if(t.errorLib&&(e._errorLib=t.errorLib),t.rumLib&&(e._rumLib=t.rumLib),i=t.disabled,s=t.isPartialServerData,t.settings){if(e.settings=t.settings,e.settings.isMorda){var r=e.settings.exp||{};r.ether_graphql=!1,r.ether_graphql_queue=!1}t.settings.apiUrl&&(e.apiUrl=e.settings.apiUrl+"/")}i||s||t.settings?(e.reqparamsCms=t.reqparamsCms,e._sessionParams=t.sessionParams,e._baseParams=Object(n.__assign)(Object(n.__assign)({},e.reqparamsCms),e._sessionParams)):Object(o.onError)({method:"_init",message:"stream-cms._init: no settings !!!"})}},"./src/modules/instance/index.ts":function(e,t,i){"use strict";i.r(t),i.d(t,"etherCmsInstance",(function(){return s}));var n=i("./src/core/index.ts"),o="undefined"!=typeof Ya&&Ya.streamCms,s=new n.EtherCms(o||undefined)},"./src/modules/load/index.ts":function(e,t,i){"use strict";i.r(t),i.d(t,"load",(function(){return r}));var n=i("../../node_modules/tslib/tslib.es6.js"),o=i("../../tmpl/stream-react/src/lib/url/index.ts"),s=i("./src/modules/error/index.ts");function r(e){var t,i=e.method||"GET";return new Promise((function(r,a){var c,l="GET"===i?Object(o.addQueryToUrl)(e.url,e.data||{}):e.url,u=new XMLHttpRequest,d=function(t,o){a(Object(s.onError)({message:(e.name?e.name+" ":"")+"load: "+t,method:"load",source:"vh",sourceMethod:e.name,meta:Object(n.__assign)({response:"wrong JSON"===t&&u.responseText,status:u.status},"GET"===i?e.data:{})},o,!0))};u.open(i,l,!0),e.xhrFields&&Object.assign(u,e.xhrFields),u.onload=function(){var e;if(u.status>=200&&u.status<400){if(!u.responseText)return d("empty response");try{return e=JSON.parse(u.responseText),void r(e)}catch(t){return d("wrong JSON",t)}}return d("bad status")},u.onerror=function(){return d("bad response")},"GET"!==i&&(c=e.data,t="string"==typeof c?e.data:JSON.stringify(e.data)),u.send(t||"")}))}},"./src/modules/personal-schedule/index.ts":function(e,t,i){"use strict";i.r(t),i.d(t,"fetchPersonalSchedule",(function(){return o}));var n=i("./src/modules/graphql/index.ts");function o(e,t){return void 0===t&&(t="simple"),Object(n.gqlFetch)({name:"mychannel",params:e,scheme:t})}},"./src/modules/session/index.ts":function(e,t,i){"use strict";i.r(t),i.d(t,"setSessionParams",(function(){return s})),i.d(t,"getSessionParams",(function(){return r}));var n=i("../../node_modules/tslib/tslib.es6.js"),o=i("./src/modules/instance/index.ts");function s(e){o.etherCmsInstance._sessionParams=Object(n.__assign)(Object(n.__assign)({},o.etherCmsInstance._sessionParams),e),o.etherCmsInstance._baseParams=Object(n.__assign)(Object(n.__assign)({},o.etherCmsInstance._baseParams),o.etherCmsInstance._sessionParams)}function r(){return o.etherCmsInstance._sessionParams}}})},function(e,t){BEM.DOM.decl({block:"desk-notif-card",modName:"etrains",modVal:"yes"},{onSetMod:{js:function(){if(this.__base.apply(this,arguments),this._widgetId=this.params.widgetId,this.params.isTuned?this._initClientSchedule():this._initHeightAnimation(),!this.params.isEditMode&&this.params.isWidgetMode&&this._widgetId){var e=$("#wd-wrapper-"+this.params.widgetId);e.length?(this._widget=e.bem("widget"),this._bindWidgetEvents()):home.error.logError({block:"desk-notif-card",method:"desk-notif-card:onSetMod:js",message:"Etrains widget not found"})}this._hasNavi=!!$(".navi").length}},_bindWidgetEvents:function(){this.bindToWin("widgetSettingsTuned",this._onWidgetTuned),this.bindToWin("widgetSettingsDropped",this._onWidgetDropped)},_onAction:function(e){"setup"===e&&this.params.isWidgetMode&&!this.params.isEditMode?this._showWidgetPreferences():this.__base.apply(this,arguments)},_onWidgetTuned:function(e,t){e.id===this._widgetId&&t&&"save"===t.state&&window.location.reload()},_onWidgetDropped:function(e){e.id===this._widgetId&&window.location.reload()},_showWidgetPreferences:function(){$(".b-wdgt-preferences").bem("b-wdgt-preferences").show(this._widget)},_initClientSchedule:function(){var e=this.params;if(e.widgetHost){var t=e.widgetHost+"widgets/suburban/next_trains",i=e.raspData;i.locale=BEM.blocks["i-global"].param("locale"),$.ajax({url:t,data:i,context:this,dataType:"jsonp",success:this._onSuccess,error:this._onError})}},_onError:function(e,t,i){home.error.logAjaxError({block:"desk-notif-card",message:"desk-notif-card__etrains._initClientSchedule: ajax",source:"widget_store"},e,t,i),this._drawingFailed()},_onSuccess:function(e){if(e&&e.routes_forward&&e.routes_forward.length||e.routes_backward&&e.routes_backward.length)if(e){var t=home.view("desk-notif-card__etrains-title-content",{from:e.from.name,to:e.to.name}),i=home.view("desk-notif-card__etrains-schedule",{from:e.routes_forward,to:e.routes_backward,host:this.params.host});this.elem("etrains-placeholder").empty().append(t,i),this._hasNavi&&BEM.channel("navi").trigger("loaded",{name:"etrains",item:this.domElem}),this._showClientCard(!0),this._initHeightAnimation(),home.stat.logDOMShow(this.domElem)}else this._drawingFailed();else this._drawingFailed()},_drawingFailed:function(){this._hasNavi&&BEM.channel("navi").trigger("failed",{name:"etrains",item:this.domElem}),this._hideCard()},_switchDirection:function(e){e.preventDefault(),this.toggleMod("direction","reverse"),this._updateWrapperHeight()},_updateWrapperHeight:function(){if(this._hasDifferentHeight){var e=this.elem("etrains-list-from-wrapper").height(),t=this.elem("etrains-list-to-wrapper").height(),i=Math.max(e,t);this.elem("etrains-list-wrapper").height(i),this._hasNavi&&BEM.channel("navi").trigger("height-change",{delay:150})}},_initHeightAnimation:function(){this.elem("etrains-list-from").height()!==this.elem("etrains-list-to").height()&&(this._hasDifferentHeight=!0,this.setMod("height-animation","yes"))}})},function(e,t){BEM.DOM.decl({block:"desk-notif-card",modName:"social-alert",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),BEM.blocks["i-multiline-overflow"].calcOverflow(this.elem("style-text"),4,"desk-notif-card_social-alert_yes"),this.params.markAsReadParams&&(this.bindTo("link","click",this._markAsRead),this.bindKeyTo("link","space enter",this._markAsRead))}},_markAsRead:function(){var e=this.params.markAsReadParams;this._sendRequest({method:"post",url:e.read_url,source:"bell",headers:{"X-CSRF-Token":e.csrf_token}}),this._sendRequest({method:"put",url:e.read_url_legacy,source:"bell_legacy"})},_sendRequest:function(e){$.ajax({method:e.method,url:e.url,xhrFields:{withCredentials:!0},headers:e.headers,dataType:"json",timeout:1e4}).asPromise()["catch"](function(t){home.error.logError({block:this.__self.getName(),method:"_sendRequest",source:e.source},t)}.bind(this))}})},function(e,t){BEM.DOM.decl({block:"desk-notif-card",modName:"covid",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments);var e="desk-notif-card_covid_yes";BEM.blocks["i-multiline-overflow"].calcOverflow(this.elem("covid-detail"),4,e)}}})},function(e,t){BEM.DOM.decl("rotate-items",{onSetMod:{js:{inited:function(){this._index=0,this._len=this.elem("item").length,this._visible=!document.hidden,this._hovered=!1,this._focused=!1,this._changeEnabled=!0,this._clicked=!1,this._bindEvents(),this._len>1&&(this._initItems(),this._initialStart(),this.bindTo("mouseenter mouseleave",(function(e){this._toggleHover("mouseenter"===e.type)})),this.bindTo("scroll",(function(){this.domElem.scrollLeft(0).scrollTop(0)})),this.channel("sys").on("visibilitychange",this._onVisibilityChange,this))}}},toggle:function(e){this._changeEnabled=e,this._checkConditions()},_initItems:function(){this.elem("item").toArray().slice(1).forEach((function(e,t){var i=$(e);this._setItemLeft(i,t+1),this.setMod(i,"hidden","focusable")}),this)},_setItemLeft:function(e,t){e.css("left",-100*t+"%")},_bindEvents:function(){this.domElem.on("rotate-items:hide",function(e){var t=$(e.target).closest(".rotate-items__item"),i=t.index(),n=this.elem("dot").eq(i);if(t.remove(),this.dropElemCache("item"),this.findElem("item").toArray().forEach((function(e,t){var i=$(e);this._setItemLeft(i,t)}),this),--this._len,this._len>0){if(1===this._len?(this.elem("dots").remove(),clearTimeout(this._timeout)):(n.remove(),this.dropElemCache("dot")),i===this._index){var o=i;o>=this._len-1&&(o=0),this._setItem(o)}}else this.domElem.trigger("rotate-items:hide-all")}.bind(this))},_initialStart:function(){this._timeout=setTimeout(this._showNext.bind(this),this.params.firstTimer||15e3)},_showNext:function(){var e=this._index;++e>=this._len&&(e=0),this._selectItem(e),this._restartRotation()},_restartRotation:function(){clearTimeout(this._timeout),this._timeout=setTimeout(this._showNext.bind(this),this.params.periodicTimer||15e3)},_selectItem:function(e){e===this._index||this._len<2||this._setItem(e)},_setItem:function(e){var t=this.elem("item").eq(this._index),i=this.elem("item").eq(e),n=this.elem("dot").eq(this._index),o=this.elem("dot").eq(e);this._index=e,this.setMod(t,"showed","no"),this.setMod(t,"hidden","focusable"),this.setMod(i,"showed","yes"),this.delMod(i,"hidden","focusable"),this.delMod(n,"active"),this.setMod(o,"active","yes"),home.stat.logDOMShow(i,{visibilityCheck:!1}),this.trigger("show-item",{item:i})},_onVisibilityChange:function(e,t){this._visible=!t.hidden,this._checkConditions()},_toggleHover:function(e){this._hovered=e,this._checkConditions()},_toggleFocus:function(e){this._focused=e,this._checkConditions()},_checkConditions:function(){!this._hovered&&!this._focused&&this._visible&&this._changeEnabled&&!this._clicked&&this._len>1?this._restartRotation():clearTimeout(this._timeout)}},{live:function(){return this.liveBindTo("dot","click",(function(e){this._clicked=!0,this._selectItem(e.data.domElem.index())})),this.liveBindTo("item","focusin focusout",(function(e){"focusin"===e.type&&$("html").hasClass("pointerfocus")||(this._toggleFocus("focusin"===e.type),"focusin"===e.type&&this._selectItem(e.data.domElem.index()))})),!1}})},function(e,t){BEM.DOM.decl({block:"desk-notif-card",modName:"rotation-group",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.domElem.on("rotate-items:hide-all",function(){this._hideCard()}.bind(this)),this.domElem.on("rotate-items:height",function(e,t){BEM.channel("navi").trigger("height-change",{delay:0,height:t.height+parseInt(this.domElem.css("padding-bottom"),10),domElem:this.domElem})}.bind(this));var e=this._rotateItems=this.findBlockInside("rotate-items");this.hasMod("fixed","yes")?e.toggle(!1):(this.channel("navi").on("hide-item",(function(t,i){this.domElem.closest(i.item).length&&e.toggle(!1)}),this),this.channel("navi").on("show-item",(function(t,i){this.domElem.closest(i.item).length&&e.toggle(!0)}),this))},"fixed-visible":function(e,t){this._rotateItems.toggle("yes"===t)}}})},function(e,t){BEM.DOM.decl({block:"rotate-items",modName:"adaptive",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindToWin("resize",home.throttle(function(){var e=this.elem("item").eq(this._index).height();this._setHeight(e)}.bind(this),200))}}},_setHeight:function(e){this.domElem.trigger("rotate-items:height",{height:e}),this.domElem.height(e)},_setItemLeft:function(){},_selectItem:function(e){this.__base.apply(this,arguments);var t=this.elem("item").eq(e);t.onceAnimationEnd("animation",400,function(){var e=t.height();this._setHeight(e)}.bind(this))}})},function(e,t){BEM.DOM.decl({block:"desk-notif-card",modName:"messenger",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments);var e,t,i=function(){return BEM.blocks["i-messenger"].showWidget(),!1};this.bindTo("card","click",i),this.bindKeyTo("card","space enter",i),BEM.blocks["i-messenger-unread"].listenCount(function(i){e||(e=$('<div class="desk-notif-card__messenger-badge"><div class="desk-notif-card__messenger-badge-inner"></div></div>').appendTo(this.elem("title")),t=this.elem("messenger-badge-inner")),i>0&&t.text(i),this.toggleMod(e,"hidden","yes",0===i)}.bind(this))}}})},function(e,t){BEM.decl("i-messenger",{onSetMod:{js:{inited:function(){this.params.url?(this._messengerIsOn=!0,this._url=this.params.url,this._pushGuid=this.params.pushGuid,this._refRtx=this.params.rtx,this._anchorTimestamp=this.params.anchorTimestamp,this._autoShow=this.params.autoShow,this._pushChatId=this.params.pushChatId,this._chatId=this.params.chatId,this._homePageNoArgs=this.params.homePageNoArgs,this._passportUrl=this.params.passportUrl,this._inviteHash=home.localStorage.getItem("home:chats:invite-hash"),this._inviteHash&&home.localStorage.removeItem("home:chats:invite-hash"),this._bindEvents(),this._tryAutoShow(),this.params.hasNotif||this.getWidget()):this._messengerIsOn=!1}}},_getMessenger:function(){var e=this;return new Promise((function(t,i){window.yandexChatWidgetCallback=t,home.loadScript(e._url,undefined,i)})).then((function(){return new Promise((function(e){setTimeout(e,50)}))})).then((function(){return e._widgetLoadCallback()})).then((function(t){return e._bindWidgetEvents(t)}))["catch"]((function(e){throw home.error.logError({block:"chat_widget",method:"i-messenger:onSetMod:js:inited",message:"cannot load chat_widget"},e),e}))},_widgetLoadCallback:function(){var e=this.params,t=new window.Ya.ChatWidget(home.deepExtend({theme:e.theme,buttonText:home.l10n("messenger.title"),title:home.l10n("messenger.title"),autocloseable:!0,collapsedDesktop:"never",iframeUrlParams:{header:"disabled",authType:"own"},unreadUrl:e.unreadUrl},e.overrideConfig||{}));return $("html").addClass("document_messenger_yes"),t},_tryAutoShow:function(){var e;this._autoShow&&(e={}),this._inviteHash&&this._chatId?e={inviteHash:this._inviteHash,rtx:this._refRtx,anchorTimestamp:this._anchorTimestamp,chatId:this._chatId,autoJoin:!0}:this._pushChatId?e={chatId:this._pushChatId}:this._pushGuid&&(e={guid:this._pushGuid}),e&&(this.showChat(e),home.stat.logPath("show","messenger.autoshow"))},_bindEvents:function(){BEM.channel("i-message-locker").on({lock:this._onTogglePopup.bind(this,!0),unlock:this._onTogglePopup.bind(this,!1)})},_onTogglePopup:function(e,t,i){"consistency-popup"===i&&$("html").toggleClass("document_bottom-right-popup_yes",e)},_bindWidgetEvents:function(e){var t=this;return $(".ya-chat-button").on("click",(function(){home.stat.logPath("click","messenger.button")})),e.addListener("authRequest",(function(e){var i=(e=e||{}).inviteHash||t._currentInviteHash,n=e.chatId||t._currentChatId||"";home.localStorage.setItem("home:chats:invite-hash",i),home.stat.logPath("click","messenger.authRequest");var o=home.addQueryToUrl(t._homePageNoArgs,{messenger_auto_show:"1",messenger_rtx:t._rtx||"",messenger_anchor_timestamp:t._currentAnchorTimestamp||"",messenger_chat_id:n});location.href=home.addQueryToUrl(t._passportUrl,{origin:"messenger__channel_login",retpath:o,backpath:o})})),e.addListener("channelSubscribed",(function(e){home.stat.logPath("tech","messenger.channel.subscribed",{precise:!0,customParams:{chatid:e.chatId,rtxreqid:e.rtx,messid:e.chatId+"/"+e.anchorTimestamp}})})),e.addListener("chatEnter",(function(e){t._currentInviteHash=e.inviteHash,t._currentChatId=e.chatId})),e.addListener("chatLeave",(function(){t._currentInviteHash="",t._currentChatId="",t._currentAnchorTimestamp=""})),e.addListener("chatShow",(function(){home.stat.logPath("tech","messenger.show")})),e.addListener("chatHide",(function(){home.stat.logPath("click","messenger.hide")})),e.addListener("error",(function(e){home.error.logError({block:"chat_widget",method:"_bindWidgetEvents",message:"error: "+e.code})})),e},showChat:function(e,t){var i={};e.rtx&&(i.rtxreqid=e.rtx),e.chatId&&(i.chatid=e.chatId,e.anchorTimestamp&&(i.messid=e.chatId+"/"+e.anchorTimestamp)),home.stat.logPath("click",t||"messenger.channel.show",{precise:!0,customParams:i}),this._currentAnchorTimestamp=e.anchorTimestamp,this._currentChatId=e.chatId,this.getWidget().then((function(t){t.showChat(e)}))},getWidget:function(){return this._widgetPromise||(this._widgetPromise=this._getMessenger()),this._widgetPromise},setRtx:function(e){this._rtx=e},isOn:function(){return this._messengerIsOn},showWidget:function(){this.showChat({})}},{getInstance:function(){return this._instance||(this._instance=BEM.create({block:this.getName()},home.getData("messenger.data"))),this._instance},showWidget:function(){this.getInstance().showWidget()}}),BEM.blocks["i-messenger"].getInstance()},function(e,t){BEM.decl("i-messenger-unread",{},{listenCount:function(e){this._init(),this._count!==undefined&&e(this._count),this._countCallbacks=this._countCallbacks||[],this._countCallbacks.push(e)},_init:function(){if(!this._inited){this._inited=!0;var e=home.getData("i-messenger-unread.data");e&&(this._unreadUrl=e.unreadUrl,this._reqNum=0,this._fetchUnread())}},_fetchUnread:function(){document.hidden||!1===window.navigator.onLine?this._restartTimer():$.ajax({url:home.addQueryToUrl(this._unreadUrl,{reqNum:++this._reqNum,parentOrigin:window.location.origin}),xhrFields:{withCredentials:!0},dataType:"json",timeout:1e4,beforeSend:function(e){e.setRequestHeader("Content-Type","application/json")}}).asPromise().then(function(e){!e||e.Status&&e.Status>=400||(this._updateCount(Number(e.UnreadCount)||0),this._restartTimer(1e3*e.Ttl))}.bind(this),function(e){e.meta&&403===e.meta.status&&"Forbidden"===e.errorText||(home.error.logError({block:this.getName(),message:"_fetchUnread: ajax",source:"messenger_api"},e),this._restartTimer())}.bind(this))},_updateCount:function(e){this._count=e,this._countCallbacks&&this._countCallbacks.forEach((function(t){t(e)}))},_restartTimer:function(e){e||(e=1e4),home.getData("i-messenger-unread.data.disableAutoupdate")||setTimeout(this._fetchUnread.bind(this),e)}})},function(e,t){BEM.DOM.decl({block:"desk-notif-card",modName:"fixed"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this._throttledCheck=home.throttle(this._checkVisibility.bind(this),200),this._throttledCheck(),this.bindToWin("resize",this._throttledCheck);var e=this.getMod("fixed");if("top"===e||"mix"===e){this.channel("i-scroll-event").on("scroll",this._throttledCheck);var t=BEM.blocks["media-infinity-footer"];t&&t.on("toggleFooter",this._checkVisibility,this)}var i=function(){setTimeout(this._throttledCheck,250)}.bind(this);this.channel("navi").on("scroll",i),this.channel("desk-notif-card").on("toggled",i)}},_checkVisibility:function(){var e=this.getMod("fixed"),t=$("body").hasClass("b-page_v15-move-widgets_yes")?1160:1340;"mix"===e&&(e=window.innerWidth>=t?"all":"top");var i="top"===e,n=i||window.innerWidth>=t,o=$(".desk-notif"),s=$("html").hasClass("document_media-infinity-footer_yes")?$(".media-infinity-footer__content").height():0,r=o.offset(),a=Math.max(200,this.domElem.height()),c=window.pageYOffset+window.innerHeight-(a+r.top+o.height()+s)>25,l=n&&c;i&&window.pageYOffset>100&&(l=!1),this.toggleMod("fixed-visible","yes",l),$("html").toggleClass("document_fixed-notif_yes",l&&"all"===e),l&&home.stat.logPath("show","notifications.group")}})},function(e,t){BEM.DOM.decl({block:"desk-notif-card",modName:"teaser",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments);var e=this.findBlockInside("rotate-items");e&&e.on("show-item",function(e,t){this._onShowTeaser(this.findElem(t.item,"teaser-item"))}.bind(this),this)}},onShow:function(){this.__base.apply(this,arguments),this._onShowTeaser(this.elem("teaser-item")[0])},_onShowTeaser:function(e){var t=this.params.teasers[$(e).data("id")];t&&t.linknext&&!t.sentShowUrl&&(BEM.blocks["i-yabs-sender"].sendShow(t.linknext),t.sentShowUrl=!0)},_install:function(e){var t=this.params.teasers[e.data("id")];if(t)return t.yaCounterId&&(BEM.blocks["i-metrika"].add({id:t.yaCounterId,triggerEvent:!0}),t.bannerid&&BEM.blocks["i-bannerid"].save(t.bannerid)),"download"!==this.getMod(e,"install")||this._installDownload(t)},_installDownload:function(e){return e._downloadInstance||(e._downloadInstance=BEM.create("i-install-download",e.install)),e._downloadInstance.download(),!1}},{live:function(){return this.__base.apply(this,arguments),this.liveBindTo("teaser-item-link","pointerclick",(function(e){var t=$(e.target).closest(".desk-notif-card__teaser-item");return this._install(t)})),this.liveBindKey("teaser-item-link","space enter",(function(e){var t=$(e.target).closest(".desk-notif-card__teaser-item");return this._install(t)})),!1}})},function(e,t){home.rtrim=function(e){return"string"!=typeof e?e:e.replace(/(\s|&nbsp;|&ensp;|&emsp;|&thinsp;)+$/g,"")}},function(e,t,i){BEM.DOM.decl("navi",{onSetMod:{js:function(){this._items=this.elem("item"),this._downVisibleItemsCount=this.params.visibleItemsCount,this._upVisibleItemsCount=0,this._curVisibleItemsCount=this._downVisibleItemsCount,this._upStep=0,this._downStep=this._downVisibleItemsCount,this._firstItemIdx=-1,this._lastItemIdx=this._downVisibleItemsCount,this._asyncItems=this.params.asyncItems,this._topHeight=0,this._hideBottomItems(),this._updateContentHeight(),this._initBlockHeight(),this._updateShadowHeight(),this._bindEvents();var e=this.params.options;e&&!e.hasAsyncItems&&(this.delMod(this._items,"disabled"),this.delMod(this.elem("container-wrapper"),"pointer"),this._updateSteps(),this._updateContentHeight(),this.channel("navi").trigger("ready")),this.bindTo("container-wrapper","scroll",function(e){e.target.scrollTop&&(e.target.scrollTop=0,this._onClickDownward())}.bind(this))}},onElemSetMod:{upward:{disabled:{yes:function(e){e.attr("tabindex","-1"),this._tryDeleteNavigation()},"":function(e){e.attr("tabindex","0")}}},downward:{disabled:{yes:function(e){e.attr("tabindex","-1"),this._tryDeleteNavigation()},"":function(e){e.attr("tabindex","0")}}}},transitionDuration:500,_overrideItemHeight:function(e,t){e.data("current-height",t)},_getItemHeight:function(e){return e.data("current-height")||e.prop("offsetHeight")||e.data("max-height")||0},_bindEvents:function(){var e=this.params.options;e&&(e.closable&&this.channel("navi").on("closed",this._onItemClosed,this),e.resizable&&this.channel("navi").on("height-change",(function(e,t){t.domElem&&t.height&&this._overrideItemHeight(t.domElem.closest(".navi__item"),t.height),clearTimeout(this._updateHeightTimeout),this._updateHeightTimeout=setTimeout(function(){this._updateContentHeight(),this._updateShadowHeight({delay:0})}.bind(this),t.delay)}),this),e.collapsible&&this.channel("navi").on("collapse",this._onCollapsing,this),e.hasAsyncItems&&(this._asyncItemsStatus="loading",this.channel("navi").on("loaded",this._onLoadAsyncItem,this),this.channel("navi").on("failed",this._onFailedAsyncItem,this)),e.hasOnePageItems&&this.channel("navi").on("one-page",this._onOnePage,this),window.matchMedia("(max-width: 1900px)").addListener(this._update.bind(this)))},_onOnePage:function(e,t){var i=(t=t||{}).item.closest(".navi__item"),n=0;if("done"!==this._asyncItemsStatus&&(this._updateShadowHeight(),this._updateStatus(),this.delMod(this.elem("tools"),"hidden"),this.delMod(this.elem("shadow"),"hidden"),this._asyncItemsStatus="hide-loading"),t.show){this.transitionDuration=150,this._hideBottomItems();var o=i.index(),s=this._items;this.setMod(s,"disabled","yes"),this.delMod(i,"disabled"),s.each(function(e,t){e>this._firstItemIdx&&e<o&&(n-=this._getItemHeight($(t)))}.bind(this)),this.onePageParams={firstItemIdx:this._firstItemIdx,lastItemIdx:this._lastItemIdx},this._lastItemIdx=o+1,setTimeout(function(){this._setContainerHeight(this._getItemHeight(i)),this._updateShadowHeight(),this._updateStatus()}.bind(this),this.transitionDuration+1),this._scroll(n)}else this._undoOnePage()},_undoOnePage:function(){this.transitionDuration=500,this.delMod(this._items,"disabled"),this._firstItemIdx=this.onePageParams.firstItemIdx,this._lastItemIdx=this.onePageParams.lastItemIdx,this._scroll(0),this.onePageParams=null,this._updateContentHeight(),this._unhideContainerItems(),this._updateShadowHeight(),this._updateStatus()},_onCollapsing:function(){this.delMod(this.elem("container-wrapper"),"animation"),this._updateContentHeight(),this._initBlockHeight(),this._updateSteps(),this.setMod(this.elem("container-wrapper"),"animation","yes")},_initBlockHeight:function(){var e=this.elem("tools")[0].offsetHeight,t=this.elem("container-wrapper");if(this._maxContainerHeight=t.height(),this.setMod(t,"animation","yes"),this.params&&this.params.options&&this.params.options.hasAsyncItems){var i=this._maxContainerHeight+e,n=Math.max(this.params.minContainerHeight+e,i);this.elem("layout").css("height",n+"px")}},_onItemClosed:function(e,t){var i=(t=t||{}).item.closest(".navi__item");if(i.parent().length){if(-1===this._firstItemIdx&&this._curVisibleItemsCount>=this._items.length)return setTimeout(this._removeItem.bind(this,i),400);this._minimizeShadow(),this._items.splice(i.index(),1),this._tryToFillContainer(),setTimeout(function(){if(i.remove(),this.dropElemCache("item"),!this._items.length)return this.destruct();this._firstItemIdx===this._lastItemIdx-1&&this._onClickUpward(),this._updateContentHeight(),this._unhideContainerItems()}.bind(this),400)}},_tryToFillContainer:function(){var e=0,t=this._lastItemIdx;this._lastItemIdx=this._items.length;for(var i=this._firstItemIdx+1;i<this._items.length;i++){var n=this._items[i];if(i>=t-1){var o=$(n);this._showItem(o),this.delMod(o,"disabled")}if((e+=this._getItemHeight($(n)))>this._maxContainerHeight){this._lastItemIdx=i;break}}this._curVisibleItemsCount=this._lastItemIdx-this._firstItemIdx-1,this._update(),this._updateMods({setElem:0===this._downStep&&this._directions.DOWNWARD,delElem:-1!==this._firstItemIdx&&this._directions.UPWARD,modName:"disabled"})},_doneAsyncLoading:function(){this._items.length>this._curVisibleItemsCount&&(this._updateShadowHeight(),this._updateStatus(),this.delMod(this.elem("tools"),"hidden"),this.delMod(this.elem("shadow"),"hidden")),setTimeout(function(){this.delMod(this._items,"disabled"),this._updateSteps(),this.channel("navi").trigger("ready")}.bind(this),250)},_update:function(){this._updateContentHeight(),this._updateSteps(),this._updateShadowHeight(),this._updateStatus()},_onLoadAsyncItem:function(e,t){var i=(t=t||{}).name,n=t.item;if(this._asyncItems[i]){var o=n.closest(".navi__item");o.removeAttr("style"),this._updateContentHeight(),this.delMod(o,"async"),delete this._asyncItems[i]}"hide-loading"!==this._asyncItemsStatus&&(this._updateContentHeight(),this._tryDoneAsyncLoading())},_onFailedAsyncItem:function(e,t){t=t||{},this.delMod(this._items,"disabled"),this._removeAsyncItem(t.item,t.name),"hide-loading"!==this._asyncItemsStatus&&(this._tryToFillContainer(),this._updateContentHeight(),this._tryDoneAsyncLoading())},_tryDoneAsyncLoading:function(){$.isEmptyObject(this._asyncItems||{})&&(this._doneAsyncLoading(),this._unbindAsyncEvents(),this._asyncItemsStatus="done")},_unbindAsyncEvents:function(){this.channel("navi").un("loaded",this._onLoadAsyncItem,this),this.channel("navi").un("failed",this._onFailedAsyncItem,this)},_removeItem:function(e){var t=e.index();if(e.remove(),this._items.splice(t,1),this.dropElemCache("item"),!this._items.length)return this.destruct()},_removeAsyncItem:function(e,t){var i=this._asyncItems[t],n=e.closest(".navi__item");this._removeItem(n),i&&delete this._asyncItems[t]},_hideItem:function(e){this.setMod(e,"hide","yes"),BEM.channel("navi").trigger("hide-item",{item:e})},_showItem:function(e){this.delMod(e,"hide"),BEM.channel("navi").trigger("show-item",{item:e})},_hideBottomItems:function(){clearTimeout(this.hideBottomItemsTimeout),this._items.each(function(e,t){if(e>this._lastItemIdx-1){var i=$(t);this._hideItem(i)}}.bind(this))},_unhideContainerItems:function(){this._items.each(function(e,t){var i=$(t);e>this._firstItemIdx&&e<this._lastItemIdx&&this._showItem(i)}.bind(this))},_onClickDownward:function(){if(!this.hasMod(this.elem("downward"),"disabled","yes")){this.channel("navi").trigger("scroll",{direction:this._directions.DOWNWARD});var e=this._items,t=this._downStep;e.each(function(e,i){if(e>this._firstItemIdx&&e<=this._firstItemIdx+t){var n=$(i);this._topHeight-=this._getItemHeight($(i)),this._hideItem(n)}}.bind(this)),this._firstItemIdx+=t,this._lastItemIdx=Math.min(this._firstItemIdx+this._downVisibleItemsCount+1,e.length),this._curVisibleItemsCount=this._downVisibleItemsCount,this._hideBottomItems(),this._unhideContainerItems(),this._update(),this._updateMods({setElem:0===this._downStep&&this._directions.DOWNWARD,delElem:-1!==this._firstItemIdx&&this._directions.UPWARD,modName:"disabled"}),this._scroll(this._topHeight)}},_onClickUpward:function(){if(!this.hasMod(this.elem("upward"),"disabled","yes")){this.channel("navi").trigger("scroll",{direction:this._directions.UPWARD});var e=this._items,t=this._upStep;this._firstItemIdx=Math.max(-1,this._firstItemIdx-t),this._lastItemIdx=Math.min(this._firstItemIdx+this._upVisibleItemsCount+1,e.length),e.each(function(e,t){0!==this._topHeight&&e>this._firstItemIdx&&e<this._lastItemIdx&&(this._topHeight+=this._getItemHeight($(t)),this._showItem($(t)))}.bind(this)),this._curVisibleItemsCount=this._upVisibleItemsCount,this._unhideContainerItems(),this._hideBottomItems(),this._update();var i=this._lastItemIdx!==this._items.length;i&&(this.delMod(this.elem("shadow"),"hidden"),this.delMod(this.elem("status"),"hide")),this._updateMods({setElem:0===this._upStep&&this._directions.UPWARD,delElem:i&&this._directions.DOWNWARD,modName:"disabled"}),this._scroll(this._topHeight)}},_scroll:function(e){e=Math.min(e,0),this.elem("container").css("transform","translateY("+e+"px)")},_scrollToEnd:function(){for(;this._lastItemIdx<this._items.length;)this._onClickDownward()},_scrollToTop:function(){for(;this._firstItemIdx>-1;)this._onClickUpward()},_tryDeleteNavigation:function(){-1===this._firstItemIdx&&this._curVisibleItemsCount>=this._items.length&&(this.elem("navigation").remove(),this.dropElemCache("navigation"))},_updateSteps:function(){this._calculateDownwardSteps(),this._calculateUpwardSteps()},_calculateDownwardSteps:function(){this._downStep=0;var e,t,i=0,n=this._items,o=n.length,s=0,r=1,a=this._lastItemIdx,c=o,l=this._curVisibleItemsCount;for(e=a;e*r<c;e+=r){t=n[e];var u=i+this._getItemHeight($(t));if(u>this._maxContainerHeight&&r<0)break;u>this._maxContainerHeight&&r>0?(r=-1,e=a,c=0):(e===n.length-1&&(r=-1,e=a,this._downStep++,l++,c=0),r<0&&l--,s++,i=u,this._downStep+=Math.max(r,0))}0!==this._downStep&&(this._downStep=l,this._downVisibleItemsCount=s)},_calculateUpwardSteps:function(){this._upStep=0;for(var e=this._items,t=e.length,i=this._firstItemIdx,n=1,o=0,s=-1,r=0,a=i;a*s<n;a+=s){var c=e[a],l=o+this._getItemHeight($(c));if(l>this._maxContainerHeight)break;l>this._maxContainerHeight&&s<0?(s=1,a=i,n=t):(0===a&&(s=1,a=i,this._upStep++,n=t),r++,o=l,this._upStep-=Math.min(s,0))}0!==this._upStep&&(this._upVisibleItemsCount=r)},_updateStatus:function(){this.elem("more-count").text(this._items.length-this._lastItemIdx),0===this._downStep&&this.setMod(this.elem("status"),"hide","yes")},_updateMods:function(e){var t=(e=e||{}).setElem,i=e.delElem,n=e.modName,o=e.modVal||"yes";t&&this.setMod(this.elem(t),n,o),i&&this.hasMod(this.elem(i),n,o)&&this.delMod(this.elem(i),n)},_updateContentHeight:function(){for(var e=0,t=this._firstItemIdx+1;t<this._lastItemIdx;t++){e+=this._getItemHeight(this._items.eq(t))}this._setContainerHeight(e)},_setContainerHeight:function(e){this.elem("container-wrapper").css("height",e)},_updateShadowHeight:function(e){var t=(e=e||{delay:300}).delay;if(0!==this._items.length){var i=this._items[this._lastItemIdx-1],n=$(i),o=this.elem("shadow-item"),s=this.elem("shadow-decor"),r=this._getItemHeight(n);i.offsetHeight<64?this.setMod(o,"size","small"):this.hasMod(o,"size","small")&&this.delMod(o,"size"),setTimeout((function(){o.css("height",r-10),s.removeAttr("style")}),t),0===this._downStep&&this.setMod(this.elem("shadow"),"hidden","yes")}},_minimizeShadow:function(){this._lastItemIdx!==this._items.length&&(this.elem("shadow-item").css("height","8px"),this.elem("shadow-decor").css("visibility","hidden"))},_directions:{UPWARD:"upward",DOWNWARD:"downward"}},{live:function(){this.liveBindTo("downward status","pointerclick",(function(){this._onClickDownward()})),this.liveBindTo("upward","pointerclick",(function(){this._onClickUpward()})),this.liveBindKey("downward","space enter",(function(e){e.preventDefault(),this._onClickDownward()})),this.liveBindKey("upward","space enter",(function(e){e.preventDefault(),this._onClickUpward()})),this.liveBindTo("item","focusin",(function(e){var t=e.data.domElem.closest(".navi__item").index();t===this._firstItemIdx?this._onClickUpward():t===this._items.length-1?this._scrollToEnd():0===t&&this._scrollToTop()}))}})},function(e,t){home.is=function(e){return"0"!==e&&!!e},home.hasBlock=function(e){return e&&home.is(e.show)}},function(e,t){BEM.DOM.decl("dist-popup",{onSetMod:{js:function(){this.__base(),this._homeAppMod=this.hasMod("home-app","yes"),this._homeAppMod?(this._PROMT_TIMEOUT=this.params.promtTimeout,this._homeAppModShow=!1,window.addEventListener("beforeinstallprompt",function(e){this._homeAppModShow||(e.preventDefault(),this._homeAppModShow=!0,this._startTime=new Date,this._promtEvent=e,this._initPopup())}.bind(this)),setTimeout(function(){!this._homeAppModShow&&this.params.hasBasePopup&&home.error({block:"dist-popup",level:"warn",method:"dist-popup:onSetMod:js",message:"Cant show tooltip, but has popup"})}.bind(this),this._PROMT_TIMEOUT)):this._initPopup()}},_initPopup:function(){setTimeout(function(){BEM.blocks["i-message-locker"].acquireLock("dist-popup",this._hide.bind(this)).then(this._onShow.bind(this),this.destruct.bind(this))}.bind(this),this.__self.SHOW_TIMEOUT)},_getPopupPosition:function(){return this._homeAppMod?{top:8,left:"auto"}:{top:12,left:18}},_bindEvents:function(){this.bindTo("no close","click",this._onNoClick),this.bindKeyTo("close","space enter",this._onNoClick),this.bindTo("yes","click",this._onYesClick)},_bindHomeAppEvents:function(){this._installPromt(this._promtEvent),setTimeout(function(){this._hide()}.bind(this),15e3);var e=function(){new Date-this._startTime<1e3||(this._hide(),window.removeEventListener("scroll",e))}.bind(this);window.addEventListener("scroll",e)},_installPromt:function(e){this.bindTo("promt","click",(function(){e.prompt()})),e.userChoice.then(function(){this._hide()}.bind(this))},_onShow:function(){var e=this.params,t=e.counters,i=detector.isSVGSupported()&&e.icons.icon_svg||e.icons.icon;this.elem("image-wrapper").prepend(home.view("dist-popup__image",{image:i})),this.popup=this.findBlockOn("popup").show(this._getPopupPosition()),this.popup.on({"before-hide":this._onBeforeHide,hide:this._onHide},this),this.popup._unbindFocusEvents(),BEM.blocks["i-visibilitychange"].waitForVisible(function(){this._sendCounter(t.show)}.bind(this)),this._bindEvents(),this._homeAppMod&&this._bindHomeAppEvents()},_onBeforeHide:function(e,t){(t&&["esc-key","close-click"].indexOf(t.source)>-1||this._homeAppMod)&&this.afterCurrentEvent(this._countCancel)},_onHide:function(){BEM.blocks["i-message-locker"].releaseLock("dist-popup"),setTimeout(this.destruct.bind(this),this.__self.DESTRUCT_TIMEOUT)},_onYesClick:function(){this._closeFlag(this.params.close_url),this.params.yaCounterId&&(BEM.blocks["i-metrika"].add({id:this.params.yaCounterId,triggerEvent:!0}),this.params.bannerid&&BEM.blocks["i-bannerid"].save(this.params.bannerid))},_onNoClick:function(){return this.popup.hide(),this._countCancel(),!1},_hide:function(){this.popup&&this.popup.hide()},_countCancel:function(){this._closeFlag(this.params.close_url),this.params.quarantineUrl&&this._closeFlag(this.params.quarantineUrl),this._sendCounter(this.params.counters.no),window.home.gaCounter.trackCancelPopup()},_closeFlag:function(e){e&&((new Image).src=e)},_sendCounter:function(e){e&&e.length&&e.forEach((function(e){"path"===e.type?home.stat.logPath("click",e.content):"image"===e.type?(new Image).src=e.content:"show"===e.type&&home.stat.logPath("show",e.content)}))},destruct:function(){return this.popup&&(this.popup.destruct(),this.popup=null),this.__base.apply(this,arguments)}},{SHOW_TIMEOUT:1e3,DESTRUCT_TIMEOUT:1e3})},function(e,t){BEM.DOM.decl({block:"dist-popup",modName:"install",modVal:"download"},{_onYesClick:function(){return this.__base.apply(this,arguments),this._sendCounter(this.params.counters.yes),this._downloadInstance||(this._downloadInstance=BEM.create("i-install-download",this.params)),this._downloadInstance.download(),this._hide(),!1}})},function(e,t){BEM.DOM.decl("news-popup",{onSetMod:{js:function(){var e=this;this.popup=this.findBlockOn(this.domElem,"popup"),this.$customTabLink=$(".news__custom-tab"),this.$tab=this.$customTabLink.closest(".news__tab-wrapper"),this.news=this.findBlockOn(this.$tab.closest(".news"),"news"),this.widget=this.news.findBlockOutside("widget"),this.turnReloadOff(),this.popup.on("show",(function(){home.stat.logDOMShow(e.popup.domElem)})),this.bindTo("add","click",this.add),this.bindTo("cancel","click",this.cancel),this.popup.on("hide",this.hideTab.bind(this)),this.show()}},show:function(){this.popup.setRelativeContainer(this.widget),this.popup.show(this.$customTabLink),this.channel("widget").on("showPreferences",this.hideOnOpenSettings,this),$(window).scrollTop(this.$tab.offset().top),this.elem("add").focus()},hide:function(){this.popup.hide()},add:function(){this.saveNewPattern(),this.saveWidgetSettings()},cancel:function(){this.hide()},hideTab:function(){var e=this.widget.getInstance();this.actualData||e._prefs.customCatId||this.news.hideCustomTab(),this.turnReloadOn()},hideOnOpenSettings:function(e,t){t.elem.instance===this.widget.getInstance()&&this.hide()},saveNewPattern:function(){var e=this.widget.findBlockOutside("widgets");e.params.settings&&e.params.settings.newpattern&&e.save()},saveWidgetSettings:function(){var e=this.widget.getInstance(),t=this.params.customId,i=e._prefs;i.customCatId=t,e.saveValues(i,this.afterSave.bind(this))},afterSave:function(e){"ok"===e.result&&((new Image).src=this.params.cookieUrl,this.actualData=!0),this.hide()},turnReloadOff:function(){this.widget.getInstance().pauseReload=!0},turnReloadOn:function(){var e=this.widget.getInstance();e.pauseReload=!1,!this.actualData&&e._prefs.customCatId?e.reload():Widget.Framework.addToReloadQueue(e,e.onload)}},{live:!1})},function(e,t){BEM.DOM.decl({block:"popup",modName:"type",modVal:"relative"},{setRelativeContainer:function(e){this._parentContainer=e},_findParent:function(){return this._parentContainer},setParent:function(e){return this._parent=e,this}})},function(e,t){var i;i={},BEM.decl("i-request",{onSetMod:{js:{inited:function(){this._preventCache=!1}}},get:function(e,t,i,n){return $.isFunction(i)||(n=i,i=this.params.onError),this._get(e,t,i,$.extend({},this.params,n)),this},_get:function(e,t,n,o){var s=this._buildCacheKey(e,o),r=i[o.cacheGroup];o.cache&&r&&s in r.data?this.afterCurrentEvent((function(){t.call(this.params.callbackCtx,r.data[s])}),this):this._do(e,t,n,o)},_do:function(e,t,i,n){},_onSuccess:function(e,t,i,n){n.cache&&!this._preventCache&&this.putToCache(n,e,i),this._preventCache=!1},_buildCacheKey:function(e,t){return"string"==typeof e?e:$.param(e)},putToCache:function(e,t,n){var o=i[e.cacheGroup]||(i[e.cacheGroup]={keys:[],data:{}});o.keys.length>=e.cacheSize&&delete o.data[o.keys.shift()];var s=this._buildCacheKey(t,e);return o.data[s]=n,o.keys.push(s),this},dropCache:function(){return delete i[this.params.cacheGroup],this},getDefaultParams:function(){return{cache:!1,cacheGroup:"default",cacheSize:100,callbackCtx:this}}},{_cache:i})},function(e,t){BEM.decl({block:"i-request_type_ajax",baseBlock:"i-request"},{onSetMod:{js:{inited:function(){this.__base(),this._requestNumber=this._number=this._preventNumber=this._retryCount=0}}},_get:function(e,t,i,n){this._number++,this._requestNumber++,this._retryCount=n.retryCount,this.__base.apply(this,arguments)},_do:function(e,t,i,n){var o=this;if(o._number>o._preventNumber){var s=arguments,r={data:n.data?$.extend({},n.data,e):e},a=o._wrapCallback((function(i,s,r){o._onSuccess(o._buildCacheKey(e,n),e,i[0],n),o._allowCallback(s,r)&&t.apply(n.callbackCtx,i)})),c=o._wrapCallback((function(e,t,r){o._allowCallback(t,r)&&(o._retryCount-- >0?setTimeout((function(){o._do.apply(o,s)}),n.retryInterval):i&&i.apply(n.callbackCtx,e))}));$.each(["url","dataType","timeout","type","jsonp","jsonpCallback","xhrFields"].concat(n.paramsToSettings||[]),(function(e,t){r[t]=n[t]})),$.ajax(r).done(a).fail(c)}},_wrapCallback:function(e){var t=this._requestNumber,i=this._number;return function(n){null!==n&&e(arguments,t,i)}},_allowCallback:function(e,t){return t>this._preventNumber&&this._requestNumber===e},_buildCacheKey:function(e,t){return"string"==typeof e?e:this.__base(e)+t.url},abort:function(){this._preventNumber=++this._number},getDefaultParams:function(){return $.extend(this.__base(),{cache:!0,type:"GET",dataType:"jsonp",timeout:2e4,retryCount:0,retryInterval:2e3})}})},function(e,t){BEM.decl({name:"dataprovider-geo",baseBlock:"i-request_type_ajax"},{get:function(e,t){var i=Lego.params.locale||"ru",n=(location.host.match(/yandex\.(\w\w)$/)||["","ru"])[1].toUpperCase();return this.__base({v:9,search_type:"tune",results:15,lang:i+"_"+n,part:e,spn:[.01,.01].join()},(function(e){t.call(this,e.results.filter((function(e){return e.geoid})).map((function(e){return["geo"].concat(e)})),e.meta)}))}})},function(e,t){BEM.DOM.decl("select",{onSetMod:{js:{inited:function(){this._items=[],this._curItemIndex=-1,this._scrollableElemOutsidePopup=null,this._rowHeight=22,this.on("change",this._redrawParentPopup);var e=this._getSelectedText();e&&e!==this._getButtonText()&&this.elem("control").trigger("change")}},disabled:function(e,t){this.elem("control").prop("disabled",t),this._getButton().setMod(e,t),t&&this.delMod("opened").delMod("focused")},focused:{yes:function(){if(this.hasMod("disabled"))return!1;this._useNativeControl()||this.bindTo("keydown",this._onKeyDown),this.afterCurrentEvent((function(){this.domElem&&this.trigger("focus")}))},"":function(){this._useNativeControl()||this.delMod("opened").unbindFrom("keydown"),this.afterCurrentEvent((function(){this.domElem&&this.trigger("blur")}))}},opened:function(e,t){this._getButton()&&this._getButton().domElem&&this._getButton().toggleMod("arrow","up","down",Boolean(t))}},isDisabled:function(){return this.hasMod("disabled","yes")},isOpened:function(){return this.hasMod("opened","yes")},open:function(){return this.setMod("opened","yes")},close:function(){return this.delMod("opened")},val:function(e,t){if(void 0===e)return this.elem("control").val();var i,n=-1;return this.findElem("option").each((function(t){this.value===e&&!this.disabled&&(!(i=$(this).parent("optgroup")[0])||!i.disabled)&&(n=t)})),n>-1&&this._selectedIndex(n,t),this},name:function(e){var t=this.elem("control");return arguments.length?(t.attr("name",e),this):t.attr("name")},_selectedIndex:function(e,t){var i=this._getSelectedIndex();return void 0===e||e===i?i:(this.elem("control").prop("selectedIndex",e),this._useNativeControl()||(this._setButtonText(this._getSelectedText()),this._items[0]&&this.delMod(this._items,"selected").setMod(this._items.eq(e),"selected","yes")),this.trigger("change",$.extend({index:e,prev:i},t)),e)},setOptions:function(e){return e?(BEM.DOM.update(this.elem("control"),BEMHTML.apply($.map(e,this.__self._buildOption))),this.redraw()):this},redraw:function(){return this._popup&&this._redrawList(),this.elem("control").trigger("change"),this},_useNativeControl:function(){return null!==this.__self.useNativeControl?this.__self.useNativeControl:this.__self.useNativeControl="none"!==this.elem("control").css("display")},_redrawParentPopup:function(){var e;return this._isParentPopup()&&((e=this._popup._parent).repaint||e.redraw).call(e),this},_isParentPopup:function(){return this._popup&&this._popup._parent&&!this.hasMod("layout","fixed")},_onSelectChange:function(){this._setButtonText(this._getSelectedText()),this.trigger("change",{index:this._getSelectedIndex(),prev:-1})},_onControlFocusInOut:function(e){this._useNativeControl()&&this.toggleMod("focused","yes","","focusin"===e.type)},_onMouseDown:function(e){this._isControlFocused()&&e.preventDefault()},_onKeyDown:function(e){var t=BEM.blocks.keycodes,i=e.keyCode===t.UP,n=e.keyCode===t.DOWN,o=e.keyCode===t.ENTER,s=e.keyCode===t.SPACE;if(i||n){if(e.preventDefault(),!this.isOpened())return this.open();var r=this._items.length,a=this._curItemIndex;if(i&&0===a||n&&a>r-2)return;if(r){var c,l=n?1:-1;for(c=a;c>=0&&c<=r;)if(c+=l,this._isSelectableItem(this._items.eq(c))){a=c;break}this._onEnterItem(this._items.eq(a),!0)}}(o||s)&&this._onEnterItem(this._items.eq(this._curItemIndex),!0,!0)},_onEnterItem:function(e,t,i){this.elem("button").attr("aria-activedescendant",e.attr("id"));var n=this._curItemIndex,o=this._getItemIndex(e),s=this._items;n>-1&&this.delMod(s.eq(n),"hovered"),o>-1&&(this._curItemIndex=o,this.setMod(s.eq(o),"hovered","yes")),i&&this._selectedIndex(this._curItemIndex),t&&this._scrollToCurrent()},_onLeaveItem:function(e){var t=this._curItemIndex;t>-1&&t===this._getItemIndex(e)&&(this.delMod(this._items.eq(t),"hovered")._curItemIndex=-1)},_onSelectItem:function(e){return this._isSelectableItem(e)&&this._selectedIndex(this._curItemIndex),this.close()},_onButtonFocus:function(){this.setMod("focused","yes")},_findScrollableElemOutsidePopup:function(){if(null===this._scrollableElemOutsidePopup){var e,t=this._getPopup().domElem;do{e=(t=t.parent()).css("overflow-y")}while("scroll"!==e&&"auto"!==e&&"HTML"!==t.prop("tagName"));this._scrollableElemOutsidePopup=t}return this._scrollableElemOutsidePopup},_onButtonBlur:function(){if(this.isOpened()&&this._isPopupFocused())if(8===BEM.blocks["i-ua"].ie){var e=this._findScrollableElemOutsidePopup(),t=e.scrollTop();this._focusButton(),e.scrollTop(t)}else this._focusButton();else this.delMod("focused")},_onButtonPress:function(){this.toggleMod("opened","yes","")},_focusButton:function(){return this._getButton().setMod("focused","yes"),this},_blurButton:function(){return this._getButton().delMod("focused"),this},_isPopupFocused:function(){try{return this._getPopup().containsDomElem($(document.activeElement))}catch(e){return!1}},_getButtonText:function(){return this._getButton().elem("text").text()},_setButtonText:function(e){e.length&&(this._getButton().elem("text").text(e),BEM.blocks["i-ua"].ie<10&&this.domElem.parent().css("outline",""))},_isOutsideClicked:function(e,t){return this.containsDomElem($(t.target))},_getItemIndex:function(e){return $.inArray(e.get(0),this._items)},_getSelectedText:function(){return this.elem("control").find(":selected").text()},_getSelectedIndex:function(){return this.elem("control").prop("selectedIndex")},_isSelectableItem:function(e){return!this.hasMod(e,"disabled","yes")&&!this.hasMod(e,"label","yes")},_getButton:function(){return this._button||(this._button=this.findBlockOn("button","button"))},_getRowHeight:function(){return this.findElem(this._getPopup().domElem,"item").outerHeight()},_isControlFocused:function(){try{return this.containsDomElem($(this.__self.doc[0].activeElement))}catch(e){return!1}},destruct:function(){this._outPopup&&this._outPopup.un("outside-click"),this.delMod("opened"),this._popup&&this._popup.domElem&&BEM.DOM.destruct(this._popup.domElem),this.__base.apply(this,arguments)},getDefaultParams:function(){return{rows:15,popupMods:{direction:"down"}}}},{live:function(){this.liveBindTo("control","change",(function(e){this._onSelectChange()})),this.liveBindTo("control","focusin focusout",(function(e){this._onControlFocusInOut(e)})),this.liveBindTo("mousedown",(function(e){this._onMouseDown(e)})),this.liveInitOnBlockInsideEvent("focus","button",(function(){this._onButtonFocus()})).liveInitOnBlockInsideEvent("blur","button",(function(){this._onButtonBlur()}))},useNativeControl:null,_buildOption:function i(e,t,n){var o={};return"option"===e.item?(o={block:"select",elem:"option",tag:"option",attrs:{value:e.value},content:e.content},e.disabled&&(o.attrs.disabled="disabled"),e.selected&&(o.attrs.selected="selected")):"optgroup"===e.item&&(o={elem:"option-group",tag:"optgroup",attrs:{label:e.label}},e.disabled&&(o.attrs.disabled="disabled"),o.content=Array.isArray(e.content)?e.content.map(i):e.content),o.block="select",o}})},function(e,t){BEM.DOM.decl("select",{onElemSetMod:{item:{hovered:function(){BEM.blocks["i-ua"].opera<13&&this._popup.domElem.css("display","inline").css("display","")}}}},{live:function(){return this.liveInitOnBlockInsideEvent("press","button",(function(){this._onButtonPress()})),this.__base.apply(this,arguments)}})},function(e,t){BEM.DOM.decl("select",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._initButton()}}},_initButton:function(){},_redrawList:function(){var e,t=this,i=this._getPopup().domElem;return BEM.DOM.update(this.findElem(i,"list"),this.__self._buildItemsHtml(this.elem("control").children())),e=this.findElem(i,"item"),this._curItemIndex=-1,this._items=e.filter((function(){return!t.hasMod($(this),"label","yes")})),this.bindTo(t._items,{pointerclick:function(e){e.preventDefault(),t._onSelectItem(e.data.domElem)},pointerover:function(e){t._onEnterItem(e.data.domElem)},pointerout:function(e){t._onLeaveItem(e.data.domElem)}}),this}},{_buildItemsHtml:function(e){var t={block:"select",elem:"separator",tag:"i"},i=[],n=[];function o(e,t,i){var n={block:"select",elem:"item",content:{elem:"text",tag:"span",content:{tag:!1,html:t}||"  "},elemMods:{}};return i&&(n.elemMods=i),n}return function s(e,r){var a=e.length;if(a){var c=0;do{var l=$(e[c]),u=l.attr("disabled")&&{disabled:"yes"};if(l.is("optgroup")){!0,!l.prev().is("optgroup")&&c>0&&i.push(t),n.push(i),(i=[]).push(o(0,l.attr("label"),$.extend({label:"yes"},u,r))),s(l.children(),$.extend({inner:"yes"},u,r));var d=i;(i=n.pop()).push({block:"select",elem:"group",content:d})}else i.push(o(0,l.html(),$.extend(u,l.is(":selected")&&{selected:"yes"},r)))}while(++c<a||!1)}}(e),BEMHTML.apply(i)}})},function(e,t){BEM.DOM.decl("select",{onSetMod:{opened:{yes:function(){if(this.hasMod("disabled"))return!1;this._drawPopup();var e=this.findElem(this._popup.domElem,"item","selected","yes");this.elem("button").attr({"aria-activedescendant":e.attr("id"),"aria-expanded":!0})},"":function(){this.elem("button").attr("aria-expanded",!1).removeAttr("aria-activedescendant"),this._getPopup().hide()}}},_getPopupContent:function(e){return{block:e,elem:"list"}},_getPopupMix:function(e){return{block:e,elem:"popup",elemMods:{}}},_getPopup:function(){if(this._popup)return this._popup;var e=this,t=e.params,i=e.__self.getName(),n=this._getPopupContent(i),o=this._getPopupMix(i),s={animate:"no"},r={directions:[{to:"bottom",axis:"left",offset:{top:8}},{to:"top",axis:"left",offset:{bottom:8}}]};["size","layout","theme","width"].forEach((function(t){e.hasMod(t)&&(o.elemMods[t]=e.getMod(t))})),$.extend(o.elemMods,t.elemPopupMods),$.extend(s,t.popupMods),$.extend(r,t.popupParams);var a=$(BEMHTML.apply({block:"popup",mods:s,mix:o,js:r,content:{elem:"content",content:n}}));return this._popup=this.findBlockOn(a,"popup"),this._popup.on({show:function(){e._curItemIndex=e._getSelectedIndex();var t=e._items.eq(e._curItemIndex);e.delMod(e._items,"selected").setMod(t,"hovered","yes").setMod(t,"selected","yes")},"outside-click":function(t,i){e._isOutsideClicked(t,i)?t.preventDefault():e._blurButton()},hide:function(){e.delMod("opened").delMod(e._items,"hovered").delMod(e.findElem(e._popup.domElem,"popup"),"scrollable")}}).bindTo("mousedown",(function(e){e.preventDefault()})),BEM.DOM.append(BEM.DOM.scope,e._popup.domElem),e._redrawList(),e._outPopup=e.findBlockOutside("button","popup"),e._outPopup&&e._outPopup.on("outside-click",(function(t,i){e._popup.containsDomElem($(i.target))&&t.preventDefault()})),e._popup},_calcPopupDimensions:function(){this._popupContent||(this._popupContent=this._getPopup().findBlockInside("popup").elem("content"));var e=parseInt(this.params.rows,10),t=this._getPopup();if(e&&this.findElem(this._popupContent,"item").size()>e){this._rowHeight=this._getRowHeight();var i=parseInt(t.domElem.css("height"),10),n=e*this._rowHeight;i!==n&&(t.setSize({height:n}),i>n&&this.setMod(this.findElem(t.domElem,"popup"),"scrollable","yes"))}else t.setSize({height:"auto"})},_drawPopup:function(){var e=this.findBlockInside("select");this._getPopup().show(e),this._calcPopupDimensions(),this._scrollToCurrent()},_scrollToCurrent:function(){if(this._popupContent&&!(this._curItemIndex<0)){var e,t=this._items.eq(this._curItemIndex).get(0).offsetTop,i=this._popupContent,n=i.scrollTop(),o=t-n,s=2*this._rowHeight;o>i.height()-s?e=t-s:n&&o<s&&(e=t-i.height()+s),e&&i.scrollTop(e)}}},{SHADOW_OFFSET:1})},function(e,t){BEM.DOM.decl({block:"checkbox",baseBlock:"control"},{onSetMod:{js:{inited:function(){var e=this.elem("control");this.toggleMod("checked","yes",e.prop("checked")),this.toggleMod("focused","yes",e.isFocused())}},hovered:{yes:function(){return!this.hasMod("disabled")}},pressed:{yes:function(){return!this.hasMod("disabled")}},checked:function(e,t){this.elem("control").prop("checked",t),this.trigger("change",{checked:Boolean(t)})},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered").delMod("pressed")}}},isDisabled:function(){return this.hasMod("disabled","yes")},isChecked:function(){return Boolean(this.elem("control").prop("checked"))},toggle:function(){this.toggleMod("checked","yes")},val:function(e){var t=this.elem("control");return void 0===e?t.val():(t.val(e),this)},name:function(e){var t=this.elem("control");return arguments.length?(t.attr("name",e),this):t.attr("name")},_onChange:function(e){this.toggleMod("checked","yes",e.target.checked)},_onPointerenter:function(e){this.setMod("hovered","yes")},_onPointerleave:function(e){this.delMod("hovered")},_onPointerpress:function(e){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(e){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onClick:function(e){var t=this.elem("label"),i=e.target;this.domElem[0]===i&&this._onChange(e),i!==t[0]&&this.trigger("click",{domEvent:e}),this.setMod("focused","yes")},_onKeydown:function(e){e.keyCode===BEM.blocks.keycodes.SPACE&&this.setMod("pressed","yes")},_onKeyup:function(e){e.keyCode===BEM.blocks.keycodes.SPACE&&this.delMod("pressed")}},{live:function(){return this.liveBindTo("pointerover pointerout",(function(e){this.isDisabled()||this.domElem[0].contains(e.relatedTarget)||("pointerover"===e.type?this._onPointerenter(e):this._onPointerleave(e))})).liveBindTo("pointerpress",(function(e){this.hasMod("disabled")||this._onPointerpress(e)})).liveBindTo("pointerclick",(function(e){this.hasMod("disabled")||this._onClick(e)})).liveBindTo("control","keydown",(function(e){this.hasMod("disabled")||this._onKeydown(e)})).liveBindTo("control","keyup",(function(e){this.hasMod("disabled")||this._onKeyup(e)})).liveBindTo("control","change",(function(e){this._onChange(e)})),this.__base()}})},function(e,t){!function(){"use strict";BEM.DOM.decl("checkbox",{onSetMod:{js:function(){this.__base(),this.params.stat&&this.on("change",(function(){home.stat.logPath("click",this.params.stat)}))}}},{live:function(){return this.__base.apply(this,arguments),this.liveBindTo("click",(function(e){$(e.target).hasClass("checkbox")&&this.toggle()})),!1}})}()},function(e,t){BEM.DOM.decl("radiobox",{onSetMod:{js:{inited:function(){this._val=this.findElem(this.elem("radio","checked","yes"),"control").val(),this.elem("control").each(function(e,t){var i=$(t),n=this.__self._getRadioByElem(i);i.isFocused()&&this.setMod(n,"focused","yes"),i.prop("checked")&&this.setMod(n,"checked","yes")}.bind(this))}},disabled:{yes:function(){this.setMod(this.elem("radio"),"disabled","yes")},"":function(){this.delMod(this.elem("radio"),"disabled")}}},onElemSetMod:{radio:{focused:{yes:function(e){this.delMod(this.elem("radio","focused","yes"),"focused");var t=this.findElem(e,"control");t.isFocused()||t.focus(),this.afterCurrentEvent((function(){this.domElem&&this.trigger("focus",{current:e})}))},"":function(e){this.afterCurrentEvent((function(){this.domElem&&this.trigger("blur",{prev:e})}))}},checked:{yes:function(e){var t=this.elem("radio","checked","yes"),i=this.findElem(e,"control"),n=this._val;this._willSwitch=!0,this.delMod(t,"checked"),this._willSwitch=!1,i.prop("checked",!0),this._val=i.val(),this.trigger("change",{current:e,currentVal:this._val,prev:t,prevVal:n})},"":function(e){var t=this.findElem(e,"control"),i=this._val;t.prop("checked",!1),this._val=undefined,this._willSwitch||this.trigger("change",{current:$(),currentVal:undefined,prev:e,prevVal:i})}},hovered:function(e){return!this.isDisabled(e)},pressed:function(e){return!this.isDisabled(e)},disabled:function(e,t,i){e.find(this.buildSelector("control")).prop("disabled",i),i&&this.delMod(e,"hovered").delMod(e,"pressed")}}},isDisabled:function(e){return this.hasMod(e,"disabled","yes")},val:function(e){if(void 0===e)return this._val;var t=this;return this.elem("control").each((function(i,n){if(n.value===e)return t.setMod(t.__self._getRadioByElem($(n)),"checked","yes"),!1})),t},name:function(e){var t=this.elem("control");return arguments.length?(t.attr("name",e),this):t.attr("name")},getCurrent:function(){return this.findElem("radio","checked","yes")},uncheckAll:function(){return this.delMod(this.elem("radio","checked","yes"),"checked"),this},_onRadioEnter:function(e){this.setMod(e.data.domElem,"hovered","yes")},_onRadioLeave:function(e){this.delMod(e.data.domElem,"hovered")},_onRadioClick:function(e,t){this.isDisabled(e)||this.setMod(e,"focused","yes")},_onChange:function(e){this.setMod(this.__self._getRadioByElem(e.data.domElem),"checked","yes")},_onPointerpress:function(e){var t=e.data.domElem;this.setMod(t,"pressed","yes").bindToDoc("pointerrelease",(function(){this.delMod(t,"pressed").unbindFromDoc("pointerrelease")}))}},{live:function(){this.liveBindTo("radio","pointerclick",(function(e){this._onRadioClick(e.data.domElem,e)})).liveBindTo("control","change",(function(e){this._onChange(e)})).liveBindTo("radio","pointerover pointerout",(function(e){e.data.domElem[0].contains(e.relatedTarget)||("pointerover"===e.type?this._onRadioEnter(e):this._onRadioLeave(e))})).liveBindTo("control","focusin focusout",(function(e){var t=this.__self._getRadioByElem(e.data.domElem);this.setMod(t,"focused","focusin"===e.type?"yes":""),parseInt(BEM.blocks["i-ua"].ios,10)>=8&&e.preventDefault()})).liveBindTo("radio","pointerpress",(function(e){this.hasMod(e.data.domElem,"disabled")||this._onPointerpress(e)}))},_getRadioByElem:function(e){return e.closest(this.buildSelector("radio"))}})},function(e,t){BEM.DOM.decl({block:"radio-button",baseBlock:"radiobox"},{onElemSetMod:{radio:{pressed:{yes:function(){this.delMod(this.elem("radio","pressed","yes"),"pressed")}}}},_onPointerPress:function(e){this._pressedRadio=e.data.domElem,this.isDisabled(this._pressedRadio)||(this.setMod(this._pressedRadio,"pressed","yes"),this.bindToDoc("pointerrelease",this._onPointerRelease))},_onPointerRelease:function(e){var t=this._pressedRadio;delete this._pressedRadio,this.delMod(t,"pressed"),this.afterCurrentEvent((function(){if(this.domElem){var i=this.findElem(t,"control");i.prop("checked")||!t.is(e.target)&&!t.find(e.target).length||i.trigger("change").focus()}})),this.unbindFromDoc("pointerrelease")}},{live:function(){return this.liveBindTo("radio","pointerpress",(function(e){this._onPointerPress(e)})),this.__base()}})},function(e,t){BEM.DOM.decl("b-autocomplete-item",{val:function(){return this.params.val||this.elem("text").text()||this.domElem.text()},enter:function(){},select:function(e){},_onPointerpress:function(e){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(e){this.delMod("pressed").unbindFromDoc("pointerrelease")}},{live:function(){this.liveBindTo("pointerpress",(function(e){this.hasMod("disabled")||this._onPointerpress(e)}))},highlight:function(e,t){if(!$.isArray(t))return e;var i,n=[],o=0,s=t.sort((function(e,t){return e[0]-t[0]})),r=[],a=-1!==e.indexOf("?"),c=function(e){if(a)return e;for(;-1!==e.indexOf("?")&&r.length;)e=e.replace("?",r[0]),r.shift();return e};return!a&&function(){for(var t,i=/\&(#\d+|#x[a-f\d]+|\w+);/gi;t=i.exec(e);)r.push(t[0]),e=e.replace(t[0],"?")}(),s.forEach((function(t){i=o>t[0]?o:t[0],n.push({tag:"span",elem:"span",content:c(e.slice(o,i))}),n.push({tag:"em",elem:"em",content:c(e.slice(i,o=t[1]))})}),this),n.push({tag:"span",elem:"span",content:c(e.slice(o))}),n}})},function(e,t){BEM.DOM.decl("b-autocomplete-item",{},{live:function(){return this.liveBindTo("mouseover mouseout mousedown mouseup pointerover pointerout pointerdown pointerup",(function(e){this.trigger(e.type)})),this.__base()}}),BEM.HTML.decl("b-autocomplete-item",{onBlock:function(e){var t=e.param("data"),i=BEM.blocks["i-common__string"].escapeHTML($.isArray(t)?t[1]:t);$.isArray(e.param("search_cgi"))&&e.js({cgi:e.param("search_cgi")}),e.tag("li").mod("pers",!!e.param("pers")&&"yes").content(BEM.blocks["b-autocomplete-item"].highlight(i,e.param("hl"))).js(!0)}})},function(e,t){BEM.DOM.decl({block:"b-autocomplete-item",modName:"type",modVal:"geo"},{val:function(){return this.elem("reg").text()},enter:function(){},select:function(e){$(".input__geo").val(this.domElem.data("id"))}})},function(e,t){BEM.DOM.decl({name:"input",modName:"suggest",modVal:"yes"},{onSetMod:{js:{inited:function(){var e=this;e.params.foot&&(e.foot=e.params.foot),e._preventRequest=!0,e.__base.apply(e,arguments),e._userVal=e.val();var t=e._focused;t&&e.delMod("focused"),e.elem("control").attr("autocomplete","off"),e._preventRequest=!1,t&&e.setMod("focused","yes"),e._items=[],e._curItemIndex=-1,e._doRequest=$.debounce(e._doRequest,e.params.debounceDelay),this.bindToWin("resize",$.throttle(this._setWidth,60))}},focused:{yes:function(){this.__base();var e=this.params.showListOnFocus?this._onChange():this._onChange;this.on("change",e)},"":function(){this.__base(),this.un("change",this._onChange)._preventHide||this._getPopup().hide()}}},destruct:function(){var e=this._popup;return e&&e.domElem&&(this._popup=null,BEM.DOM.destruct(e.domElem)),this.__base.apply(this,arguments)},getDataprovider:function(){var e=this.params.dataprovider.url;return this._dataprovider||(this._dataprovider=BEM.create(this.params.dataprovider.name||this.__self.getName()+"__dataprovider",$.extend(this.params.dataprovider,{url:e,callbackCtx:this})))},_onChange:function(){return this._preventRequest||this._doRequest(),this._onChange},_onKeyDown:function(e){if(BEM.blocks.keycodes.is(e.which,"UP","DOWN")&&!e.shiftKey){e.preventDefault();var t=this._items.length,i=!1;if(t){var n=e.which-39,o=this._curItemIndex,s=0;do{i=(0===o&&-1===n||o+n>=t)&&this._onLeaveItem(this._items[o],!0),(o+=n)<0?o=t-1:o>=t&&(o=0)}while(!i&&!1===this._onEnterItem(this._items[o],!0)&&++s<t)}}},_onKeyPress:function(e){e.which===BEM.blocks.keycodes.ENTER&&this._curItemIndex>-1&&this._isCurItemEnteredByKeyboard&&(e.preventDefault(),this._onSelectItem(this._items[this._curItemIndex],!0))},_getPopup:function(){var e=this;if(!e._popup){var t=e.__self.getName(),i=[{elem:"items",tag:"ul",mix:[{block:t,elem:"popup-items"}]}],n=Array.isArray(e.params.popupMixs)?e.params.popupMixs:[],o={directions:"bottom-left"};e._hasPopupFade()&&i.push({block:t,elem:"fade"}),$.extend(o,e.params.popupParams),n.push({block:t,elem:"popup",elemMods:e.params.popupMods,js:{uniqId:e._uniqId}}),e._popup=$(BEMHTML.apply({block:"popup",mods:{animate:"no"},mix:n,js:o,content:{elem:"content",content:i}})).bem("popup").on({show:function(){e.bindTo("keypress",e._onKeyPress).bindTo("keydown",e._onKeyDown)},hide:function(){e.unbindFrom("keypress keydown")._curItemIndex=-1}}),$.each({pointerover:e._onEnterItem,pointerout:e._onLeaveItem,pointerdown:e._onSelectItem,pointerup:e._onItemMouseUp},(function(t,i){BEM.blocks["b-autocomplete-item"].on(e._popup.domElem,t,(function(t){i.call(e,t.block)}))})),BEM.DOM.init(e._popup.domElem)}return e._popup},getPopup:function(){return this._getPopup()},_hasPopupFade:function(){return"yes"===(this.params.popupMods||{}).fade},_onEnterItem:function(e,t){if(e.hasMod("enterable","no"))return!1;var i=this._items,n=this._curItemIndex;n>-1&&i[n].delMod("hovered"),(n=this._getItemIndex(e))>-1&&i[n].setMod("hovered","yes"),this._curItemIndex=n,this._isCurItemEnteredByKeyboard=Boolean(t),t&&this.params.updateOnEnter&&(this._preventRequest=!0,this.val(!1!==e.enter()?e.val():this._userVal,{source:"autocomplete",itemIndex:this._curItemIndex}).del("_preventRequest"))},_onLeaveItem:function(e,t){var i=this._curItemIndex;return i>-1&&i===this._getItemIndex(e)&&(this._items[i].delMod("hovered"),this._curItemIndex=-1),t&&this.val(this._userVal),!0},_onSelectItem:function(e,t){var i=e.select(t||!1),n="object"==typeof i?i.needUpdate:!1!==i,o="object"==typeof i&&i.needEvent;this._preventRequest=!0,n&&(this._userVal=e.val(),this.val(this._userVal,{source:"autocomplete",itemIndex:this._curItemIndex})),t?this.del("_preventRequest")._getPopup().hide():(this._returnFocus=!0,this.bindToDoc("pointerrelease",this._onDocMouseUp),n||(this._preventHide=!0),this.afterCurrentEvent((function(){this.domElem&&this.setMod("focused","yes").del("_preventRequest","_preventHide")}))),(n||o)&&this.trigger("select",{item:e,byKeyboard:t})},_onItemMouseUp:function(){this._closePopupByMouseUp()},_onDocMouseUp:function(){this._closePopupByMouseUp()},_closePopupByMouseUp:function(){this.unbindFromDoc("pointerrelease").del("_returnFocus")._getPopup().hide()},_getItemIndex:function(e){return $.inArray(e,this._items)},_doRequest:function(){var e=this;e._userVal=e.val(),e.trigger("data-requested").getDataprovider().get(e.val(),(function(t){e.trigger("data-received",t);var i=e._getPopup(),n=t.items||t;e.foot&&n.length&&-1===$.inArray(e.foot,n)&&n.push(e.foot),n.length?(e._curItemIndex=-1,BEM.DOM.update(i.elem("items"),e._buildItemsHtml(n),(function(){i.isShown()||(i.show(e.elem("box")),e._setWidth()),e._items=i.findBlocksInside("b-autocomplete-item"),e.trigger("update-items")}))):i.hide()}))},_setWidth:function(){this._hasPopupFade()&&this._getPopup().domElem.css("width",this.elem("box").outerWidth())},_buildItemsHtml:function(e){var t=this;return BEMHTML.apply($.map(e,(function(e,i){var n,o={block:"b-autocomplete-item",data:e,mods:{type:$.isArray(e)?e[0]:"text"},suggestVersion:t.params.dataprovider.version||4};return $.isArray(e)&&$.isPlainObject(n=e.concat().pop())&&$.extend(o,n),o})))},setFoot:function(e){return this.foot=e,this.foot},getDefaultParams:function(){return $.extend(this.__base(),{updateOnEnter:!0,debounceDelay:50,showListOnFocus:!0})}})},function(e,t){BEM.decl({name:"input__dataprovider",baseBlock:"i-request_type_ajax"},{get:function(e,t){return this.__base({part:e},(function(e){t.call(this,{items:e[1],metainfo:e[2]})}))}})},function(e,t){BEM.DOM.decl("multiselect",{onSetMod:{js:function(){var e=this.elem("selected").val().split(","),t={};e.forEach((function(e){""!==e&&(t[e]=!0)})),this._lockUnlock(e),this.selected=t}},_onChange:function(e,t){var i=this.selected,n=[];for(var o in i[e.val()]=t.checked,i)i.hasOwnProperty(o)&&i[o]&&n.push(o);this._lockUnlock(n),this.elem("selected").val(n.join(","))},_lockUnlock:function(e){1===e.length?(this._locked=this.findBlockInside({block:"checkbox",modName:"checked",modVal:"yes"}),this._locked.setMod("disabled","yes")):this._locked&&(this._locked.delMod("disabled"),this._locked=null)}},{live:function(){return this.liveInitOnBlockInsideEvent("change","checkbox",(function(e,t){this.afterCurrentEvent((function(){this._onChange(e.target,t)}))})),!1}})},function(e,t){BEM.DOM.decl("b-wdgt-remove",{onSetMod:{js:function(){this.popup=this.findBlockOn("popup"),this.bindTo("do","click",this.yes),this.popup.on("hide",this.no,this),this.bindTo("cancel","click",this.hide)}},show:function(e,t,i,n){return this.accepted=!1,this.yes=t,this.no=i,this.popup.show(n||e.domElem),this},hide:function(){this.popup.hide()},no:function(){return this.accepted||this.no(),this.no=this.yes=null,this},yes:function(){return this.yes(),this.accepted=!0,this.popup.hide(),this}},{live:!0})},function(e,t){BEM.DOM.decl("popup",{onSetMod:{js:{inited:function(){this.__base(),this._tailPos={}}}},_calcTailPos:function(e){var t=e.to,i=this._positions[e.key],n=e.tail.axis,o={};return"top"===t||"bottom"===t?o.left=this._calcTailLeft(n,i):"left"!==t&&"right"!==t||(o.top=this._calcTailTop(n,i)),o},_calcTailTop:function(e,t){var i=0,n=this.getOwnerSize(),o=this.getOwnerPos(),s=this.params.tail.width,r=this.getPopupSize(),a=r.height,c=o.top-t.top,l=t.top+r.height-(o.top+n.height);return c>0&&(i+=c,a-=c),l>0&&(a-=l),"middle"===e?i+=(a-=s)/2:"bottom"===e&&(i+=a-=s),i<0&&(i=0),i},_calcTailLeft:function(e,t){var i=0,n=this.getOwnerSize(),o=this.getOwnerPos(),s=this.params.tail.width,r=this.getPopupSize(),a=o.left-t.left,c=r.width,l=t.left+r.width-(o.left+n.width);return a>0&&(i+=a,c-=a),l>0&&(c-=l),"center"===e?i+=(c-=s)/2:"right"===e&&(i+=c-=s),i},_calcOffsetByTail:function(e){var t=this.params.tail.height,i={};switch(e.to){case"top":i={top:-t};break;case"bottom":i={top:t};break;case"right":i={left:t};break;case"left":i={left:-t}}return i},_calcTailOffset:function(e){var t={},i=e.to,n=e.tail,o=n.offset,s=n.axis;return!!o&&("top"===i||"bottom"===i?(t.left=0,"left"===s?t.left+=o.left:"center"===s?(o.left&&(t.left+=o.left),o.right&&(t.left-=o.right)):"right"===s&&(t.left-=o.right)):"left"!==i&&"right"!==i||(t.top=0,"top"===s?t.top+=o.top:"middle"===s?(o.top&&(t.top+=o.top),o.bottom&&(t.top-=o.bottom)):"bottom"===s&&(t.top-=o.bottom)),t)},_resetTailPos:function(e){return e?this._tailPos[e]=null:this._tailPos={},this},_pushTailPos:function(e,t){return this._pushPosTo(this._tailPos,e,t),this}})},function(e,t){BEM.DOM.decl("media-service",{onSetMod:{js:function(){home.subscribeData(this._onData.bind(this)),this._initMenuEvents()}},_onData:function(){this._calcOverflow(this.domElem)},_calcOverflow:function(e){BEM.blocks["i-multiline-overflow"].calcOverflow(e,this.__self.TEXT_OVERFLOW_LINES,this.__self.getName())},_isHidden:function(){return this.domElem.closest(".media-grid__row_collapsed_yes").length>0},_initMenuEvents:function(){this._getMenuId()&&(this._isHidden()||$("html").hasClass("i-ua_browser_touch")?this._createMenuChecked():this.bindTo("mouseenter focusin",this._createMenuChecked))},_getMenuId:function(){return this.domElem.closest("[data-blockname]").data("blockname")},_createMenuChecked:function(){!this._control&&home.getData("widgets.alt")&&this._createMenu()},_remove:function(){this._collapse(function(){this._fireEvent("remove")}.bind(this))},_toggle:function(){this._collapse(function(){this._fireEvent("collapse")}.bind(this))},_fireEvent:function(e){this.channel("media-service").trigger(e,{$elem:this.domElem,layoutName:this._getMenuId()})},_collapse:function(e){var t=this.domElem,i=t.outerHeight();this.setMod("collapsed","yes"),t.height(i),this.afterCurrentEvent((function(){t.addClass("media-service_collapsed_yes").css("height","").onceAnimationEnd("transition",300,(function(){e(),BEM.blocks["i-reposition-event"].trigger()}))}))},_createMenu:function(){var e=this._getMenuId();e&&(this._control=BEM.blocks["widget-control"].create(this.domElem,{name:e,removeOnHide:!0,items:{hide2:!0},customItems:this._getMenuCustomItems()}),this._control.on({hide:this._toggle.bind(this,!1)},this))},_getMenuCustomItems:function(){return[]}},{live:!0,TEXT_OVERFLOW_LINES:2})},function(e,t){BEM.DOM.decl({name:"media-stream",baseBlock:"media-service"})},function(e,t){BEM.DOM.decl("i-bem__dom",{throttle:function(e,t,i){var n=this;return home.throttle((function(){this._isDestructing||e.apply(n,arguments)}),t,i)}})},function(e,t){!function(){"use strict";var e=$("html").hasClass("i-ua_inlinesvg_yes");BEM.DOM.decl("imageloader",{onSetMod:{js:function(){this._cardsInited=!1,this._cache={}},visible:{yes:function(){this._processBeforeShowFirstCards()}}},updateItems:function(){this._cardsInited=!1,this._unbindEvents(),this.hasMod("visible","yes")&&this._processBeforeShowFirstCards()},_unbindEvents:function(){this._scroller&&this.unbindFrom(this._scroller,"scroll"),this.unbindFromWin("orientationchange resize")},_processBeforeShowFirstCards:function(){if(!this._cardsInited){if(this._cardsInited=!0,!this._scroller){var e=this.elem("scroller");e.length&&(this._scroller=e)}this._scroller&&this._loadFirstCards()}},_scrollLeft:function(){return this._scroller&&this._scroller.prop("scrollLeft")},_loadFirstCards:function(){var e=this._scroller.find(".imageloader__card").eq(0),t=this._scrollLeft();this._throttleCheckHorizontal=this.throttle(this._checkHorizontal.bind(this),200),this.bindTo(this._scroller,"scroll",this._throttleCheckHorizontal),this.bindToWin("orientationchange resize",this._throttleCheckHorizontal),e.length&&(this._leftOffset=e.offset().left+t-this._scroller.offset().left),this._itemWidth=e.outerWidth()+parseInt(e.css("margin-right"),10),this._loadCards(t)},_checkHorizontal:function(){this._scroller&&this._loadCards(this._scrollLeft())},_loadCards:function(e){var t=this.domElem.outerWidth()-this._leftOffset+e+(e?150:50),i=this._getViewedCards(t,0);this._startLoad(i)},_getViewedCards:function(e,t){var i=e/this._itemWidth;return i=i%1<t?Math.floor(i):Math.ceil(i),this._getLeftCards(i)},_getLeftCards:function(e){var t=this._scroller.find(".imageloader__card");return t.length===e&&this._unbindEvents(),t.slice(0,e)},_loadImage:function(e,t){var i,n=this._cache,o=0,s=function(){o===t.length&&(e.data("image")&&e.css("background-image",t.map((function(e){return'url("'+e+'")'})).join(",")),e.removeClass("imageloader__image_loaded_no").addClass("imageloader__image_loaded_yes"))};t&&t.length&&(n[t]||t.indexOf("data:image/")>-1?(++o,s()):((i=new Image).onload=function(){n[t]=!0,++o,s()},i.src=t))},_selectFromDPI:function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);t=t.sort().reverse();for(var n=0;n<t.length;++n)if(this.__self._getPixelRatio()>=t[n])return e[t[n]];return e[t[t.length-1]]},_selectFromSVG:function(t){return e&&t.svg?t.svg:t.png},_selectImage:function(e,t){for(var i=e;i&&"object"==typeof i;)i=i.png||i.svg?this._selectFromSVG(i):this._selectFromDPI(i);if(i)return[i];var n=t[0].style.backgroundImage;if(n.indexOf("url(")<0)return[];var o=this.__self._STYLE_TO_URL_REGEX;return(n.match(o)||[]).map((function(e){return e.replace(o,"$1")}))},_startLoad:function(e){var t=this;e.each((function(){var e=$(this);if(!e.data("loaded")){var i=e.hasClass("imageloader__image")?e:e.find(".imageloader__image");e.data("loaded",!0),i.each((function(){var e=$(this),i=e.data("image"),n=t._selectImage(i,e);n.length?t._loadImage(e,n):e.removeClass("imageloader__image_loaded_no").addClass("imageloader__image_viewed_yes")}))}}))}},{_STYLE_TO_URL_REGEX:/url\(['"]?(.+?)["']?\)/g,_getPixelRatio:function(){if(!this._pixelRatio)try{this._pixelRatio=window.devicePixelRatio||1}catch(e){this._pixelRatio=1}return this._pixelRatio},live:!0})}()},function(e,t){BEM.DOM.decl("imageloader",{onSetMod:{js:function(){this.__base.apply(this,arguments),this._setModOnVisible("visible",{threshold:0,rootMargin:"300px 100px"})}},_setModOnVisible:function(e,t){this.__self._ioCache=this.__self._ioCache||{},this.__self._ioCache[e]||(this.__self._ioCache[e]=BEM.blocks["i-intersection-observer-wrapper"].create((function(t,i){t.forEach((function(t){if(t.isIntersecting){var n=t.target;$(n).bem("imageloader").setMod(e,"yes"),i.unobserve(n)}}))}),t)),this.__self._ioCache[e].observe(this.domElem[0])}},{live:!1})},function(e,t){BEM.DOM.decl({block:"imageloader",modName:"scroll",modVal:"no"},{_processBeforeShowFirstCards:function(){if(!this._cardsInited){this._cardsInited=!0;var e=this.domElem.find(".imageloader__image");(e=e.filter((function(t){return!e.eq(t).closest(".scroller").length}))).length&&this._startLoad(e)}}})},function(e,t){BEM.DOM.decl("zen-lib",{_runIncludedLoader:function(){}})},function(e,t){BEM.DOM.decl("zen-lib",{_runIncludedLoader:function(){window.YandexZen=window.YandexZen||{},window.YandexZen.loader=function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=88)}([function(e,t,i){"use strict";var n=i(70),o={};o[i(3)("toStringTag")]="z",o+""!="[object z]"&&i(12)(Object.prototype,"toString",(function(){return"[object "+n(this)+"]"}),!0)},function(e,t,i){var n=i(4);n(n.S+n.F,"Object",{assign:i(102)})},function(e,t,i){"use strict";var n=i(39),o=i(71),s=i(31),r=i(21);e.exports=i(54)(Array,"Array",(function(e,t){this._t=r(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?i:"values"==t?e[i]:[i,e[i]])}),"values"),s.Arguments=s.Array,n("keys"),n("values"),n("entries")},function(e,t,i){var n=i(44)("wks"),o=i(26),s=i(7).Symbol,r="function"==typeof s;(e.exports=function(e){return n[e]||(n[e]=r&&s[e]||(r?s:o)("Symbol."+e))}).store=n},function(e,t,i){var n=i(7),o=i(24),s=i(18),r=i(12),a=i(25),c=function(e,t,i){var l,u,d,h,m=e&c.F,p=e&c.G,f=e&c.S,_=e&c.P,g=e&c.B,v=p?n:f?n[t]||(n[t]={}):(n[t]||{}).prototype,b=p?o:o[t]||(o[t]={}),y=b.prototype||(b.prototype={});for(l in p&&(i=t),i)d=((u=!m&&v&&void 0!==v[l])?v:i)[l],h=g&&u?a(d,n):_&&"function"==typeof d?a(Function.call,d):d,v&&r(v,l,d,e&c.U),b[l]!=d&&s(b,l,h),_&&y[l]!=d&&(y[l]=d)};n.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,i){var n=i(23),o=i(20);i(99)("keys",(function(){return function(e){return o(n(e))}}))},function(e,t){var i=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(e,t,i){var n=i(16),o=i(63),s=i(35),r=Object.defineProperty;t.f=i(9)?Object.defineProperty:function(e,t,i){if(n(e),t=s(t,!0),n(i),o)try{return r(e,t,i)}catch(a){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},function(e,t,i){e.exports=!i(5)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,i){"use strict";var n=i(4),o=i(67)(!0);n(n.P,"Array",{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i(39)("includes")},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,i){var n=i(7),o=i(18),s=i(17),r=i(26)("src"),a=Function.toString,c=(""+a).split("toString");i(24).inspectSource=function(e){return a.call(e)},(e.exports=function(e,t,i,a){var l="function"==typeof i;l&&(s(i,"name")||o(i,"name",t)),e[t]!==i&&(l&&(s(i,r)||o(i,r,e[t]?""+e[t]:c.join(String(t)))),e===n?e[t]=i:a?e[t]?e[t]=i:o(e,t,i):(delete e[t],o(e,t,i)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[r]||a.call(this)}))},function(e,t,i){var n=i(8).f,o=Function.prototype,s=/^\s*function ([^ (]*)/;"name"in o||i(9)&&n(o,"name",{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(e){return""}}})},function(e,t,i){"use strict";var n=i(4),o=i(100);n(n.P+n.F*i(101)("includes"),"String",{includes:function(e){return!!~o(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,i){"use strict";i(113)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},function(e,t,i){var n=i(11);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},function(e,t,i){var n=i(8),o=i(27);e.exports=i(9)?function(e,t,i){return n.f(e,t,o(1,i))}:function(e,t,i){return e[t]=i,e}},function(e,t,i){"use strict";i(96);var n=i(16),o=i(53),s=i(9),r=/./.toString,a=function(e){i(12)(RegExp.prototype,"toString",e,!0)};i(5)((function(){return"/a/b"!=r.call({source:"a",flags:"b"})}))?a((function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!s&&e instanceof RegExp?o.call(e):void 0)})):"toString"!=r.name&&a((function(){return r.call(this)}))},function(e,t,i){var n=i(66),o=i(50);e.exports=Object.keys||function(e){return n(e,o)}},function(e,t,i){var n=i(47),o=i(22);e.exports=function(e){return n(o(e))}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,i){var n=i(22);e.exports=function(e){return Object(n(e))}},function(e,t){var i=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=i)},function(e,t,i){var n=i(65);e.exports=function(e,t,i){if(n(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,o){return e.call(t,i,n,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){var i=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+n).toString(36))}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},function(e,t,i){var n=i(48),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){e.exports={}},function(e,t,i){"use strict";var n=i(110)(!0);i(54)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,i=this._i;return i>=t.length?{value:void 0,done:!0}:(e=n(t,i),this._i+=e.length,{value:e,done:!1})}))},function(e,t,i){"use strict";var n=i(7),o=i(17),s=i(28),r=i(58),a=i(35),c=i(5),l=i(38).f,u=i(52).f,d=i(8).f,h=i(118).trim,m=n.Number,p=m,f=m.prototype,_="Number"==s(i(37)(f)),g="trim"in String.prototype,v=function(e){var t=a(e,!1);if("string"==typeof t&&t.length>2){var i,n,o,s=(t=g?t.trim():h(t,3)).charCodeAt(0);if(43===s||45===s){if(88===(i=t.charCodeAt(2))||120===i)return NaN}else if(48===s){switch(t.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+t}for(var r,c=t.slice(2),l=0,u=c.length;l<u;l++)if((r=c.charCodeAt(l))<48||r>o)return NaN;return parseInt(c,n)}}return+t};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof m&&(_?c((function(){f.valueOf.call(i)})):"Number"!=s(i))?r(new p(v(t)),i,m):v(t)};for(var b,y=i(9)?l(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;y.length>w;w++)o(p,b=y[w])&&!o(m,b)&&d(m,b,u(p,b));m.prototype=f,f.constructor=m,i(12)(n,"Number",m)}},function(e,t){e.exports=!1},function(e,t,i){var n=i(11);e.exports=function(e,t){if(!n(e))return e;var i,o;if(t&&"function"==typeof(i=e.toString)&&!n(o=i.call(e)))return o;if("function"==typeof(i=e.valueOf)&&!n(o=i.call(e)))return o;if(!t&&"function"==typeof(i=e.toString)&&!n(o=i.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,i){var n=i(8).f,o=i(17),s=i(3)("toStringTag");e.exports=function(e,t,i){e&&!o(e=i?e:e.prototype,s)&&n(e,s,{configurable:!0,value:t})}},function(e,t,i){var n=i(16),o=i(93),s=i(50),r=i(49)("IE_PROTO"),a=function(){},c=function(){var e,t=i(64)("iframe"),n=s.length;for(t.style.display="none",i(94).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;n--;)delete c.prototype[s[n]];return c()};e.exports=Object.create||function(e,t){var i;return null!==e?(a.prototype=n(e),i=new a,a.prototype=null,i[r]=e):i=c(),void 0===t?i:o(i,t)}},function(e,t,i){var n=i(66),o=i(50).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},function(e,t,i){var n=i(3)("unscopables"),o=Array.prototype;null==o[n]&&i(18)(o,n,{}),e.exports=function(e){o[n][e]=!0}},function(e,t,i){"use strict";var n=i(18),o=i(12),s=i(5),r=i(22),a=i(3);e.exports=function(e,t,i){var c=a(e),l=i(r,c,""[e]),u=l[0],d=l[1];s((function(){var t={};return t[c]=function(){return 7},7!=""[e](t)}))&&(o(String.prototype,e,u),n(RegExp.prototype,c,2==t?function(e,t){return d.call(e,this,t)}:function(e){return d.call(e,this)}))}},function(e,t,i){i(40)("match",1,(function(e,t,i){return[function(i){"use strict";var n=e(this),o=null==i?void 0:i[t];return void 0!==o?o.call(i,n):new RegExp(i)[t](String(n))},i]}))},function(e,t,i){i(40)("replace",2,(function(e,t,i){return[function(n,o){"use strict";var s=e(this),r=null==n?void 0:n[t];return void 0!==r?r.call(n,s,o):i.call(String(s),n,o)},i]}))},function(e,t,i){i(61)("asyncIterator")},function(e,t,i){var n=i(24),o=i(7),s=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:i(34)?"pure":"global",copyright:" 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t,i){"use strict";var n=i(7),o=i(17),s=i(9),r=i(4),a=i(12),c=i(46).KEY,l=i(5),u=i(44),d=i(36),h=i(26),m=i(3),p=i(62),f=i(61),_=i(92),g=i(69),v=i(16),b=i(11),y=i(21),w=i(35),k=i(27),E=i(37),x=i(95),M=i(52),C=i(8),T=i(20),S=M.f,P=C.f,I=x.f,B=n.Symbol,O=n.JSON,D=O&&O.stringify,j=m("_hidden"),A=m("toPrimitive"),R={}.propertyIsEnumerable,N=u("symbol-registry"),L=u("symbols"),F=u("op-symbols"),U=Object.prototype,z="function"==typeof B,H=n.QObject,W=!H||!H.prototype||!H.prototype.findChild,V=s&&l((function(){return 7!=E(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a}))?function(e,t,i){var n=S(U,t);n&&delete U[t],P(e,t,i),n&&e!==U&&P(U,t,n)}:P,$=function(e){var t=L[e]=E(B.prototype);return t._k=e,t},q=z&&"symbol"==typeof B.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof B},Y=function(e,t,i){return e===U&&Y(F,t,i),v(e),t=w(t,!0),v(i),o(L,t)?(i.enumerable?(o(e,j)&&e[j][t]&&(e[j][t]=!1),i=E(i,{enumerable:k(0,!1)})):(o(e,j)||P(e,j,k(1,{})),e[j][t]=!0),V(e,t,i)):P(e,t,i)},K=function(e,t){v(e);for(var i,n=_(t=y(t)),o=0,s=n.length;s>o;)Y(e,i=n[o++],t[i]);return e},G=function(e){var t=R.call(this,e=w(e,!0));return!(this===U&&o(L,e)&&!o(F,e))&&(!(t||!o(this,e)||!o(L,e)||o(this,j)&&this[j][e])||t)},X=function(e,t){if(e=y(e),t=w(t,!0),e!==U||!o(L,t)||o(F,t)){var i=S(e,t);return!i||!o(L,t)||o(e,j)&&e[j][t]||(i.enumerable=!0),i}},Z=function(e){for(var t,i=I(y(e)),n=[],s=0;i.length>s;)o(L,t=i[s++])||t==j||t==c||n.push(t);return n},J=function(e){for(var t,i=e===U,n=I(i?F:y(e)),s=[],r=0;n.length>r;)!o(L,t=n[r++])||i&&!o(U,t)||s.push(L[t]);return s};z||(a((B=function(){if(this instanceof B)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(i){this===U&&t.call(F,i),o(this,j)&&o(this[j],e)&&(this[j][e]=!1),V(this,e,k(1,i))};return s&&W&&V(U,e,{configurable:!0,set:t}),$(e)}).prototype,"toString",(function(){return this._k})),M.f=X,C.f=Y,i(38).f=x.f=Z,i(30).f=G,i(51).f=J,s&&!i(34)&&a(U,"propertyIsEnumerable",G,!0),p.f=function(e){return $(m(e))}),r(r.G+r.W+r.F*!z,{Symbol:B});for(var Q="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Q.length>ee;)m(Q[ee++]);for(var te=T(m.store),ie=0;te.length>ie;)f(te[ie++]);r(r.S+r.F*!z,"Symbol",{"for":function(e){return o(N,e+="")?N[e]:N[e]=B(e)},keyFor:function(e){if(!q(e))throw TypeError(e+" is not a symbol!");for(var t in N)if(N[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),r(r.S+r.F*!z,"Object",{create:function(e,t){return void 0===t?E(e):K(E(e),t)},defineProperty:Y,defineProperties:K,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:J}),O&&r(r.S+r.F*(!z||l((function(){var e=B();return"[null]"!=D([e])||"{}"!=D({a:e})||"{}"!=D(Object(e))}))),"JSON",{stringify:function(e){for(var t,i,n=[e],o=1;arguments.length>o;)n.push(arguments[o++]);if(i=t=n[1],(b(t)||void 0!==e)&&!q(e))return g(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!q(t))return t}),n[1]=t,D.apply(O,n)}}),B.prototype[A]||i(18)(B.prototype,A,B.prototype.valueOf),d(B,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},function(e,t,i){var n=i(26)("meta"),o=i(11),s=i(17),r=i(8).f,a=0,c=Object.isExtensible||function(){return!0},l=!i(5)((function(){return c(Object.preventExtensions({}))})),u=function(e){r(e,n,{value:{i:"O"+ ++a,w:{}}})},d=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,n)){if(!c(e))return"F";if(!t)return"E";u(e)}return e[n].i},getWeak:function(e,t){if(!s(e,n)){if(!c(e))return!0;if(!t)return!1;u(e)}return e[n].w},onFreeze:function(e){return l&&d.NEED&&c(e)&&!s(e,n)&&u(e),e}}},function(e,t,i){var n=i(28);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t){var i=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:i)(e)}},function(e,t,i){var n=i(44)("keys"),o=i(26);e.exports=function(e){return n[e]||(n[e]=o(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,i){var n=i(30),o=i(27),s=i(21),r=i(35),a=i(17),c=i(63),l=Object.getOwnPropertyDescriptor;t.f=i(9)?l:function(e,t){if(e=s(e),t=r(t,!0),c)try{return l(e,t)}catch(i){}if(a(e,t))return o(!n.f.call(e,t),e[t])}},function(e,t,i){"use strict";var n=i(16);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,i){"use strict";var n=i(34),o=i(4),s=i(12),r=i(18),a=i(31),c=i(97),l=i(36),u=i(98),d=i(3)("iterator"),h=!([].keys&&"next"in[].keys()),m=function(){return this};e.exports=function(e,t,i,p,f,_,g){c(i,t,p);var v,b,y,w=function(e){if(!h&&e in M)return M[e];switch(e){case"keys":case"values":return function(){return new i(this,e)}}return function(){return new i(this,e)}},k=t+" Iterator",E="values"==f,x=!1,M=e.prototype,C=M[d]||M["@@iterator"]||f&&M[f],T=C||w(f),S=f?E?w("entries"):T:void 0,P="Array"==t&&M.entries||C;if(P&&(y=u(P.call(new e)))!==Object.prototype&&y.next&&(l(y,k,!0),n||"function"==typeof y[d]||r(y,d,m)),E&&C&&"values"!==C.name&&(x=!0,T=function(){return C.call(this)}),n&&!g||!h&&!x&&M[d]||r(M,d,T),a[t]=T,a[k]=m,f)if(v={values:E?T:w("values"),keys:_?T:w("keys"),entries:S},g)for(b in v)b in M||s(M,b,v[b]);else o(o.P+o.F*(h||x),t,v);return v}},function(e,t,i){var n=i(11),o=i(28),s=i(3)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==o(e))}},function(e,t,i){i(40)("split",2,(function(e,t,n){"use strict";var o=i(55),s=n,r=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var a=void 0===/()??/.exec("")[1];n=function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!o(e))return s.call(i,e,t);var n,c,l,u,d,h=[],m=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,f=void 0===t?4294967295:t>>>0,_=new RegExp(e.source,m+"g");for(a||(n=new RegExp("^"+_.source+"$(?!\\s)",m));(c=_.exec(i))&&!((l=c.index+c[0].length)>p&&(h.push(i.slice(p,c.index)),!a&&c.length>1&&c[0].replace(n,(function(){for(d=1;d<arguments.length-2;d++)void 0===arguments[d]&&(c[d]=void 0)})),c.length>1&&c.index<i.length&&r.apply(h,c.slice(1)),u=c[0].length,p=l,h.length>=f));)_.lastIndex===c.index&&_.lastIndex++;return p===i.length?!u&&_.test("")||h.push(""):h.push(i.slice(p)),h.length>f?h.slice(0,f):h}}else"0".split(void 0,0).length&&(n=function(e,t){return void 0===e&&0===t?[]:s.call(this,e,t)});return[function(i,o){var s=e(this),r=null==i?void 0:i[t];return void 0!==r?r.call(i,s,o):n.call(String(s),i,o)},n]}))},function(e,t,i){"use strict";var n=i(4),o=i(65),s=i(23),r=i(5),a=[].sort,c=[1,2,3];n(n.P+n.F*(r((function(){c.sort(void 0)}))||!r((function(){c.sort(null)}))||!i(109)(a)),"Array",{sort:function(e){return void 0===e?a.call(s(this)):a.call(s(this),o(e))}})},function(e,t,i){var n=i(11),o=i(79).set;e.exports=function(e,t,i){var s,r=t.constructor;return r!==i&&"function"==typeof r&&(s=r.prototype)!==i.prototype&&n(s)&&o&&o(e,s),e}},function(e,t,i){"use strict";e.exports=function n(e,t){if(e===t)return!0;var i,o=Array.isArray(e),s=Array.isArray(t);if(o&&s){if(e.length!=t.length)return!1;for(i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}if(o!=s)return!1;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;var a=e instanceof Date,c=t instanceof Date;if(a&&c)return e.getTime()==t.getTime();if(a!=c)return!1;var l=e instanceof RegExp,u=t instanceof RegExp;if(l&&u)return e.toString()==t.toString();if(l!=u)return!1;for(i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=0;i<r.length;i++)if(!n(e[r[i]],t[r[i]]))return!1;return!0}return!1}},function(e,t,i){"use strict";i.r(t);var n="function"==typeof fetch?fetch.bind():function(e,t){return t=t||{},new Promise((function(i,n){var o=new XMLHttpRequest;for(var s in o.open(t.method||"get",e),t.headers)o.setRequestHeader(s,t.headers[s]);function r(){var e,t=[],i=[],n={};return o.getAllResponseHeaders().replace(/^(.*?):\s*([\s\S]*?)$/gm,(function(o,s,r){t.push(s=s.toLowerCase()),i.push([s,r]),e=n[s],n[s]=e?e+","+r:r})),{ok:1==(o.status/200|0),status:o.status,statusText:o.statusText,url:o.responseURL,clone:r,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},headers:{keys:function(){return t},entries:function(){return i},get:function(e){return n[e.toLowerCase()]},has:function(e){return e.toLowerCase()in n}}}}o.withCredentials="include"==t.credentials,o.onload=function(){i(r())},o.onerror=n,o.send(t.body)}))};t["default"]=n},function(e,t,i){var n=i(7),o=i(24),s=i(34),r=i(62),a=i(8).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=s?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:r.f(e)})}},function(e,t,i){t.f=i(3)},function(e,t,i){e.exports=!i(9)&&!i(5)((function(){return 7!=Object.defineProperty(i(64)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,i){var n=i(11),o=i(7).document,s=n(o)&&n(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,i){var n=i(17),o=i(21),s=i(67)(!1),r=i(49)("IE_PROTO");e.exports=function(e,t){var i,a=o(e),c=0,l=[];for(i in a)i!=r&&n(a,i)&&l.push(i);for(;t.length>c;)n(a,i=t[c++])&&(~s(l,i)||l.push(i));return l}},function(e,t,i){var n=i(21),o=i(29),s=i(68);e.exports=function(e){return function(t,i,r){var a,c=n(t),l=o(c.length),u=s(r,l);if(e&&i!=i){for(;l>u;)if((a=c[u++])!=a)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===i)return e||u||0;return!e&&-1}}},function(e,t,i){var n=i(48),o=Math.max,s=Math.min;e.exports=function(e,t){return(e=n(e))<0?o(e+t,0):s(e,t)}},function(e,t,i){var n=i(28);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,i){var n=i(28),o=i(3)("toStringTag"),s="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,i,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(i){}}(t=Object(e),o))?i:s?n(t):"Object"==(r=n(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,i){"use strict";var n=i(4),o=i(103)(5),s=!0;"find"in[]&&Array(1).find((function(){s=!1})),n(n.P+n.F*s,"Array",{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i(39)("find")},function(e,t,i){var n=i(20),o=i(21),s=i(30).f;e.exports=function(e){return function(t){for(var i,r=o(t),a=n(r),c=a.length,l=0,u=[];c>l;)s.call(r,i=a[l++])&&u.push(e?[i,r[i]]:r[i]);return u}}},function(e,t,i){var n=i(16);e.exports=function(e,t,i,o){try{return o?t(n(i)[0],i[1]):t(i)}catch(r){var s=e["return"];throw void 0!==s&&n(s.call(e)),r}}},function(e,t,i){var n=i(31),o=i(3)("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||s[o]===e)}},function(e,t,i){var n=i(70),o=i(3)("iterator"),s=i(31);e.exports=i(24).getIteratorMethod=function(e){if(null!=e)return e[o]||e["@@iterator"]||s[n(e)]}},function(e,t,i){var n=i(3)("iterator"),o=!1;try{var s=[7][n]();s["return"]=function(){o=!0},Array.from(s,(function(){throw 2}))}catch(r){}e.exports=function(e,t){if(!t&&!o)return!1;var i=!1;try{var s=[7],a=s[n]();a.next=function(){return{done:i=!0}},s[n]=function(){return a},e(s)}catch(r){}return i}},function(e,t){!function(t){"use strict";var i=Object.prototype,n=i.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",r=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag",c="object"==typeof e,l=t.regeneratorRuntime;if(l)c&&(e.exports=l);else{(l=t.regeneratorRuntime=c?e.exports:{}).wrap=b;var u="suspendedStart",d="suspendedYield",h="executing",m="completed",p={},f={};f[s]=function(){return this};var _=Object.getPrototypeOf,g=_&&_(_(I([])));g&&g!==i&&n.call(g,s)&&(f=g);var v=E.prototype=w.prototype=Object.create(f);k.prototype=v.constructor=E,E.constructor=k,E[a]=k.displayName="GeneratorFunction",l.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},l.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(v),e},l.awrap=function(e){return{__await:e}},x(M.prototype),M.prototype[r]=function(){return this},l.AsyncIterator=M,l.async=function(e,t,i,n){var o=new M(b(e,t,i,n));return l.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(v),v[a]="Generator",v[s]=function(){return this},v.toString=function(){return"[object Generator]"},l.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},l.values=I,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,n){return r.type="throw",r.arg=e,t.next=i,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],r=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc"),c=n.call(s,"finallyLoc");if(a&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var r=s?s.completion:{};return r.type=e,r.arg=t,s?(this.method="next",this.next=s.finallyLoc,p):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),S(i),p}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var o=n.arg;S(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:I(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),p}}}function b(e,t,i,n){var o=t&&t.prototype instanceof w?t:w,s=Object.create(o.prototype),r=new P(n||[]);return s._invoke=function(e,t,i){var n=u;return function(o,s){if(n===h)throw new Error("Generator is already running");if(n===m){if("throw"===o)throw s;return B()}for(i.method=o,i.arg=s;;){var r=i.delegate;if(r){var a=C(r,i);if(a){if(a===p)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===u)throw n=m,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=h;var c=y(e,t,i);if("normal"===c.type){if(n=i.done?m:d,c.arg===p)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(n=m,i.method="throw",i.arg=c.arg)}}}(e,i,r),s}function y(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(n){return{type:"throw",arg:n}}}function w(){}function k(){}function E(){}function x(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function M(e){var t;this._invoke=function(i,o){function s(){return new Promise((function(t,s){!function r(t,i,o,s){var a=y(e[t],e,i);if("throw"!==a.type){var c=a.arg,l=c.value;return l&&"object"==typeof l&&n.call(l,"__await")?Promise.resolve(l.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):Promise.resolve(l).then((function(e){c.value=e,o(c)}),s)}s(a.arg)}(i,o,t,s)}))}return t=t?t.then(s,s):s()}}function C(e,t){var i=e.iterator[t.method];if(void 0===i){if(t.delegate=null,"throw"===t.method){if(e.iterator["return"]&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=y(i,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,p;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function I(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:B}}function B(){return{value:void 0,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,i){var n=i(11),o=i(16),s=function(e,t){if(o(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{(n=i(25)(Function.call,i(52).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(o){t=!0}return function(e,i){return s(e,i),t?e.__proto__=i:n(e,i),e}}({},!1):void 0),check:s}},function(e,t,i){"use strict";var n=i(7),o=i(8),s=i(9),r=i(3)("species");e.exports=function(e){var t=n[e];s&&t&&!t[r]&&o.f(t,r,{configurable:!0,get:function(){return this}})}},function(e,t,i){var n=i(12);e.exports=function(e,t,i){for(var o in t)n(e,o,t[o],i);return e}},function(e,t){e.exports=function(e,t,i,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(i+": incorrect invocation!");return e}},function(e,t,i){var n=i(25),o=i(74),s=i(75),r=i(16),a=i(29),c=i(76),l={},u={};(t=e.exports=function(e,t,i,d,h){var m,p,f,_,g=h?function(){return e}:c(e),v=n(i,d,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(s(g)){for(m=a(e.length);m>b;b++)if((_=t?v(r(p=e[b])[0],p[1]):v(e[b]))===l||_===u)return _}else for(f=g.call(e);!(p=f.next()).done;)if((_=o(f,v,p.value,t))===l||_===u)return _}).BREAK=l,t.RETURN=u},function(e,t,i){var n=i(11);e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,i){for(var n=i(2),o=i(20),s=i(12),r=i(7),a=i(18),c=i(31),l=i(3),u=l("iterator"),d=l("toStringTag"),h=c.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=o(m),f=0;f<p.length;f++){var _,g=p[f],v=m[g],b=r[g],y=b&&b.prototype;if(y&&(y[u]||a(y,u,h),y[d]||a(y,d,g),c[g]=h,v))for(_ in n)y[_]||s(y,_,n[_],!0)}},function(e,t,i){i(40)("search",1,(function(e,t,i){return[function(i){"use strict";var n=e(this),o=null==i?void 0:i[t];return void 0!==o?o.call(i,n):new RegExp(i)[t](String(n))},i]}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={update:function(){if("undefined"!=typeof window&&"function"==typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}}),i=function(){};window.addEventListener("testPassiveEventSupport",i,t),window.removeEventListener("testPassiveEventSupport",i,t),n.hasSupport=e}}};n.update(),t["default"]=n},function(e,t,i){i(89),i(90),e.exports=i(124)},function(e,t,i){window.fetch||(window.fetch=i(60)["default"]||i(60))},function(e,t,i){"use strict";i.r(t),i(91)},function(e,t){
/*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
var i=window,n=function(e,t,n,o){var s,r=i.document,a=r.createElement("link");if(t)s=t;else{var c=(r.body||r.getElementsByTagName("head")[0]).childNodes;s=c[c.length-1]}var l=r.styleSheets;a.rel="stylesheet",a.href=e,a.media="only x",function h(e){if(r.body)return e();setTimeout((function(){h(e)}))}((function(){s.parentNode.insertBefore(a,t&&!o?s:s.nextSibling)}));var u=function m(e){for(var t=a.href,i=l.length;i--;)if(l[i].href===t)return e();setTimeout((function(){m(e)}))};function d(){a.addEventListener&&a.removeEventListener("load",d),a.media=n||"all"}return a.addEventListener&&a.addEventListener("load",d),a.onloadcssdefined=u,u(d),a};i.loadCSS=n;
/*! loadCSS rel=preload polyfill. [c]2017 Filament Group, Inc. MIT License */
var o=n.relpreload={};if(o.support=function(){try{return i.document.createElement("link").relList.supports("preload")}catch(e){return!1}},o.poly=function(){for(var e=i.document.getElementsByTagName("link"),t=0;t<e.length;t++){var n=e[t];"preload"===n.rel&&"style"===n.getAttribute("as")&&(i.loadCSS(n.href,n,n.getAttribute("media")),n.rel=null)}},!o.support()){o.poly();var s=i.setInterval(o.poly,300);i.addEventListener&&i.addEventListener("load",(function(){o.poly(),i.clearInterval(s)})),i.attachEvent&&i.attachEvent("onload",(function(){i.clearInterval(s)}))}},function(e,t,i){var n=i(20),o=i(51),s=i(30);e.exports=function(e){var t=n(e),i=o.f;if(i)for(var r,a=i(e),c=s.f,l=0;a.length>l;)c.call(e,r=a[l++])&&t.push(r);return t}},function(e,t,i){var n=i(8),o=i(16),s=i(20);e.exports=i(9)?Object.defineProperties:function(e,t){o(e);for(var i,r=s(t),a=r.length,c=0;a>c;)n.f(e,i=r[c++],t[i]);return e}},function(e,t,i){var n=i(7).document;e.exports=n&&n.documentElement},function(e,t,i){var n=i(21),o=i(38).f,s={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return r&&"[object Window]"==s.call(e)?function(e){try{return o(e)}catch(t){return r.slice()}}(e):o(n(e))}},function(e,t,i){i(9)&&"g"!=/./g.flags&&i(8).f(RegExp.prototype,"flags",{configurable:!0,get:i(53)})},function(e,t,i){"use strict";var n=i(37),o=i(27),s=i(36),r={};i(18)(r,i(3)("iterator"),(function(){return this})),e.exports=function(e,t,i){e.prototype=n(r,{next:o(1,i)}),s(e,t+" Iterator")}},function(e,t,i){var n=i(17),o=i(23),s=i(49)("IE_PROTO"),r=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?r:null}},function(e,t,i){var n=i(4),o=i(24),s=i(5);e.exports=function(e,t){var i=(o.Object||{})[e]||Object[e],r={};r[e]=t(i),n(n.S+n.F*s((function(){i(1)})),"Object",r)}},function(e,t,i){var n=i(55),o=i(22);e.exports=function(e,t,i){if(n(t))throw TypeError("String#"+i+" doesn't accept regex!");return String(o(e))}},function(e,t,i){var n=i(3)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[n]=!1,!"/./"[e](t)}catch(o){}}return!0}},function(e,t,i){"use strict";var n=i(20),o=i(51),s=i(30),r=i(23),a=i(47),c=Object.assign;e.exports=!c||i(5)((function(){var e={},t={},i=Symbol(),n="abcdefghijklmnopqrst";return e[i]=7,n.split("").forEach((function(e){t[e]=e})),7!=c({},e)[i]||Object.keys(c({},t)).join("")!=n}))?function(e,t){for(var i=r(e),c=arguments.length,l=1,u=o.f,d=s.f;c>l;)for(var h,m=a(arguments[l++]),p=u?n(m).concat(u(m)):n(m),f=p.length,_=0;f>_;)d.call(m,h=p[_++])&&(i[h]=m[h]);return i}:c},function(e,t,i){var n=i(25),o=i(47),s=i(23),r=i(29),a=i(104);e.exports=function(e,t){var i=1==e,c=2==e,l=3==e,u=4==e,d=6==e,h=5==e||d,m=t||a;return function(t,a,p){for(var f,_,g=s(t),v=o(g),b=n(a,p,3),y=r(v.length),w=0,k=i?m(t,y):c?m(t,0):void 0;y>w;w++)if((h||w in v)&&(_=b(f=v[w],w,g),e))if(i)k[w]=_;else if(_)switch(e){case 3:return!0;case 5:return f;case 6:return w;case 2:k.push(f)}else if(u)return!1;return d?-1:l||u?u:k}}},function(e,t,i){var n=i(105);e.exports=function(e,t){return new(n(e))(t)}},function(e,t,i){var n=i(11),o=i(69),s=i(3)("species");e.exports=function(e){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)||(t=void 0),n(t)&&null===(t=t[s])&&(t=void 0)),void 0===t?Array:t}},function(e,t,i){var n=i(4);n(n.S,"Object",{is:i(107)})},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,i){var n=i(4),o=i(73)(!0);n(n.S,"Object",{entries:function(e){return o(e)}})},function(e,t,i){"use strict";var n=i(5);e.exports=function(e,t){return!!e&&n((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,i){var n=i(48),o=i(22);e.exports=function(e){return function(t,i){var s,r,a=String(o(t)),c=n(i),l=a.length;return c<0||c>=l?e?"":void 0:(s=a.charCodeAt(c))<55296||s>56319||c+1===l||(r=a.charCodeAt(c+1))<56320||r>57343?e?a.charAt(c):s:e?a.slice(c,c+2):r-56320+(s-55296<<10)+65536}}},function(e,t,i){"use strict";var n=i(25),o=i(4),s=i(23),r=i(74),a=i(75),c=i(29),l=i(112),u=i(76);o(o.S+o.F*!i(77)((function(e){Array.from(e)})),"Array",{from:function(e){var t,i,o,d,h=s(e),m="function"==typeof this?this:Array,p=arguments.length,f=p>1?arguments[1]:void 0,_=void 0!==f,g=0,v=u(h);if(_&&(f=n(f,p>2?arguments[2]:void 0,2)),null==v||m==Array&&a(v))for(i=new m(t=c(h.length));t>g;g++)l(i,g,_?f(h[g],g):h[g]);else for(d=v.call(h),i=new m;!(o=d.next()).done;g++)l(i,g,_?r(d,f,[o.value,g],!0):o.value);return i.length=g,i}})},function(e,t,i){"use strict";var n=i(8),o=i(27);e.exports=function(e,t,i){t in e?n.f(e,t,o(0,i)):e[t]=i}},function(e,t,i){var n=i(4),o=i(5),s=i(22),r=/"/g,a=function(e,t,i,n){var o=String(s(e)),a="<"+t;return""!==i&&(a+=" "+i+'="'+String(n).replace(r,"&quot;")+'"'),a+">"+o+"</"+t+">"};e.exports=function(e,t){var i={};i[e]=t(a),n(n.P+n.F*o((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",i)}},function(e,t,i){var n=i(7),o=i(58),s=i(8).f,r=i(38).f,a=i(55),c=i(53),l=n.RegExp,u=l,d=l.prototype,h=/a/g,m=/a/g,p=new l(h)!==h;if(i(9)&&(!p||i(5)((function(){return m[i(3)("match")]=!1,l(h)!=h||l(m)==m||"/a/i"!=l(h,"i")})))){l=function(e,t){var i=this instanceof l,n=a(e),s=void 0===t;return!i&&n&&e.constructor===l&&s?e:o(p?new u(n&&!s?e.source:e,t):u((n=e instanceof l)?e.source:e,n&&s?c.call(e):t),i?this:d,l)};for(var f=function(e){e in l||s(l,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},_=r(u),g=0;_.length>g;)f(_[g++]);d.constructor=l,l.prototype=d,i(12)(n,"RegExp",l)}i(80)("RegExp")},function(e,t,i){"use strict";var n=i(116),o=i(84);e.exports=i(117)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return n.def(o(this,"Set"),e=0===e?0:e,e)}},n)},function(e,t,i){"use strict";var n=i(8).f,o=i(37),s=i(81),r=i(25),a=i(82),c=i(83),l=i(54),u=i(71),d=i(80),h=i(9),m=i(46).fastKey,p=i(84),f=h?"_s":"size",_=function(e,t){var i,n=m(t);if("F"!==n)return e._i[n];for(i=e._f;i;i=i.n)if(i.k==t)return i};e.exports={getConstructor:function(e,t,i,l){var u=e((function(e,n){a(e,u,t,"_i"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[f]=0,null!=n&&c(n,i,e[l],e)}));return s(u.prototype,{clear:function(){for(var e=p(this,t),i=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete i[n.i];e._f=e._l=void 0,e[f]=0},"delete":function(e){var i=p(this,t),n=_(i,e);if(n){var o=n.n,s=n.p;delete i._i[n.i],n.r=!0,s&&(s.n=o),o&&(o.p=s),i._f==n&&(i._f=o),i._l==n&&(i._l=s),i[f]--}return!!n},forEach:function(e){p(this,t);for(var i,n=r(e,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(n(i.v,i.k,this);i&&i.r;)i=i.p},has:function(e){return!!_(p(this,t),e)}}),h&&n(u.prototype,"size",{get:function(){return p(this,t)[f]}}),u},def:function(e,t,i){var n,o,s=_(e,t);return s?s.v=i:(e._l=s={i:o=m(t,!0),k:t,v:i,p:n=e._l,n:void 0,r:!1},e._f||(e._f=s),n&&(n.n=s),e[f]++,"F"!==o&&(e._i[o]=s)),e},getEntry:_,setStrong:function(e,t,i){l(e,t,(function(e,i){this._t=p(e,t),this._k=i,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?u(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,u(1))}),i?"entries":"values",!i,!0),d(t)}}},function(e,t,i){"use strict";var n=i(7),o=i(4),s=i(12),r=i(81),a=i(46),c=i(83),l=i(82),u=i(11),d=i(5),h=i(77),m=i(36),p=i(58);e.exports=function(e,t,i,f,_,g){var v=n[e],b=v,y=_?"set":"add",w=b&&b.prototype,k={},E=function(e){var t=w[e];s(w,e,"delete"==e||"has"==e?function(e){return!(g&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!u(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,i){return t.call(this,0===e?0:e,i),this})};if("function"==typeof b&&(g||w.forEach&&!d((function(){(new b).entries().next()})))){var x=new b,M=x[y](g?{}:-0,1)!=x,C=d((function(){x.has(1)})),T=h((function(e){new b(e)})),S=!g&&d((function(){for(var e=new b,t=5;t--;)e[y](t,t);return!e.has(-0)}));T||((b=t((function(t,i){l(t,b,e);var n=p(new v,t,b);return null!=i&&c(i,_,n[y],n),n}))).prototype=w,w.constructor=b),(C||S)&&(E("delete"),E("has"),_&&E("get")),(S||M)&&E(y),g&&w.clear&&delete w.clear}else b=f.getConstructor(t,e,_,y),r(b.prototype,i),a.NEED=!0;return m(b,e),k[e]=b,o(o.G+o.W+o.F*(b!=v),k),g||f.setStrong(b,e,_),b}},function(e,t,i){var n=i(4),o=i(22),s=i(5),r=i(119),a="["+r+"]",c=RegExp("^"+a+a+"*"),l=RegExp(a+a+"*$"),u=function(e,t,i){var o={},a=s((function(){return!!r[e]()||""!=""[e]()})),c=o[e]=a?t(d):r[e];i&&(o[i]=c),n(n.P+n.F*a,"String",o)},d=u.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(l,"")),e};e.exports=u},function(e,t){e.exports="\t\n\x0B\f\r \u2028\u2029\ufeff"},function(e,t,i){var n=i(4);n(n.S,"Object",{setPrototypeOf:i(79).set})},function(e,t,i){var n=i(4);n(n.P,"Array",{fill:i(122)}),i(39)("fill")},function(e,t,i){"use strict";var n=i(23),o=i(68),s=i(29);e.exports=function(e){for(var t=n(this),i=s(t.length),r=arguments.length,a=o(r>1?arguments[1]:void 0,i),c=r>2?arguments[2]:void 0,l=void 0===c?i:o(c,i);l>a;)t[a++]=e;return t}},function(e,t,i){var n=i(4),o=i(73)(!1);n(n.S,"Object",{values:function(e){return o(e)}})},function(e,t,i){"use strict";i.r(t),i(43),i(45),i(0);var n,o,s,r,a=function(e,t){return e===t},c=function(e){var t,i=!1;return function(){return i||(i=!0,t=e.apply(void 0,arguments)),t}},l=function(){function e(){this._events={}}var t=e.prototype;return t.on=function(e,t){(this._events[e]||(this._events[e]=[])).push(t)},t.off=function(e,t){var i=this._events[e];if(i){var n=i.indexOf(t);n>=0&&i.splice(n,1)}},t.once=function(e,t){var i=this;this.on(e,t),this.on(e,(function n(){i.off(e,t),i.off(e,n)}))},t.subscribe=function(e,t){var i=this;return this.on(e,t),function(){i.off(e,t)}},t.emit=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var o=this._events[e];o&&o.slice().forEach((function(e){e.apply(void 0,i)}))},e}();i(2),i(6),function(e){e.PackShown="packShown",e.BulkEventLogged="bulkEventLogger",e.ApiResponseTtlExpired="apiResponseTtlExpired",e.ApiResponseErrorTtlExpired="apiResponseErrorTtlExpired",e.NotShownPackUpdated="notShownPackUpdated",e.LastShownPackUpdated="lastShownPackUpdated",e.UpdatePreload="updatePreload"}(n||(n={})),function(e){e.Onboarding="onboarding",e.Export="export",e.Layout="layout",e.More="more",e.Bulk="bulk",e.ClientLogs="client_logs",e.Subs="subs",e.Profile="profile",e.CountryLang="language",e.Blocked="blocked",e.Preferences="preferences",e.Subscribers="subscribers",e.Category="category",e.Categories="categories",e.Suggest="suggest",e.Multisearch="multisearch",e.BlockedSuggest="blocked_suggest",e.VideoRecommend="video_recommend",e.GetVideoPopupData="get_video_popup_data",e.PublisherConfig="publisher_config",e.CommentsCounter="comments_counter",e.CommentsInfos="comments_infos",e.SendAppLinkSms="send_app_link_sms",e.SocialProfile="social_profile",e.SocialActivityFeed="social_activity_feed",e.SocialProfileEdit="social_profile_edit",e.ProfileCompleteOnboarding="profile_complete_onboarding",e.ProfileDeactivate="profile_deactivate",e.ProfileCancelDeactivate="profile_cancel_deactivate",e.AllChannelsLink="all_channels_link",e.CurrentUserInterests="current-user-interests",e.CurrentUserSubscriptions="current-user-subscriptions",e.Teasers="teasers",e.SupportLink="support_link",e.AdArticle="ad_article"}(o||(o={})),function(e){e.SessionCache="cacheStorage",e.MultiSessionCache="multiCacheStorage"}(s||(s={})),function(e){e.Network="network",e.CacheBeforeNetwork="cache-before-network",e.CacheAfterNetwork="cache-after-network"}(r||(r={}));var u={zenFeatures:{},clientExperiments:null,apiResponseValidator:function(){return null},links:Object.keys(o).reduce((function(e,t){return e[t]=null,e}),{}),userInfo:{},cache:{type:s.SessionCache,namespace:"common",isPrefetchEnabled:!0},chromeExtensionId:null,feedFilter:void 0,shouldSendStatsToCoccoc:!1};function d(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,i){return(p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,i){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return i&&m(o,i.prototype),o}).apply(null,arguments)}function f(e){var t="function"==typeof Map?new Map:void 0;return(f=function(e){if(null===e||(i=e,-1===Function.toString.call(i).indexOf("[native code]")))return e;var i;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return p(e,arguments,h(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),m(n,e)})(e)}i(1),i(13),i(19),i(10),i(14);var _,g;!function(e){e.Network="network",e.Logic="logic",e.Unknown="unknown"}(_||(_={})),function(e){e.Front="frontend",e.Backend="backend",e.Unknown="somebody"}(g||(g={}));var v,b,y=function(e){function t(t){var i,n=t.message,o=t.owner,s=t.sourceType,r=t.type;return(i=e.call(this,n)||this).owner=o,i.sourceType=s,i.name="ZenLibLoaderError",i.type=r,i}return d(t,e),t}(f(Error));i(72),i(106),function(e){e.Chromium="chromium",e.Firefox="firefox",e.Edge="edge",e.Legacy="legacy",e.Node="node"}(b||(b={}));var w,k=["Chrome >= 55"],E=["Firefox >= 51"],x=["Edge >= 13"],M=((v={})[b.Chromium]=k,v[b.Firefox]=E,v[b.Edge]=x,v[b.Legacy]=[].concat(k,E,x,["IE >= 11","Android >= 4.4","iOS >= 7"]),v[b.Node]=["Node >= 8"],[{target:b.Chromium,conditions:{browserBase:"Chromium",minBrowserBaseVersion:"55"}},{target:b.Chromium,conditions:{browserBase:"Chrome",minBrowserBaseVersion:"55"}},{target:b.Chromium,conditions:{browserName:"YandexBrowser",minBrowserVersion:"17.3.0.1"}},{target:b.Firefox,conditions:{browserName:"Firefox",minBrowserVersion:"51"}},{target:b.Edge,conditions:{browserName:"Edge",minBrowserVersion:"13"}},{target:b.Legacy,conditions:{browserName:"MSIE",minBrowserVersion:"11"}},{target:b.Legacy,conditions:{browserName:"Edge",minBrowserVersion:"12"}},{target:b.Legacy,conditions:{browserBase:"Chromium",minBrowserBaseVersion:"42"}},{target:b.Legacy,conditions:{browserName:"Firefox",minBrowserVersion:"45"}},{target:b.Legacy,conditions:{browserName:"Safari",minBrowserVersion:"9"}}]),C=[{target:b.Chromium,conditions:{browserBase:"Chromium",minBrowserBaseVersion:"55"}},{target:b.Chromium,conditions:{browserBase:"Chrome",minBrowserBaseVersion:"55"}},{target:b.Chromium,conditions:{browserName:"ChromeMobile",minBrowserVersion:"55",osName:"Android",minOsVersion:"4.4"}},{target:b.Chromium,conditions:{browserName:"YandexBrowser",minBrowserVersion:"17.3.0.1",osName:"Android",minOsVersion:"4.4"}},{target:b.Legacy,conditions:{osName:"Android",minOsVersion:"4.4"}},{target:b.Legacy,conditions:{osName:"iOS",minOsVersion:"7"}}],T=[{target:b.Chromium,conditions:{browserBase:"Chromium",minBrowserBaseVersion:"55"}},{target:b.Chromium,conditions:{browserBase:"Chrome",minBrowserBaseVersion:"55"}},{target:b.Chromium,conditions:{browserName:"ChromeMobile",minBrowserVersion:"55",osName:"Android",minOsVersion:"4.4"}},{target:b.Chromium,conditions:{browserName:"YandexBrowser",minBrowserVersion:"17.3.0.1",osName:"Android",minOsVersion:"4.4"}},{target:b.Legacy,conditions:{osName:"Android",minOsVersion:"4.4"}},{target:b.Legacy,conditions:{osName:"iOS",minOsVersion:"7"}}];!function(e){e[e.Desktop=0]="Desktop",e[e.Tablet=1]="Tablet",e[e.Mobile=2]="Mobile"}(w||(w={}));var S,P,I,B,O,D,j,A,R,N,L,F,U,z,H,W,V,$,q,Y,K,G,X,Z,J,Q,ee,te=function(e){return e.isIzenkit||e.isZenkit?w.Mobile:e.isTablet?w.Tablet:e.isMobile&&e.isTouch?w.Mobile:w.Desktop},ie=(i(108),function(e){return Object.entries(e)}),ne=(i(56),{browserName:"BrowserName",minBrowserVersion:"BrowserVersion",browserBase:"BrowserBase",minBrowserBaseVersion:"BrowserBaseVersion",browserEngine:"BrowserEngine",minBrowserEngineVersion:"BrowserEngineVersion",osName:"OSFamily",minOsVersion:"OSVersion"}),oe=function(e,t){return function(e,t){for(var i=[e,t].map((function(e){return e.split(".").map((function(e){return parseInt(e,10)}))})),n=i[0],o=i[1],s=Math.min(n.length,o.length),r=0;r<s;r++){var a=n[r],c=o[r];if(a!==c)return a>c?1:-1}return 0}(e,t)>=0},se={browserName:Object.is,minBrowserVersion:oe,browserBase:Object.is,minBrowserBaseVersion:oe,browserEngine:Object.is,minBrowserEngineVersion:oe,osName:Object.is,minOsVersion:oe},re=function(e,t){var i=t.find((function(t){var i=t.conditions;return!i||ie(i).every((function(t){var i=t[0],n=t[1],o=e[ne[i]],s=se[i];return!!(n&&o&&s)&&s(String(o),n)}))}));return i?i.target:null},ae=(Object.is,Object.is,Object.is,Object.is,function(e){return function(e){return te(e)===w.Desktop}(e)?re(e,M):null}),ce=function(e){return function(e){return te(e)===w.Tablet}(e)?re(e,C):null},le=function(e){return function(e){return te(e)===w.Mobile}(e)?re(e,T):null},ue={no_amp_links:!0,forced_bulk_stats:!0,blurred_preview:!0,big_card_images:!0,complaints_with_reasons:!0,pass_experiments:!0,video_providers:["yandex-web","youtube","youtube-web"],screen:{dpi:241},need_background_image:!0,color_theme:"white",no_small_auth:!0,need_main_color:!0,need_zen_one_data:!0,interests_supported:!0,return_sources:!0,screens:["feed","category","categories","profile","switchable_subs","suggest","multisearch","blocked","preferences","subscribers","blocked_suggest","video_recommend","language","send_app_link_sms","comments_counter","comments_infos","social_profile","social_activity_feed","social_profile_edit","social_interests_feedback","profile_onboarding_shown","profile_complete_onboarding","profile_deactivate","profile_cancel_deactivate","get_video_popup_data"],stat_params_with_context:!0,carousel_support:!0},de={cachedRenderMordaDesktop:{appName:"cached-render-morda-desktop",bundleName:"app",uatraitsType:"desktop",columnCount:3},cachedRenderMordaTablet:{appName:"cached-render-morda-desktop",bundleName:"app",uatraitsType:"tablet",columnCount:3},cachedRenderMordaDesktopInMobile:{appName:"cached-render-morda-desktop",bundleName:"app",uatraitsType:"mobile",columnCount:3},mordaDesktop:{appName:"morda-desktop",bundleName:"app",uatraitsType:"desktop",columnCount:3},mordaDesktopInMobile:{appName:"morda-desktop",bundleName:"app",uatraitsType:"mobile",columnCount:3},mordaTablet:{appName:"morda-desktop",bundleName:"app",uatraitsType:"tablet",columnCount:3},mordaMobile:{appName:"morda-mobile",bundleName:"app",uatraitsType:"mobile",columnCount:1},defaultDesktop:{appName:"zenlib-desktop",bundleName:"app",uatraitsType:"desktop",columnCount:3},defaultTablet:{appName:"zenlib-desktop",bundleName:"app",uatraitsType:"tablet",columnCount:2},defaultMobile:{appName:"zenlib-mobile",bundleName:"app",uatraitsType:"mobile",columnCount:1},viber:{appName:"viber",bundleName:"app",uatraitsType:"mobile",columnCount:1},yabroMorda:{appName:"yabro-morda",bundleName:"app",uatraitsType:"desktop",columnCount:3},vb:{appName:"vb",bundleName:"app",uatraitsType:"desktop",columnCount:3},coccoc:{appName:"coccoc",bundleName:"app",uatraitsType:"desktop",columnCount:3},modalLib:{appName:"modal-lib-base",bundleName:"modal-lib-base",uatraitsType:"desktop",columnCount:2},litebro:{appName:"litebro",bundleName:"app",uatraitsType:"mobile",columnCount:1},zenlibPubArticleDesktop:{appName:"zenlib-pub-article-desktop",bundleName:"app",uatraitsType:"desktop",columnCount:3},zenlibPubArticleMobile:{appName:"zenlib-pub-article-mobile",bundleName:"app",uatraitsType:"mobile",columnCount:1},activityDesktop:{appName:"site-desktop-lib",bundleName:"site-desktop-lib",uatraitsType:"desktop",columnCount:3},activityTablet:{appName:"site-desktop-lib",bundleName:"site-desktop-lib",uatraitsType:"tablet",columnCount:2},activityMobile:{appName:"site-mobile-lib",bundleName:"site-mobile-lib",uatraitsType:"mobile",columnCount:1}};!function(e){e.Light="white",e.Dark="black"}(S||(S={})),function(e){e.Initial="initial",e.Pending="pending",e.Error="error",e.Success="success"}(P||(P={})),function(e){e.SUBSCRIBED="subscribed",e.BLOCKED="blocked",e.NOT_SUBSCRIBED="not_subscribed"}(I||(I={})),function(e){e.Normal="normal",e.Header="header",e.PinnedCarousel="pinned-carousel"}(B||(B={})),function(e){e.Normal="normal",e.Navbar="navbar",e.AdfoxSmartBanner="adfox-smart-banner",e.BlockFeedBanner="block-feed-banner"}(O||(O={})),function(e){e.Top="top",e.Bottom="bottom"}(D||(D={})),function(e){e.Black="black",e.White="white"}(j||(j={})),function(e){e.App="app",e.More="more",e.Error="error",e.Load="load"}(A||(A={})),function(e){e.NARRATIVE="narrative",e.PROMO="promo",e.SPECIAL="special"}(R||(R={})),function(e){e.Feed="feed",e.Category="category",e.Categories="categories",e.Profile="profile",e.SwitchableSubs="switchable_subs",e.Suggest="suggest",e.Blocked="blocked",e.BlockedSuggest="blocked_suggest",e.VideoRecommend="video_recommend",e.Preferences="preferences",e.Language="language",e.SendAppLinkSms="send_app_link_sms",e.CommentsCounter="comments_counter",e.CommentsInfos="comments_infos",e.GetVideoPopupData="get_video_popup_data"}(N||(N={})),function(e){e.Blur="blur",e.Fade="fade"}(L||(L={})),function(e){e.Pinned="pinned",e.Feed="feed",e.PinnedLib="pinned-lib"}(F||(F={})),function(e){e.Yabro1="yabro-1",e.Generic="generic"}(U||(U={})),function(e){e.Placeholder="Placeholder",e.Zen="Zen"}(z||(z={})),function(e){e.NAV_TOP_FIXED="top-fix",e.NAV_BOTTOM_FIXED="bottom-fix",e.NAV_TOP_FREE="top-free"}(H||(H={})),function(e){e.Coccoc="coccoc",e.Default="default"}(W||(W={})),function(e){e.A1="1a",e.A2="2a",e.B2="2b",e.OLD="old"}(V||(V={})),function(e){e.BIG="big",e.SMALL="small",e.FREE="free"}($||($={})),function(e){e.Suggest="catalog_suggest",e.Carousel="catalog_carousel",e.Category="catalog_category",e.Subs="subscriptions",e.Blocked="profile_blocked",e.Onboarding="onboarding_popup",e.Similar="feed",e.Feed="feed",e.Interest="interest",e.Channel="channel",e.Activity="activity_feed",e.Subscriptions="subscriptions",e.LeftColumn="left_column",e.VideoRecommend="video_recommend"}(q||(q={})),function(e){e.Suggest="suggest",e.Carousel="list_of_categories",e.Category="category",e.Subs="subscriptions",e.Blocked="blocked",e.Onboarding="onboarding_popup",e.Similar="similar",e.Feed="layout",e.Subscribers="user_subscribers",e.LeftColumn="left_column"}(Y||(Y={})),function(e){e.Native="native",e.Main="main",e.Channel="channel",e.Interest="interest",e.Activity="activity",e.Subscriptions="subscriptions"}(K||(K={})),function(e){e.Feed="feed",e.Ok="ok",e.Banned="banned",e.NotFound="not_found"}(G||(G={})),function(e){e.Active="active",e.Sleeping="sleeping",e.Deleted="deleted",e.NotExist="not_exist"}(X||(X={})),function(e){e.SourceSubscribeFromMainFeedCard="1001",e.SourceSubscribeFromFeedbackMenu="1002",e.SourceSubscribeFromCarousel="1003",e.SourceLikeFromFeed="1004",e.SourceSubscribeFormZenLib="4001",e.SourceSubscribeFormZenLibCarousel="4002",e.LikeFormZenLib="4002",e.SourceSubscribeFromPage="6001",e.SourceSubscribeFromPageCard="6002",e.SourceLikeFromPage="6003"}(Z||(Z={})),function(e){e.Like="like",e.Subscribe="subscribe"}(J||(J={})),function(e){e.VideoCardDesktop="video-card-desktop",e.DirectDesktop="direct-desktop",e.Similar="similar",e.IceboardingFeedItem="iceboarding-feed-item",e.HintEula="hint-eula",e.HintPersonal="hint-personal",e.UserQuestion="user-question",e.StarSimilarInterests="star-similar-interests",e.FeaturingPromoCard="featuring-promo-card",e.FeaturingCarousel="featuring-carousel",e.ContentCarousel="content-carousel",e.ProfileOnboardingCardView="profile-onboarding-card-view",e.Delimiter="delimiter",e.Feedback="feedback",e.CardPost="card-post",e.FeedPersonalCarousel="feed-personal-carousel",e.SocialProfileStatus="social-profile-status",e.FeedbackSuggest="feedback-suggest",e.LearnBlockInterests="learn-block-interests",e.SourceBlockText="source-block-text",e.Index="index",e.Modal="modal",e.CardVideo="card-video",e.CardAdsense="card-adsense",e.DirectMobile="direct-mobile",e.AuthCard="auth-card",e.CardToothMobile="card-tooth-mobile",e.VideoMobile="video-mobile",e.LegoNotifier="lego-notifier",e.RumInterceptor="rum-interceptor",e.Interview="interview"}(Q||(Q={})),function(e){e.HeaderMessengerButton="2003",e.ProfileMessengerButton="8001",e.ChannelMessengerButton="6004"}(ee||(ee={}));var he=["clid","lang"],me=function(e,t){t.forEach((function(t){if(!(t in e))throw new y({message:"Option '"+t+"' is not found in loader params.",owner:g.Front,sourceType:_.Logic})}))},pe=function(e){me(e,[])},fe={yabro:pe,yabroMorda:pe};i(57),i(41);var _e,ge,ve,be,ye,we,ke=function(e){if(!e.clid)throw new Error("ZenApi clid is not configured.");var t=e.clid,i=e.referrerClid,n=e.referrerPlace,o=e.countryCode,s=e.contentLangs,r=e.clientExperiments,a=e.zenFeatures,c=e.userInfo;return{clid:t,referrerClid:i,referrerPlace:n,countryCode:o,contentLangs:s,clientExperiments:r,zenFeatures:a,feedFilter:e.feedFilter,isAdblockEnabled:e.isAdblockEnabled,userId:Ee(c),version:"2.544.1"}},Ee=function(e){var t,i=e.oauthToken,n=e.login,o=e.deviceId,s=e.partnerId,r=e.profileId,a=e.yandexuid;return i||n||(t=("; "+document.cookie).match(/; yandex_login=([^;]*)/))&&t[1]||s||o||r||a||function(){var e=("; "+document.cookie).match(/; yandexuid=([^;]*)/);return e&&e[1]}()},xe=["zenFeatures","clientExperiments","contentLangs"],Me=function(e){return"("+(t=ke(e),function(e){var t=0;if(0===e.length)return t;for(var i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}(ie(t).filter((function(e){var t=e[0];return!xe.includes(t)})).sort((function(e,t){var i=e[0],n=t[0];return i.localeCompare(n)})).map((function(e){return e[0]+"="+e[1]})).join("")).toString()+")");var t},Ce={version:"2.544.1",host:"https://zen.yandex.ru/",staticHost:"https://yastatic.net/s3/zen-lib/",initialDisplayedRowsNumber:6,exps:[],isDev:!1,isVideoDisabled:!1,theme:S.Light,criticalBundleTimeout:15e3},Te=function(e){var t=e.uatraits,i=e.uatraitsType,n=e.useLegacy;if(!t&&n)return b.Legacy;var o,s,r,a,c,l,u,d,h,m=(r=(s=t).BrowserName,a=s.BrowserBase,c=s.BrowserVersion,l=s.BrowserBaseVersion,u=s.OSFamily,d=s.OSVersion,h=s.isMobile,r&&"string"==typeof r&&c&&("string"==typeof c||"number"==typeof c)||a&&"string"==typeof a&&l&&("string"==typeof l||"number"==typeof l)||u&&"string"==typeof u&&d&&("string"==typeof d||"number"==typeof d)&&h?{isValid:!0}:{isValid:!1,error:"BrowserName/BrowserBase and BrowserVersion/BrowserBaseVersion are required and must be strings or number"});if(!m.isValid)throw new y({message:"UATraits: "+m.error,owner:g.Front,sourceType:_.Logic});switch(i){case"desktop":o=ae;break;case"tablet":o=ce;break;case"mobile":o=le;break;default:throw new y({message:"No uatraits type",owner:g.Front,sourceType:_.Logic})}var p=o(t);if(!p)throw new y({message:"Zen Library does not support current browser",owner:g.Front,sourceType:_.Logic});return p};function Se(e,t,i,n,o,s,r){try{var a=e[s](r),c=a.value}catch(l){return void i(l)}a.done?t(c):Promise.resolve(c).then(n,o)}function Pe(e){return function(){var t=this,i=arguments;return new Promise((function(n,o){var s=e.apply(t,i);function r(e){Se(s,n,o,r,a,"next",e)}function a(e){Se(s,n,o,r,a,"throw",e)}r(void 0)}))}}function Ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}i(15),i(78),i(32),i(42),i(115),function(e){e.ONE_COLUMN="one_column",e.TWO_COLUMNS="two_column",e.TWO_COLUMN_SMALL_CARDS="two_column_small_cards",e.THREE_COLUMNS="three_column",e.THREE_COLUMNS_FIRST_BIG="three_column_first_big",e.THREE_COLUMNS_SMALL_CARDS="three_column_small_cards",e.THREE_COLUMNS_INFINITY="three_column_infinity"}(ve||(ve={})),function(e){e.CARD_PLACEHOLDER="card-placeholder",e.FEATURING_CAROUSEL="carousel_card",e.COMMENT="comment",e.DIRECT="ad",e.TEXT="text_card",e.IMAGE="image_card",e.FEATURING_PROMO="featuring_promo",e.GIF="gif",e.HINT_EULA="hint_eula",e.HINT_PERSONAL="hint_personal",e.FEEDBACK_SUGGEST="feedback_suggest",e.LEARN_BLOCK_INTERESTS="learn_block_interests",e.ICEBOARDING_GRID="iceboarding-grid",e.PERSONAL_CAROUSEL="personal_carousel",e.CONTENT_CAROUSEL="content_personal_carousel",e.PLACEHOLDER="placeholder",e.POST="post",e.PROFILE_ACTIVITY_ONBOARDING="profile-activity-onboarding",e.SIMILAR_INTERESTS="similar_interests",e.USER_QUESTION="user-feedback-question",e.AUTH="auth",e.DELIMITER="delimiter",e.CARD_FILLER="card_filler",e.SOCIAL_PROFILE_STATUS="social_profile_status",e.SOCIAL_PROFILE_TEXT="social_profile_text",e.RTB="rtb_card",e.ADSENSE="adsense_card",e.GALLERY="gallery"}(be||(be={})),function(e){e.SMALL="small",e.BIG="big",e.FREE="free"}(ye||(ye={})),function(e){e.Left="left",e.Center="center",e.Right="right"}(we||(we={})),be.USER_QUESTION;var Be={columnCount:2,initialDisplayedRowsNumber:6,rowDisplayStep:9},Oe={columnCount:3,initialDisplayedRowsNumber:6,rowDisplayStep:9},De=((_e={})[be.IMAGE]=[ye.SMALL,ye.BIG],_e[be.GALLERY]=[ye.SMALL],_e[be.TEXT]=[ye.SMALL,ye.BIG],_e[be.POST]=[ye.SMALL],_e[be.DIRECT]=[ye.SMALL,ye.BIG],_e[be.HINT_EULA]=[ye.FREE],_e[be.HINT_PERSONAL]=[ye.FREE],_e[be.ICEBOARDING_GRID]=[ye.FREE],_e[be.GIF]=[ye.SMALL,ye.BIG],_e[be.CARD_PLACEHOLDER]=[ye.SMALL,ye.BIG],_e[be.PLACEHOLDER]=[ye.FREE],_e[be.USER_QUESTION]=[ye.FREE],_e[be.SIMILAR_INTERESTS]=[ye.FREE],_e[be.FEATURING_PROMO]=[ye.SMALL],_e[be.FEATURING_CAROUSEL]=[ye.FREE],_e[be.PERSONAL_CAROUSEL]=[ye.FREE],_e[be.CONTENT_CAROUSEL]=[ye.FREE],_e[be.COMMENT]=[ye.SMALL],_e[be.PROFILE_ACTIVITY_ONBOARDING]=[ye.SMALL],_e[be.DELIMITER]=[ye.FREE],_e[be.RTB]=[ye.SMALL,ye.BIG],_e[be.ADSENSE]=[ye.SMALL,ye.BIG],_e[be.CARD_FILLER]=[ye.SMALL,ye.BIG],_e[be.SOCIAL_PROFILE_TEXT]=[ye.FREE],_e[be.SOCIAL_PROFILE_STATUS]=[ye.FREE],_e[be.AUTH]=[ye.SMALL],_e[be.FEEDBACK_SUGGEST]=[ye.FREE],_e[be.LEARN_BLOCK_INTERESTS]=[ye.FREE],(ge={})[ve.ONE_COLUMN]={columnCount:1,initialDisplayedRowsNumber:6,rowDisplayStep:8},ge[ve.TWO_COLUMNS]=Be,ge[ve.TWO_COLUMN_SMALL_CARDS]=Be,ge[ve.THREE_COLUMNS]=Oe,ge[ve.THREE_COLUMNS_FIRST_BIG]=Oe,ge[ve.THREE_COLUMNS_SMALL_CARDS]=Oe,ge[ve.THREE_COLUMNS_INFINITY]=Oe,function(e,t){var i=null,n=function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];null!==i&&window.clearTimeout(i),i=window.setTimeout((function(){i=null,e.apply(void 0,o)}),t)};return n.cancel=function(){null!==i&&clearTimeout(i)},n}),je=function(e){return void 0===e&&(e="item"),e+"_"+Math.random()*Date.now()},Ae=function(e){var t=e.source_id,i=e.image,n=e.background_color,o=e.text_color;return{id:t,image:i,name:e.name,textColor:o,textBackgroundColor:e.name_background_color,imageBackgroundColor:n}},Re=(i(33),function(e){if(e&&e.length){var t=e[0],i=e[1],n=e[2];return{url:t,width:Number(i),height:Number(n)}}}),Ne=(i(120),function(e){return"number"==typeof e}),Le=function(e){return"string"==typeof e},Fe=function(e){return null!==e&&"object"==typeof e},Ue=function(e){return Array.isArray(e)},ze=function(e){function t(i){var n;return(n=e.call(this,i)||this).name=n.constructor.name,Object.setPrototypeOf(Ie(n),t.prototype),n}return d(t,e),t}(f(Error)),He=function(e){return"'"+JSON.stringify(e)+"' with type '"+typeof e+"'"};function We(e,t){var i;if(!e)throw new ze(null!==(i=t)&&void 0!==i?i:"Assert condition failed")}function Ve(e,t){var i;We(Fe(e)&&!Array.isArray(e),null!==(i=t)&&void 0!==i?i:"Expected object type, but receive "+He(e))}function $e(e,t){var i;We(Le(e),null!==(i=t)&&void 0!==i?i:"Expected string type, but receive "+He(e))}i(85),i(121),i(123);var qe=function(e){return Object.keys(e)},Ye=function(e){try{Ve(e);var t=e.bulk_params,i=e.stat_events;return $e(t),Ve(i),{statEvents:(n=i,o=function(e){return We("string"==typeof e,"key '"+e+"' in stat_object must be string, but it's "+typeof e),e},Object.keys(n).reduce((function(e,t){var i=n[t];return e[t]=o(i,t,n),e}),{})),bulkParams:t}}catch(s){return console.error(s),{statEvents:{},bulkParams:""}}var n,o};function Ke(e){if(e)return Object.keys(e).reduce((function(t,i){var n,o=e[i],s=o.bulk_params,r=o.stat_events,a=o.links;return Object.assign({},t,((n={})[i]={bulkParams:s,statEvents:r,links:a},n))}),{})}var Ge,Xe=function(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e},Ze=function(){function e(e){this.isLoose=e,this.path=[]}var t=e.prototype;return t.deepen=function(e,t){this.path.push(e);var i=t();return this.path.pop(),i},t.assert=function(e,t,i){if(!e){var n="Parsing error at "+this.path.join(".")+": expected "+t+", got "+i;if(!this.isLoose)throw new Error(n);console.error(n)}},e}(),Je=function(e){return function(t,i){i.assert(Xe(t),"object",typeof t);for(var n={},o=function(){var o=r[s];n[o]=i.deepen(o,(function(){return(0,e[o])(t[(n=o,n.replace(/[A-Z]/g,(function(e){return"_"+e.toLowerCase()})))],i);var n}))},s=0,r=Object.keys(e);s<r.length;s++)o();return n}},Qe=function(e){return function(t,i){return i.assert("object"==typeof t&&Array.isArray(t),"array",typeof t),t.map((function(t,n){return i.deepen(String(n),(function(){return e(t,i)}))}))}},et=function(e){return function(t,i){return i.assert(typeof t===e,e,typeof t),t}},tt=et("string"),it=et("number"),nt=(et("boolean"),function(e){return function(t,i){return i.assert(t===e,typeof e+" '"+e+"'",typeof t+" '"+t+"'"),e}}),ot=function(e){return function(t,i){return void 0===t?void 0:e(t,i)}},st=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=t.map((function(e){return"'"+e+"'"})).join(", ");return function(e,i){return i.assert("string"==typeof e,"string union",typeof e),i.assert(t.includes(e),"one of ["+n+"]","'"+e+"'"),e}},rt=function(e){return function(t,i){i.assert(Xe(t),"record",typeof t);var n={},o=function(){if(r){if(a>=s.length)return"break";c=s[a++]}else{if((a=s.next()).done)return"break";c=a.value}var o=c;n[o]=i.deepen('"'+o+'"',(function(){return e(t[o],i)}))},s=qe(t),r=Array.isArray(s),a=0;for(s=r?s:s[Symbol.iterator]();;){var c;if("break"===o())break}return n}},at=function(e,t){var i=Object.keys(t).map((function(e){return"'"+e+"'"})).join(", ");return function(n,o){o.assert(Xe(n),"object",typeof n);var s=n[e];return o.assert("string"==typeof s,"value of key '"+e+"' string",typeof s),o.assert(s in t,"value of key '"+e+"' in ["+i+"]",s),(0,t[s])(n,o)}},ct=function(e,t){return e(t,new Ze(!0))},lt=Je({link:tt,preview:tt,width:it,height:it}),ut=function(e){var t,i=e.strongest_id,n=e.public_id,o=e.type,s=e.status,r=e.social_profile_status,a=e.name,c=e.title,l=e.logo,u=e.logo_sizes,d=e.framed_logo,h=e.header_background_image,m=e.logo_background_color,p=e.title_background_color,f=e.title_color,_=e.feed_link,g=e.feed_api_link,v=e.subtitle,b=e.description,y=e.subscribers,w=e.subscriptions,k=e.audience,E=e.social_links,x=e.is_verified,M=e.is_nirvana,C=e.link,T=e.has_new_publications,S=e.subscription_forbidden,P=e.messenger_guid,I=e.user_comments_count,B=e.authors_likes_count,O=e.subscribers_avatars,D=e.allowed_private_messages;return{id:String(i),publicId:n,type:o,status:s,socialProfileStatus:r,name:a,title:c,headerBackgroundImage:h?(t=h,lt(t,new Ze(!1))):void 0,logo:l,subtitle:v,description:b,subscribers:y,subscriptions:w,audience:k,isVerified:x,isNirvana:M,framedLogo:d,logoSizes:u,logoBackgroundColor:m,titleBackgroundColor:p,titleColor:f,feedLink:_,feedApiLink:g,socialLinks:pt(E),link:C,hasNewPublications:T,subscriptionForbidden:S,messengerGuid:P,userCommentsCount:I,authorsLikesCount:B,subscribersAvatars:O,allowedPrivateMessages:D}},dt=function(e){if(e.stat_params){var t,i=null!==(t=Ke(e.stat_params))&&void 0!==t?t:{};return Object.assign({},ut(e.source),i.placeholder)}return Object.assign({},ut(e.source),Ye(e))},ht=function(e){return e.items.map(dt)},mt=function(e){var t=e.source,i=e.bulk_params,n=e.stat_events;return Object.assign({},ut(t),{bulkParams:t.bulk_params||i,statEvents:t.stat_events||n})},pt=function(e){return Array.isArray(e)?e.map((function(e){return{link:e.link,name:e.name,image:e.image,network:e.social_network}})):[]},ft=function(e){return Object.keys(e).reduce((function(t,i){var n=e[i],o=n.text,s=n.text_color,r=n.background_color;return t[i]={text:o,textColor:s,backgroundColor:r},t}),{})},_t=function(e){return{id:e.source.strongest_id,type:e.type,source:mt(e),description:e.description,blurredPreview:e.blurred_preview,background:e.background,mainColor:e.main_color,textColor:e.text_color,feedbackButtons:ft(e.feedback),statEvents:e.stat_events,bulkParams:e.bulk_params,hidden:!1}},gt=function(e){if(e)return"direct"===e.type?function(e){return e.bulk_params||console.error("Expect bulkParams in AdCard. "+JSON.stringify(e)),e.stat_events||console.error("Expect statEvents in AdCard."),{type:"direct",domElemId:e.dom_elem_id,blockId:e.block_id,partnerStatId:e.partner_stat_id,isBig:e.is_big,bulkParams:e.bulk_params,statEvents:e.stat_events,data:e.data,skipToken:e.skip_token}}(e):"adsense"===e.type?{type:"adsense",client:e.client,slot:e.slot,adsenseFormat:e.adsense_format,layoutKey:e.layout_key}:void 0},vt=function(e){Ve(e);var t=e.id,i=e.type,n=e.text;return $e(t),$e(i),$e(n),{id:t,type:i,text:n,isChecked:!1}},bt=function(e){Ve(e);var t=e.id,i=e.type,n=e.text,o=e.stats;return $e(t),$e(i),$e(n),{id:t,type:i,text:n,isChecked:!1,stats:Ye(o)}},yt=function(e){try{if(Fe(e)&&Ue(e.questions))return{questions:e.questions.map((function(e){try{return function(e){return Ve(e),"extended_dislike_feedback"===e.type&&"ask_on_dislike"===e.display_type?function(e){Ve(e);var t=e.id,i=e.type,n=e.display_type,o=e.text,s=e.answers;return $e(t),We("extended_dislike_feedback"===i),We("ask_on_dislike"===n),$e(o),We(Ue(s)),{id:t,type:i,displayType:n,text:o,answers:s.map(bt)}}(e):"zoloka_interest_feedback"===e.type&&"ask_on_click"===e.display_type?function(e){Ve(e);var t=e.id,i=e.type,n=e.display_type,o=e.text,s=e.answers;return $e(t),We("zoloka_interest_feedback"===i),We("ask_on_click"===n),$e(o),We(Ue(s)),{id:t,type:i,displayType:n,text:o,answers:s.map(vt)}}(e):null}(e)}catch(t){return console.error(t),null}})).filter((function(e){return Boolean(e)}))}}catch(t){console.error(t)}},wt=function(e){return Ve(e),["click","like","dislike"].reduce((function(t,i){var n,o=e[i];return o?(Ve(o),$e(o.title),Object.assign({},t,((n={})[i]={title:o.title},n))):t}),{})},kt=function(e){return{id:e.id,title:e.title||"",text:e.text||"",bulkParams:e.bulk_params,statEvents:e.stat_events,source:ut(e.source),creationTime:e.creation_time,actionTime:e.action_time,requireUserData:e.require_user_data,pos:e.pos,receiveTime:Date.now()}},Et=function(e){return Object.assign({ad:gt(e.ad),topAd:gt(e.top_ad),bidFloor:e.bid_floor?Number(e.bid_floor):void 0,domainTitle:e.domain_title,link:e.link,urlHash:e.url_hash,logo:e.logo,image:e.image,bigImage:e.big_card_image||e.image,blurredPreview:e.blurred_preview,cardColors:e.card_colors&&{card:e.card_colors.card,text:e.card_colors.text},reactions:e.reactions?wt(e.reactions):void 0,mainColor:e.main_color,similarLink:e.similar&&e.similar.link,read:e.read,feedback:(t=e,i=t.feedback_info,i?i.is_liked?"liked":i.is_disliked?"disliked":null:null),feedLink:e.source.feed_link,commentsDocumentId:e.comments_document_id,allCommentsLink:e.all_comments_link,oneCommentLink:e.one_comment_link,badges:e.badges},kt(e));var t,i},xt=function(e){return e.image&&e.big_card_image,Object.assign({isPromoted:e.is_promoted,isPromoPublication:e.is_promo_publication,cardBackgroundImage:e.card_background_image,cardBackgroundWhiteImage:e.card_background_white_image,customUserFeedbackData:yt(e.custom_user_feedback_data),rocket:Boolean(e.zen_logo),pixels:e.pixels},Et(e))},Mt=function(e){return{json:e.json,length:e.length}},Ct=function(e){return{link:e.link,preview:e.preview,width:e.width,height:e.height}};!function(e){e.external="external",e.video="video",e.article="article",e.market="market",e.beru="beru"}(Ge||(Ge={}));var Tt,St=function(e){if(e){var t=e.button_name,i=e.description,n=e.logo,o=e.title,s=e.url,r=e.url_type,a=e.type,c=e.price_url,l=e.video_call_to_action_timestamp;return{buttonName:t,description:i,logo:n?{logoUrl:n.url,mainColor:n.main_color}:void 0,title:o,url:s,urlType:r,type:a,priceUrl:c,appearanceTime:l}}},Pt=function(e){e.image&&!e.big_card_image&&console.warn("no big_card_image",e);var t,i,n,o,s,r,a,c,l,u,d,h,m,p,f,_,g,v,b,y=Ke(e.stat_params);return Object.assign({type:be.GIF,video:(t=e.video,o=t.has_sound,s=t.heartbeat_pos,r=t.id,a=t.loop,c=t.player,l=t.provider,u=t.userAgent,d=t.video_info,h=t.additional_params,m=t.replay_count,p=void 0===m?2:m,f=t.autoplay,_=t.width,g=t.height,v=t.duration,b=t.ad,{hasSound:o,heartbeatTimes:s,id:r,loop:a,player:c,provider:l,userAgent:u,videoInfo:d?Bt(d):{},additionalParams:It(h),autoplay:f,replayCount:p,width:_,height:g,duration:v,adConfig:b&&(i=b,n=i.page_id,{partnerId:n?parseInt(n,10):void 0,category:1016,hasPreroll:!1})}),stats:e.stats,channelOwnerUid:parseInt(e.channel_owner_uid,10),publisherId:e.publisher_id,publicationId:e.publication_id,commentsToken:e.comments_token,callToAction:St(e.call_to_action),statParams:y,subscribeTriggerEvent:e.subscribeTriggerEvent||"click"},Et(e))},It=function(e){var t=e.partner_stat_id;return{from:e.from,"video-content-id":e.video_content_id,"partner-stat-id":t}},Bt=function(e){return{videoContentId:e.video_content_id}},Ot=function(e){return{id:e.source.strongest_id,type:e.type,source:ut(e.source),statEvents:e.stat_events,bulkParams:e.bulk_params,hidden:!1}},Dt=function(e){if(e.items&&e.items.length){var t=e.items.map(Ot);if(!(t.filter((function(e){return"subscribed"!==e.source.status})).length<5))return{id:e.id,type:be.PERSONAL_CAROUSEL,size:e.size,title:e.title,subtitle:e.subtitle,background:e.background,showMoreLink:e.show_more_link,items:t,statEvents:e.stat_events,bulkParams:e.bulk_params,disableItemsClickable:Boolean(e.disable_items_clickable),hidden:!1}}},jt=function(e){return Object.assign({image:e.image,link:e.link,cardColors:{button:e.card_colors.button,buttonText:e.card_colors.button_text,card:e.card_colors.card,text:e.card_colors.text}},kt(e),{hidden:!1})},At=function(e){var t=0,i=function(){return""+t++},n=function(e){return e.reduce((function(e,t){return"text"===t.type&&""!==t.data&&e.push({type:"text",data:t.data,key:i()}),e}),[])},o=e.reduce((function(e,t){var o;return"tag"===t.type&&"br"===t.name&&(e.res.push({type:"p",children:e.currentP,key:i()}),e.res.push({type:"space",children:[],key:i()}),e.currentP=[]),"tag"===t.type&&"a"===t.name&&"tag-with-star"===t.attribs.type?(e.currentP.push({type:"star-tag",href:t.attribs.href,tagId:t.attribs.tag_id,children:n(t.children),key:i()}),e):("tag"===t.type&&"a"===t.name&&e.currentP.push({type:"link",href:t.attribs.href,children:n(t.children),key:i()}),(o=e.currentP).push.apply(o,n([t])),e)}),{res:[],currentP:[]});return o.currentP.length&&o.res.push({type:"p",children:o.currentP,key:i()}),o.res},Rt=function(e){return{width:e.width,height:e.height,link:e.link,preview:e.preview,blurredLink:e.blurred_link}},Nt=function(e){return Array.isArray(e)?e.reduce((function(e,t){var i=function(e){switch(e.type){case"image":return Lt(e);case"ad":return function(e){var t=e.items;if(!Array.isArray(t)||"direct"!==t[0].provider)return console.error("Gallery: not correct ad format."),null;var i=t[0];return{type:"ad",data:{type:"direct",blockId:i.data&&i.data.block_id,statId:i.data&&i.data.stat_id,domElemId:Date.now().toString(36).slice(0,16)+"_"+Math.random().toString(36).slice(2,18)}}}(e);default:return null}}(t);return null!==i&&e.push(i),e}),[]):(console.error("Gallery: empty items field."),[])},Lt=function(e){return{image:Rt(e.image),galleryText:e.rich_text&&At(Mt(e.rich_text).json),bulkParams:e.bulk_params,statEvents:e.stat_events,mainColor:e.main_color,hasBadImage:e.has_bad_image,hasBadText:e.has_bad_text,type:"image"}},Ft=((Tt={})["card-placeholder"]=function(e){return{id:e.item_id.toString(),type:be.CARD_PLACEHOLDER,statEvents:e.stat_events,bulkParams:e.bulk_params}},Tt.comment=function(e){return Object.assign({type:be.COMMENT,comment:e.comment,author:e.author},kt(e))},Tt.ad=function(e){if(!(e&&e.items&&e.items[0])||"direct"===e.items[0].provider&&e.items[0].content){var t=e.items[0],i=t.content,n=t.stat_events,o=t.bulk_params;return{id:je(be.DIRECT),type:be.DIRECT,url:i.url,showUrl:i.linkHead+i.linkTail,domain:i.domain,title:i.title||"",text:i.body,age:i.age,warning:i.warning,imageData:Re(i.image),statEvents:n,bulkParams:o}}console.error("Ad parsing error: "+JSON.stringify(e))},Tt.card=function(e){return e.image?Object.assign({},xt(e),{type:be.IMAGE,hasImage:!0,rawItem:e}):Object.assign({},xt(e),{type:be.TEXT,hasImage:!1,rawItem:e})},Tt.featuring_promo=function(e){return{id:e.id,type:be.FEATURING_PROMO,source:mt(e),header:e.header,description:e.description,blurredPreview:e.blurred_preview,background:e.background,mainColor:e.main_color,textColor:e.text_color,menu:e.menu,feedbackButtons:ft(e.feedback),statEvents:e.stat_events,bulkParams:e.bulk_params}},Tt.gif=Pt,Tt.hint_eula=function(e){return e.hint_type&&"eula"!==e.hint_type?function(e){return{id:e.id,type:be.HINT_PERSONAL}}(e):function(e){return{id:e.id,type:be.HINT_EULA,link:e.link,linkText:e.link_text,additionalLink:e.additional_link,additionalLinkText:e.additional_link_text,html:e.html,text:e.text,bulkParams:e.bulk_params,statEvents:e.stat_events}}(e)},Tt.feedback_suggest=function(e){return{id:je(be.FEEDBACK_SUGGEST),type:be.FEEDBACK_SUGGEST,rawItem:e}},Tt.learn_block_interests=function(e){return{id:je(be.LEARN_BLOCK_INTERESTS),type:be.LEARN_BLOCK_INTERESTS,rawItem:e}},Tt["iceboarding-grid"]=function(e){var t={id:je(be.ICEBOARDING_GRID),type:e.type,sources:e.sources.map(Ae),stats:e.stats,moreButton:void 0,bulkParams:e.bulk_params,statEvents:e.stat_events};return e.more_button&&(t.moreButton={link:e.more_button.click}),t},Tt.gallery=function(e){return{type:be.GALLERY,id:e.id,items:Nt(e.items),similarLink:e.similar&&e.similar.link,galleryText:e.rich_text&&At(Mt(e.rich_text).json),bulkParams:e.bulk_params,statEvents:e.stat_events,pixels:e.pixels,link:e.link,source:ut(e.source),customUserFeedbackData:yt(e.custom_user_feedback_data),feedback:e.feedback_status,domainTitle:e.source.title,hasBadText:e.has_bad_text,ad:gt(e.ad),bidFloor:e.bid_floor?Number(e.bid_floor):void 0,receiveTime:Date.now()}},Tt.placeholder=function(e){return{id:e.item_id.toString(),type:be.PLACEHOLDER,statEvents:e.stat_events,bulkParams:e.bulk_params}},Tt.post=function(e){var t,i,n,o,s,r={type:be.POST,id:e.id,style:(t=e.style,i=t.background,n=t.background_color,o=t.text_color,s=t.link_color,{background:Ct(i),backgroundColor:n,textColor:o,linkColor:s}),link:e.link,urlHash:e.url_hash,similarLink:e.similar_link,source:ut(e.source),pixels:e.pixels,bulkParams:e.bulk_params,statEvents:e.stat_events,ad:gt(e.ad),bidFloor:e.bid_floor?Number(e.bid_floor):void 0,commentsDocumentId:e.comments_document_id,allCommentsLink:e.all_comments_link,oneCommentLink:e.one_comment_link,badges:e.badges,requireUserData:e.require_user_data,read:e.was_read,feedback:e.feedback_status,domainTitle:e.source.title,receiveTime:Date.now(),reactions:e.reactions?wt(e.reactions):void 0};return e.rich_text&&(r.richText=Mt(e.rich_text)),e.image&&(r.image=Ct(e.image)),r},Tt.similar_interests=function(e){var t=e.id,i=e.type,n=e.title,o=e.items;return{id:t,type:i,title:n,socialPrivacy:e.social_privacy,items:o.map((function(e){return dt({stat_events:e.stat_events,bulk_params:e.stat_events,source:e,stat_params:e.stat_params})}))}},Tt.auth=function(e){return{id:String(e.id),type:be.AUTH,title:e.title,text:e.text,authLink:e.auth_link,bulkParams:e.bulk_params,statEvents:e.stat_events}},Tt.carousel_card=function(e){return{id:e.id,type:be.FEATURING_CAROUSEL,carouselType:e.carousel_type,title:e.title,subtitle:e.subtitle,menu:e.menu,items:e.items.map(_t),statEvents:e.stat_events,bulkParams:e.bulk_params,hidden:!1}},Tt.personal_carousel=Dt,Tt.content_personal_carousel=function(e){return{id:e.id,type:be.CONTENT_CAROUSEL,carouselType:e.carousel_type,title:e.title,titleTemplate:e.title_template,subtitle:e.subtitle,source:e.source?Object.assign({},ut(e.source),Ye(e.source)):void 0,items:e.items.map(jt),statEvents:e.stat_events,bulkParams:e.bulk_params,hidden:!1}},Tt.delimiter=function(e){return{id:e.id,type:be.DELIMITER,text:e.text}},Tt.card_filler=function(e){return{id:e.id,type:be.CARD_FILLER}},Tt["profile-activity-onboarding"]=function(e){return{type:be.PROFILE_ACTIVITY_ONBOARDING,mode:e.mode,id:e.id}},Tt.social_profile_status=function(e){return{id:String(e.id),type:be.SOCIAL_PROFILE_STATUS}},Tt.social_profile_text=function(e){return{id:String(e.id),type:be.SOCIAL_PROFILE_TEXT,kind:e.kind}},Tt),Ut=function(e){var t,i,n=(t=Ft,i=e.type,t[i]);return n?n(e):(console.warn("Unsupported doc type: "+e.type),null)};i(86);var zt,Ht,Wt,Vt,$t=function(e){return e.map((function(e){return Object.assign({},mt({source:e}),{isFromServer:!0})}))},qt=function(e){if(!e)return null;switch(e.status){case"complete":var t=e.result&&e.result.items||[];return{status:"complete",result:$t(t)};case"error":return e;default:return{status:"error"}}},Yt=function(e){if(!e)return null;switch(e.status){case"complete":var t=e.result&&e.result.items||[];return{status:"complete",result:$t(t).filter((function(e){return"domain"===e.type||"publisher"===e.type}))};case"error":return e;default:return{status:"error"}}},Kt=rt(tt),Gt=Je({id:tt,type:nt("message"),title:tt,autoCloseTimeout:ot(it),statEvents:Kt,bulkParams:tt}),Xt=Je({id:tt,title:tt,imageSrc:tt,nextScreenId:ot(tt)}),Zt=Je({id:tt,type:nt("single_choice_image"),title:tt,subtitle:ot(tt),direction:st("row","column"),answers:Qe(Xt),statEvents:Kt,bulkParams:tt}),Jt=Je({id:tt,title:tt}),Qt=Je({text:tt,nextScreenId:ot(tt)}),ei=Je({id:tt,type:nt("multi_choice_text"),title:tt,subtitle:ot(tt),answers:Qe(Jt),minAnswersError:tt,minAnswersCount:it,submitButton:Qt,alternativeButton:ot(Qt),statEvents:Kt,bulkParams:tt}),ti=Je({showOnPosition:it,screenMap:rt(at("type",((zt={}).message=Gt,zt.single_choice_image=Zt,zt.multi_choice_text=ei,zt))),initialScreenId:tt}),ii=Je({id:tt,title:tt,text:tt,buttonText:tt,alternativeButtonText:tt,gifSource:tt}),ni=Je({reasons:Qe(Je({id:tt,text:tt})),link:ot(tt)}),oi=function(e){if(e)return ct(ni,e),Object.assign({},e,{link:e.link||"https://yandex.ru/support/abuse/troubleshooting/zen/list.html"})},si=function(e,t){return void 0===t&&(t=""),Object.assign({},e,function(e,t){var i,n,o,s,r=function(e,t,i){if(!e)return null;var n=e.reduce((function(e,n){if(n){var o=Ut(n);o&&e.push(Object.assign({},o,{packId:t,cacheId:i}))}return e}),[]);return n.length>0?n:null}(e.items,e.rid,t),a=(n=e.interests_onboarding)?Object.assign({sources:ht(n)},(Ke(n.stat_params)||{}).interests_onboarding):null,c=function(e){return e&&Dt(e)||null}(e.pinned_carousel),l=function(e){if(!e)return{status:G.Feed};switch(e.status){case G.Banned:case G.NotFound:return{status:e.status};case G.Ok:var t=e.social_profile_status,i=e.social_csrf_token;return{status:G.Ok,socialProfileStatus:t,socialCsrfToken:i,source:mt(e)};default:return console.error("Broken channel from backend"),{status:G.Feed}}}(e.channel);return{id:e.rid,cacheId:t,receivedAt:e.received_at,ttl:1e3*e.ttl,storeTtl:1e3*e.store_ttl,source:e.sf,adFlightId:e.ad_flight_id,adArticleId:e.ad_article_id,publisherId:e.publisher_id,adSecdata:e.ad_secdata,channel:l,items:r,onboardingInterests:a,pinnedCarousel:c,isIceStart:e.ice_start,feedbackCacheClean:Boolean(e.feedback_cache_clean),experimentsData:e.experiments_data||null,groupIds:e.group_ids||"",clientDefinition:e.client_definition||null,user:(o=e.user,s={lastSawFeed:{zenApp:null,zenAppIos:null},serverTime:null},o&&(o.last_saw_feed&&(s.lastSawFeed.zenApp=o.last_saw_feed.zen_app,s.lastSawFeed.zenAppIos=o.last_saw_feed.zen_app_ios),s.serverTime=o.server_time),s),currentUserInterests:qt(e.current_user_interests),currentUserSubscriptions:Yt(e.current_user_subscriptions),screens:e.screens,banner:e.banner,complaints:oi(e.complaints),bulk:e.bulk,more:{link:null===(i=e.more)||void 0===i?void 0:i.link},onboarding:e.onboarding?{link:e.onboarding.link}:void 0,interview:e.interview?ct(ti,e.interview):void 0,newSearchPopup:e.new_search_popup?ct(ii,e.new_search_popup):void 0}}(e,t))},ri=function(e){return{externalUrl:e.external_url}},ai={"user-info":function(e){return{userInfo:(t=e,{email:t.email,name:t.name,avatar:t.avatar})};var t},"no-user":function(e){return{noUser:ri(e)}},"blocked-count":function(e){return{blockedCount:(t=e,{count:t.count,externalUrl:t.external_url})};var t},video:function(e){return{video:(t=e,{statEvents:t.stat_events,bulkParams:t.bulk_params,disabled:t.disabled})};var t},autoplay:function(){return{autoplay:{}}},language:function(e){return{language:(t=e,{country:t.country,externalUrl:t.external_url})};var t},feedback:function(e){return{feedback:ri(e)}},eula:function(e){return{eula:ri(e)}},logout:function(e){return{logout:ri(e)}}},ci=function(e){return{link:e.link,title:e.title,image:e.image,name:e.name,statEvents:e.stat_events,bulkParams:e.bulk_params}},li=function(e){var t,i=e.items.filter((function(e){return"carousel"===e.type})).map((function(e){return e.sources})),n=[];0!==i.length&&(n=(t=[]).concat.apply(t,i).map(dt));var o,s,r=e.items.filter((function(e){return"list_item"===e.type})).map(ci);return{sources:n,list:(o=r,s=function(e){return e.name},o.reduce((function(e,t){return e[s(t)]=t,e}),{}))}},ui=function(e){var t={};return Object.keys(e).forEach((function(i){t[i]={count:e[i],id:void 0,text:void 0,authorName:void 0,authorAvatar:void 0}})),t},di=function(e){var t={};return Object.keys(e).forEach((function(i){var n=e[i];t[i]={count:n.count,id:n.id,text:n.text,authorName:n.authorName,authorAvatar:n.authorAvatar}})),t},hi=function(e){return e&&"object"==typeof e&&"captcha"in e},mi=function(e,t){return Ve(e),We(Array.isArray(e.items)),e.items.reduce((function(e,i){Ve(i);var n=Ut(Object.assign({},i,{id:je("similar_mobile"),pos:t}));return n?[].concat(e,[n]):e}),[]).filter((function(e){return e}))};!function(e){e.Default="default",e.Reload="reload",e.NoCache="no-cache",e.NoStore="no-store"}(Ht||(Ht={})),function(e){e.GetBeforeNetwork="GET_BEFORE_NETWORK",e.PutAfterNetwork="PUT_AFTER_NETWORK",e.GetAfterNetwork="GET_AFTER_NETWORK"}(Vt||(Vt={}));var pi,fi,_i,gi,vi,bi,yi=((Wt={})[Ht.Default]=[Vt.GetBeforeNetwork,Vt.PutAfterNetwork,Vt.GetAfterNetwork],Wt[Ht.Reload]=[Vt.PutAfterNetwork,Vt.GetAfterNetwork],Wt[Ht.NoCache]=[Vt.PutAfterNetwork],Wt[Ht.NoStore]=[],Wt),wi=function(e){var t=yi[e];if(!t)throw new Error("Cache mode '"+e+"' is not exist.");return function(e){return t.includes(e)}},ki="undefined"!=typeof document&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),Ei=null,xi=function(e,t){return(ki?(Ei||(Ei=new Promise((function(e,t){var i=ki.open("zen-db",1);i.onerror=function(){t(i.error)},i.onupgradeneeded=function(){i.result.createObjectStore("zen-api-cache")},i.onsuccess=function(){e(i.result),i.result.onclose=function(){Ei=null}}}))),Ei):Promise.reject(new Error("indexedDB is not supported."))).then((function(i){return new Promise((function(n,o){var s=i.transaction("zen-api-cache",e);s.oncomplete=function(){n()},s.onerror=function(){o(s.error||new Error("IDB transaction error"))},t(s.objectStore("zen-api-cache"))}))}))},Mi={get:function(e){return function(e){var t;return xi("readonly",(function(i){t=i.get(e)})).then((function(){return t.result}))}(e)},put:function(e,t){return function(e,t){return xi("readwrite",(function(i){i.put(t,e)}))}(e,t)},remove:function(e){return function(e){return xi("readwrite",(function(t){t["delete"](e)}))}(e)},isEnabled:function(){return Boolean("undefined"!=typeof document&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB))},keys:function(){return(e=[],xi("readonly",(function(t){var i=t.openKeyCursor?t.openKeyCursor():t.openCursor();i.onsuccess=function(){i.result&&(e.push(i.result.key),i.result["continue"]())}})).then((function(){return e}))).then((function(e){var t=[];return e.forEach((function(e){Le(e)&&t.push(e)})),t}));var e}},Ci=(pi={},{get:function(e){return Promise.resolve(pi[e])},put:function(e,t){return pi[e]=t,Promise.resolve()},remove:function(e){return delete pi[e],Promise.resolve()},isEnabled:function(){return!0},keys:function(){return Promise.resolve(Object.keys(pi))}}),Ti=function(e){function t(t){return e.call(this,function(e){return"ZenApiCache: "+e}(t))||this}return d(t,e),t}(f(Error)),Si=function(e){return e.keys().then((function(t){return t.length<25?[]:Pi(e,t)})).then((function(t){var i=t.sort((function(e,t){var i=e.record;return t.record.apiResponse.received_at-i.apiResponse.received_at})).splice(11).map((function(t){var i=t.key;return e.remove(i)}));return Promise.all(i)}))},Pi=function(e,t){return Promise.all(t.map((function(t){return e.get(t).then((function(e){return{record:e,key:t}}))})))},Ii=function(e){try{return decodeURIComponent(e)}catch(t){return null}},Bi=/[?&]([^&#]*)/,Oi=function(e){var t={},i=e.indexOf("?");if(-1===i)return t;for(var n=i;;){var o=e.slice(n).match(Bi);if(!o)break;n+=o[0].length;var s=o[1].split("="),r=s[0],a=s[1];if(r&&a){var c=Ii(r),l=Ii(a);c&&l&&(t[c]=l)}}return t},Di=function(e,t){var i=Object.assign({},Oi(e),t),n=e.indexOf("?"),o=e.indexOf("#"),s=-1!==o?o:e.length,r=-1!==n?n:s;return e.slice(0,r)+function(e){var t=qe(e);return 0===t.length?"":t.reduce((function(t,i){var n=e[i];return i&&void 0!==n?t+(0===t.length?"?":"&")+encodeURIComponent(i)+"="+encodeURIComponent(n):t}),"")}(i)+e.slice(s)},ji=function(e){var t=e.ok,i=e.url,n=e.status,o=e.statusText;if(!t)throw new Error(i+" "+n+" ("+o+")");return function(e){var t=e.headers.get("Content-Type");return t&&-1!==t.indexOf("application/json")?e.json():e.text()}(e)},Ai=function(e,t){void 0===t&&(t={});var i=t,n=i.params,o=i.timeout,s=void 0===o?6e4:o,r=i.credentials,a=void 0===r?"include":r,c=function(e,t){if(null==e)return{};var i,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(o[i]=e[i]);return o}(i,["params","timeout","credentials"]),l=n?Di(e,n):e;return new Promise((function(e,t){fetch(l,Object.assign({credentials:a},c)).then(ji).then(e,t),function(e){return new Promise((function(t){setTimeout(t,e)}))}(s).then((function(){t(new Error("Request timeout."))}))}))},Ri=function(e,t){return void 0===t&&(t={}),Ai(e,Object.assign({},t,{method:"GET",params:Object.assign({},t.params||{},{rnd:String(Date.now())})}))},Ni=function(e){void 0===e&&(e={});var t=Object.assign({Accept:"application/json"},e.headers),i=e.method,n=void 0===i?"POST":i,o=e.body;return t["Content-Type"]||(t["Content-Type"]="application/json",o&&"string"!=typeof o&&(o=JSON.stringify(o))),Object.assign({},e,{method:n,headers:t,body:o})},Li=function(e,t){return void 0===t&&(t={}),Ai(e,Ni(t))},Fi=function(e,t){return void 0===t&&(t={}),Ai(e,Ni(t))},Ui=function(e){var t,i,n=e.clid,o=e.referrerClid,s=e.referrerPlace,r=e.countryCode,a="undefined"!=typeof window?(t=window.location.href,{experiment:(i=Oi(t)).experiment,excludeExperiments:i.excludeExperiments,telemetry:i.telemetry}):{};return Object.assign({},a,{clid:n,country_code:r,referrer_clid:o,referrer_place:s})},zi=((fi={})[o.Export]="export",fi[o.Layout]="layout",fi[o.Teasers]="teasers",fi[o.PublisherConfig]="publisher-config",fi[o.CurrentUserSubscriptions]="current-user-subscriptions",fi[o.AdArticle]="ad-article",fi),Hi=((_i={})[o.CurrentUserInterests]="api/social/current-user-interests",_i),Wi=function(e){function t(){return e.apply(this,arguments)||this}return d(t,e),t}(f(Error)),Vi=function(e,t,i){var n,o,s,r,a,c,l,u,d,h,m,p,f,_,g,v=zi[e];if(v){var b=Yi(t),y=(o=(n=b).clid,s=n.referrerClid,r=n.referrerPlace,a=n.countryCode,c=n.contentLangs,l=void 0===c?[]:c,u=n.channelName,d=n.channelId,h=n.interestName,m=n.socialProfileId,p=n.feedFilterType,f=n.userInfo,_=void 0===f?{}:f,g=n.articleId,Object.assign({},Ui({clid:o,referrerClid:s,referrerPlace:r,countryCode:a}),function(e){var t={};return e.partnerId&&(t.partner_user_id=String(e.partnerId)),e.adId&&(t.user_ad_id=String(e.adId)),t}(_),function(e){var t={};return e&&e.length&&(t.content_langs=e.join(",")),t}(l),{channel_name:u,channel_id:d,interest_name:h,social_profile_id:m,feed_filter_type:p,article_id:g}));return $i(b.host,v,y)}var w=Hi[e];if(w){var k=Yi(t),E=Ui(k);return qi(k.host,w,E)}var x=i&&i[e];if(!x)throw new Wi("ZenApi "+e+" url is not configured.");return x},$i=function(e,t,i){return Di(e+"api/v3/launcher/"+t,i)},qi=function(e,t,i){return Di(""+e+t,i)},Yi=function(e){if(!e.clid)throw new Wi("ZenApi clid is not configured.");if(!e.host)throw new Wi("ZenApi host is not configured.");return{host:e.host,clid:e.clid,countryCode:e.countryCode||void 0,columnCount:e.columnCount,contentLangs:e.contentLangs,referrerClid:e.referrerClid,referrerPlace:e.referrerPlace,userInfo:e.userInfo,channelName:e.channelName,interestName:e.interestName,channelId:e.channelId,socialProfileId:e.socialProfileId,feedFilterType:e.feedFilterType,articleId:e.articleId}},Ki=function(e,t,i){var n=function(e,t){var i,n,o,s,r,a=e.method,c=e.params,l=e.mode,u=e.headers,d={params:c,headers:Object.assign({},t?(i=t,n=i.userInfo,o=i.zenFeatures,s=i.clientExperiments,r={},n&&n.oauthToken&&(r.Authorization="OAuth "+n.oauthToken),Object.keys(o||{}).length>0&&(r["Zen-Features"]=JSON.stringify(o)),r["Zen-Client-Experiments"]=["zen-version:2.544.1"].concat(Array.isArray(s)&&s.length>0?s:[]).join(", "),r["X-ZenLib-Version"]="2.544.1",r):{},u),mode:l,method:a};return e.body?Object.assign({},d,{body:e.body}):d}(t,i),o=n.method,s=n.body,r=Gi(o,s);return Xi(r)(e,n)},Gi=function(e,t){return e?t&&"GET"===e?"POST":e:t?"POST":"GET"},Xi=function(e){switch(e){case"PUT":return Fi;case"POST":return Li;case"GET":default:return Ri}},Zi=i(59),Ji=i.n(Zi),Qi=function(e,t){for(var i=Object.keys(e),n={},o=0;o<i.length;o++){var s=i[o];t.includes(s)||(n[s]=e[s])}return n},en=function(e){function t(t){var i;return i=e.call(this,null==t?void 0:t.message)||this,(null==t?void 0:t.type)&&(i.type=t.type),(null==t?void 0:t.ttl)&&(i.ttl=t.ttl),(null==t?void 0:t.rid)&&(i.rid=t.rid),(null==t?void 0:t.receivedAt)&&(i.receivedAt=t.receivedAt),i}return d(t,e),t.prototype.toString=function(){return"ZenApiValidationError: '"+this.message+"'; "+JSON.stringify({type:this.type,ttl:this.ttl,rid:this.rid,receivedAt:this.receivedAt})},t}(f(Error)),tn=function(e){if(!(e&&e.type&&e.apiResponse&&e.params&&"2.544.1"===e.params.version))throw new Ti("Invalid cache record scheme.")},nn=function(e){if(!e||!e.items)throw new Ti("Invalid api response to put in cache.")},on=function(e){return Ne(e)||Le(e)},sn=function(e){rn(e),cn(e)},rn=function(e){if(!an(e))throw new en({message:"Validation error. No items in ApiResponse",ttl:e.ttl,type:e.errorType,rid:e.rid,receivedAt:e.receivedAt})},an=function(e){return Array.isArray(e.items)&&e.items.length>0},cn=function(e){if(!function(e){var t,i;return Boolean(null===(t=e.more)||void 0===t?void 0:t.link)&&Boolean(null===(i=e.bulk)||void 0===i?void 0:i.link)}(e))throw new en({message:"Validation error. No more/bulk links in ApiResponse",ttl:e.ttl,type:e.errorType,rid:e.rid,receivedAt:e.receivedAt})},ln=function(){return{getNotShownPack:function(){throw new Ti("Cache disabled.")},getLastShownPack:function(){throw new Ti("Cache disabled.")},getNotShownOrLastShownPack:function(){throw new Ti("Cache disabled.")},putNotShownPack:function(){return Promise.resolve()},putLastShownPack:function(){return Promise.resolve()},removeNotShownPack:function(){return Promise.resolve()},removeLastShownPack:function(){return Promise.resolve()}}},un=function(e){var t=e.storage,i=e.cacheId,n=e.apiResponseValidator,o=e.validationParams,s="not-shown-pack"+i,r="last-shown-pack"+i,a=function(e,t){var i=t.byStoreTtl,s=t.ignoredZenFeatures,r=si(e.apiResponse);return function(e,t){var i=e.receivedAt,n=e.ttl,o=e.storeTtl,s=t?o:n;if(!(Ne(i)&&Ne(s)&&i+s>Date.now()))throw new Ti("Invalid cache "+(t?"store-ttl":"ttl")+".")}(r,i),function(e,t,i,n){if(!e)throw new Ti("RequestCacheParams undefined");if(!t)throw new Ti("Cache params undefined");if(!function(e,t){return e.userId&&t.userId&&e.userId===t.userId}(e,t))throw new Ti("Invalid UserId");if(!function(e,t){var i=Boolean(e.isAdblockEnabled)===Boolean(t.isAdblockEnabled),n=!on(e.clid)||e.clid===t.clid,o=!on(e.referrerClid)||e.referrerClid===t.referrerClid,s=!Le(e.referrerPlace)||e.referrerPlace===t.referrerPlace,r=!Le(e.countryCode)||e.countryCode===t.countryCode;return i&&n&&o&&s&&r&&Ji()(e.feedFilter,t.feedFilter)}(e,t))throw new Ti("Invalid AppParams");if(!function(e,t,i){return Ji()(e.zenFeatures&&Qi(e.zenFeatures,i),t.zenFeatures&&Qi(t.zenFeatures,i))}(e,t,n))throw new Ti("Invalid ZenFeatures");if(!function(e,t,i){if(!Array.isArray(e.clientExperiments))return!0;var n=function(e,t){var i=[];e&&Array.isArray(e.clientExperiments)&&i.push.apply(i,e.clientExperiments);var n=t.experimentsData;return n&&Object.keys(n).forEach((function(e){var t=n[e];Fe(t)&&t.exp&&i.push(e)})),i}(t,i);return e.clientExperiments.every((function(e){return n.includes(e)}))}(e,t,i))throw new Ti("Invalid ClientExperiments");if(!function(e,t){return Array.isArray(e.contentLangs)===Array.isArray(t.contentLangs)&&(!Array.isArray(e.contentLangs)||e.contentLangs.every((function(e){return t.contentLangs&&t.contentLangs.includes(e)})))}(e,t))throw new Ti("Invalid ContentLangs")}(o,e.params,r,s),nn(r),n(r),r},c=function(e,t,i){return nn(i),n(i),{type:e,apiResponse:t,params:o}};return{getNotShownPack:function(e){var i=void 0===e?{}:e,n=i.byStoreTtl,o=void 0!==n&&n,r=i.ignoredZenFeatures,c=void 0===r?[]:r;return t.get(s).then((function(e){return new Promise((function(i,n){try{tn(e),i(e)}catch(o){t.remove(s).then((function(){return n(o)}),(function(){return n(o)}))}}))})).then((function(e){var t=a(e,{byStoreTtl:o,ignoredZenFeatures:c});return Object.assign({},e,{parsedApiResponse:t})}))},getLastShownPack:function(e){var i=void 0===e?{}:e,n=i.byStoreTtl,o=void 0!==n&&n,s=i.ignoredZenFeatures,c=void 0===s?[]:s;return t.get(r).then((function(e){return new Promise((function(i,n){try{tn(e),i(e)}catch(o){t.remove(r).then((function(){return n(o)}),(function(){return n(o)}))}}))})).then((function(e){var t=a(e,{byStoreTtl:o,ignoredZenFeatures:c});return Object.assign({},e,{parsedApiResponse:t})}))},getNotShownOrLastShownPack:function(e){var t=this;return void 0===e&&(e=!0),this.getNotShownPack({byStoreTtl:e})["catch"]((function(){return t.getLastShownPack({byStoreTtl:e})}))},putNotShownPack:function(e,i,n){return Promise.resolve().then((function(){var o=c(e,i,n);return t.put(s,o)}))},putLastShownPack:function(e,i,n){return Promise.resolve().then((function(){var o=c(e,i,n);return t.put(r,o)}))},removeNotShownPack:function(){return t.remove(s)},removeLastShownPack:function(){return t.remove(r)}}},dn=Je({id:tt,strongestId:tt,status:st("subscribed","not_subscribed","blocked"),type:nt("interest"),title:tt,subtitle:ot(tt),feedLink:tt,feedApiLink:tt,logo:tt,logoBackgroundColor:tt,statEvents:Kt,bulkParams:tt}),hn=Je({id:tt,strongestId:tt,status:st("subscribed","not_subscribed","blocked"),type:st("publisher","domain"),title:tt,subtitle:ot(tt),description:ot(tt),feedLink:tt,feedApiLink:tt,logo:tt,logoBackgroundColor:tt,statEvents:Kt,bulkParams:tt}),mn=Je({id:tt,type:st("card","post"),title:tt,text:ot(tt),image:ot(tt),link:tt,source:Je({title:tt}),creationTime:ot(tt),statEvents:Kt,bulkParams:tt}),pn=Je({id:tt,type:nt("gif"),title:tt,image:tt,link:tt,source:Je({title:tt}),video:Je({duration:it}),creationTime:ot(tt),statEvents:Kt,bulkParams:tt}),fn=((gi={}).post=mn,gi.card=mn,gi.gif=pn,gi.interest=dn,gi.publisher=hn,gi.domain=hn,gi),_n=at("type",fn),gn=Je({title:tt,tabId:tt}),vn=Je({title:tt,type:nt("list_container"),items:Qe(_n),tabLink:ot(gn),statEvents:Kt,bulkParams:tt}),bn=at("type",Object.assign(((vi={}).list_container=vn,vi),fn)),yn=Je({id:tt,name:tt,more:Je({link:ot(tt)}),items:Qe(bn),statEvents:Kt,bulkParams:tt}),wn=Je({rid:tt,items:Qe(yn)}),kn=function(e){return ct(wn,e)},En=function(){function e(e){var t=this;this.config=u,this.queue=Promise.resolve(),this.network=Ki,this.cache=ln(),this.eventEmitter=new l,this.lastUsedPackId=null,this.lastUsedPackShown=!1,this.debouncedUpdateNotShownPack=De((function(e){return t.updateNotShownPack(e)}),5e3),this.on=this.eventEmitter.on.bind(this.eventEmitter),this.off=this.eventEmitter.off.bind(this.eventEmitter),this.addListener=this.eventEmitter.on.bind(this.eventEmitter),this.removeListener=this.eventEmitter.off.bind(this.eventEmitter),this.configure(e)}var t,i,a,c,d,h,m,p,f,_,g,v,b,y,w,k,E,x,M,C,T,S,P,I,B,O,D,j,A,R,N,L,F,U,z,H,W=e.prototype;return W.configure=function(e){var t="function"==typeof e?e(this.config):e;this.config=t,this.config.clid&&this.config.cache?this.cache=this.getCacheApi():this.cache=ln()},W.setNetworkRequestProvider=function(e){this.network=e},W.getLastUsedPackId=function(){return this.lastUsedPackId},W.getCacheId=function(){var e=this.config.cache;return e&&e.idGenerator?e.idGenerator(this.config):""},W.getCacheStorage=function(){if(!this.config.cache)throw new Ti("Cache options is not defined");return e=this.config.cache,t=e.type,i=void 0===t?s.SessionCache:t,n=e.namespace,o=void 0===n?"common":n,r=function(e){if(e===s.MultiSessionCache&&Mi.isEnabled())return Mi;if(Ci.isEnabled())return Ci;throw new Ti("Failed to get storage provider")}(i),a=function(e){return o+"-"+e},{get:function(e){var t=a(e);return r.get(t).then((function(e){if(!function(e){return e&&e.type&&e.apiResponse&&e.params}(e))throw new Ti("No cache record or scheme invalid");return e}))},put:function(e,t){var i=a(e);return r.put(i,t)},remove:function(e){var t=a(e);return r.remove(t)},keys:function(){return r.keys()},isEnabled:function(){return r.isEnabled()}};var e,t,i,n,o,r,a},W.getCacheApi=function(){var e=this.getCacheStorage(),t=this.getCacheId(),i=ke(this.config);return un({storage:e,cacheId:t,validationParams:i,apiResponseValidator:this.config.apiResponseValidator})},W.getApiRequestUrl=function(e){return Vi(e,this.config,this.config.links)},W.getApiRequestUrlWithPublicId=function(e,t){return this.getApiRequestUrl(e).replace("__public_id__",t)},W.extendHeadersWithWindowData=function(e,t){var i=t.includeXRetpath;return window?Object.assign({},e,i?{"X-Retpath-Y":window.location.href}:{}):e},W.getApiResponseFromNetworkAndMaybePutItToCache=(H=Pe(regeneratorRuntime.mark((function V(e,t){var i,n,o,s,a,c;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return i=t.cacheMode,n=void 0===i?Ht.Default:i,o=t.responseParser,s=t.responseValidator,l.next=3,this.getApiResponseFromNetwork(e,t);case 3:return a=l.sent,c=this.parseAndValidateApiResponse(a,o,s),wi(n)(Vt.PutAfterNetwork)&&this.updateCache(e,a,c),l.abrupt("return",{apiResponse:c,source:r.Network});case 8:case"end":return l.stop()}}),V,this)}))),function(e,t){return H.apply(this,arguments)}),W.getApiResponseFromNetwork=(z=Pe(regeneratorRuntime.mark((function $(e,t){var i,n,o,s,r,a,c,l;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return i=t.body,n=t.headers,o=t.method,s=t.mode,r=t.params,a=this.getApiRequestUrl(e),c=this.extendHeadersWithWindowData(n,{includeXRetpath:a.indexOf("/activity-feed?")>0}),u.next=5,this.makeApiRequestWithExtraHeaders(a,{body:i,headers:c,method:o,mode:s,params:r});case 5:return l=u.sent,u.abrupt("return",Object.assign({},l,{received_at:Date.now()}));case 7:case"end":return u.stop()}}),$,this)}))),function(e,t){return z.apply(this,arguments)}),W.parseAndValidateApiResponse=function(e,t,i){var n=t(e,this.getCacheId());return i(n),n},W.updateCache=function(e,t,i){var o=this;this.cache.putNotShownPack(e,t,i).then((function(){o.eventEmitter.emit(n.NotShownPackUpdated,e,t)}))["catch"]((function(){})),this.eventEmitter.emit(n.UpdatePreload,function(e,t){if(void 0===t&&(t=10),!e||!e.items)return[];for(var i=[],n=0;n<e.items.length&&i.length<t;n++){var o=e.items[n];o.type!==be.IMAGE&&o.type!==be.TEXT||i.push(o.cardBackgroundWhiteImage)}return i}(i))},W.makeApiRequestWithExtraHeaders=(U=Pe(regeneratorRuntime.mark((function q(e,t){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===t&&(t={}),i=function(e){return window,e},n.abrupt("return",this.network(e,t,Object.assign({},this.config,{zenFeatures:i(this.config.zenFeatures)})));case 3:case"end":return n.stop()}}),q,this)}))),function(e,t){return U.apply(this,arguments)}),W.getExportApiResponse=(F=Pe(regeneratorRuntime.mark((function Y(e){var t,i,n=this;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return void 0===e&&(e={}),t=function(){var t=Pe(regeneratorRuntime.mark((function i(){var t;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(wi(e.cacheMode||Ht.Default)(Vt.GetAfterNetwork)){i.next=3;break}return i.abrupt("return");case 3:return i.prev=3,i.next=6,n.cache.getNotShownOrLastShownPack();case 6:return t=i.sent,i.abrupt("return",{apiResponse:t.parsedApiResponse,source:r.CacheAfterNetwork});case 10:i.prev=10,i.t0=i["catch"](3),i.t0 instanceof Ti||console.warn("Failed to get cached pack after bad network request: '"+i.t0.message+"'.");case 13:case"end":return i.stop()}}),i,null,[[3,10]])})));return function(){return t.apply(this,arguments)}}(),s.prev=2,s.next=5,this.getMoreApiResponse(o.Export,e);case 5:return s.abrupt("return",s.sent);case 8:return s.prev=8,s.t0=s["catch"](2),s.next=12,t();case 12:if(i=s.sent){s.next=15;break}throw s.t0;case 15:return s.abrupt("return",i);case 16:case"end":return s.stop()}}),Y,this,[[2,8]])}))),function(e){return F.apply(this,arguments)}),W.getMoreApiResponse=(L=Pe(regeneratorRuntime.mark((function K(e,t){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===t&&(t={}),i=wi(t.cacheMode||Ht.Default),n.next=4,this.tryGetApiResponseBeforeNetwork(e,i);case 4:if(n.t0=n.sent,n.t0){n.next=9;break}return n.next=8,this.getApiResponseFromNetworkAndMaybePutItToCache(e,Object.assign({},t,{responseParser:si,responseValidator:this.config.apiResponseValidator}));case 8:n.t0=n.sent;case 9:return n.abrupt("return",n.t0);case 10:case"end":return n.stop()}}),K,this)}))),function(e,t){return L.apply(this,arguments)}),W.getSocialApiResponse=(N=Pe(regeneratorRuntime.mark((function G(e,t){var i,n,o,s=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return void 0===t&&(t={}),i=wi(t.cacheMode||Ht.Default),n=function(e,t){return hi(e)?e:si(e,t)},o=function(e){return!!hi(e)||s.config.apiResponseValidator(e)},r.next=6,this.tryGetApiResponseBeforeNetwork(e,i);case 6:if(r.t0=r.sent,r.t0){r.next=11;break}return r.next=10,this.getApiResponseFromNetworkAndMaybePutItToCache(e,Object.assign({},t,{responseParser:n,responseValidator:o}));case 10:r.t0=r.sent;case 11:return r.abrupt("return",r.t0);case 12:case"end":return r.stop()}}),G,this)}))),function(e,t){return N.apply(this,arguments)}),W.tryGetApiResponseBeforeNetwork=(R=Pe(regeneratorRuntime.mark((function X(e,t){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(t(Vt.GetBeforeNetwork)){i.next=2;break}return i.abrupt("return");case 2:return i.prev=2,i.next=5,this.getApiResponseFromCacheBeforeNetwork(e);case 5:return i.abrupt("return",i.sent);case 8:i.prev=8,i.t0=i["catch"](2),i.t0 instanceof Ti||console.warn("Failed to get cached pack before network request: '"+i.t0.message+"'.");case 11:case"end":return i.stop()}}),X,this,[[2,8]])}))),function(e,t){return R.apply(this,arguments)}),W.getApiResponseFromCacheBeforeNetwork=(A=Pe(regeneratorRuntime.mark((function Z(e){var t,i,n;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.cache.getNotShownPack();case 2:if(t=s.sent,i=t.parsedApiResponse,n=t.type,e!==o.More||n!==o.Export){s.next=7;break}throw new Ti("Can not apply cache from export to more request.");case 7:if(this.lastUsedPackId!==i.id){s.next=9;break}throw new Ti("Pack '"+i.id+"' has already been used.");case 9:return s.abrupt("return",{apiResponse:i,source:r.CacheBeforeNetwork});case 10:case"end":return s.stop()}}),Z,this)}))),function(e){return A.apply(this,arguments)}),W.hasValidNotShownPackInCache=(j=Pe(regeneratorRuntime.mark((function J(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getApiResponseFromCacheBeforeNetwork(e);case 3:return t.abrupt("return",!0);case 6:return t.prev=6,t.t0=t["catch"](0),t.abrupt("return",!1);case 9:case"end":return t.stop()}}),J,this,[[0,6]])}))),function(e){return j.apply(this,arguments)}),W.updateNotShownPack=function(e){var t,i,n=this,s=void 0===e?{}:e,r=s.invalidate,a=void 0!==r&&r,c=s.requestType,l=void 0===c?o.More:c;if(null===(t=this.config.cache)||void 0===t?void 0:t.isPrefetchEnabled){var u=(i=Pe(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=a,e.t0){e.next=5;break}return e.next=4,n.hasValidNotShownPackInCache(l);case 4:e.t0=!e.sent;case 5:if(e.t0){e.next=8;break}return e.abrupt("return");case 8:return e.prev=8,e.next=11,n.getApiResponseFromNetworkAndMaybePutItToCache(l,{responseParser:si,responseValidator:n.config.apiResponseValidator});case 11:e.next=15;break;case 13:e.prev=13,e.t1=e["catch"](8);case 15:case"end":return e.stop()}}),e,null,[[8,13]])}))),function(){return i.apply(this,arguments)});this.addToQueue(u)}},W.addToQueue=function(e){var t=this.queue=this.queue.then((function(){return e()}),(function(){return e()}));return t["catch"]((function(){})),t},W.getConfig=function(){return this.config},W.getExport=function(e){var t=this;return this.addToQueue(Pe(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t.getExportApiResponse(e);case 2:return n=i.sent,t.updateNotShownPack(),i.abrupt("return",n);case 5:case"end":return i.stop()}}),i)}))))},W.getMore=function(){var e=this;return this.addToQueue(Pe(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMoreApiResponse(o.More);case 2:return i=t.sent,e.updateNotShownPack(),t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)}))))},W.getSimilar=(D=Pe(regeneratorRuntime.mark((function Q(e,t){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.makeApiRequestWithExtraHeaders(e);case 2:return i=n.sent,n.abrupt("return",mi(i,t));case 4:case"end":return n.stop()}}),Q,this)}))),function(e,t){return D.apply(this,arguments)}),W.sendBannerStats=function(e){return this.makeApiRequestWithExtraHeaders(e)},W.sendAppLinkSms=function(e){var t=this.getApiRequestUrl(o.SendAppLinkSms);return this.makeApiRequestWithExtraHeaders(t,{params:{phone:e}})},W.getPublisherConfig=(O=Pe(regeneratorRuntime.mark((function ee(){var e,t;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.getApiRequestUrl(o.PublisherConfig),i.next=3,this.makeApiRequestWithExtraHeaders(e);case 3:if(t=i.sent,!hi(t)){i.next=6;break}return i.abrupt("return",t);case 6:return i.abrupt("return",si(t));case 7:case"end":return i.stop()}}),ee,this)}))),function(){return O.apply(this,arguments)}),W.getProfile=(B=Pe(regeneratorRuntime.mark((function te(){var e,t;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.getApiRequestUrl(o.Profile),i.next=3,this.makeApiRequestWithExtraHeaders(e);case 3:return t=i.sent,i.abrupt("return",(n=void 0,(n=t.items.reduce((function(e,t){return Object.assign({},e,ai[t.type](t))}),{})).userInfo||n.noUser||console.error("Inconsistent profile data"),n));case 5:case"end":return i.stop()}var n}),te,this)}))),function(){return B.apply(this,arguments)}),W.getSuggest=(I=Pe(regeneratorRuntime.mark((function ie(e){var t,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.getApiRequestUrl(o.Suggest),n.next=3,this.makeApiRequestWithExtraHeaders(t,{params:{search_text:e}});case 3:return i=n.sent,n.abrupt("return",ht(i));case 5:case"end":return n.stop()}}),ie,this)}))),function(e){return I.apply(this,arguments)}),W.getMultisearch=(P=Pe(regeneratorRuntime.mark((function ne(e){var t,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.getApiRequestUrl(o.Multisearch),n.next=3,this.makeApiRequestWithExtraHeaders(t,{params:{search_text:e}});case 3:return i=n.sent,n.abrupt("return",kn(i));case 5:case"end":return n.stop()}}),ne,this)}))),function(e){return P.apply(this,arguments)}),W.getMultisearchMore=(S=Pe(regeneratorRuntime.mark((function oe(e){var t;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.makeApiRequestWithExtraHeaders(e);case 2:return t=i.sent,i.abrupt("return",kn(t));case 4:case"end":return i.stop()}}),oe,this)}))),function(e){return S.apply(this,arguments)}),W.getBlockedSuggest=(T=Pe(regeneratorRuntime.mark((function se(e){var t,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.getApiRequestUrl(o.BlockedSuggest),n.next=3,this.makeApiRequestWithExtraHeaders(t,{params:{search_text:e}});case 3:return i=n.sent,n.abrupt("return",ht(i));case 5:case"end":return n.stop()}}),se,this)}))),function(e){return T.apply(this,arguments)}),W.getCategories=(C=Pe(regeneratorRuntime.mark((function re(){var e,t;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.getApiRequestUrl(o.Categories),i.next=3,this.makeApiRequestWithExtraHeaders(e);case 3:return t=i.sent,i.abrupt("return",li(t));case 5:case"end":return i.stop()}}),re,this)}))),function(){return C.apply(this,arguments)}),W.getCategory=(M=Pe(regeneratorRuntime.mark((function ae(e){var t,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.getApiRequestUrl(o.Category).replace("__name__",e),n.next=3,this.makeApiRequestWithExtraHeaders(t);case 3:return i=n.sent,n.abrupt("return",{sources:ht(s=i),category:s.category&&ci(s.category)});case 5:case"end":return n.stop()}var s}),ae,this)}))),function(e){return M.apply(this,arguments)}),W.getPreferences=(x=Pe(regeneratorRuntime.mark((function ce(e,t){var i,n;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return i=this.getApiRequestUrlWithPublicId(o.Preferences,e),s.next=3,this.makeApiRequestWithExtraHeaders(i,t);case 3:return n=s.sent,s.abrupt("return",ht(n));case 5:case"end":return s.stop()}}),ce,this)}))),function(e,t){return x.apply(this,arguments)}),W.getVideoRecommend=(E=Pe(regeneratorRuntime.mark((function le(){var e,t;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.getApiRequestUrl(o.VideoRecommend),i.next=3,this.makeApiRequestWithExtraHeaders(e);case 3:return t=i.sent,i.abrupt("return",(n=void 0,(void 0===(n=t.items)?[]:n).reduce((function(e,t){if(t.type===be.GIF){var i=Pt(t);i&&e.push(i)}return e}),[])));case 5:case"end":return i.stop()}var n}),le,this)}))),function(){return E.apply(this,arguments)}),W.getVideoPopupData=(k=Pe(regeneratorRuntime.mark((function ue(e,t){var i,n;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return i=this.getApiRequestUrl(o.GetVideoPopupData),s.next=3,this.makeApiRequestWithExtraHeaders(i,{params:{publisher_id:e,publication_id:t}});case 3:return n=s.sent,s.abrupt("return",(r=void 0,{publicationId:(r=n.video_popup_data).publication_id,snippet:r.snippet,tags:r.tags,publicationViews:r.publication_views,publicationViewsTillEnd:r.publication_views_till_end,publicationSubscriptions:r.publication_subscriptions,publicationComments:r.publication_comments,publisherSubscriptions:r.publisher_subscriptions}));case 5:case"end":return s.stop()}var r}),ue,this)}))),function(e,t){return k.apply(this,arguments)}),W.getCountryLang=(w=Pe(regeneratorRuntime.mark((function de(){var e,t;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.getApiRequestUrl(o.CountryLang),i.next=3,this.makeApiRequestWithExtraHeaders(e);case 3:return t=i.sent,i.abrupt("return",(s=void 0,r=void 0,a=void 0,c=void 0,s=(n=t).country_id,r=n.language_ids,a=n.countries,c=n.languages,{countryId:s,languageIds:r.reduce((function(e,t){return e[t]=!0,e}),{}),countries:a.map((function(e){return{code:e.code,langs:e.langs,name:e.name}})),languages:c}));case 5:case"end":return i.stop()}var n,s,r,a,c}),de,this)}))),function(){return w.apply(this,arguments)}),W.getCommentsCounters=(y=Pe(regeneratorRuntime.mark((function he(e){var t,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.getApiRequestUrl(o.CommentsCounter),n.next=3,this.network(t,{body:{documentIds:e},mode:"cors",method:"POST"});case 3:return i=n.sent,n.abrupt("return",ui(i.counts));case 5:case"end":return n.stop()}}),he,this)}))),function(e){return y.apply(this,arguments)}),W.getCommentsInfos=(b=Pe(regeneratorRuntime.mark((function me(e){var t,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.getApiRequestUrl(o.CommentsInfos),n.next=3,this.network(t,{body:{documentIds:e},mode:"cors",method:"POST"});case 3:return i=n.sent,n.abrupt("return",di(i.infos));case 5:case"end":return n.stop()}}),me,this)}))),function(e){return b.apply(this,arguments)}),W.setCountryLang=(v=Pe(regeneratorRuntime.mark((function pe(e,t){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=this.getApiRequestUrl(o.CountryLang),n.next=3,this.makeApiRequestWithExtraHeaders(i,{body:{country_id:e,language_ids:t}});case 3:this.invalidateCache();case 4:case"end":return n.stop()}}),pe,this)}))),function(e,t){return v.apply(this,arguments)}),W.getSocialProfile=(g=Pe(regeneratorRuntime.mark((function fe(e){var t,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.getApiRequestUrlWithPublicId(o.SocialProfile,e),n.next=3,this.makeApiRequestWithExtraHeaders(t,{headers:this.extendHeadersWithWindowData({},{includeXRetpath:!0})});case 3:return i=n.sent,n.abrupt("return",hi(s=i)?{type:s.type,captcha:s.captcha}:{status:s.status,uid:s.uid,avatarUrl:s.avatarUrl,name:s.name,about:s.about,followerCount:s.followerCount,subscriptionCount:s.subscriptionCount,backgroundColor:s.backgroundColor,textColor:s.textColor,interests:s.interests.map(ut),privacy:s.privacy?{hideInterests:s.privacy.hideInterests,hideActivity:s.privacy.hideActivity,hideSubscriptions:s.privacy.hideSubscriptions}:{hideInterests:!0,hideActivity:!0,hideSubscriptions:!0},isSleeping:s.isSleeping,onboardingRequired:s.onboardingRequired,csrfToken:s.csrfToken,passportRetPathPlaceholder:s.passportRetPathPlaceholder,regionalDomainPlaceholder:s.regionalDomainPlaceholder,passportAvatarEditLink:s.passportAvatarEditLink,passportDisplayNameEditLink:s.passportDisplayNameEditLink,source:dt(s.source),isDeactivated:"deleted"===s.status,isNotExist:"not_exist"===s.status,messengerPrivacy:s.messengerPrivacy});case 5:case"end":return n.stop()}var s}),fe,this)}))),function(e){return g.apply(this,arguments)}),W.getUserSubscribers=(_=Pe(regeneratorRuntime.mark((function _e(e){var t,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.getApiRequestUrlWithPublicId(o.Subscribers,e),n.next=3,this.makeApiRequestWithExtraHeaders(t);case 3:return i=n.sent,n.abrupt("return",ht(i));case 5:case"end":return n.stop()}}),_e,this)}))),function(e){return _.apply(this,arguments)}),W.updateSocialProfile=(f=Pe(regeneratorRuntime.mark((function ge(e){var t;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=this.getApiRequestUrl(o.SocialProfileEdit),i.next=3,this.makeApiRequestWithExtraHeaders(t,{headers:{"x-csrf-token":e.token},method:"PUT",body:e});case 3:case"end":return i.stop()}}),ge,this)}))),function(e){return f.apply(this,arguments)}),W.prefetch=function(){this.debouncedUpdateNotShownPack()},W.invalidateCache=(p=Pe(regeneratorRuntime.mark((function ve(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.config.cache){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.cache.removeNotShownPack();case 4:this.debouncedUpdateNotShownPack();case 5:case"end":return e.stop()}}),ve,this)}))),function(){return p.apply(this,arguments)}),W.clearCache=(m=Pe(regeneratorRuntime.mark((function ye(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.config.cache){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.cache.removeNotShownPack();case 4:return e.next=6,this.cache.removeLastShownPack();case 6:case"end":return e.stop()}}),ye,this)}))),function(){return m.apply(this,arguments)}),W.packUsed=function(e){this.lastUsedPackId=e,this.lastUsedPackShown=!1},W.packShown=function(e,t){this.packShownImpl(e,t)},W.packShownImpl=function(e,t){var i,o,s=this,r=this.lastShownPackId===e&&this.lastShownCacheId===t;if(this.config.cache&&!r){this.setLastShownPack(e,t);var a=(o=Pe(regeneratorRuntime.mark((function r(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([s.cache.removeNotShownPack(),s.cache.putLastShownPack(e.type,e.apiResponse,e.parsedApiResponse)]);case 3:s.eventEmitter.emit(n.LastShownPackUpdated,e.type,e.apiResponse),t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:case"end":return t.stop()}}),r,null,[[0,6]])}))),function(e){return o.apply(this,arguments)}),c=(i=Pe(regeneratorRuntime.mark((function l(){var t;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,s.cache.getNotShownPack();case 3:if((t=i.sent).apiResponse.rid!==e){i.next=8;break}return i.next=8,a(t);case 8:i.next=12;break;case 10:i.prev=10,i.t0=i["catch"](0);case 12:return i.prev=12,e===s.lastUsedPackId&&!s.lastUsedPackShown&&(s.lastUsedPackShown=!0,s.updateNotShownPack()),s.eventEmitter.emit(n.PackShown,e),i.finish(12);case 17:case"end":return i.stop()}}),l,null,[[0,10,12,17]])}))),function(){return i.apply(this,arguments)});this.addToQueue(c)}else this.eventEmitter.emit(n.PackShown,e)},W.setLastShownPack=function(e,t){this.lastShownPackId=e,this.lastShownCacheId=t},W.getNotShownPackFromCache=(h=Pe(regeneratorRuntime.mark((function we(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.cache.getNotShownPack(e);case 2:return t.abrupt("return",t.sent.parsedApiResponse);case 3:case"end":return t.stop()}}),we,this)}))),function(e){return h.apply(this,arguments)}),W.getLastShownPackFromCache=(d=Pe(regeneratorRuntime.mark((function Ee(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.cache.getLastShownPack(e);case 2:return t.abrupt("return",t.sent.parsedApiResponse);case 3:case"end":return t.stop()}}),Ee,this)}))),function(e){return d.apply(this,arguments)}),W.getNetwork=function(){return this.network},W.getCache=function(){return this.cache},W.getActivityFeed=function(e){var t=this;return this.addToQueue(Pe(regeneratorRuntime.mark((function i(){var n;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t.getSocialApiResponse(o.SocialActivityFeed,e);case 2:return n=i.sent,t.updateNotShownPack(),i.abrupt("return",n);case 5:case"end":return i.stop()}}),i)}))))},W.completeProfileOnboarding=(c=Pe(regeneratorRuntime.mark((function xe(e){var t,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.getApiRequestUrl(o.ProfileCompleteOnboarding),n.next=3,this.makeApiRequestWithExtraHeaders(t,{headers:{"x-csrf-token":e.token},body:{context:e.context,onboardingDocumentId:e.documentId},method:"PUT"});case 3:if((i=n.sent)&&"ok"===i.status){n.next=6;break}throw new Error("complete onboarding failed");case 6:return n.abrupt("return",i);case 7:case"end":return n.stop()}}),xe,this)}))),function(e){return c.apply(this,arguments)}),W.deactivateProfile=(a=Pe(regeneratorRuntime.mark((function Me(e,t){var i,n,s,r,a;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return i=this.getApiRequestUrl(o.ProfileDeactivate),n=this.config.userInfo,s=n.deviceId,r=t.token,c.next=6,this.makeApiRequestWithExtraHeaders(i,{headers:{"x-csrf-token":r},body:{reason:e,deviceId:s,clientTs:Date.now()},method:"PUT"});case 6:if((a=c.sent)&&"ok"===a.status){c.next=9;break}throw new Error("profile deactivate failed");case 9:return c.abrupt("return",a);case 10:case"end":return c.stop()}}),Me,this)}))),function(e,t){return a.apply(this,arguments)}),W.cancelDeactivateProfile=(i=Pe(regeneratorRuntime.mark((function Ce(e){var t,i,n,s,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.getApiRequestUrl(o.ProfileCancelDeactivate),i=this.config.userInfo,n=i.deviceId,s=e.token,a.next=6,this.makeApiRequestWithExtraHeaders(t,{headers:{"x-csrf-token":s},body:{deviceId:n,clientTs:Date.now()},method:"PUT"});case 6:if((r=a.sent)&&"ok"===r.status){a.next=9;break}throw new Error("cancel profile deactivate failed");case 9:return a.abrupt("return",r);case 10:case"end":return a.stop()}}),Ce,this)}))),function(e){return i.apply(this,arguments)}),W.clearCacheOverflow=(t=Pe(regeneratorRuntime.mark((function Te(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.config.cache&&this.config.cache.namespace&&this.config.cache.idGenerator){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Si(this.getCacheStorage());case 5:case"end":return e.stop()}}),Te,this)}))),function(){return t.apply(this,arguments)}),W.getCurrentUserInterests=function(){return this.makeApiRequestWithExtraHeaders(this.getApiRequestUrl(o.CurrentUserInterests))},W.getCurrentUserSubscriptions=function(){return this.makeApiRequestWithExtraHeaders(this.getApiRequestUrl(o.CurrentUserSubscriptions))},e}(),xn=(i(114),function(e,t){return Object.keys(t).reduce((function(e,i){return e.replace(i,t[i])}),e)}),Mn=i(87),Cn=[],Tn=[],Sn=[],Pn=[],In=[],Bn=i.n(Mn).a.hasSupport;function On(e,t){for(var i=e.length-1;i>=0;i--)t(e[i])}function Dn(e,t){for(var i,n=[],o=0,s=e.length;o!==s;o++)t(i=e[o])&&n.push(i);return n}var jn=0;var An={scroll:void 0,scrollBottomEdge:void 0,scrolling:!1,lastScrollChangeTime:void 0,scrollStartPosition:void 0,scrollEndPosition:void 0},Rn=Vn(An),Nn={};function Ln(e,t,i){return i.fromBottom?e<=i.scroll||Boolean(i.bottomEdge&&t<=i.scroll):e>=i.scroll||Boolean(i.bottomEdge&&t>=i.scroll)}function Fn(e,t){Bn&&(t||(window.clearTimeout(bi),bi=window.setTimeout((function(){return Un(Date.now(),!0)}),250)));var i=Vn(Rn),n=Rn=function(e,t){var i=Vn(An),n=window.pageYOffset,o=Date.now();return i.scroll=n,i.scrollBottomEdge=n+window.innerHeight,i.scroll!==e.scroll?i.lastScrollChangeTime=o:i.lastScrollChangeTime=e.lastScrollChangeTime,i.direction=i.scroll>=e.scroll?1:-1,o-i.lastScrollChangeTime>250||t||i.direction!==e.direction?i.scrolling=!1:i.scrolling=!0,!0===i.scrolling&&!1===e.scrolling&&(i.scrollStartPosition=n,Nn={}),!0===i.scrolling&&void 0!==e.scrollStartPosition&&void 0===i.scrollStartPosition&&(i.scrollStartPosition=e.scrollStartPosition),!1===i.scrolling&&!0===e.scrolling&&(i.scrollStartPosition=e.scrollStartPosition,i.scrollEndPosition=n),i}(i,t),o=n.scroll,s=n.scrollBottomEdge;!0===Rn.scrolling&&i.scrolling,(!0===Rn.scrolling||t)&&function(e){zn(e,!1),Hn(e,!1)}(Rn),!1===Rn.scrolling&&!0===i.scrolling&&function(e){zn(e,!0),Hn(e,!0),On(In,(function(e){window.clearTimeout(e._timeout),e.callback()})),In=[]}(Rn),function(e,t){On(Cn,(function(i){if(Ln(e,t,i)){if(i.onceDebounce&&i._triggeredDebounce)return;Wn(i.name,{data:i.data},i.callback),i._triggered=!0,i._triggeredDebounce=!0}else i.onceDebounce&&i._triggeredDebounce&&(i._triggeredDebounce=!1)})),Cn=Dn(Cn,(function(e){return!(e._triggered&&e.once)}))}(o,s),function(e,t){On(Tn,(function(i){0===i._state&&Ln(e,t,i)&&(Wn(i.name,{state:1,data:i.data},i.callback),$n(i.name)||(i._state=1)),1!==i._state||Ln(e,t,i)||(Wn(i.name,{state:0,data:i.data},i.callback),$n(i.name)||(i._state=0))}))}(o,s),Bn||requestAnimationFrame(Un)}var Un=function(e,t,i){var n,o,s=this;return void 0===t&&(t=250),function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];var c=s,l=Date.now();window.clearTimeout(o),n&&l<n+t?o=window.setTimeout((function(){n=l,e.apply(c,r)}),t):(n=l,e.apply(c,r))}}(Fn,30);function zn(e,t){var i=Dn(Sn,(function(e){return Boolean(e.endTrigger)===t})),n=(t?e.scrollEndPosition:e.scroll)-e.scrollStartPosition,o=Math.abs(n),s=n>0?1:-1;On(i,(function(t){t.onceDebounce&&Nn[t.name]||o>=t.delta&&(t.direction===s||t.anyDirection)&&(t.overScrollBehavior||e.scroll>0)&&(Wn(t.name,{data:t.data},t.callback),t._triggered=!0,Nn[t.name]=!0)})),Sn=Dn(Sn,(function(e){return!(e._triggered&&e.once)}))}function Hn(e,t){var i=Date.now();On(Pn,(function(n){(i-n._lastTriggerTime>=n.timeout||t)&&(Wn(n.name,{scroll:e.scroll,scrollBottomEdge:e.scrollBottomEdge,data:n.data},n.callback),n._lastTriggerTime=i)}))}function Wn(e,t,i){$n()||i&&i(t)}function Vn(e){return{scroll:e.scroll,scrollBottomEdge:e.scrollBottomEdge,scrolling:e.scrolling,lastScrollChangeTime:e.lastScrollChangeTime,scrollStartPosition:e.scrollStartPosition,scrollEndPosition:e.scrollEndPosition,direction:e.direction}}function $n(){return!1}var qn=function(e){return e+"_"+Date.now()},Yn=function(e){return{stats:e.map((function(e){var t=e.event,i=e.params,n=e.ts,o=e.payload;return Object.assign({event:t,data:i,ts:n},o||{})})),bulk_ts:Date.now()}},Kn=function(e){if("undefined"!=typeof document){var t=atob("Ymx0c3I9MQ==");return Boolean(document.cookie.match(new RegExp(t)))}}(),Gn=function(e){function t(){for(var t,i,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return t=i=e.call.apply(e,[this].concat(o))||this,i.bulkEvents=[],i.sendingTimeoutId=null,i.bulkEventBatch=null,i.deferredOldBulkLogParams=[],i.deferredBulkLogParams=[],i.deferredPackShown=[],t||Ie(i)}d(t,e);var i,s,r,a=t.prototype;return a.getApiResponseFromNetwork=(r=Pe(regeneratorRuntime.mark((function c(e,t){var i,n,o;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(void 0===t&&(t={}),Kn&&this.sendBulkEventsWithinQueue(),!Kn&&0!==this.bulkEvents.length&&!t.body){s.next=4;break}return s.abrupt("return",En.prototype.getApiResponseFromNetwork.call(this,e,t));case 4:return i=this.bulkEvents,n=Yn(i),o=Object.assign({},t,{body:n}),this.bulkEvents=[],s.prev=8,s.abrupt("return",En.prototype.getApiResponseFromNetwork.call(this,e,o));case 12:throw s.prev=12,s.t0=s["catch"](8),this.bulkEvents=this.bulkEvents.concat(i),s.t0;case 16:case"end":return s.stop()}}),c,this,[[8,12]])}))),function(e,t){return r.apply(this,arguments)}),a.addToQueue=function(t,i){return void 0===i&&(i=!0),i&&(this.bulkEventBatch=null),e.prototype.addToQueue.call(this,t)},a.forceSendBulkEvents=function(){return this.bulkEventBatch=null,null!==this.sendingTimeoutId&&window.clearTimeout(this.sendingTimeoutId),this.sendBulkEvents()},a.sendBulkEvents=(s=Pe(regeneratorRuntime.mark((function l(){var e,t,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==this.bulkEvents.length){n.next=2;break}return n.abrupt("return");case 2:return e=this.getApiRequestUrl(o.Bulk),t=this.bulkEvents,i=Yn(t),this.bulkEvents=[],n.prev=6,n.next=9,this.makeApiRequestWithExtraHeaders(e,{body:i});case 9:n.next=15;break;case 11:throw n.prev=11,n.t0=n["catch"](6),this.bulkEvents=this.bulkEvents.concat(t),n.t0;case 15:case"end":return n.stop()}}),l,this,[[6,11]])}))),function(){return s.apply(this,arguments)}),a.planBulkEventsSending=function(){var e=this;null===this.sendingTimeoutId&&(this.sendingTimeoutId=window.setTimeout((function(){e.sendingTimeoutId=null,e.sendBulkEventsWithinQueue()}),1e3))},a.sendBulkEventsWithinQueue=function(){var e,t,i,n,o,s,r,a,c,l=this;if(!this.bulkEventBatch){var u=this.bulkEventBatch=(i=0,n=0,o=!1,s=new Promise((function(t){e=t})),r=new Promise((function(e){t=e})),a=function(){o=!0,t()},c=function(){++n===i&&a()},{trigger:function(){return e(),n===i&&a(),r},extend:function(e){o||(i++,s.then(e).then(c,c))}});this.addToQueue((function(){return u.trigger().then((function(){l.bulkEventBatch===u&&(l.bulkEventBatch=null)}))}),!1)}this.bulkEventBatch&&this.bulkEventBatch.extend((function(){return l.sendBulkEvents()["catch"]((function(e){console.warn("Error while sending bulk events",e)}))}))},a.oldLogBulkEvent=function(e){this.config.deferredEvents&&this.config.deferredEvents.shouldDeferEvents&&!this.config.deferredEvents.notDeferredEvents.includes(e.event)?this.deferredOldBulkLogParams.push(e):this.oldLogBulkEventInner(e)},a.oldLogBulkEventInner=function(e){var t=e.event,i=e.bulkParams,o=e.statMeta,s={id:qn(t),event:t,params:i,ts:Date.now()};this.bulkEvents.push(s),this.planBulkEventsSending(),this.eventEmitter.emit(n.BulkEventLogged,Object.assign({},s,{statMeta:o}))},a.logBulkEvents=function(e,t){this.config.deferredEvents&&this.config.deferredEvents.shouldDeferEvents&&!this.config.deferredEvents.notDeferredEvents.includes(e)?this.deferredBulkLogParams.push({statEvent:e,params:t}):this.logBulkEventsInner(e,t)},a.logBulkEventsInner=function(e,t){var i=t.statEvents,o=t.bulkParams,s=t.bulkReplaceMap,r=t.eventReplaceMap,a=t.statMeta,c=void 0===a?{}:a,l=t.payload,u=i&&i[e];if(u){var d={id:qn(u),event:r?xn(u,r):u,params:s?xn(o,s):o,ts:Date.now(),payload:l};this.bulkEvents.push(d),this.planBulkEventsSending(),this.eventEmitter.emit(n.BulkEventLogged,{event:u,statMeta:c})}},a.getPreferences=(i=Pe(regeneratorRuntime.mark((function u(e){var t,i,n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(Kn&&this.sendBulkEventsWithinQueue(),!Kn&&0!==this.bulkEvents.length){o.next=3;break}return o.abrupt("return",En.prototype.getPreferences.call(this,e));case 3:return t=this.bulkEvents,i=Yn(t),n={body:i},this.bulkEvents=[],o.prev=7,o.abrupt("return",En.prototype.getPreferences.call(this,e,n));case 11:throw o.prev=11,o.t0=o["catch"](7),this.bulkEvents=this.bulkEvents.concat(t),o.t0;case 15:case"end":return o.stop()}}),u,this,[[7,11]])}))),function(e){return i.apply(this,arguments)}),a.stopDefferEvents=function(){var e,t=this;(null===(e=this.config.deferredEvents)||void 0===e?void 0:e.shouldDeferEvents)&&(this.config.deferredEvents.shouldDeferEvents=!1,this.deferredOldBulkLogParams.forEach((function(e){t.oldLogBulkEventInner(e)})),this.deferredBulkLogParams.forEach((function(e){var i=e.statEvent,n=e.params;t.logBulkEventsInner(i,n)})),this.deferredPackShown.forEach((function(e){var i=e.packId,n=e.cacheId;t.packShown(i,n)})),this.deferredOldBulkLogParams=[],this.deferredBulkLogParams=[],this.deferredPackShown=[])},a.startDeferEvents=function(){var e,t=this;this.configure((function(e){if(!e.deferredEvents)throw new Error("Deffeered events is not configured");return Object.assign({},e,{deferredEvents:Object.assign({},e.deferredEvents,{shouldDeferEvents:!0})})})),this.deferredOldBulkLogParams=[],this.deferredBulkLogParams=[],this.deferredPackShown=[],e={direction:1,delta:1,once:!0},Sn.push({delta:e.delta,name:e.name||"__scrollEv"+ ++jn+"__",direction:e.direction>0?1:-1,anyDirection:e.anyDirection,endTrigger:e.endTrigger,once:e.once,onceDebounce:e.onceDebounce,overScrollBehavior:void 0===e.overScrollBehavior||e.overScrollBehavior,data:void 0,callback:function(){return t.stopDefferEvents()}})},a.packShown=function(e,t){var i;(null===(i=this.config.deferredEvents)||void 0===i?void 0:i.shouldDeferEvents)?this.deferredPackShown.push({packId:e,cacheId:t}):this.packShownImpl(e,t)},t}(En),Xn=(i(111),function(e,t,i){void 0===i&&(i=!1);var n={src:e,type:t,asAttr:"script",crossOrigin:i?"use-credentials":"anonymous"};(function(e){var t=e.src,i=e.type,n=e.asAttr,o=e.crossOrigin,s=Array.from(document.getElementsByTagName("link")),r=!1;return s.forEach((function(e){var s=e.href.includes(t),a=e.type===i,c=e.as===n,l=e.crossOrigin===o;!s||a&&c&&l||console.error("There is not fully matched link",e),s&&a&&c&&l&&(r=!0)})),r})(n)||function(e){var t=e.src,i=e.type,n=e.asAttr,o=e.crossOrigin,s=document.createElement("link");s.href=t,s.rel=i,s.as=n,s.crossOrigin=o,document.head.appendChild(s)}(n)}),Zn={},Jn=function(e,t){var i=void 0===t?{}:t,n=i.invalidate,o=void 0!==n&&n,s=i.crossorigin,r=void 0!==s&&s,a=i.useCredentials,c=void 0!==a&&a;if(Zn[e]&&!o)return Zn[e].promise;var l=document.createElement("script");l.src=e,l.async=!0,r&&(l.crossOrigin=c?"use-credentials":"anonymous");var u=new Promise((function(t,i){l.onload=function(){Zn[e].loaded=!0,t()},l.onerror=function(t){Zn[e].error=t,i(t)}}));return Zn[e]&&document.head&&document.head.removeChild(Zn[e].script),document.head&&document.head.appendChild(l),Zn[e]={script:l,promise:u,loaded:!1,error:null},u};Jn.isRequested=function(e){return Boolean(Zn[e])},Jn.isLoaded=function(e){return Boolean(Zn[e]&&Zn[e].loaded)},Jn.isFailed=function(e){return Boolean(Zn[e]&&Zn[e].error)};
/*! onloadCSS. (onload callback for loadCSS) [c]2017 Filament Group, Inc. MIT License */
var Qn=function(){function e(){this._starts={},this._results={}}var t=e.prototype;return t.start=function(e){var t=this._starts[e],i=this._results[e];t||i||(this._starts[e]=Date.now())},t.finish=function(e){var t=this._starts[e],i=this._results[e];t&&!i&&(this._results[e]=Date.now()-t)},t.getResults=function(){return Object.assign({},this._results)},t.getInProgress=function(){var e=this;return Object.keys(this._starts).filter((function(t){return"number"!=typeof e._results[t]})).sort()},e}(),eo=["ru","es_la","pt_br","en","uk","tr","ar","hi","te","ta","bn","mr","kn","ml","es","fr","it","pl","vi","de","eu","id","tl","ca","gl","ur","th","ms","nl","ro","cs","hu","bg","el","ka","da","he","zh_hant","pt","sr","sk","be","kk","af","hr","ja","ko","zh","az","fi","sv","et","no"],to=new Qn,io=function(e,t){return function(e){return"/"===e[e.length-1]?e.slice(0,-1):e}(e)+(t?"/"+t:"")},no=function(e){var t=e.staticHost,i=e.version,n=e.lang,o=e.buildName,s=e.appName,r=e.bundleName,a=e.isChunkedBundle,c=e.isAdblock,l=e.chunkName,u="";c&&a?u="-external-react-inline-style":c?u="-inline-style":a&&(u="-external-react");var d=eo.includes(n)?n:"en";return io(t,i)+"/"+s+"/"+r+u+(l?"-"+l:"")+"."+o+"."+d+".bundle.js"},oo=function(e){var t=e.staticHost,i=e.version,n=e.appName,o=e.bundleName,s=e.container;to.start("css");var r=function(e){var t=e.appName,i=e.bundleName;return io(e.staticHost,e.version)+"/"+t+"/"+i+".css"}({staticHost:t,version:i,appName:n,bundleName:o});return new Promise((function(e,t){var i=s?s.lastChild:document.body.lastChild;!function(e,t,i){var n;function o(){!n&&t&&(n=!0,t.call(e))}function s(){!n&&i&&(n=!0,i.call(e))}e.addEventListener&&(e.addEventListener("load",o),e.addEventListener("error",s)),e.attachEvent&&(e.attachEvent("onload",o),e.attachEvent("onerror",s)),"isApplicationInstalled"in navigator&&"onloadcssdefined"in e&&e.onloadcssdefined(o)}(window.loadCSS&&window.loadCSS(r,i,null,!0),(function(){to.finish("css"),e()}),(function(){t(new y({message:"Failed to load css",owner:g.Front,sourceType:_.Network}))}))}))},so=function(e){function t(){return e.apply(this,arguments)||this}return d(t,e),t}(f(Error)),ro=function(e,t,i){var n=new Qn;return t.forEach((function(e){return n.start(e)})),{result:(i?function(e,t){return new Promise((function(i,n){e.then(i,n),setTimeout((function(){n(new so("Request timeout."))}),t)}))}(e,i):e).then((function(e){return t.forEach((function(e){return n.finish(e)})),e}))["catch"]((function(e){throw e instanceof so?new y({message:"Not loaded resources in timeout: "+n.getInProgress().join(","),owner:g.Front,sourceType:_.Network,type:"timeout"}):e})),resourceTimer:n}},ao=function(e){window.localStorage.setItem("retries",JSON.stringify(e))},co=function(){var e=[],t=window.localStorage.getItem("retries");if(!t)return e;try{var i=JSON.parse(t);return function(e){if(!Array.isArray(e))throw new Error}(i),i}catch(n){return console.error(n),e}},lo=c(oo),uo=function(e,t){var i=e.host,n=e.clid,o=e.referrerClid,s=e.referrerPlace,r=e.countryCode,a=e.contentLangs,c=e.exps,l=e.zenFeatures,u=e.cache,d=e.precacheKey,h=e.precacheRid,m=e.userInfo,p=e.feedFilter,f=e.chromeExtensionId,v=e.isAdblock,b=e.libType,w=e.uid,k=e.links,E=e.partnerRid,x=e.telemetry,M=e.experiment,C=e.excludeExperiments,T=e.apimock,S=e.usemock,P=e.isRetry,I=t.zenApi,B=t.outputBus;to.start("api"),I.configure((function(e){var t=l.ad_under_article_supported,d=t?null:u&&Object.assign({},u,{isPrefetchEnabled:!1}),h=t?{}:Object.assign({},e.userInfo,m);return Object.assign({},e,{host:i,clid:n,referrerClid:o,referrerPlace:s,countryCode:r,contentLangs:a,zenFeatures:l,cache:d,isAdblockEnabled:v,clientExperiments:c,userInfo:h,chromeExtensionId:f,feedFilter:p,links:k||e.links})}));var O,D=b&&function(e){return!!e&&["activityDesktop","activityTablet","activityMobile"].includes(e)}(b),j={};d&&(j.key=d),p&&p.tags&&Array.isArray(p.tags)&&1===p.tags.length&&(j.topic_id=p.tags[0]),p&&p.itemId&&(j.item_id=p.itemId),p&&p.itemType&&(j.item_type=p.itemType),D&&((null==m||null===(O=m.source)||void 0===O?void 0:O.publicId)?j.social_profile_id=m.source.publicId:w&&(j.uid=w)),E&&(j.partner_rid=E),x&&(j.telemetry="1"),M&&(j.experiment=M),C&&(j.exclude_experiments=C),T&&(j.apimock=T),S&&(j.usemock=S);var A=null;(h||P)&&(A={},h&&(A["zen-request-id"]=h),P&&(A["X-Retry-Request"]="true"));var R={params:0===Object.keys(j).length?null:j,cache:d||l.ad_under_article_supported?Ht.Reload:Ht.Default,headers:A};return(D?I.getActivityFeed(R):I.getExport(R)).then((function(e){var t=e.apiResponse;if(hi(t)){var i=t.captcha["captcha-page"];return window.location.href=i,t}return to.finish("api"),d&&h&&t&&"cache"!==t.source&&B.emit("precacheMiss",{key:d,rid:h}),t}))["catch"]((function(e){var t=e.type,i=e.toString();throw new y({message:"Failed to fetch data from API. Reason: "+i,owner:g.Backend,sourceType:-1!==i.indexOf("fetch")?_.Network:_.Logic,type:t})}))},ho=c(uo),mo=function(e){return function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return e.apply(void 0,i)["catch"]((function(){return e.apply(void 0,i)}))}},po=function(e,t){var n=e.libType,o=e.host,s=e.clid,r=e.referrerClid,a=e.referrerPlace,c=e.countryCode,l=e.contentLangs,u=e.exps,d=e.staticHost,h=e.version,m=e.lang,p=e.buildName,f=e.appName,v=e.bundleName,b=e.zenFeatures,w=e.criticalBundleTimeout,k=e.cache,E=e.precacheKey,x=e.precacheRid,M=e.userInfo,C=e.isAdblock,T=e.isChunkedBundle,S=e.chromeExtensionId,P=e.feedFilter,I=e.container,B=e.uid,O=e.links,D=e.partnerRid,j=e.telemetry,A=e.experiment,R=e.excludeExperiments,N=e.apimock,L=e.usemock,F=e.retryBudget,U=t.zenApi,z=t.outputBus,H=n&&function(e){return["activityDesktop","activityTablet","activityMobile"].includes(e)}(n);return new Promise((function(e,t){var W=null,V=function(e){var t=uo({host:o,clid:s,referrerClid:r,referrerPlace:a,countryCode:c,contentLangs:l,exps:u,zenFeatures:b,cache:k,precacheKey:E,precacheRid:x,userInfo:M,feedFilter:P,chromeExtensionId:S,isAdblock:C,libType:n,uid:B,links:O,partnerRid:D,telemetry:j,experiment:A,excludeExperiments:R,apimock:N,usemock:L,criticalBundleTimeout:w,isRetry:e},{zenApi:U,outputBus:z}),i=ro(t,["api"],w),d=i.result,h=i.resourceTimer;return W=h,d},$=F?function(e){var t=e.windowSize,i=void 0===t?100:t,n=e.retryBudget,o=void 0===n?1:n,s=e.func,r=e.retryFunc,a=e.storeState,c=void 0===a?ao:a,l=e.loadState,u=void 0===l?co:l,d=e.errorFilter,h=void 0===d?function(){return!0}:d,m=[];try{m=u()}catch(_){return console.error(_),s}var p=function(e){m.push(e),m.length===i&&m.shift(),c(m)},f=function(){return p(0)};return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=!1;return function a(){return(n&&r?r.apply(void 0,t):s.apply(void 0,t)).then((function(e){return f(),e}))["catch"]((function(e){if(m.reduce((function(e,t){return e+t}),0)<o&&h(e))return p(1),n=!0,a();throw f(),e}))}()}}({retryBudget:F,func:V,retryFunc:V.bind(null,!0),errorFilter:function(e){return e instanceof y&&"timeout"===e.type}}):V,q=null,Y=function(){var e=C||H?null:oo({staticHost:d,version:h,appName:f,bundleName:v,container:I}),t=ro(e||Promise.resolve(null),["css"],w),i=t.result,n=t.resourceTimer;return q=n,i},K=F?mo(Y):Y,G=null,X=function(){var e=ro(T?function(e){var t=e.staticHost,i=e.version,n=e.lang,o=e.buildName,s=e.appName,r=e.bundleName,a=e.isAdblock;to.start("react-chunk"),to.start("js-chunk");var c=a,l=no({staticHost:t,version:i,lang:n,buildName:o,appName:s,bundleName:r,isChunkedBundle:!0,isAdblock:a});return Jn("//yastatic.net/react/16.8.4/react-with-dom.min.js",{invalidate:!0,crossorigin:!0,useCredentials:!1})["catch"]((function(){throw new y({message:"Failed to load js react chunk",owner:g.Front,sourceType:_.Network})})).then((function(){return to.finish("react-chunk"),Jn(l,{invalidate:!0,crossorigin:!0,useCredentials:c})}))["catch"]((function(e){if(e instanceof y)throw e;throw new y({message:"Failed to load js chunk "+o,owner:g.Front,sourceType:_.Network})})).then((function(){to.finish("js-chunk")}))}({staticHost:d,version:h,lang:m,buildName:p,appName:f,bundleName:v,isAdblock:C}):function(e){var t=e.staticHost,i=e.version,n=e.lang,o=e.buildName,s=e.appName,r=e.bundleName,a=e.isAdblock;to.start("js");var c=no({staticHost:t,version:i,lang:n,buildName:o,appName:s,bundleName:r,isAdblock:a});return Jn(c,{invalidate:!0,crossorigin:!0,useCredentials:a}).then((function(){to.finish("js")}))["catch"]((function(){throw new y({message:"Failed to load js bundle "+o,owner:g.Front,sourceType:_.Network})}))}({staticHost:d,version:h,lang:m,buildName:p,appName:f,bundleName:v,isAdblock:C}),T?["react-chunk","js"]:["js"],w),t=e.result,i=e.resourceTimer;return G=i,t},Z=F?mo(X):X;if(Promise.all([$(),Z(),K()]).then((function(t){var i=t[0];z.emit("timings",Object.assign({},W&&W.getResults(),G&&G.getResults(),q&&q.getResults())),e(i)}))["catch"](t),u.find((function(e){return"zen_video_on:exp"===e}))){i.p=io(d,h)+"/"+f+"/";var J=no({chunkName:Q.VideoCardDesktop,staticHost:d,version:h,lang:m,buildName:p,appName:f,bundleName:v,isChunkedBundle:T,isAdblock:C});Xn(J,"prefetch",C)}}))};if(!window||!window.Promise)throw new y({message:"window and promise must exist for zenlib-loader",owner:g.Front,sourceType:_.Logic});var fo,_o,go,vo="READY",bo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,i=void 0,n=[],o=void 0,s=!1,r=function(e,i){return t(e,n[i])};return function(){for(var t=arguments.length,a=Array(t),c=0;c<t;c++)a[c]=arguments[c];return s&&i===this&&a.length===n.length&&a.every(r)?o:(s=!0,i=this,n=a,o=e.apply(this,a))}}((function(e){var t=e.libType,i=e.uatraits,n=e.useLegacy,o=e.isDev,r=t||function(e){return e.isTablet?"defaultTablet":e.isMobile?"defaultMobile":"defaultDesktop"}(i),a=de[r];if(!a)throw new y({message:"Passed libType is not exist.",owner:g.Front,sourceType:_.Logic});!function(e,t){fe[t]?fe[t](e):function(e){if(me(e,he),!e.uatraits&&!e.isDev&&!e.useLegacy)throw new y({message:"'uatraits' or 'isDev' or 'useLegacy' options must be passed in loader params.",owner:g.Front,sourceType:_.Logic})}(e)}(e,r);var c,l=Object.assign({},Ce,a,e),u=l.uatraitsType,d=l.columnCount,h=l.isVideoDisabled,m=l.rowPlaceholders,p=l.cardPlaceholders,f=l.isAdUnderArticleEnabled,v=l.theme,b=l.feedFilter,w=function(e){var t,i,n,o,s,r,a,c,l=e.uatraits,u=e.columnCount,d=e.isVideoDisabled,h=e.rowPlaceholders,m=e.cardPlaceholders,p=e.isAdUnderArticleEnabled,f=e.theme,_=Object.assign({},ue,(t={browserName:l&&l.BrowserName},i=t.browserName,n=void 0===i?"MSIE":i,o=t.OSFamily,s=void 0===o?"Windows":o,r=t.OSVersion,a=void 0===r?"6.1":r,c=[].concat(ue.video_providers),"MSIE"!==n||"Windows"!==s||"6.1"!==a||function(){try{if(new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return!0}catch(e){if(navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return!0}return!1}()?{video_providers:c}:{video_providers:c.filter((function(e){return"yandex-web"!==e}))}),{column_count:u,row_placeholders:h,card_placeholders:m,ad_under_article_supported:p,color_theme:f});return d&&(_.no_videos=!0,delete _.video_providers),_}({uatraits:i,columnCount:d,isVideoDisabled:h,rowPlaceholders:m,cardPlaceholders:p,isAdUnderArticleEnabled:f,theme:v}),k=e.cache&&e.cache.api,E=k&&k.storeId,x=k&&k.userId;return c=x?{type:b&&b.tags&&Array.isArray(b.tags)&&1===b.tags.length?s.SessionCache:s.MultiSessionCache,namespace:"lib-"+(E||"default-zen-store")+"-"+(x||"empty"),isPrefetchEnabled:!0,idGenerator:"number"==typeof e.referrerClidResetTimeout?Me:void 0}:null,Object.assign({},Ce,a,e,{buildName:Te({uatraits:i,uatraitsType:u,useLegacy:n,isDev:o}),precacheKey:e.cache&&e.cache.precacheKey||null,precacheRid:e.cache&&e.cache.precacheRid||null,zenFeatures:w,cache:c})})),yo=c((function(e){!function(e,t){var i=e.host,n=e.clid,o=e.referrerClid,s=e.referrerPlace,r=e.countryCode,a=e.exps,c=e.staticHost,l=e.version,u=e.lang,d=e.contentLangs,h=e.buildName,m=e.appName,p=e.bundleName,f=e.zenFeatures,_=e.cache,g=e.precacheKey,v=e.precacheRid,b=e.userInfo,y=e.isAdblock,w=e.isChunkedBundle,k=e.feedFilter,E=e.container,x=e.criticalBundleTimeout;ho({host:i,clid:n,referrerClid:o,referrerPlace:s,countryCode:r,contentLangs:d,exps:a,zenFeatures:f,cache:_,precacheKey:g,precacheRid:v,userInfo:b,feedFilter:k,isAdblock:y,criticalBundleTimeout:x},{zenApi:t.zenApi,outputBus:t.outputBus})["catch"]((function(){}));var M=no({staticHost:c,version:l,lang:u,buildName:h,appName:m,bundleName:p,isChunkedBundle:w,isAdblock:y}),C=y;w?(Xn("//yastatic.net/react/16.8.4/react-with-dom.min.js","preload",!1),Xn(M,"preload",C)):Xn(M,"preload",C),y||lo({staticHost:c,version:l,appName:m,bundleName:p,container:E})["catch"]((function(){}))}(bo(e),{zenApi:wo,outputBus:Eo})})),wo=(fo=Gn,_o=Boolean(!0),go=_o?{shouldDeferEvents:_o,notDeferredEvents:["show_teaser","short"]}:void 0,new fo((function(e){return Object.assign({},e,{apiResponseValidator:sn,deferredEvents:go})}))),ko=new l,Eo=new l,xo=Eo.on.bind(Eo),Mo=Eo.off.bind(Eo),Co=ko.emit.bind(ko);wo.addListener(n.NotShownPackUpdated,(function(e,t){Eo.emit("cachePut",t)}));var To={preload:yo,create:function(e){return Promise.resolve().then((function(){if("LOADING"===vo)throw new y({message:"Loader is in progress already",owner:g.Front,sourceType:_.Logic});if("LOADED"===vo)throw new y({message:"Lib has been loaded already",owner:g.Front,sourceType:_.Logic});var t=bo(e);return vo="LOADING",po(t,{zenApi:wo,outputBus:Eo}).then((function(e){if(e&&!hi(e)){var i=e.id,n=e.publisherId,o=e.adFlightId,s=e.adArticleId,r=e.adSecdata;if(s&&n&&Eo.emit("article",{adFlightId:o,adArticleId:s,rid:i,publisherId:n,adSecdata:r}),e.items)return function(e,t){var i=(window.YandexZen=window.YandexZen||{}).app;if(!i)throw new y({message:"Error with Zen Library init",owner:g.Front,sourceType:_.Logic});return i.init(e,t),i}(t,e)}return null})).then((function(e){return vo="LOADED",e}))["catch"]((function(e){throw vo="READY",function(e){var t,i=e instanceof Error;if(i&&((t=e).message&&Object.keys(_).includes(t.sourceType)&&Object.keys(g).includes(t.owner)))return e;var n="";return i?n=e.toString():"string"==typeof e?n=e:e&&(n=(e.name||"")+(e.message||"")),new y({message:"Unknown error. Ahtung! Attention! "+n+". JS error: "+i,sourceType:_.Unknown,owner:g.Unknown})}(e)}))}))},on:xo,off:Mo,addListener:xo,removeListener:Mo,trigger:Co};To.forcedSymbolUsage=Symbol("foo");var So=To;i.d(t,"default",(function(){return So}))}])["default"]}})},function(e,t){BEM.DOM.decl("zen-lib",{_runIncludedLoader:function(){window.YandexZen=window.YandexZen||{},window.YandexZen.loader=function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=65)}([function(e,t,i){"use strict";var n=i(41),o={};o[i(1)("toStringTag")]="z",o+""!="[object z]"&&i(11)(Object.prototype,"toString",(function(){return"[object "+n(this)+"]"}),!0)},function(e,t,i){var n=i(33)("wks"),o=i(20),s=i(2).Symbol,r="function"==typeof s;(e.exports=function(e){return n[e]||(n[e]=r&&s[e]||(r?s:o)("Symbol."+e))}).store=n},function(e,t){var i=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(e,t,i){var n=i(8);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,i){e.exports=!i(5)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,i){var n=i(10);n(n.S+n.F,"Object",{assign:i(77)})},function(e,t,i){var n=i(3),o=i(50),s=i(35),r=Object.defineProperty;t.f=i(4)?Object.defineProperty:function(e,t,i){if(n(e),t=s(t,!0),n(i),o)try{return r(e,t,i)}catch(a){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,i){"use strict";var n,o,s,r,a=i(19),c=i(2),l=i(21),u=i(41),d=i(10),h=i(8),m=i(22),p=i(78),f=i(79),_=i(83),g=i(59).set,v=i(85)(),b=i(60),y=i(86),w=i(87),k=i(88),E=c.TypeError,x=c.process,M=x&&x.versions,C=M&&M.v8||"",T=c.Promise,S="process"==u(x),P=function(){},I=o=b.f,B=!!function(){try{var e=T.resolve(1),t=(e.constructor={})[i(1)("species")]=function(e){e(P,P)};return(S||"function"==typeof PromiseRejectionEvent)&&e.then(P)instanceof t&&0!==C.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(n){}}(),O=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},D=function(e,t){if(!e._n){e._n=!0;var i=e._c;v((function(){for(var n=e._v,o=1==e._s,s=0,r=function(t){var i,s,r,a=o?t.ok:t.fail,c=t.resolve,l=t.reject,u=t.domain;try{a?(o||(2==e._h&&R(e),e._h=1),!0===a?i=n:(u&&u.enter(),i=a(n),u&&(u.exit(),r=!0)),i===t.promise?l(E("Promise-chain cycle")):(s=O(i))?s.call(i,c,l):c(i)):l(n)}catch(d){u&&!r&&u.exit(),l(d)}};i.length>s;)r(i[s++]);e._c=[],e._n=!1,t&&!e._h&&j(e)}))}},j=function(e){g.call(c,(function(){var t,i,n,o=e._v,s=A(e);if(s&&(t=y((function(){S?x.emit("unhandledRejection",o,e):(i=c.onunhandledrejection)?i({promise:e,reason:o}):(n=c.console)&&n.error&&n.error("Unhandled promise rejection",o)})),e._h=S||A(e)?2:1),e._a=void 0,s&&t.e)throw t.v}))},A=function(e){return 1!==e._h&&0===(e._a||e._c).length},R=function(e){g.call(c,(function(){var t;S?x.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})}))},N=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),D(t,!0))},L=function(e){var t,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===e)throw E("Promise can't be resolved itself");(t=O(e))?v((function(){var n={_w:i,_d:!1};try{t.call(e,l(L,n,1),l(N,n,1))}catch(o){N.call(n,o)}})):(i._v=e,i._s=1,D(i,!1))}catch(n){N.call({_w:i,_d:!1},n)}}};B||(T=function(e){p(this,T,"Promise","_h"),m(e),n.call(this);try{e(l(L,this,1),l(N,this,1))}catch(t){N.call(this,t)}},(n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=i(89)(T.prototype,{then:function(e,t){var i=I(_(this,T));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=S?x.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&D(this,!1),i.promise},"catch":function(e){return this.then(void 0,e)}}),s=function(){var e=new n;this.promise=e,this.resolve=l(L,e,1),this.reject=l(N,e,1)},b.f=I=function(e){return e===T||e===r?new s(e):o(e)}),d(d.G+d.W+d.F*!B,{Promise:T}),i(28)(T,"Promise"),i(61)("Promise"),r=i(13).Promise,d(d.S+d.F*!B,"Promise",{reject:function(e){var t=I(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(a||!B),"Promise",{resolve:function(e){return k(a&&this===r?T:this,e)}}),d(d.S+d.F*!(B&&i(90)((function(e){T.all(e)["catch"](P)}))),"Promise",{all:function(e){var t=this,i=I(t),n=i.resolve,o=i.reject,s=y((function(){var i=[],s=0,r=1;f(e,!1,(function(e){var a=s++,c=!1;i.push(void 0),r++,t.resolve(e).then((function(e){c||(c=!0,i[a]=e,--r||n(i))}),o)})),--r||n(i)}));return s.e&&o(s.v),i.promise},race:function(e){var t=this,i=I(t),n=i.reject,o=y((function(){f(e,!1,(function(e){t.resolve(e).then(i.resolve,n)}))}));return o.e&&n(o.v),i.promise}})},function(e,t,i){var n=i(2),o=i(13),s=i(15),r=i(11),a=i(21),c=function(e,t,i){var l,u,d,h,m=e&c.F,p=e&c.G,f=e&c.S,_=e&c.P,g=e&c.B,v=p?n:f?n[t]||(n[t]={}):(n[t]||{}).prototype,b=p?o:o[t]||(o[t]={}),y=b.prototype||(b.prototype={});for(l in p&&(i=t),i)d=((u=!m&&v&&void 0!==v[l])?v:i)[l],h=g&&u?a(d,n):_&&"function"==typeof d?a(Function.call,d):d,v&&r(v,l,d,e&c.U),b[l]!=d&&s(b,l,h),_&&y[l]!=d&&(y[l]=d)};n.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,i){var n=i(2),o=i(15),s=i(14),r=i(20)("src"),a=Function.toString,c=(""+a).split("toString");i(13).inspectSource=function(e){return a.call(e)},(e.exports=function(e,t,i,a){var l="function"==typeof i;l&&(s(i,"name")||o(i,"name",t)),e[t]!==i&&(l&&(s(i,r)||o(i,r,e[t]?""+e[t]:c.join(String(t)))),e===n?e[t]=i:a?e[t]?e[t]=i:o(e,t,i):(delete e[t],o(e,t,i)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[r]||a.call(this)}))},function(e,t,i){"use strict";var n=i(62),o=i(91),s=i(31),r=i(16);e.exports=i(63)(Array,"Array",(function(e,t){this._t=r(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?i:"values"==t?e[i]:[i,e[i]])}),"values"),s.Arguments=s.Array,n("keys"),n("values"),n("entries")},function(e,t){var i=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=i)},function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},function(e,t,i){var n=i(7),o=i(27);e.exports=i(4)?function(e,t,i){return n.f(e,t,o(1,i))}:function(e,t,i){return e[t]=i,e}},function(e,t,i){var n=i(52),o=i(23);e.exports=function(e){return n(o(e))}},function(e,t,i){var n=i(51),o=i(38);e.exports=Object.keys||function(e){return n(e,o)}},function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},function(e,t){e.exports=!1},function(e,t){var i=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+n).toString(36))}},function(e,t,i){var n=i(22);e.exports=function(e,t,i){if(n(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,o){return e.call(t,i,n,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,i){"use strict";var n=i(10),o=i(53)(!0);n(n.P,"Array",{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i(62)("includes")},function(e,t,i){var n=i(30),o=i(17);i(98)("keys",(function(){return function(e){return o(n(e))}}))},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,i){var n=i(7).f,o=i(14),s=i(1)("toStringTag");e.exports=function(e,t,i){e&&!o(e=i?e:e.prototype,s)&&n(e,s,{configurable:!0,value:t})}},function(e,t,i){i(58)("match",1,(function(e,t,i){return[function(i){"use strict";var n=e(this),o=null==i?void 0:i[t];return void 0!==o?o.call(i,n):new RegExp(i)[t](String(n))},i]}))},function(e,t,i){var n=i(23);e.exports=function(e){return Object(n(e))}},function(e,t){e.exports={}},function(e,t,i){"use strict";var n=i(10),o=i(96);n(n.P+n.F*i(97)("includes"),"String",{includes:function(e){return!!~o(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,i){var n=i(13),o=i(2),s=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:i(19)?"pure":"global",copyright:" 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t,i){var n=i(8),o=i(2).document,s=n(o)&&n(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},function(e,t,i){var n=i(8);e.exports=function(e,t){if(!n(e))return e;var i,o;if(t&&"function"==typeof(i=e.toString)&&!n(o=i.call(e)))return o;if("function"==typeof(i=e.valueOf)&&!n(o=i.call(e)))return o;if(!t&&"function"==typeof(i=e.toString)&&!n(o=i.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){var i=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:i)(e)}},function(e,t,i){var n=i(33)("keys"),o=i(20);e.exports=function(e){return n[e]||(n[e]=o(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,i){var n=i(51),o=i(38).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},function(e,t,i){var n=i(18),o=i(1)("toStringTag"),s="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,i,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(i){}}(t=Object(e),o))?i:s?n(t):"Object"==(r=n(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t,i){var n=i(8),o=i(18),s=i(1)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==o(e))}},function(e,t,i){var n=i(7).f,o=Function.prototype,s=/^\s*function ([^ (]*)/;"name"in o||i(4)&&n(o,"name",{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(e){return""}}})},function(e,t,i){"use strict";i(100);var n=i(3),o=i(45),s=i(4),r=/./.toString,a=function(e){i(11)(RegExp.prototype,"toString",e,!0)};i(5)((function(){return"/a/b"!=r.call({source:"a",flags:"b"})}))?a((function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!s&&e instanceof RegExp?o.call(e):void 0)})):"toString"!=r.name&&a((function(){return r.call(this)}))},function(e,t,i){"use strict";var n=i(3);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},,function(e,t,i){"use strict";i.r(t);var n="function"==typeof fetch?fetch.bind():function(e,t){return t=t||{},new Promise((function(i,n){var o=new XMLHttpRequest;for(var s in o.open(t.method||"get",e),t.headers)o.setRequestHeader(s,t.headers[s]);function r(){var e,t=[],i=[],n={};return o.getAllResponseHeaders().replace(/^(.*?):\s*([\s\S]*?)$/gm,(function(o,s,r){t.push(s=s.toLowerCase()),i.push([s,r]),e=n[s],n[s]=e?e+","+r:r})),{ok:1==(o.status/200|0),status:o.status,statusText:o.statusText,url:o.responseURL,clone:r,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},headers:{keys:function(){return t},entries:function(){return i},get:function(e){return n[e.toLowerCase()]},has:function(e){return e.toLowerCase()in n}}}}o.withCredentials="include"==t.credentials,o.onload=function(){i(r())},o.onerror=n,o.send(t.body)}))};t["default"]=n},function(e,t,i){var n=i(2),o=i(13),s=i(19),r=i(49),a=i(7).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=s?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:r.f(e)})}},function(e,t,i){t.f=i(1)},function(e,t,i){e.exports=!i(4)&&!i(5)((function(){return 7!=Object.defineProperty(i(34)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,i){var n=i(14),o=i(16),s=i(53)(!1),r=i(37)("IE_PROTO");e.exports=function(e,t){var i,a=o(e),c=0,l=[];for(i in a)i!=r&&n(a,i)&&l.push(i);for(;t.length>c;)n(a,i=t[c++])&&(~s(l,i)||l.push(i));return l}},function(e,t,i){var n=i(18);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,i){var n=i(16),o=i(54),s=i(73);e.exports=function(e){return function(t,i,r){var a,c=n(t),l=o(c.length),u=s(r,l);if(e&&i!=i){for(;l>u;)if((a=c[u++])!=a)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===i)return e||u||0;return!e&&-1}}},function(e,t,i){var n=i(36),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},function(e,t,i){var n=i(3),o=i(75),s=i(38),r=i(37)("IE_PROTO"),a=function(){},c=function(){var e,t=i(34)("iframe"),n=s.length;for(t.style.display="none",i(56).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;n--;)delete c.prototype[s[n]];return c()};e.exports=Object.create||function(e,t){var i;return null!==e?(a.prototype=n(e),i=new a,a.prototype=null,i[r]=e):i=c(),void 0===t?i:o(i,t)}},function(e,t,i){var n=i(2).document;e.exports=n&&n.documentElement},function(e,t,i){var n=i(24),o=i(27),s=i(16),r=i(35),a=i(14),c=i(50),l=Object.getOwnPropertyDescriptor;t.f=i(4)?l:function(e,t){if(e=s(e),t=r(t,!0),c)try{return l(e,t)}catch(i){}if(a(e,t))return o(!n.f.call(e,t),e[t])}},function(e,t,i){"use strict";var n=i(15),o=i(11),s=i(5),r=i(23),a=i(1);e.exports=function(e,t,i){var c=a(e),l=i(r,c,""[e]),u=l[0],d=l[1];s((function(){var t={};return t[c]=function(){return 7},7!=""[e](t)}))&&(o(String.prototype,e,u),n(RegExp.prototype,c,2==t?function(e,t){return d.call(e,this,t)}:function(e){return d.call(e,this)}))}},function(e,t,i){var n,o,s,r=i(21),a=i(84),c=i(56),l=i(34),u=i(2),d=u.process,h=u.setImmediate,m=u.clearImmediate,p=u.MessageChannel,f=u.Dispatch,_=0,g={},v=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},b=function(e){v.call(e.data)};h&&m||(h=function(e){for(var t=[],i=1;arguments.length>i;)t.push(arguments[i++]);return g[++_]=function(){a("function"==typeof e?e:Function(e),t)},n(_),_},m=function(e){delete g[e]},"process"==i(18)(d)?n=function(e){d.nextTick(r(v,e,1))}:f&&f.now?n=function(e){f.now(r(v,e,1))}:p?(s=(o=new p).port2,o.port1.onmessage=b,n=r(s.postMessage,s,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(n=function(e){u.postMessage(e+"","*")},u.addEventListener("message",b,!1)):n="onreadystatechange"in l("script")?function(e){c.appendChild(l("script")).onreadystatechange=function(){c.removeChild(this),v.call(e)}}:function(e){setTimeout(r(v,e,1),0)}),e.exports={set:h,clear:m}},function(e,t,i){"use strict";var n=i(22);function o(e){var t,i;this.promise=new e((function(e,n){if(void 0!==t||void 0!==i)throw TypeError("Bad Promise constructor");t=e,i=n})),this.resolve=n(t),this.reject=n(i)}e.exports.f=function(e){return new o(e)}},function(e,t,i){"use strict";var n=i(2),o=i(7),s=i(4),r=i(1)("species");e.exports=function(e){var t=n[e];s&&t&&!t[r]&&o.f(t,r,{configurable:!0,get:function(){return this}})}},function(e,t,i){var n=i(1)("unscopables"),o=Array.prototype;null==o[n]&&i(15)(o,n,{}),e.exports=function(e){o[n][e]=!0}},function(e,t,i){"use strict";var n=i(19),o=i(10),s=i(11),r=i(15),a=i(31),c=i(92),l=i(28),u=i(93),d=i(1)("iterator"),h=!([].keys&&"next"in[].keys()),m=function(){return this};e.exports=function(e,t,i,p,f,_,g){c(i,t,p);var v,b,y,w=function(e){if(!h&&e in M)return M[e];switch(e){case"keys":case"values":return function(){return new i(this,e)}}return function(){return new i(this,e)}},k=t+" Iterator",E="values"==f,x=!1,M=e.prototype,C=M[d]||M["@@iterator"]||f&&M[f],T=C||w(f),S=f?E?w("entries"):T:void 0,P="Array"==t&&M.entries||C;if(P&&(y=u(P.call(new e)))!==Object.prototype&&y.next&&(l(y,k,!0),n||"function"==typeof y[d]||r(y,d,m)),E&&C&&"values"!==C.name&&(x=!0,T=function(){return C.call(this)}),n&&!g||!h&&!x&&M[d]||r(M,d,T),a[t]=T,a[k]=m,f)if(v={values:E?T:w("values"),keys:_?T:w("keys"),entries:S},g)for(b in v)b in M||s(M,b,v[b]);else o(o.P+o.F*(h||x),t,v);return v}},function(e,t,i){"use strict";var n=i(10),o=i(22),s=i(30),r=i(5),a=[].sort,c=[1,2,3];n(n.P+n.F*(r((function(){c.sort(void 0)}))||!r((function(){c.sort(null)}))||!i(99)(a)),"Array",{sort:function(e){return void 0===e?a.call(s(this)):a.call(s(this),o(e))}})},function(e,t,i){i(66),i(67),e.exports=i(108)},function(e,t,i){window.fetch||(window.fetch=i(47)["default"]||i(47))},function(e,t,i){"use strict";i.r(t),i(68)},function(e,t){
/*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
var i=window,n=function(e,t,n,o){var s,r=i.document,a=r.createElement("link");if(t)s=t;else{var c=(r.body||r.getElementsByTagName("head")[0]).childNodes;s=c[c.length-1]}var l=r.styleSheets;a.rel="stylesheet",a.href=e,a.media="only x",function h(e){if(r.body)return e();setTimeout((function(){h(e)}))}((function(){s.parentNode.insertBefore(a,t&&!o?s:s.nextSibling)}));var u=function m(e){for(var t=a.href,i=l.length;i--;)if(l[i].href===t)return e();setTimeout((function(){m(e)}))};function d(){a.addEventListener&&a.removeEventListener("load",d),a.media=n||"all"}return a.addEventListener&&a.addEventListener("load",d),a.onloadcssdefined=u,u(d),a};i.loadCSS=n;
/*! loadCSS rel=preload polyfill. [c]2017 Filament Group, Inc. MIT License */
var o=n.relpreload={};if(o.support=function(){try{return i.document.createElement("link").relList.supports("preload")}catch(e){return!1}},o.poly=function(){for(var e=i.document.getElementsByTagName("link"),t=0;t<e.length;t++){var n=e[t];"preload"===n.rel&&"style"===n.getAttribute("as")&&(i.loadCSS(n.href,n,n.getAttribute("media")),n.rel=null)}},!o.support()){o.poly();var s=i.setInterval(o.poly,300);i.addEventListener&&i.addEventListener("load",(function(){o.poly(),i.clearInterval(s)})),i.attachEvent&&i.attachEvent("onload",(function(){i.clearInterval(s)}))}},function(e,t,i){i(48)("asyncIterator")},function(e,t,i){"use strict";var n=i(2),o=i(14),s=i(4),r=i(10),a=i(11),c=i(71).KEY,l=i(5),u=i(33),d=i(28),h=i(20),m=i(1),p=i(49),f=i(48),_=i(72),g=i(74),v=i(3),b=i(8),y=i(16),w=i(35),k=i(27),E=i(55),x=i(76),M=i(57),C=i(7),T=i(17),S=M.f,P=C.f,I=x.f,B=n.Symbol,O=n.JSON,D=O&&O.stringify,j=m("_hidden"),A=m("toPrimitive"),R={}.propertyIsEnumerable,N=u("symbol-registry"),L=u("symbols"),F=u("op-symbols"),U=Object.prototype,z="function"==typeof B,H=n.QObject,W=!H||!H.prototype||!H.prototype.findChild,V=s&&l((function(){return 7!=E(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a}))?function(e,t,i){var n=S(U,t);n&&delete U[t],P(e,t,i),n&&e!==U&&P(U,t,n)}:P,$=function(e){var t=L[e]=E(B.prototype);return t._k=e,t},q=z&&"symbol"==typeof B.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof B},Y=function(e,t,i){return e===U&&Y(F,t,i),v(e),t=w(t,!0),v(i),o(L,t)?(i.enumerable?(o(e,j)&&e[j][t]&&(e[j][t]=!1),i=E(i,{enumerable:k(0,!1)})):(o(e,j)||P(e,j,k(1,{})),e[j][t]=!0),V(e,t,i)):P(e,t,i)},K=function(e,t){v(e);for(var i,n=_(t=y(t)),o=0,s=n.length;s>o;)Y(e,i=n[o++],t[i]);return e},G=function(e){var t=R.call(this,e=w(e,!0));return!(this===U&&o(L,e)&&!o(F,e))&&(!(t||!o(this,e)||!o(L,e)||o(this,j)&&this[j][e])||t)},X=function(e,t){if(e=y(e),t=w(t,!0),e!==U||!o(L,t)||o(F,t)){var i=S(e,t);return!i||!o(L,t)||o(e,j)&&e[j][t]||(i.enumerable=!0),i}},Z=function(e){for(var t,i=I(y(e)),n=[],s=0;i.length>s;)o(L,t=i[s++])||t==j||t==c||n.push(t);return n},J=function(e){for(var t,i=e===U,n=I(i?F:y(e)),s=[],r=0;n.length>r;)!o(L,t=n[r++])||i&&!o(U,t)||s.push(L[t]);return s};z||(a((B=function(){if(this instanceof B)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(i){this===U&&t.call(F,i),o(this,j)&&o(this[j],e)&&(this[j][e]=!1),V(this,e,k(1,i))};return s&&W&&V(U,e,{configurable:!0,set:t}),$(e)}).prototype,"toString",(function(){return this._k})),M.f=X,C.f=Y,i(40).f=x.f=Z,i(24).f=G,i(39).f=J,s&&!i(19)&&a(U,"propertyIsEnumerable",G,!0),p.f=function(e){return $(m(e))}),r(r.G+r.W+r.F*!z,{Symbol:B});for(var Q="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Q.length>ee;)m(Q[ee++]);for(var te=T(m.store),ie=0;te.length>ie;)f(te[ie++]);r(r.S+r.F*!z,"Symbol",{"for":function(e){return o(N,e+="")?N[e]:N[e]=B(e)},keyFor:function(e){if(!q(e))throw TypeError(e+" is not a symbol!");for(var t in N)if(N[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),r(r.S+r.F*!z,"Object",{create:function(e,t){return void 0===t?E(e):K(E(e),t)},defineProperty:Y,defineProperties:K,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:J}),O&&r(r.S+r.F*(!z||l((function(){var e=B();return"[null]"!=D([e])||"{}"!=D({a:e})||"{}"!=D(Object(e))}))),"JSON",{stringify:function(e){for(var t,i,n=[e],o=1;arguments.length>o;)n.push(arguments[o++]);if(i=t=n[1],(b(t)||void 0!==e)&&!q(e))return g(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!q(t))return t}),n[1]=t,D.apply(O,n)}}),B.prototype[A]||i(15)(B.prototype,A,B.prototype.valueOf),d(B,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},function(e,t,i){var n=i(20)("meta"),o=i(8),s=i(14),r=i(7).f,a=0,c=Object.isExtensible||function(){return!0},l=!i(5)((function(){return c(Object.preventExtensions({}))})),u=function(e){r(e,n,{value:{i:"O"+ ++a,w:{}}})},d=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,n)){if(!c(e))return"F";if(!t)return"E";u(e)}return e[n].i},getWeak:function(e,t){if(!s(e,n)){if(!c(e))return!0;if(!t)return!1;u(e)}return e[n].w},onFreeze:function(e){return l&&d.NEED&&c(e)&&!s(e,n)&&u(e),e}}},function(e,t,i){var n=i(17),o=i(39),s=i(24);e.exports=function(e){var t=n(e),i=o.f;if(i)for(var r,a=i(e),c=s.f,l=0;a.length>l;)c.call(e,r=a[l++])&&t.push(r);return t}},function(e,t,i){var n=i(36),o=Math.max,s=Math.min;e.exports=function(e,t){return(e=n(e))<0?o(e+t,0):s(e,t)}},function(e,t,i){var n=i(18);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,i){var n=i(7),o=i(3),s=i(17);e.exports=i(4)?Object.defineProperties:function(e,t){o(e);for(var i,r=s(t),a=r.length,c=0;a>c;)n.f(e,i=r[c++],t[i]);return e}},function(e,t,i){var n=i(16),o=i(40).f,s={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return r&&"[object Window]"==s.call(e)?function(e){try{return o(e)}catch(t){return r.slice()}}(e):o(n(e))}},function(e,t,i){"use strict";var n=i(17),o=i(39),s=i(24),r=i(30),a=i(52),c=Object.assign;e.exports=!c||i(5)((function(){var e={},t={},i=Symbol(),n="abcdefghijklmnopqrst";return e[i]=7,n.split("").forEach((function(e){t[e]=e})),7!=c({},e)[i]||Object.keys(c({},t)).join("")!=n}))?function(e,t){for(var i=r(e),c=arguments.length,l=1,u=o.f,d=s.f;c>l;)for(var h,m=a(arguments[l++]),p=u?n(m).concat(u(m)):n(m),f=p.length,_=0;f>_;)d.call(m,h=p[_++])&&(i[h]=m[h]);return i}:c},function(e,t){e.exports=function(e,t,i,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(i+": incorrect invocation!");return e}},function(e,t,i){var n=i(21),o=i(80),s=i(81),r=i(3),a=i(54),c=i(82),l={},u={};(t=e.exports=function(e,t,i,d,h){var m,p,f,_,g=h?function(){return e}:c(e),v=n(i,d,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(s(g)){for(m=a(e.length);m>b;b++)if((_=t?v(r(p=e[b])[0],p[1]):v(e[b]))===l||_===u)return _}else for(f=g.call(e);!(p=f.next()).done;)if((_=o(f,v,p.value,t))===l||_===u)return _}).BREAK=l,t.RETURN=u},function(e,t,i){var n=i(3);e.exports=function(e,t,i,o){try{return o?t(n(i)[0],i[1]):t(i)}catch(r){var s=e["return"];throw void 0!==s&&n(s.call(e)),r}}},function(e,t,i){var n=i(31),o=i(1)("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||s[o]===e)}},function(e,t,i){var n=i(41),o=i(1)("iterator"),s=i(31);e.exports=i(13).getIteratorMethod=function(e){if(null!=e)return e[o]||e["@@iterator"]||s[n(e)]}},function(e,t,i){var n=i(3),o=i(22),s=i(1)("species");e.exports=function(e,t){var i,r=n(e).constructor;return void 0===r||null==(i=n(r)[s])?t:o(i)}},function(e,t){e.exports=function(e,t,i){var n=void 0===i;switch(t.length){case 0:return n?e():e.call(i);case 1:return n?e(t[0]):e.call(i,t[0]);case 2:return n?e(t[0],t[1]):e.call(i,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(i,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(i,t[0],t[1],t[2],t[3])}return e.apply(i,t)}},function(e,t,i){var n=i(2),o=i(59).set,s=n.MutationObserver||n.WebKitMutationObserver,r=n.process,a=n.Promise,c="process"==i(18)(r);e.exports=function(){var e,t,i,l=function(){var n,o;for(c&&(n=r.domain)&&n.exit();e;){o=e.fn,e=e.next;try{o()}catch(s){throw e?i():t=void 0,s}}t=void 0,n&&n.enter()};if(c)i=function(){r.nextTick(l)};else if(!s||n.navigator&&n.navigator.standalone)if(a&&a.resolve){var u=a.resolve(void 0);i=function(){u.then(l)}}else i=function(){o.call(n,l)};else{var d=!0,h=document.createTextNode("");new s(l).observe(h,{characterData:!0}),i=function(){h.data=d=!d}}return function(n){var o={fn:n,next:void 0};t&&(t.next=o),e||(e=o,i()),t=o}}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},function(e,t,i){var n=i(2).navigator;e.exports=n&&n.userAgent||""},function(e,t,i){var n=i(3),o=i(8),s=i(60);e.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var i=s.f(e);return(0,i.resolve)(t),i.promise}},function(e,t,i){var n=i(11);e.exports=function(e,t,i){for(var o in t)n(e,o,t[o],i);return e}},function(e,t,i){var n=i(1)("iterator"),o=!1;try{var s=[7][n]();s["return"]=function(){o=!0},Array.from(s,(function(){throw 2}))}catch(r){}e.exports=function(e,t){if(!t&&!o)return!1;var i=!1;try{var s=[7],a=s[n]();a.next=function(){return{done:i=!0}},s[n]=function(){return a},e(s)}catch(r){}return i}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,i){"use strict";var n=i(55),o=i(27),s=i(28),r={};i(15)(r,i(1)("iterator"),(function(){return this})),e.exports=function(e,t,i){e.prototype=n(r,{next:o(1,i)}),s(e,t+" Iterator")}},function(e,t,i){var n=i(14),o=i(30),s=i(37)("IE_PROTO"),r=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?r:null}},function(e,t,i){"use strict";var n=i(95)(!0);i(63)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,i=this._i;return i>=t.length?{value:void 0,done:!0}:(e=n(t,i),this._i+=e.length,{value:e,done:!1})}))},function(e,t,i){var n=i(36),o=i(23);e.exports=function(e){return function(t,i){var s,r,a=String(o(t)),c=n(i),l=a.length;return c<0||c>=l?e?"":void 0:(s=a.charCodeAt(c))<55296||s>56319||c+1===l||(r=a.charCodeAt(c+1))<56320||r>57343?e?a.charAt(c):s:e?a.slice(c,c+2):r-56320+(s-55296<<10)+65536}}},function(e,t,i){var n=i(42),o=i(23);e.exports=function(e,t,i){if(n(t))throw TypeError("String#"+i+" doesn't accept regex!");return String(o(e))}},function(e,t,i){var n=i(1)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[n]=!1,!"/./"[e](t)}catch(o){}}return!0}},function(e,t,i){var n=i(10),o=i(13),s=i(5);e.exports=function(e,t){var i=(o.Object||{})[e]||Object[e],r={};r[e]=t(i),n(n.S+n.F*s((function(){i(1)})),"Object",r)}},function(e,t,i){"use strict";var n=i(5);e.exports=function(e,t){return!!e&&n((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,i){i(4)&&"g"!=/./g.flags&&i(7).f(RegExp.prototype,"flags",{configurable:!0,get:i(45)})},function(e,t,i){i(58)("split",2,(function(e,t,n){"use strict";var o=i(42),s=n,r=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var a=void 0===/()??/.exec("")[1];n=function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!o(e))return s.call(i,e,t);var n,c,l,u,d,h=[],m=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,f=void 0===t?4294967295:t>>>0,_=new RegExp(e.source,m+"g");for(a||(n=new RegExp("^"+_.source+"$(?!\\s)",m));(c=_.exec(i))&&!((l=c.index+c[0].length)>p&&(h.push(i.slice(p,c.index)),!a&&c.length>1&&c[0].replace(n,(function(){for(d=1;d<arguments.length-2;d++)void 0===arguments[d]&&(c[d]=void 0)})),c.length>1&&c.index<i.length&&r.apply(h,c.slice(1)),u=c[0].length,p=l,h.length>=f));)_.lastIndex===c.index&&_.lastIndex++;return p===i.length?!u&&_.test("")||h.push(""):h.push(i.slice(p)),h.length>f?h.slice(0,f):h}}else"0".split(void 0,0).length&&(n=function(e,t){return void 0===e&&0===t?[]:s.call(this,e,t)});return[function(i,o){var s=e(this),r=null==i?void 0:i[t];return void 0!==r?r.call(i,s,o):n.call(String(s),i,o)},n]}))},function(e,t,i){var n=i(2),o=i(103),s=i(7).f,r=i(40).f,a=i(42),c=i(45),l=n.RegExp,u=l,d=l.prototype,h=/a/g,m=/a/g,p=new l(h)!==h;if(i(4)&&(!p||i(5)((function(){return m[i(1)("match")]=!1,l(h)!=h||l(m)==m||"/a/i"!=l(h,"i")})))){l=function(e,t){var i=this instanceof l,n=a(e),s=void 0===t;return!i&&n&&e.constructor===l&&s?e:o(p?new u(n&&!s?e.source:e,t):u((n=e instanceof l)?e.source:e,n&&s?c.call(e):t),i?this:d,l)};for(var f=function(e){e in l||s(l,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},_=r(u),g=0;_.length>g;)f(_[g++]);d.constructor=l,l.prototype=d,i(11)(n,"RegExp",l)}i(61)("RegExp")},function(e,t,i){var n=i(8),o=i(104).set;e.exports=function(e,t,i){var s,r=t.constructor;return r!==i&&"function"==typeof r&&(s=r.prototype)!==i.prototype&&n(s)&&o&&o(e,s),e}},function(e,t,i){var n=i(8),o=i(3),s=function(e,t){if(o(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{(n=i(21)(Function.call,i(57).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(o){t=!0}return function(e,i){return s(e,i),t?e.__proto__=i:n(e,i),e}}({},!1):void 0),check:s}},function(e,t,i){var n=i(10),o=i(106)(!0);n(n.S,"Object",{entries:function(e){return o(e)}})},function(e,t,i){var n=i(17),o=i(16),s=i(24).f;e.exports=function(e){return function(t){for(var i,r=o(t),a=n(r),c=a.length,l=0,u=[];c>l;)s.call(r,i=a[l++])&&u.push(e?[i,r[i]]:r[i]);return u}}},function(e,t){!function(t){"use strict";var i=Object.prototype,n=i.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",r=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag",c="object"==typeof e,l=t.regeneratorRuntime;if(l)c&&(e.exports=l);else{(l=t.regeneratorRuntime=c?e.exports:{}).wrap=b;var u="suspendedStart",d="suspendedYield",h="executing",m="completed",p={},f={};f[s]=function(){return this};var _=Object.getPrototypeOf,g=_&&_(_(I([])));g&&g!==i&&n.call(g,s)&&(f=g);var v=E.prototype=w.prototype=Object.create(f);k.prototype=v.constructor=E,E.constructor=k,E[a]=k.displayName="GeneratorFunction",l.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},l.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(v),e},l.awrap=function(e){return{__await:e}},x(M.prototype),M.prototype[r]=function(){return this},l.AsyncIterator=M,l.async=function(e,t,i,n){var o=new M(b(e,t,i,n));return l.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(v),v[a]="Generator",v[s]=function(){return this},v.toString=function(){return"[object Generator]"},l.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},l.values=I,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,n){return r.type="throw",r.arg=e,t.next=i,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],r=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var a=n.call(s,"catchLoc"),c=n.call(s,"finallyLoc");if(a&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(a){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var r=s?s.completion:{};return r.type=e,r.arg=t,s?(this.method="next",this.next=s.finallyLoc,p):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),S(i),p}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var o=n.arg;S(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:I(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),p}}}function b(e,t,i,n){var o=t&&t.prototype instanceof w?t:w,s=Object.create(o.prototype),r=new P(n||[]);return s._invoke=function(e,t,i){var n=u;return function(o,s){if(n===h)throw new Error("Generator is already running");if(n===m){if("throw"===o)throw s;return B()}for(i.method=o,i.arg=s;;){var r=i.delegate;if(r){var a=C(r,i);if(a){if(a===p)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===u)throw n=m,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=h;var c=y(e,t,i);if("normal"===c.type){if(n=i.done?m:d,c.arg===p)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(n=m,i.method="throw",i.arg=c.arg)}}}(e,i,r),s}function y(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(n){return{type:"throw",arg:n}}}function w(){}function k(){}function E(){}function x(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function M(e){var t;this._invoke=function(i,o){function s(){return new Promise((function(t,s){!function r(t,i,o,s){var a=y(e[t],e,i);if("throw"!==a.type){var c=a.arg,l=c.value;return l&&"object"==typeof l&&n.call(l,"__await")?Promise.resolve(l.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):Promise.resolve(l).then((function(e){c.value=e,o(c)}),(function(e){return r("throw",e,o,s)}))}s(a.arg)}(i,o,t,s)}))}return t=t?t.then(s,s):s()}}function C(e,t){var i=e.iterator[t.method];if(void 0===i){if(t.delegate=null,"throw"===t.method){if(e.iterator["return"]&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=y(i,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,p;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function I(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:B}}function B(){return{value:void 0,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(e,t,i){"use strict";i.r(t),i(69),i(70),i(29),i(6),i(9),i(12),i(0),i(94);var n=function(){function e(){this._events={}}var t=e.prototype;return t.on=function(e,t){(this._events[e]||(this._events[e]=[])).push(t)},t.off=function(e,t){var i=this._events[e];if(i){var n=i.indexOf(t);n>=0&&i.splice(n,1)}},t.once=function(e,t){var i=this;this.on(e,t),this.on(e,(function n(){i.off(e,t),i.off(e,n)}))},t.subscribe=function(e,t){var i=this;return this.on(e,t),function(){i.off(e,t)}},t.emit=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var o=this._events[e];o&&o.slice().forEach((function(e){e.apply(void 0,i)}))},e}(),o=function(e){var t=e.source,i=e.container;return new Promise((function(e,n){var o,s=document.createElement("link");s.rel="stylesheet",s.href=t,s.media="inapplicable",s.onload=function(){s.media="all",e(s)},s.onerror=function(){i.removeChild(s),n(new Error("Failed to load css: '"+t+"'."))},o=function(){return i.appendChild(s)},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(function r(){document.removeEventListener("DOMContentLoaded",r),o()})):o()}))},s=function(e){var t=e.source,i=e.container;return new Promise((function(e,n){var o=document.createElement("script");o.src=t,o.async=!0,o.crossOrigin="anonymous",o.onload=function(){e(o)},o.onerror=function(){i.removeChild(o),n(new Error("Failed to load script: '"+t+"'."))},i.appendChild(o)}))},r=(i(25),i(32),function(e){return"/"===e[e.length-1]?e.slice(0,-1):e}),a=function(e){var t=e.staticBase,i=e.appName,n=e.bundleName;return r(t)+"/"+i+"/"+n+".css"},c=function(e){var t=e.staticBase,i=e.appName,n=e.bundleName,o=e.target,s=e.lang,a=e.bundleSuffix,c=void 0===a?"":a;return r(t)+"/"+i+"/"+function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter(Boolean).join(".")}(n+c,o,s,"bundle","js")},l=function(e){var t=e.staticHost,i=e.version;return r(t)+(i?"/"+i:"")},u=function(e){var t=e.YandexZen&&e.YandexZen.app;if(!t)throw new Error("App has not been loaded correctly.");return t};function d(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,i){return(p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,i){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return i&&m(o,i.prototype),o}).apply(null,arguments)}function f(e){var t="function"==typeof Map?new Map:void 0;return(f=function(e){if(null===e||(i=e,-1===Function.toString.call(i).indexOf("[native code]")))return e;var i;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return p(e,arguments,h(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),m(n,e)})(e)}i(101),i(26);var _,g,v,b,y=function(e){try{return decodeURIComponent(e)}catch(t){return null}},w=/[?&]([^&#]*)/,k=function(e,t){var i=Object.assign({},function(e){var t={},i=e.indexOf("?");if(-1===i)return t;for(var n=i;;){var o=e.slice(n).match(w);if(!o)break;n+=o[0].length;var s=o[1].split("="),r=s[0],a=s[1];if(r&&a){var c=y(r),l=y(a);c&&l&&(t[c]=l)}}return t}(e),t),n=e.indexOf("?"),o=e.indexOf("#"),s=-1!==o?o:e.length,r=-1!==n?n:s;return e.slice(0,r)+function(e){var t,i=(t=e,Object.keys(t));return 0===i.length?"":i.reduce((function(t,i){var n=e[i];return i&&void 0!==n?t+(0===t.length?"?":"&")+encodeURIComponent(i)+"="+encodeURIComponent(n):t}),"")}(i)+e.slice(s)},E=function(e){var t=e.ok,i=e.url,n=e.status,o=e.statusText;if(!t)throw new Error(i+" "+n+" ("+o+")");return function(e){var t=e.headers.get("Content-Type");return t&&-1!==t.indexOf("application/json")?e.json():e.text()}(e)},x=function(e,t){void 0===t&&(t={});var i=t,n=i.params,o=i.timeout,s=void 0===o?6e4:o,r=i.credentials,a=void 0===r?"include":r,c=function(e,t){if(null==e)return{};var i,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(o[i]=e[i]);return o}(i,["params","timeout","credentials"]),l=n?k(e,n):e;return new Promise((function(e,t){fetch(l,Object.assign({credentials:a},c)).then(E).then(e,t),function(e){return new Promise((function(t){setTimeout(t,e)}))}(s).then((function(){t(new Error("Request timeout."))}))}))},M=function(e,t){return void 0===t&&(t={}),x(e,Object.assign({},t,{method:"GET",params:Object.assign({},t.params||{},{rnd:String(Date.now())})}))},C=function(e){void 0===e&&(e={});var t=Object.assign({Accept:"application/json"},e.headers),i=e.method,n=void 0===i?"POST":i,o=e.body;return t["Content-Type"]||(t["Content-Type"]="application/json",o&&"string"!=typeof o&&(o=JSON.stringify(o))),Object.assign({},e,{method:n,headers:t,body:o})},T=function(e,t){return void 0===t&&(t={}),x(e,C(t))},S=function(e,t){return void 0===t&&(t={}),x(e,C(t))};!function(e){e.PackShown="packShown",e.BulkEventLogged="bulkEventLogger",e.ApiResponseTtlExpired="apiResponseTtlExpired",e.ApiResponseErrorTtlExpired="apiResponseErrorTtlExpired",e.NotShownPackUpdated="notShownPackUpdated",e.LastShownPackUpdated="lastShownPackUpdated",e.UpdatePreload="updatePreload"}(_||(_={})),function(e){e.Onboarding="onboarding",e.Export="export",e.Layout="layout",e.More="more",e.Bulk="bulk",e.ClientLogs="client_logs",e.Subs="subs",e.Profile="profile",e.CountryLang="language",e.Blocked="blocked",e.Preferences="preferences",e.Subscribers="subscribers",e.Category="category",e.Categories="categories",e.Suggest="suggest",e.Multisearch="multisearch",e.BlockedSuggest="blocked_suggest",e.VideoRecommend="video_recommend",e.GetVideoPopupData="get_video_popup_data",e.PublisherConfig="publisher_config",e.CommentsCounter="comments_counter",e.SendAppLinkSms="send_app_link_sms",e.SocialProfile="social_profile",e.SocialActivityFeed="social_activity_feed",e.SocialProfileEdit="social_profile_edit",e.ProfileCompleteOnboarding="profile_complete_onboarding",e.ProfileDeactivate="profile_deactivate",e.ProfileCancelDeactivate="profile_cancel_deactivate",e.AllChannelsLink="all_channels_link",e.CurrentUserInterests="current-user-interests",e.CurrentUserSubscriptions="current-user-subscriptions",e.Teasers="teasers",e.SupportLink="support_link",e.AdArticle="ad_article"}(g||(g={})),function(e){e.SessionCache="cacheStorage",e.MultiSessionCache="multiCacheStorage"}(v||(v={})),function(e){e.Network="network",e.CacheBeforeNetwork="cache-before-network",e.CacheAfterNetwork="cache-after-network"}(b||(b={})),Object.keys(g).reduce((function(e,t){return e[t]=null,e}),{}),v.SessionCache,(P={})[g.Export]="export",P[g.Layout]="layout",P[g.Teasers]="teasers",P[g.PublisherConfig]="publisher-config",P[g.CurrentUserSubscriptions]="current-user-subscriptions",P[g.AdArticle]="ad-article",{}[g.CurrentUserInterests]="api/social/current-user-interests",f(Error);var P,I=function(e,t){return e?t&&"GET"===e?"POST":e:t?"POST":"GET"},B=function(e){switch(e){case"PUT":return S;case"POST":return T;case"GET":default:return M}},O=function(e){return"static"in e};i(44),i(64),i(105);var D=function(e){var t,i=e.oauthToken,n=e.login,o=e.deviceId,s=e.partnerId,r=e.profileId,a=e.yandexuid;return i||n||(t=("; "+document.cookie).match(/; yandex_login=([^;]*)/))&&t[1]||s||o||r||a||function(){var e=("; "+document.cookie).match(/; yandexuid=([^;]*)/);return e&&e[1]}()},j=function(e){return"number"==typeof e},A=function(e){return"string"==typeof e},R=function(e){return null!==e&&"object"==typeof e},N=function(e){return A(e)&&e.length>0},L=function(e){function t(t){return e.call(this,function(e){return"MultiformatCacheError: "+e}(t))||this}return d(t,e),t}(f(Error)),F=function(e){var t=e["static"],i=t.appRender,n=t.jsResources,o=t.cssResources,s=e.received_at;if(!(i&&n&&o&&s))throw new L("Invalid cache record")},U=function(e,t,i){var n=e[i],o=t[i];if(!A(n)||!A(o)||n!==o)throw new ae("Validation error",void 0,{"Validation param":i,"Validation expected":'"'+o+'":'+typeof o,"Validation received":'"'+n+'":'+typeof n})};function z(e,t,i,n,o,s,r){try{var a=e[s](r),c=a.value}catch(l){return void i(l)}a.done?t(c):Promise.resolve(c).then(n,o)}function H(e){return function(){var t=this,i=arguments;return new Promise((function(n,o){var s=e.apply(t,i);function r(e){z(s,n,o,r,a,"next",e)}function a(e){z(s,n,o,r,a,"throw",e)}r(void 0)}))}}i(107);var W,V,$,q,Y="undefined"!=typeof document&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),K=null,G=function(e,t){return(Y?(K||(K=new Promise((function(e,t){var i=Y.open("zen-db",1);i.onerror=function(){t(i.error)},i.onupgradeneeded=function(){i.result.createObjectStore("zen-api-cache")},i.onsuccess=function(){e(i.result),i.result.onclose=function(){K=null}}}))),K):Promise.reject(new Error("indexedDB is not supported."))).then((function(i){return new Promise((function(n,o){var s=i.transaction("zen-api-cache",e);s.oncomplete=function(){n()},s.onerror=function(){o(s.error||new Error("IDB transaction error"))},t(s.objectStore("zen-api-cache"))}))}))},X={get:(V=H(regeneratorRuntime.mark((function Xe(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Can't get value from null storage");case 1:case"end":return e.stop()}}),Xe)}))),function(){return V.apply(this,arguments)}),put:(W=H(regeneratorRuntime.mark((function Ze(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),Ze)}))),function(){return W.apply(this,arguments)})},Z={get:function(e){return function(e){var t;return G("readonly",(function(i){t=i.get(e)})).then((function(){return t.result}))}(e)},put:function(e,t){return function(e,t){return G("readwrite",(function(i){i.put(t,e)}))}(e,t)},remove:function(e){return function(e){return G("readwrite",(function(t){t["delete"](e)}))}(e)},isEnabled:function(){return Boolean("undefined"!=typeof document&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB))},keys:function(){return(e=[],G("readonly",(function(t){var i=t.openKeyCursor?t.openKeyCursor():t.openCursor();i.onsuccess=function(){i.result&&(e.push(i.result.key),i.result["continue"]())}})).then((function(){return e}))).then((function(e){var t=[];return e.forEach((function(e){A(e)&&t.push(e)})),t}));var e}},J={no_amp_links:!0,forced_bulk_stats:!0,blurred_preview:!0,big_card_images:!0,complaints_with_reasons:!0,pass_experiments:!0,video_providers:["yandex-web","youtube","youtube-web"],screen:{dpi:241},need_background_image:!0,color_theme:"white",no_small_auth:!0,need_main_color:!0,need_zen_one_data:!0,interests_supported:!0,return_sources:!0,screens:["feed","category","categories","profile","switchable_subs","suggest","multisearch","blocked","preferences","subscribers","blocked_suggest","video_recommend","language","send_app_link_sms","comments_counter","comments_infos","social_profile","social_activity_feed","social_profile_edit","social_interests_feedback","profile_onboarding_shown","profile_complete_onboarding","profile_deactivate","profile_cancel_deactivate","get_video_popup_data","get_online_viewer_count"],stat_params_with_context:!0,carousel_support:!0},Q=function(e){var t=e.columnCount,i=e.rowPlaceholders,n=e.cardPlaceholders,o=e.theme,s=e.isVideoDisabled,r=e.isAdUnderArticleEnabled,a=e.screen,c=e.disabledYandexBlockIds,l=Object.assign({},J,{column_count:t,row_placeholders:i,card_placeholders:n,color_theme:o,ad_under_article_supported:r,screen:Object.assign({},J.screen,a)});return s&&(l.no_videos=!0,delete l.video_providers),c&&(l.disabled_yandex_block_ids=c),l},ee=function(e){function t(){return e.apply(this,arguments)||this}return d(t,e),t}(f(Error)),te=function(e,t){return new Promise((function(i,n){e.then(i,n),setTimeout((function(){n(new ee("Request timeout."))}),t)}))},ie=function(e){window.localStorage.setItem("retries",JSON.stringify(e))},ne=function(){var e=[],t=window.localStorage.getItem("retries");if(!t)return e;try{var i=JSON.parse(t);return function(e){if(!Array.isArray(e))throw new Error}(i),i}catch(n){return console.error(n),e}},oe=function(e,t){var i=e.params,n=i.host,o=i.clid,s=i.cache,r=i.staticHostname,a=i.exps,c=i.countryCode,l=i.tld,u=i.debugParams,d=Q(i),h={"Zen-Features":JSON.stringify(d)};(null==s?void 0:s.precacheRid)&&(h["zen-request-id"]=null==s?void 0:s.precacheRid),t&&(h["X-Retry-Request"]="true");var m={clid:o,key:null==s?void 0:s.precacheKey,staticHostname:r||"https://zen.yandex.ru/",countryCode:c,tld:l,debugParams:u},p=n&&n.match(/^https:\/\/([^/]+)/);return p&&p[0]!==m.staticHostname&&(m.host=p[1]),function(e,t,i){var n=e.staticHostname,o=e.host,s=e.key,r=e.clid,a=e.countryCode,c=e.tld,l=e.debugParams,u=void 0===l?{}:l,d=Object.assign({key:s,clid:r,host:o,country_code:a,tld:c},u);return function(e,t,i){var n=function(e,t){var i,n,o,s,r,a=e.method,c=e.params,l=e.mode,u=e.headers,d={params:c,headers:Object.assign({},t?(i=t,n=i.userInfo,o=i.zenFeatures,s=i.clientExperiments,r={},n&&n.oauthToken&&(r.Authorization="OAuth "+n.oauthToken),Object.keys(o||{}).length>0&&(r["Zen-Features"]=JSON.stringify(o)),r["Zen-Client-Experiments"]=["zen-version:2.639.0"].concat(Array.isArray(s)&&s.length>0?s:[]).join(", "),r["X-ZenLib-Version"]="2.639.0",r):{},u),mode:l,method:a};return e.body?Object.assign({},d,{body:e.body}):d}(t,i),o=n.method,s=n.body,r=I(o,s);return B(r)(e,n)}(k(n+"api/v3/launcher/export-cached",d),t,i).then((function(e){return Object.assign({},e,{received_at:Date.now()})}))}(m,{headers:h},{clientExperiments:a})},se=function(e){var t=e.clid,i=e.host,n=e.lang,o=e.countryCode,s=e.tld,r=e.userInfo;return{clid:t,host:i,countryCode:o,tld:s||"",lang:n,userId:D(r||{})||""}},re=function(e){var t,i,n=e.args,o=e.cacheRecord,s=e.validateByStoreTtl,r=void 0!==s&&s;try{if(!o)throw new Error("No cache record");O(o)&&(F(o),function(e,t){var i=e.received_at,n=e["static"],o=n.ttl,s=n.storeTtl,r=1e3*(t?s:o);if(!(j(i)&&j(r)&&i+r>Date.now()))throw new L("Invalid cache "+(t?"store-ttl":"ttl")+".")}(o,r),t=se(n.params),i=o.validationParams,U(t,i,"clid"),U(t,i,"host"),U(t,i,"lang"),U(t,i,"countryCode"),U(t,i,"tld"),U(t,i,"userId"))}catch(a){throw n.outputBus.emit("invalidatePack"),a}return o},ae=function(e){function t(t,i,n,o){var s;return void 0===n&&(n={}),(s=e.call(this,t)||this).key=i,s.meta=n,s.type=o,s}return d(t,e),t.prototype.concat=function(e){for(var t in e.key&&(this.meta[e.key]=e.message),e.meta)this.meta[t]=e.meta[t]},t}(f(Error)),ce=function(e){var t=function(t){return void 0===t&&(t=!1),te(function(t){return oe(e,t).then((function(t){if(O(t)){var i=e.cache,n=e.outputBus;F(t),i.put(function(e,t){var i=e.params;return O(t)?Object.assign({},t,{validationParams:se(i)}):t}(e,t)),n.emit("renderCachePut",t)}return t}))}(t),15e3)["catch"]((function(t){var i,n=new ae(t.message,"Network",t.meta);throw t instanceof ee&&(n.type="timeout"),(null===(i=e.params.cache)||void 0===i?void 0:i.precacheRid)&&e.outputBus.emit("ssrSchemeFailed",n),n}))},i=e.params.retryBudget;return function(e){var t=e.windowSize,i=void 0===t?100:t,n=e.retryBudget,o=void 0===n?1:n,s=e.retryCharge,r=void 0===s?3:s,a=e.func,c=e.retryFunc,l=e.storeState,u=void 0===l?ie:l,d=e.loadState,h=void 0===d?ne:d,m=e.errorFilter,p=void 0===m?function(){return!0}:m,f=[];try{f=h()}catch(g){return console.error(g),a}var _=function(e){f.push(e),f.length===i&&f.shift(),u(f)};return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=!1,s=0,l=function(){return n?(++s,_(1)):(s=0,_(0)),n&&c?c.apply(void 0,t):a.apply(void 0,t)};return function u(){return l()["catch"]((function(e){if(f.reduce((function(e,t){return e+t}),0)/f.length*100<=o&&p(e)&&s<r)return n=!0,u();throw e}))}()}}({retryBudget:void 0===i?20:i,func:t,retryFunc:function(){return t(!0)},errorFilter:function(e){return e instanceof ae&&"timeout"===e.type}})()},le=function(e){return e.cache.get().then((function(t){return re({args:e,cacheRecord:t,validateByStoreTtl:!0})}))["catch"]((function(e){throw new ae(e.message,"Any cache",e.meta)}))},ue=function(e){var t=new ae("Getting SSR cache error");return function(i){return e.reduce((function(e,n){return e["catch"]((function(e){return t.concat(e),n(i)}))}),Promise.reject(new ae))["catch"]((function(e){throw t.concat(e),t}))}},de=ue([function(e){return e.cache.get().then((function(t){return re({args:e,cacheRecord:t})}))["catch"]((function(t){var i=new ae(t.message,"Fresh cache",t.meta);throw e.outputBus.emit("ssrSchemeFailed",i),i}))},ce,le]),he=ue([ce,le]);!function(e){e.Chromium="chromium",e.Firefox="firefox",e.Edge="edge",e.Legacy="legacy",e.Node="node"}(q||(q={}));var me,pe,fe=["Chrome >= 55"],_e=["Firefox >= 51"],ge=["Edge >= 13"],ve=(($={})[q.Chromium]=fe,$[q.Firefox]=_e,$[q.Edge]=ge,$[q.Legacy]=[].concat(fe,_e,ge,["IE >= 11","Android >= 4.4","iOS >= 7"]),$[q.Node]=["Node >= 8"],q.Chromium,q.Chromium,q.Chromium,q.Firefox,q.Edge,q.Legacy,q.Legacy,q.Legacy,q.Legacy,q.Legacy,q.Chromium,q.Chromium,q.Chromium,q.Chromium,q.Legacy,q.Legacy,q.Chromium,q.Chromium,q.Chromium,q.Chromium,q.Legacy,q.Legacy,function(e){var t=e.isAdblockEnabled,i=e.isChunkedBundle;return t&&i?"-external-react-inline-style":t?"-inline-style":i?"-external-react":""});i(43);!function(e){e.Network="network",e.Logic="logic",e.Unknown="unknown"}(me||(me={})),function(e){e.Front="frontend",e.Backend="backend",e.Unknown="somebody"}(pe||(pe={})),f(Error);var be={},ye=function(e,t){var i=void 0===t?{}:t,n=i.invalidate,o=void 0!==n&&n,s=i.crossorigin,r=void 0!==s&&s,a=i.useCredentials,c=void 0!==a&&a;if(be[e]&&!o)return be[e].promise;var l=document.createElement("script");l.src=e,l.async=!0,r&&(l.crossOrigin=c?"use-credentials":"anonymous");var u=new Promise((function(t,i){l.onload=function(){be[e].loaded=!0,t()},l.onerror=function(t){be[e].error=t,i(t)}}));return be[e]&&document.head&&document.head.removeChild(be[e].script),document.head&&document.head.appendChild(l),be[e]={script:l,promise:u,loaded:!1,error:null},u};ye.isRequested=function(e){return Boolean(be[e])},ye.isLoaded=function(e){return Boolean(be[e]&&be[e].loaded)},ye.isFailed=function(e){return Boolean(be[e]&&be[e].error)};
/*! onloadCSS. (onload callback for loadCSS) [c]2017 Filament Group, Inc. MIT License */
var we,ke,Ee=new(function(){function e(){this._starts={},this._results={}}var t=e.prototype;return t.start=function(e){var t=this._starts[e],i=this._results[e];t||i||(this._starts[e]=Date.now())},t.finish=function(e){var t=this._starts[e],i=this._results[e];t&&!i&&(this._results[e]=Date.now()-t)},t.getResults=function(){return Object.assign({},this._results)},t.getInProgress=function(){var e=this;return Object.keys(this._starts).filter((function(t){return"number"!=typeof e._results[t]})).sort()},e}()),xe=function(){return window.YandexZen=window.YandexZen||{}},Me=function(e){return R(e)&&Boolean(e._isZenLoggerEventInfo)},Ce=function(e){return R(e)&&N(e.stack)},Te=function(e){if(!R(e))return!1;try{return JSON.stringify(e),!0}catch(t){return!1}},Se=function(e,t){var i=xe()[e];return void 0===i?t:i},Pe=function(e,t){xe()[e]=t};!function(e){e.Error="ERROR",e.Warning="WARNING",e.Log="LOG"}(we||(we={})),function(e){e.Runtime="RUNTIME",e.Longterm="LONGTERM",e.Ignore="IGNORE"}(ke||(ke={}));var Ie,Be,Oe={appName:"cached-render-morda-desktop-loader",target:"legacy",version:"2.639.0"},De=function(){function e(e){this._sessionStart=Date.now(),this._context={},this._sessionId=e.sessionId,this._handler=e.handler,this._tech=e.tech}var t=e.prototype;return t._getSessionTimestamp=function(){return"undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?Math.round(window.performance.now()):Date.now()-this._sessionStart},t._createEventInfoWithLoggerContext=function(e){var t,i=function s(e,t){if(void 0===t&&(t=0),Me(e))return e;var i="",n=null,o=null,r=null,a=null;if(N(e))i=e;else if(Ce(e)){if(Me((r=e)._zenLoggerEventInfo))return r._zenLoggerEventInfo;i=r.message}else if(R(e)){var c=e;i=c.message,n=c.details||null,o=c.context||null,a=c.cause||null}return N(i)||(i="Unnamed event"),Te(n)||(n=null),R(o)||"function"==typeof o||(o=null),Ce(r)||(r=null),a?(a=t<10?s(a,t+1):null)&&(i=i+": "+a.message):a=null,{message:i,details:n,context:o,error:r,cause:a,_isZenLoggerEventInfo:!0}}(e),n=Object.assign({},Oe,this._context);if("function"==typeof i.context)try{t=i.context(n)}catch(o){t=n}else t=R(i.context)?Object.assign({},n,i.context):n;return Te(t)?Object.assign({},i,{context:t}):Object.assign({},i,{context:Oe})},t._dispatchLoggerEvent=function(e,t){this._handler({tech:this._tech,logger:this,logLevel:t.logLevel,storageLevel:t.storageLevel,sessionId:this._sessionId,sessionTimestamp:this._getSessionTimestamp(),info:this._createEventInfoWithLoggerContext(e)})},t.setHandler=function(e){try{this._handler=e(this._handler)}catch(t){}},t.setContext=function(e){try{this._context="function"==typeof e?e(this._context):e}catch(t){this._context=Oe}},t.error=function(e,t){this._dispatchLoggerEvent(e,{logLevel:we.Error,storageLevel:t&&t.storageLevel||ke.Runtime})},t.warn=function(e,t){this._dispatchLoggerEvent(e,{logLevel:we.Warning,storageLevel:t&&t.storageLevel||ke.Longterm})},t.log=function(e,t){this._dispatchLoggerEvent(e,{logLevel:we.Log,storageLevel:t&&t.storageLevel||ke.Ignore})},e}(),je=function(e,t){if(e.logLevel===we.Error&&e.storageLevel===ke.Runtime)try{var i=e.info.context.apiLoggerUrl||function(){var e=Se("apiLoggerUrl");if(N(e))return e;var t,i=Se("apiHost");return N(i)||(i="/"),("/"===(t=i)[t.length-1]?t.slice(0,-1):t)+"/api/v3/launcher/client_error"}(),n=function(e){var t,i=e.info,n=i.message,o=i.context,s=i.error;return t=s?{name:s.name,stack:s.stack,file:s.file,column:s.column,line:s.line}:{},{logLevel:"error",tech:e.tech,message:n,context:{rids:o.rids,error_details:t,rezen:{version:o.version,app_name:o.appName,session_id:e.sessionId}}}}(e);!function(e){var t=e.url,i=e.body,n=e.onload,o=e.onerror,s=new XMLHttpRequest;n&&(s.onload=n),o&&(s.onerror=o),s.open("POST",t,!0),s.setRequestHeader("Content-Type","application/json; charset=utf-8"),s.setRequestHeader("X-ZenLib-Version","2.639.0"),s.send(i)}({url:i,body:JSON.stringify(n)}),t()}catch(o){t(new Error("Empty error"))}else t()},Ae=(i(102),function(e){return function(t){var i=e.errorsLimit,n=e.filterPatterns,o=e.filterRepetitiveErrors,s=n.slice(),r=0;return function(e){e.logLevel===we.Error?r>=i||!function(e,t){return t.every((function(t){return!(t instanceof RegExp&&t.test(e)||"string"==typeof t&&e===t)}))}(e.info.message,s)||t(e,(function(t){t||(o&&s.push(e.info.message),r++)})):t(e,(function(){}))}}}),Re=((Ie={})[we.Error]=[we.Error],Ie[we.Warning]=[we.Error,we.Warning],Ie[we.Log]=[we.Error,we.Warning,we.Log],Ie),Ne=((Be={})[we.Error]=console.error,Be[we.Warning]=console.warn,Be[we.Log]=console.log,Be),Le=new n,Fe=Le.on.bind(Le),Ue=Le.off.bind(Le),ze=document.head,He=function(e,t){return Ee.start(t),e.then((function(e){return Ee.finish(t),e}))["catch"]((function(e){if(e instanceof ee)throw new Error("Resource not loaded in timeout: "+t);throw e}))},We=function(e,t){var i,n=e.uri,o=e.id;return(i=function(){var e=t({source:n,container:ze}),i=te(e,6e4);return He(i,o)},function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.apply(void 0,t)["catch"]((function(){return i.apply(void 0,t)}))})()},Ve=function(e){return Promise.all(e.map((function(e){return We(e,o)})))},$e=function(e){return e.reduce((function(e,t){return e.then((function(){return We(t,s)}))}),Promise.resolve())},qe=function(e,t){return e.map((function(e,i){if(t&&t[i])return{uri:e,id:t[i]};var n=e.match(/([^/])*$/);return{uri:e,id:n&&n[0]||e}}))},Ye=function(e,t){var i=t["static"],n=i.appRender,o=i.cssResources,s=i.cssResourcesIds,r=i.placeholders,a=i.styles,c=i.rows;return Ve(qe(o,s)).then((function(){!function(e){window.document.head.insertAdjacentHTML("beforeend",e)}(a),function(e,t){e.insertAdjacentHTML("afterbegin",t),Le.emit("firstPaint")}(e,n),r&&function(e){e.forEach((function(e){var t=document.getElementById(e.container);t&&Le.emit("placeholder",Object.assign({},e,{container:t}))}))}(r),Le.emit("rowsChanged",c)}))},Ke=function(e,t){if(O(t)){var i=e.appContainer;if(!i)throw Error("No Zen container");return function(e,t,i){var n=t["static"],o=n.jsResources,s=n.jsResourcesIds;return Promise.all([$e(qe(o,s)),Ye(i,t)]).then((function(){var n=u(window),o=Q(e);try{return n.initFromContainer(Object.assign({},t["static"],e,{zenFeatures:o}),i),n}catch(s){throw Le.emit("invalidatePack"),s}}))}(e,t,i)}return function(e,t){var i,n,o,s,r,d,h,m,p=(n=(i=e).staticHost,o=void 0===n?"https://yastatic.net/s3/zen-lib/":n,s=i.lang,r=i.isAdblock,d=i.version,h=i.isDev,m={staticBase:l({staticHost:o,version:h?"":d||"2.437.2"}),appName:"cached-render-morda-desktop",bundleName:"app",target:h?q.Chromium:q.Legacy,lang:s,bundleSuffix:ve({isAdblockEnabled:r,isChunkedBundle:!1})},{jsResources:[{uri:c(m),id:"js"}],cssResources:r?[]:[{uri:a(m),id:"css"}]}),f=p.jsResources,_=p.cssResources;return Promise.all([$e(f),Ve(_)]).then((function(){var i=u(window),n=Q(e);return i.initFromState(Object.assign({},e,{cache:null,zenFeatures:n}),t.data),i}))}(e,t)},Ge={create:function(e){var t=function(e){e||console.warn("Logger host not configured");var t,i,n,o,s=Se("rid")||Date.now().toString(36).slice(0,16)+"_"+Math.random().toString(36).slice(2,18),r=(o=(t=we.Error,i=Re[t],function(e){return function(t,n){i.includes(t.logLevel)&&Ne[t.logLevel](t.info.message),e(t,n)}})(je),n=Ae({tech:"rezen",errorsLimit:50,filterRepetitiveErrors:!0,filterPatterns:["NS_ERROR","Failed to fetch","request timeout"]})(o),function(){try{for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n.apply(this,t)}catch(o){}}),a=new De({sessionId:s,handler:r,tech:"rezen"});return Pe("rid",s),Pe("zenLogger",a),Pe("apiHost",e||"https://zen.yandex.ru"),a}(e.host);return He(function(e,t){var i,n,o={cache:(n=Z.isEnabled()?Z:X,{get:function(){return n.get("cached-render-desktop")},put:function(e){return n.put("cached-render-desktop",e)}}),params:e,outputBus:t};return(null===(i=e.cache)||void 0===i?void 0:i.precacheRid)?he(o):de(o)}(e,Le),"api").then((function(t){return Ke(e,t)})).then((function(e){return Le.emit("timings",Ee.getResults()),e}))["catch"]((function(i){throw t.error(i),e.appContainer&&(e.appContainer.innerHTML=""),i}))},on:Fe,off:Ue,forcedSymbolUsage:Symbol("foo")};t["default"]=Ge}])["default"]}})},function(e,t){!function(e,t){"use strict";e.Ya=e.Ya||{};var i=e.Ya.ycCookie=e.Ya.ycCookie||{};function n(){for(var e,i=t.cookie.split("; "),n=0;n<i.length;++n)if("yc"===(e=i[n].split("="))[0])return r(e.slice(1).join("="))||{};return{}}function o(e){var i,n,o=function(e){if(!e||"object"!=typeof e)return;for(var t,i,n=[],o=0,s=Object.keys(e),r=s.length;o<r;o++)t=e[s[o]],i=[s[o],encodeURIComponent(t.value||t)],/^\d+$/.test(t.expires)&&i.unshift(t.expires),n.push(i.join("."));return n.join("#")}(e),s=new Date,r=s.getTime();o?s.setTime(r+12096e5):s.setTime(r-487),i="expires="+s.toUTCString(),n="domain="+t.domain.replace(/^\S*yandex/,".yandex"),t.cookie="yc="+o+"; "+i+"; "+n+"; path=/"}function s(e){try{return decodeURIComponent(e)}catch(t){return e}}function r(e){if(!e||"string"!=typeof e||!e.length)return{};/%23\d{10}/.test(e)&&(e=s(e)),e=e.split("#");for(var t,i=Date.now()/1e3,n={},o=0,r=e.length;o<r;o++)2===(t=e[o].split(".")).length?n[t[0]]=s(t[1]):t.length>2&&(isNaN(t[0])?n[t[0]]=s(t.slice(1).join(".")):t[0]>i&&(n[t[1]]={value:s(t.slice(2).join(".")),expires:t[0]}));return n}i.get=function(e){var t,i,o,s=n(),r={};if(!s[e])return{};(t=s[e])&&t.value&&(t=t.value);for(var a=0,c=(i=t.split(",")).length;a<c;++a)r[(o=i[a].split(":"))[0]]=parseInt(o[1],10);return r},i.set=function(e,t){if(!e||!t||"object"!=typeof t)return this;var i,s,r,a=n(),c=[];for(i=0,s=(r=Object.keys(t)).length;i<s;i++)c.push(r[i]+":"+t[r[i]]);return c.length?(a[e]={value:c.join(","),expires:String(Math.floor(Date.now()/1e3+259200))},o(a),this):this},i.remove=function(e){if(!e)return this;var t=n();return delete t[e],o(t),this}}(window,document)},function(e,t){BEM.decl("i-block-renderer",{},{wrapRender:function(e,t){try{return this._params=e,t()}finally{this._params=null}},getCurrent:function(){return this._params||null}})},function(e,t){!function(){"use strict";var e;home.stat.addHandler=function(t,i){e||(e=[]),e.some((function(e){return e.func===i&&e.prefix===t}))||e.push({prefix:t,func:i,re:t?new RegExp("^"+t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")+"(\\.|\\(|$)"):/.*/})},home.stat.removeHandler=function(t,i){e&&(e=e.filter((function(e){return e.prefix!==t||e.func!==i})))},["logPath","redirect"].forEach((function(t){var i=home.stat[t];home.stat[t]=function(n,o,s){var r="redirect"===t?"click":n;if(o){var a=o.replace(/\([^)]+\)/g,"");return e&&e.forEach((function(e){if(e.re.test(a)){var i=e.func(r,o,t);i&&i.counter&&(o=i.counter)}})),i.call(home.stat,n,o,s)}}}))}()},function(e,t){BEM.DOM.decl("media-infinity-footer",{onSetMod:{js:{inited:function(){this._$mediaGrid=$(".media-grid"),this._$content=$(".media-infinity-footer__content"),this._settings=this.findBlockInside(this._$content,"head-options2"),this.channel("i-reposition-event").on("reposition",this._updateVerticalScroll,this),this._updateVerticalScroll(null,BEM.DOM.win.scrollTop()),this.bindTo("up","click",this._scrollToTop);var e=this.findElem(this._$content,"collapsed-settings");this.bindTo(e,"click",this._onCollapsedSettingsClick),this.bindKeyTo(e,"space enter",this._onCollapsedSettingsClick),"fixed"!==this._$content.css("position")||this.bindToWin("scroll",this._updateHorizontalScroll),this.bindTo(this._$content,"focusin",this._onFocusIn),setTimeout(function(){this.setMod(this._$content,"animated","yes")}.bind(this),100),this.params.hiddenBlocksPromo&&(this.channel("media-service").on("collapse",this._onBlockCollapse,this),this.bindToWin("pointerclick",this._onDocClick,this))}}},_updateHorizontalScroll:function(){var e=BEM.DOM.win.scrollLeft();this._prevScrollLeft!==e&&(this._prevScrollLeft=e,this._$content.css("margin-left",-e))},_updateVerticalScroll:function(e,t){if(!(this._promoShow&&Math.abs(t-this._promoShowScroll)<16||(this._settings&&this._settings.hasPopupVisible()&&(this._settings.hidePopup(),document.activeElement&&document.activeElement.blur()),$(":focus").closest(this._$content).length))){this._tooltip&&this._tooltip.delMod("shown");var i=this._$mediaGrid.offset().top,n=window.innerHeight,o=document.body.scrollHeight,s=t>i||o-t-n<200,r=t>i;this._toggleFooter(s),this.toggleMod("arrow-visible","yes",r)}},_scrollToTop:function(){$("html,body").stop().animate({scrollTop:0},"fast")},_onFocusIn:function(){this._toggleFooter(!0)},_toggleFooter:function(e){var t=$("html");e!==t.hasClass("document_media-infinity-footer_yes")&&(this.setMod(this._$content,"sticky","yes"),t.toggleClass("document_media-infinity-footer_yes",e),this.trigger("toggleFooter",e)),e||(this._promoShow=!1)},_onCollapsedSettingsClick:function(){BEM.blocks["hidden-blocks-popup"].show()},_onBlockCollapse:function(){this._promoFirstShow||(this._promoFirstShow=!0,this._toggleFooter(!0),this._promoShow=!0,this._promoShowScroll=BEM.DOM.win.scrollTop(),this.params.hiddenBlocksPromo.show_url&&((new Image).src=this.params.hiddenBlocksPromo.show_url),setTimeout(function(){var e=this.findElem(this._$content,"collapsed-settings"),t=$(home.view("tooltip",{mods:{theme:"cloud",autoclosable:"yes"},js:{to:["top-center"],mainOffset:17},content:home.l10n("foot.promo_tooltip")}));0===e.length&&(e=this.findElem(this._$content,"settings")),e.before(t),this.setMod(e,"highlight","yes"),home.stat.logPath("show","foot.hidden_blocks_promo");var i=this.findBlockOn(t,"tooltip");this._tooltip=i,i.setOwner(e).setMod("shown","yes").on("hide",(function(){this.delMod(e,"highlight"),setTimeout(function(){BEM.DOM.destruct(t),this._tooltip=null}.bind(this),300)}),this).on("click",(function(){home.stat.logPath("click","foot.hidden_blocks_promo"),BEM.blocks["hidden-blocks-popup"].show()}))}.bind(this),300))},_onDocClick:function(e){this._promoShow&&($(e.target).closest(this._$content).length||(this._promoShow=!1,this._updateVerticalScroll(null,BEM.DOM.win.scrollTop())))}})},function(e,t){BEM.DOM.decl("tooltip",{onSetMod:{js:{inited:function(){this._popup=null,this._owner=null}},shown:{yes:function(){this._getPopup().setMod("visible","yes").unbindFromDoc("keydown")},"":function(){this._getPopup().delMod("visible")}}},getOwner:function(){return this._owner},setOwner:function(e){return this._owner=e,this._getPopup().setAnchor(e),this},setContent:function(e){return BEM.DOM.update(this.elem("content"),e),this.redraw()},redraw:function(){return this.hasMod("shown","yes")&&this._getPopup().redraw(),this},destruct:function(){this.delMod("shown"),this.__base.apply(this,arguments)},_getPopup:function(){return this._popup||(this._popup=this.findBlockOn("popup2").on("beforeOpen",this._onPopupShow,this).on("beforeClose",this._onPopupHide,this)),this._popup},_onPopupShow:function(){this.trigger("show")},_onPopupHide:function(){this.delMod("shown").trigger("hide")},_onClick:function(){this.trigger("click").delMod("shown")}},{live:function(){this.liveBindTo("click",(function(){this._onClick()}))}})},function(e,t){BEM.DOM.decl("tooltip",{_onEnter:function(){this.setMod("hovered","yes")},_onLeave:function(){this.delMod("hovered")}},{live:function(){return this.liveBindTo("pointerover pointerout",(function(e){this.domElem[0].contains(e.relatedTarget)||("pointerover"===e.type?this._onEnter(e):this._onLeave(e))})),this.__base()}})},function(e,t){BEM.DOM.decl("tooltip",{},{show:function(e,t){var i=$(home.view("tooltip",t.props));e.before(i);var n=i.bem("tooltip");return n.setOwner(e).setMod("shown","yes").on("hide",(function(){setTimeout((function(){BEM.DOM.destruct(i)}),300)}),this),n}})},function(e,t){BEM.DOM.declMix("mix-tabber-media-service",{_onPanelChange:function(e,t){this.__base.apply(this,arguments),this._recalcPanel(t)},_recalcPanel:function(e){var t=this.findBlockInside(e,"arrowed-list");t&&t.toggleArrows(),this._calcOverflow(e)},_createPanel:function(){var e=this.__base.apply(this,arguments);return e.addClass("media-service__panel"),e}})},function(e,t){BEM.DOM.decl({block:"kinopoisk",baseBlock:"media-service",baseMix:["mix-tabber","mix-tabber-labels","mix-tabber-labels-keyboard","mix-tabber-loader","mix-tabber-loader-keyboard","mix-tabber-labels-preloader","mix-tabber-media-service"]},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var e=this._mainList=this.findBlockInside("arrowed-list");e&&e.on("listOut",this._loadMoreFilms,this)}}},_getInitData:function(){return home.getData("kinopoisk.data.data",{})},_getPanelHTML:function(e,t){return home.view("kinopoisk__panel",{films:t.films,title:t.title,hasStream:home.getData("kinopoisk.data.hasStream"),id:e,logShow:!1})},_loadData:function(e){var t={CountryAllowed:this.params.country,kp_group_ids:e},i=home.getData("kinopoisk.data.kpRankExp");return i&&(t.kp_rank_exp=i),$.ajax({url:home.addQueryToUrl("/portal/api/data/1/kinopoisk/",t),xhrFields:{withCredentials:!0},dataType:"json",timeout:15e3}).asPromise().then((function(e){var t=e&&e.block&&e.block[0];return t&&t.data&&t.data.groups&&t.data.groups[0]||[]}))},_loadMoreFilms:function(){var e=this._selectedKey,t=this._$panel,i=this.findElem(t,"list"),n=this._data[this._defaultKey].films;this._mainList.un("listOut",this._loadMoreFilms,this),i.append(home.view("kinopoisk__film-loader")),this._loadDataWrapped(e,{forceReload:!0}).then(function(){var o=this._filterLastFilms(n,this._data[e].films);this.findElem(i,"film-loader").remove(),i.append(home.view("kinopoisk__film-list",{films:o,title:this._data[e].title,hasStream:home.getData("kinopoisk.data.hasStream"),id:e,logShow:!1,startIndex:i.children().length})),this._onPanelChange(e,t),this.findBlockInside(t,"imageloader").updateItems()}.bind(this))["catch"](function(){this.findElem(i,"film-loader").remove()}.bind(this))},_filterLastFilms:function(e,t){var i={};return e.forEach((function(e){i[e.contentGroupUuid]=!0})),t.filter((function(e){return!(e.contentGroupUuid in i)}))}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("film","pointerclick",(function(){window.defaultMetrikaCounter&&window.defaultMetrikaCounter.reachGoal("kp_films_click")})),this.liveBindKey("film","space enter",(function(e){home.stat.logPath("click",e.data.domElem.attr(home.stat.attr)),window.defaultMetrikaCounter&&window.defaultMetrikaCounter.reachGoal("kp_films_click")}))}})},function(e,t){BEM.DOM.decl("player-control",{_onClick:function(e){var t=e.data.domElem.data();return this.__self.process(t),!1}},{process:function(e){return this.testOptions(e)?this._open?Promise.resolve():(this._open=!0,this.beforePlay(e).then(this.play.bind(this)).then(this.onPlaySuccess.bind(this))["catch"](this.onPlayFail.bind(this))):(home.error.logError({block:this.getName(),message:"testOptions failed",method:"process",meta:e,sourceType:"logic"}),Promise.reject())},testOptions:function(e){return!!e.fromBlock},beforePlay:function(e){return this._initTiming(),this._lockAutoReload(),Promise.all([this._showLoader(e),this._awaitData()]).then((function(){return e}))},play:function(e){return Promise.resolve(e)},onPlaySuccess:function(){return this._firstPaintTiming(),$(":focus").blur(),this._hideLoader()},onPlayFail:function(e){this.hide(),this._rejectTiming(),e&&home.error.logError({block:this.getName(),message:"player-control.onPlayFail: unexpected error",method:"onPlayFail",sourceType:e.timeout?"timeout":"logic"},e)},getContainer:function(){return $("body")},_initTiming:function(){this.TIMINGSUFFIX&&!this._timing&&(this._timing=Ya.Rum.makeSubPage("28.15.1242."+this.TIMINGSUFFIX),Ya.Rum.sendTTI(!1,Ya.Rum.getTime(),this._timing))},_rejectTiming:function(){this._timing&&this._timing.cancel()},_firstPaintTiming:function(){this._timing&&!this._timingSent&&(Ya.Rum.sendTimeMark("2793",Ya.Rum.getTime(),!1,this._timing),this._timingSent=!0)},_lockAutoReload:function(){BEM.channel("reload").trigger("lock",{block:this.getName()})},_releaseAutoReload:function(){BEM.channel("reload").trigger("release",{block:this.getName()})},_awaitData:function(){return this._awaitDataPromise||(this._awaitDataPromise=new Promise((function(e){home.subscribeData(e)}))),this._awaitDataPromise},_createLoader:function(){return $(home.view("player-control__loader",{}))},_showLoader:function(){if(this._loader)return Promise.resolve();var e=this._createLoader();return e.appendTo(this.getContainer()),e.one("click",".player-control__close",function(){return this.hide(),!1}.bind(this)),this._loader=e,this._loader.show(),Promise.resolve()},_hideLoader:function(){this._loader&&(this._loader.off("click"),this._loader.remove(),this._loader=null)},hide:function(){this._hideLoader(),this._releaseAutoReload(),this._open=!1},live:function(){this.liveBindTo("link","pointerclick",(function(e){return this._onClick(e)}))}})},function(e,t){BEM.DOM.decl("player-control",{},{live:function(){return this.liveBindKey("link","enter space",(function(e){return this._onClick(e)})),this.__base()}})},function(e,t){BEM.DOM.decl({block:"kinopoisk-control",baseBlock:"player-control"},{},{LOAD_TIMEOUT:1e4,TIMINGSUFFIX:567,testOptions:function(e){return e.selectionId&&this.__base(e)},beforePlay:function(e){return this.__base(e).then((function(){var t=home.getData("kinopoisk-control");if(!t)throw new Error("invalid data");if(!t.enabled)throw new Error("disabled");var i=$.extend({filmId:e.filmId,selectionId:e.selectionId,from_block:e.fromBlock,from_position:e.fromPosition},t.query);return{urlBase:t.urlBase,query:i}}))},deleteFrame:function(){this.frame&&($(window).off("message.kinopoisk"),BEM.DOM.destruct(this.frame),this.frame=null)},openFrame:function(e){return this.deleteFrame(),new Promise(function(t,i){var n=this.getContainer(),o=this.frame=$('<iframe name="kinopoisk-frame" class="kinopoisk-control__frame" width="100%" height="100%" gesture="media" allowfullscreen allow="autoplay; fullscreen; encrypted-media"></iframe>'),s=setTimeout((function(){var e=Error("timeout");e.timeout=1,i(e)}),this.LOAD_TIMEOUT);n.append(o),o.attr("src",home.makeUrl({path:e.urlBase,query:e.query})),$(window).on("message.kinopoisk",function(e){var i=e.originalEvent.data||{};e.originalEvent.source===o[0].contentWindow&&("show"===i.type&&(clearTimeout(s),t()),"hide"===i.type&&this.hide())}.bind(this)),o.one("error",(function(e){$(window).off("message.kinopoisk"),i(e)}))}.bind(this))},hide:function(){this.__base(),this.deleteFrame()},play:function(e){return this.openFrame(e)}})},function(e,t){BEM.DOM.decl("kinopoisk-control",{},{onPlaySuccess:function(){$("body").addClass("b-page_overflow_hidden"),this.__base()},hide:function(){$("body").removeClass("b-page_overflow_hidden"),this.__base()}})},function(e,t){BEM.DOM.decl("arrowed-list",{onSetMod:{js:{inited:function(){this._prevLeft=0,this._moveTo=-1,this.initEvents()},"":function(){this.unBindEvents()}}},initEvents:function(){if(!this._inited){var e=home.throttle(this.onScroll.bind(this),100);this._rafWrap(this.toggleArrows.bind(this)),this.bindTo("content","scroll",e),this.bindToWin("resize.arrowedlist",e),this.bindToWin("orientationchange.arrowedlist",e),this._inited=!0}},unBindEvents:function(){this.unbindFrom("content","scroll"),this.unbindFromWin("resize.arrowedlist"),this.unbindFromWin("orientationchange.arrowedlist"),this._inited=!1},destruct:function(){if(this._requestId)for(var e=0;e<this._requestId;e++)cancelAnimationFrame(this._requestId[e])},move:function(e,t){var i=this.elem("content");this.stopAnimation(),this._moveTo=e,t?(i.scrollLeft(e),this._afterMove()):(this.animate(e,{duration:this.params.duration||400,complete:this._afterMove.bind(this)}),this._moving=!0)},stopAnimation:function(){this.elem("content").stop()},animate:function(e,t){this.elem("content").animate({scrollLeft:e},t)},_getItems:function(){return this.elem("content").children().toArray()},_getContainerWidth:function(){return this.elem("content").prop("offsetWidth")},update:function(){var e=this.elem("content");this._contentWidth=e.width(),this._containerWidth=this._getContainerWidth();var t=this._containerWidth-this._contentWidth;this._scrollWidth=e[0].scrollWidth+t,this._scroll=e.scrollLeft(),this._stops=this._getStops()},_getStops:function(){var e=this._prepareStops();return this._filterStops(e)},_prepareStops:function(){var e=this._getItems(),t=0;return e.map((function(e,i){return 0===i&&(t=e.offsetLeft),e.offsetLeft-t}))},_filterStops:function(e){var t=this._scrollWidth-this._containerWidth;return(e=e.filter((function(e){return e>=0&&e<t}),this)).push(t),e},moveLeft:function(){this.update();for(var e=-1!==this._moveTo?this._moveTo:this._scroll,t=this.params.moveRatio*this._containerWidth,i=this._stops.length-1;i>=0&&this._stops[i]>=e-t-5;)i--;i<0&&e>this._stops[0]+5&&(i=0),i>=0&&this.move(this._stops[i])},moveRight:function(){this.update();for(var e=-1!==this._moveTo?this._moveTo:this._scroll,t=this.params.moveRatio*this._containerWidth,i=this._stops.length,n=0;n<i&&this._stops[n]<=e+t+5;)n++;n<i?this.move(this._stops[n]):this.move(this._stops[i-1])},seek:function(e,t){var i=e.closest(".arrowed-list__content > *"),n=this._getItems();i[0]&&this.move(i[0].offsetLeft-n[0].offsetLeft,t)},getVisibleItems:function(e){var t=this._getItems();return e===undefined&&(e=this._scroll),t.filter((function(t){var i=t.offsetLeft,n=$(t).width();return i<e+this._containerWidth&&i+n>e}),this)},onScroll:function(){var e;this._rafWrap(this.toggleArrows.bind(this)),this._moving||(e=this.elem("content").scrollLeft(),Math.abs(this._prevLeft-e)>=(this.params.valuableScroll||0)&&(this.channel("arrow-list").trigger("scroll"+(this.params.blockid?"."+this.params.blockid:"")),this.trigger("scroll"),this._prevLeft=e))},toggleArrows:function(){this.update();var e=this._scroll>4;this.toggleMod(this.elem("left"),"hidden","yes",!e),this.toggleMod("left","yes",e);var t=this._scroll+4<this._scrollWidth-this._containerWidth;this.toggleMod(this.elem("right"),"hidden","yes",!t),this.toggleMod("right","yes","",t)},_afterMove:function(){if(this.domElem){this._prevLeft=this.elem("content").scrollLeft(),this.channel("arrow-list").trigger("move"+(this.params.blockid?"."+this.params.blockid:"")),this.trigger("move"),this._moving=!1,this._moveTo=-1,this._rafWrap(this.toggleArrows.bind(this));var e=this.getVisibleItems();e.length&&this.trigger("visibleItems",e)}},getDefaultParams:function(){return{moveRatio:.33}},_rafWrap:function(e){var t,i="requestAnimationFrame"in window;this.params.rafExp&&i?(this._requestId||(this._requestId=[]),t=requestAnimationFrame(e),this._requestId.push(t)):e()},getScrollPosition:function(){return this._scroll}},{live:function(){return this.liveBindTo("left","click",(function(){this.moveLeft()})),this.liveBindTo("right","click",(function(){this.moveRight()})),this.liveBindKey("left","space enter",(function(e){this.moveLeft(),e.preventDefault()})),this.liveBindKey("right","space enter",(function(e){this.moveRight(),e.preventDefault()})),!1}})},function(e,t){$.extend($.easing,{easeOutQuint:function(e,t,i,n,o){return n*((t=t/o-1)*t*t*t*t+1)+i}})},function(e,t){BEM.DOM.decl({block:"arrowed-list",modName:"theme",modVal:"media"},{getDefaultParams:function(){return{moveRatio:.75,duration:900}},_getItems:function(){var e=this.elem("items-wrapper");return e.length?e.children().toArray():this.elem("list").children().toArray()},_getContainerWidth:function(){return this.elem("content").outerWidth(!0)},moveLeft:function(){this.__base.apply(this,arguments),this.params.counter&&home.stat.logPath("click",this.params.counter+".swipe.left")},moveRight:function(){this.__base.apply(this,arguments),this.params.counter&&home.stat.logPath("click",this.params.counter+".swipe.right")},toggleArrows:function(){this.__base.apply(this,arguments),this.params.counter&&!this._scrollCounted&&this.hasMod("left","yes")&&(home.stat.logPath("scroll",this.params.counter+".scroll"),this._scrollCounted=!0)},animate:function(e,t){(t=t||{}).easing=t.easing||"easeOutQuint",this.__base(e,t)}})},function(e,t){BEM.DOM.decl({block:"arrowed-list",modName:"list-out",modVal:"yes"},{onScroll:function(){this.__base.apply(this,arguments),this._checkEndOfList()},_checkEndOfList:function(){this.update();var e=this.elem("content").scrollLeft(),t=this._scrollWidth,i=this._containerWidth,n=this.params.listOutRatio*this._containerWidth;e<=n&&this.trigger("listOut","left"),e+i>t-n&&this.trigger("listOut","right")},getDefaultParams:function(){return $.extend(this.__base.apply(this,arguments),{listOutRatio:1})}})},function(e,t){!function(){"use strict";var e={"":"a","":"b","":"v","":"g","":"d","":"e","":"e","":"j","":"z","":"i","":"y","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"f","":"h","":"c","":"ch","":"sh","":"sch","":"","":"i","":"","":"e","":"u","":"ya"};home.transliterate=function(t){return t.replace(/[-]/gi,(function(t){var i=t.toLowerCase(),n=i!==t;return i in e&&(i=e[i],n&&(i=i.toUpperCase())),i}))}}()},function(e,t){!function(){"use strict";BEM.DOM.decl({block:"imageloader",modName:"tracking",modVal:"yes"},{onSetMod:{"full-visible":{yes:function(){this._calcTrackingCardsOnScroll(this._lastOffsetLeft||0)}}},getAlreadyShownCards:function(){return this._lastCard},_loadFirstCards:function(){this._lastCard=0,this.__base.apply(this,arguments)},_loadCards:function(e){this.__base.apply(this,arguments),this.hasMod("full-visible","yes")&&this._calcTrackingCardsOnScroll(e)},_calcTrackingCardsOnScroll:function(e){if(this._lastOffsetLeft=e,this._leftOffset){var t=this.domElem.outerWidth()-this._leftOffset+e,i=this._getViewedCards(t,.8);this._processViewedCardsInSight(i)}},_processViewedCardsInSight:function(e){if(!(e.length<=this._lastCard)){for(var t=this._lastCard;t<e.length;++t)home.stat.logDOMShow(e.eq(t),{visibilityCheck:!1,precise:!0});this.trigger("sightChange",e.length),this._lastCard=e.length}}})}()},function(e,t){BEM.DOM.decl({block:"imageloader",modName:"tracking",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this._setModOnVisible("full-visible",{threshold:.9})}}})},function(e,t){BEM.DOM.decl({block:"music",baseBlock:"media-service"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),BEM.channel("media-service").on("collapse remove",this._onCollapse,this)}}},_onCollapse:function(){!this._handledCollapse&&this.hasMod("collapsed","yes")&&(this._player&&this._player.destroy(),this._handledCollapse=!0)},unsetActiveTrack:function(e){this.$active&&(this.setMod(this.$active,"active","no"),(e||this.params.logged)&&(this.$active=null)),!this.params.logged&&e&&this.$preview&&this.setMod(this.$preview,"preview","no")},closeBanner:function(e){var t=e.data.domElem.closest(".music__track");this.setMod(t,"preview","no"),e.stopPropagation()},playOneTrack:function(e){var t=this.params.tracks[e];this.initPlayer().then(function(){if(this._source&&this._player){var i=this._source.getCurrent();if(i&&i.id===t.id){var n=this.isPlaying?"pause":"play";home.stat.logPath("click","music.item."+e+"."+n),this._audio.togglePause()}else{if(home.stat.logPath("click","music.item."+e+".play"),this._sourceIndex===e)return;this._sourceIndex=e,this.isPlaying||this.unsetActiveTrack(t),this._player.setSource({from:"web-morda",tracks:[t]}).then(this._source.setIndex.bind(this,0))["catch"]((function(e){home.error.logError({block:"music",message:"set source error",method:"playOneTrack",sourceType:"musicapi"},e)}))}}}.bind(this))},play:function(e){this.$error&&this.delMod(this.$error,"error");var t=e.data.domElem,i=t.data("index");if(this.params.logged)this.playFromTrack(i);else{if(this.hasMod(t,"preview","yes"))return;this.playOneTrack(i)}},playFromTrack:function(e){this.setSource().then(function(){if(this._source)if(this._source.getIndex()===e){var t=this.isPlaying?"pause":"play";home.stat.logPath("click","music.item."+e+"."+t),this._audio.togglePause()}else home.stat.logPath("click","music.item."+e+".play"),this.isPlaying||this.unsetActiveTrack(),this._source.setIndex(e)}.bind(this))},playPause:function(){var e=this.isPlaying?"pause":"play";home.stat.logPath("click","music.button."+e),this._audio?this._audio.togglePause():this.setSource().then(function(){this._source.setIndex(0)}.bind(this))},setSource:function(){return this._sourcePromise||(this._sourcePromise=this.initPlayer().then(function(){return this._player.setSource({from:"web-morda",tracks:this.params.tracks})}.bind(this))["catch"]((function(e){home.error.logError({block:"music",message:"set source error",method:"setSource",sourceType:"musicapi"},e)}))),this._sourcePromise},initPlayer:function(){if(this._initPromise)return this._initPromise;(new Audio).play();var e=this.params.host+"/api/v2.1/index-min/"+location.host;return this._initPromise=new Promise((function(t,i){home.loadScript(e,t,i)})).then(this.onLoad.bind(this),this.onLoadError)["catch"]((function(e){home.error.logError({block:"music",message:"init music api error",method:"onLoad",sourceType:"musicapi"},e)})),this._initPromise},onLoad:function(){window.ya.music.Player.settings.setRequestsGlobal({fromMorda:!0});var e=new window.ya.music.Player({type:"html5"});e.on("state",this.onStateChange.bind(this)),e.on("track",this.onTrackChange.bind(this)),e.on("track-error",this.onTrackError.bind(this)),this._player=e;var t=e.source();return this._source=t,this._audio=e.audio(),e.readyPromise()},onLoadError:function(e){home.error.logError({block:"music",message:"load music api error",sourceType:"network"},e),this._initPromise=null},onStateChange:function(e){!this.$preview||this.params.logged||this.track||"idle"!==e||this.setMod(this.$preview,"preview","yes");var t="playing"===e;this.isPlaying!==t&&(this.isPlaying=t,this.$active&&(this.toggleMod(this.$active,"active","yes","no",this.isPlaying),this.params.logged&&this.toggleMod(this.elem("button"),"active","yes","no",this.isPlaying)))},onTrackChange:function(e){if(this.unsetActiveTrack(e),this.track=e,e){var t=e.chartPosition-1;this.$active=this.elem("track").eq(t),this.toggleMod(this.$active,"active","yes","no",this.isPlaying),this.params.logged?this.toggleMod(this.elem("button"),"active","yes","no",this.isPlaying):this.$preview=this.$active}},onTrackError:function(e){var t=e.chartPosition-1;this.$error=this.elem("track").eq(t),this.setMod(this.$error,"error","yes"),home.error.logError({block:"music",message:"track play error",sourceType:"musicapi"})}},{TEXT_OVERFLOW_LINES:2,live:function(){this.__base.apply(this,arguments);var e=function(e){e.stopPropagation()},t=function(e){e.preventDefault(),this.closeBanner(e)},i=function(e){e.preventDefault(),this.play(e)},n=function(e){e.preventDefault(),this.playPause()};this.liveBindTo("banner-go","click",e),this.liveBindKey("banner-go","space enter",e),this.liveBindTo("banner-close","click",t),this.liveBindKey("banner-close","space enter",t),this.liveBindTo("track","click",i),this.liveBindKey("track","space enter",i),this.liveBindTo("play-button","click",n),this.liveBindKey("play-button","space enter",n)}})},function(e,t){BEM.DOM.decl({block:"music-loader",baseBlock:"insert-loader"},{_getDataUrl:function(){return(this.params.data||this.params).url},_checkData:function(e){return e.result.tracks},_selectData:function(e){for(var t=[],i=e.result.tracks,n=0;n<i.length/2;n++)t.push([i[2*n],i[2*n+1]]);return{tracks:i,logged:e.result.logged,pairs:t}},_getHTML:function(e){var t=this.params?this.params.data||this.params:{};return home.view("music",{tracks:e.tracks,logged:e.logged,pairs:e.pairs,host:t.host,passport:t.passport,plus:t.plus})}})},function(e,t){BEM.DOM.decl({block:"games",baseBlock:"media-service",baseMix:["mix-tabber","mix-tabber-labels","mix-tabber-labels-keyboard","mix-tabber-media-service"]},{_getPanelHTML:function(e,t){return home.view("games__panel",{items:t.games,title:t.title,id:e,logShow:!0})}})},function(e,t){BEM.DOM.decl({block:"games-loader",baseBlock:"insert-loader"},{_getDataUrl:function(){return this.params.url},_checkData:function(e){return e.tabs&&e.tabs.length},_selectData:function(e){return e},_getHTML:function(e){return home.view("games",e)}})},function(e,t){BEM.DOM.decl({block:"autoru-inserts",baseBlock:"media-service",baseMix:["mix-tabber","mix-tabber-labels","mix-tabber-labels-keyboard","mix-tabber-media-service"]},{_getPanelHTML:function(e,t){return home.view("autoru-inserts__panel",{items:t.content,title:t.title,id:e,logShow:e!==this._defaultKey})}})},function(e,t){BEM.DOM.decl({block:"autoru-inserts-loader",baseBlock:"insert-loader"},{_getDataUrl:function(){return this.params.url},_checkData:function(e){return e.tabs&&e.tabs.length},_selectData:function(e){return e},_getHTML:function(e){return home.view("autoru-inserts",e)}})},function(e,t){BEM.DOM.declMix("mix-tabber-select",{onSetMod:{js:function(){this.__base.apply(this,arguments),BEM.blocks.select2.on(this.domElem,"change",(function(e,t){this._selectTab(t.currVal,{parentKey:e.target.domElem.data("parent-key")})}),this)}}})},function(e,t){BEM.DOM.decl({block:"afisha-inserts",baseBlock:"media-service",baseMix:["mix-tabber","mix-tabber-loader","mix-tabber-loader-keyboard","mix-tabber-labels","mix-tabber-labels-keyboard","mix-tabber-labels-preloader","mix-tabber-select","mix-tabber-media-service"]},{onSetMod:{js:{inited:function(){if(this.__base.apply(this,arguments),this._cinemas={},this._geohelperIsDisabled=home.getData("geohelper.disabled"),this.params.logged){var e=this.findBlockOutside("media-grid");e&&e.hasMod("collapsed","yes")?e.onFirst("expanded",(function(){this._loadFavorites()}),this):(this.channel("i-reposition-event").on("reposition",this._onScroll,this),this._onScroll(undefined,BEM.DOM.win.scrollTop()))}}}},_getKeys:function(){return this.elem("tab").length?this.__base.apply(this,arguments):["cinema"]},_isFilms:function(e){return 0===e.indexOf("cinema")},_onScroll:function(e,t){window.innerHeight+t>this.domElem.offset().top+this.__self.MIN_VISIBLE_HEIGHT&&(this.channel("i-reposition-event").un("reposition",this._onScroll,this),this._loadFavorites())},_loadFavorites:function(){if(!this._geohelperIsDisabled){var e="https://"+this.params.geohelperHost+"/geohelper/nogeoget";$.ajax({dataType:"json",url:e,context:this,xhrFields:{withCredentials:!0},timeout:this.__self.GEOHELPER_TIMEOUT,data:{geoid:this.params.geoId,lang:this.params.locale,unsessions:1}}).then((function(e){this._appendFavouriteTabs(e&&e.afisha)}),(function(t,i,n){home.error.logAjaxError({block:"afisha-inserts",message:"_loadFavorites: ajax",url:e,source:"geohelper_nogeoget"},t,i,n)}))}},_updateDefaultTab:function(){this._loadAndDrawData(this._getDefaultKey(),this._$panel)},_appendFavouriteTabs:function(e){if(e&&e.length){var t,i="media",n="n";this.domElem.hasClass("media-service_inline-tabs_yes")&&(i="inline-media",t="inline-media",n="n"),this.elem("tabs").append(home.view("mix-tabber-select",{mods:{type:"radio",view:"default",tone:"default",text:"vary",theme:"normal",size:i,buttonTone:t,menuSize:n,fade:"yes",native:this.params.nativeSelect?"yes":undefined},mix:"afisha-inserts__select",items:[{text:home.l10n("afisha.defaultTabLong"),val:"cinema",attrs:{"data-statlog":"afisha_inserts.select.cinema.all"}}].concat(e.map((function(e){return this._keys.push(e.id),this._cinemas[e.id]=e,{text:e.title,val:"cinema_"+e.id,attrs:{"data-statlog":"afisha_inserts.select.cinema.fav"},icon:{mods:{glyph:"afisha-fav"}}}}),this)),js:{optionsMaxHeight:280},menu:{mods:{afisha:"yes"}},control:this.params.nativeSelect,attrs:{"aria-controls":this._uniqId+"_panels","data-statlog":"afisha_inserts.select.cinema.button","data-parent-key":"cinema"}})),BEM.DOM.blocks.select2.init(),this.domElem.addClass("media-service_tabs_yes")}},_changeTab:function(e,t){this.__base.apply(this,arguments);var i=this.findBlockInside("select2");i&&(this._isFilms(e)?(t.parentKey||i.setVal("cinema"),i.setMod("visibility","visible")):i.setMod("visibility","hidden"))},_loadData:function(e){var t={},i="",n=this;return this._isFilms(e)?(i="https://"+this.params.geohelperHost+"/geohelper/get_cinema_sessions",t={id:e.replace("cinema_",""),geoid:this.params.geoId,lang:this.params.locale,mobile:0}):(i="/portal/api/data/1",t={block:"afisha_inserts",content:"api_data_big",lang:this.params.locale,page_geo:this.params.geoId,event_type:e}),$.ajax({url:i,xhrFields:{withCredentials:!0},dataType:"json",timeout:this.__self.GEOHELPER_TIMEOUT,data:t}).asPromise().then((function(t){var i=[];return n._isFilms(e)?i=t:t.block&&t.block[0]&&t.block[0].data&&Array.isArray(t.block[0].data[e])&&(i=t.block[0].data[e]),{events:i}}))},_renderLoader:function(e){var t,i="",n=0,o=0;return this._isFilms(e)?(i=home.view("afisha-event-film",{mix:"afisha-inserts__event media-service__item",imageMix:"media-service__shadow media-service__image",stat:"",dummy:!0}),n=680,o=8):(i=home.view("afisha-event-show",{mix:"afisha-inserts__event media-service__item",innerMix:"media-service__shadow",imageMix:"media-service__image",stat:"",dummy:!0}),n=888,o=5),t=Array(o+1).join(i),home.view("afisha-inserts__carousel",{content:t,js:{counter:"afisha_inserts",step:n}})},_getPanelHTML:function(e,t){return this._isFilms(e)?home.view("afisha-inserts__panel-cinema",{events:t.events,key:e,cinema:this._cinemas[e.replace("cinema_","")]}):home.view("afisha-inserts__panel-shows",{events:t.events,key:e})}},{GEOHELPER_TIMEOUT:7e3,MIN_VISIBLE_HEIGHT:0})},function(e,t){BEM.DOM.decl("select2",{onSetMod:{js:{inited:function(){this.menu=this.findBlockOn("menu","menu"),this.popup=this.findBlockOn("popup","popup2"),this.arrow=this.findBlockOn("arrow","icon"),this.button=this.findBlockOn("button","button2"),this.initialVal=this.getVal(),this.popup.setAnchor(this.button),this.popup.on("beforeClose",this._onPopupHide,this),this.button.on({click:this._onButtonClick,focus:this._onButtonFocus},this),this.bindTo("button","blur",this._onButtonBlur),this.menu.on({change:this._onMenuChange,click:this._onMenuItemClick,"item-hover":this._onMenuItemHover},this),this._preventBlur=null,this.bindTo("menu","pointerdown",this._onMenuPointerdown),document.documentMode&&this.bindTo("menu","focusin focusout",this._preventItemFocus),this._setMaxHeight()}},focused:{yes:function(){this.button.setMod("focused","yes")},"":function(){this.delMod("opened"),this.button.delMod("focused")}},opened:{"*":function(e,t){if(this.hasMod("disabled"))return!1;var i=Boolean(t);this.button.domElem.attr("aria-expanded",i),this.arrow.toggleMod("direction","top","bottom",i),this.popup.toggleMod("visible","yes",i)},yes:function(){this._setMinWidth(),this._setMaxHeight()}},disabled:{"*":function(e,t){this.button.setMod(e,t)},yes:function(){this.popup.delMod("visible")}}},getDefaultParams:function(){return{optionsMaxHeight:Number.POSITIVE_INFINITY}},getVal:function(){return this.menu.getVal()},setVal:function(e){return this.menu.setVal(e),this},reset:function(){this.menu.setVal(this.initialVal)},setContent:function(e){return this.menu.setContent(e),this._setMinWidth(),this._setMaxHeight(),this},destruct:function(){return document.documentMode&&this.unbindFrom("menu","focusin focusout",this._preventItemFocus),this.unbindFrom("menu","pointerup",this._preventButtonBlur),this.unbindFrom("menu","pointerdown",this._onMenuPointerdown),this.unbindFrom("button","blur",this._onButtonBlur),this.__base.apply(this,arguments)},_setMinWidth:function(){this.popup.domElem.css("min-width",this.button.domElem.outerWidth()),this.popup.redraw()},_setMaxHeight:function(){var e=this.popup.calcPossibleDrawingParams(),t=this.menu.domElem,i=t.outerWidth(),n=0;e.forEach((function(e){e.width>=i&&e.height>n&&(n=e.height)})),n>0&&(t.css("max-height",Math.min(this.params.optionsMaxHeight,n)),this.popup.redraw())},_onMenuChange:function(e,t){this._changeIcon(e,t),this.trigger("change",t)},_changeIcon:function(e,t){var i,n,o=this.menu,s=this.button,r=o.getItems("checked","yes").filter((function(e){return o.elemParams(e).val===t.currVal})).shift(),a=r&&o.findBlockInside(r,"icon"),c=s.findElem("icon","side","left");a?(c.length||(s.domElem.prepend(this._buildLeftIcon()),c=s.findElem("icon","side","left")),n=s.findBlockInside(c,"icon"),delete(i=a.getMods()).js,Object.keys(i).forEach((function(e){n.setMod(e,i[e])}))):c.length&&c.remove()},_onMenuItemClick:function(e,t){this.delMod("opened")},_onMenuItemHover:function(e,t){var i=this.button.domElem,n=t.item;n?i.attr("aria-activedescendant",n.attr("id")):i.removeAttr("aria-activedescendant")},_onMenuPointerdown:function(e){this._preventBlur=!0},_onButtonClick:function(){this.toggleMod("opened","yes")},_onButtonKeydown:function(e){var t=BEM.blocks.keycodes;!this.hasMod("opened")&&t.is(e.keyCode,"UP","DOWN")&&(e.preventDefault(),this.setMod("opened","yes"))},_onButtonKeypress:$.noop,_onButtonFocus:function(){this.setMod("focused","yes")},_onButtonBlur:function(){this._preventBlur?(this._preventBlur=null,this.bindTo("menu","pointerup",this._preventButtonBlur)):this.delMod("focused")},_onPopupHide:function(){this.delMod("opened")},_buildLeftIcon:function(){return'<i class="icon button2__icon button2__icon_side_left" aria-hidden="true"/>'},_preventButtonBlur:function(e){this.unbindFrom("menu","pointerup",this._preventButtonBlur),this.button.domElem.focus()},_preventItemFocus:function(e){e.preventDefault(),e.stopPropagation()}},{live:function(){this.liveInitOnBlockInsideEvent("init","button2"),this.liveBindTo("button","keydown",(function(e){this._onButtonKeydown(e)})).liveBindTo("button","keypress",(function(e){this._onButtonKeypress(e)}))}})},function(e,t){BEM.DOM.decl("select2",{onSetMod:{opened:{yes:function(e,t){var i=this.__base.apply(this,arguments);if(!1===i)return i;var n,o=this.menu.getItems("hovered","yes");return o.length||((n=this.menu.getItems("checked","yes")).length?this.menu.hoverText(n[0].text()):this.menu.hoverNext()),i},"":function(){return this._preventToToggleOpened=!1,this.__base.apply(this,arguments)}}},_onButtonKeydown:function(e){this.hasMod("opened","yes")?(this.menu._onKeydown(e,!0),this._keysToMenu=!0,this._preventToToggleOpened=!0):(this._keysToMenu=!1,this._preventToToggleOpened=!1,this.__base.apply(this,arguments))},_onButtonKeyup:function(e){this._keysToMenu&&(this.menu._onKeyup(e),this._keysToMenu=!1,this._preventToToggleOpened=!0)},_onButtonClick:function(){this._preventToToggleOpened?this._preventToToggleOpened=!1:this.__base.apply(this,arguments)},_onButtonKeypress:function(e){var t=BEM.blocks.keycodes;if(t.is(e.keyCode,"UP","DOWN","ENTER","SPACE")||0===e.keyCode&&e.charCode===t.SPACE)this.menu._onKeypress(e);else{var i=this.menu.getItems("hovered","yes");if(i.forEach((function(e){this.menu.delMod(e,"hovered")}),this),this.menu._onKeypress(e),this.hasMod("opened"))return;(i=this.menu.getItems("hovered","yes")).length&&this.setVal(this.menu.elemParams(i[0]).val)}}},{live:function(){return this.liveBindTo("button","keyup",(function(e){this._onButtonKeyup(e)})),this.__base()}})},function(e,t){BEM.DOM.decl("select2",{_onMenuChange:function(e,t){this.__base.apply(this,arguments),this.elem("control").val(t.currVal)},onSetMod:{disabled:{"*":function(e,t){this.__base.apply(this,arguments),this.elem("control").prop("disabled",Boolean(t))}}},getName:function(){return this.elem("control").attr("name")},setName:function(e){return this.elem("control").attr("name",e),this}})},function(e,t){BEM.DOM.decl({block:"select2",modName:"view",modVal:"default"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.popup.setAnchor(this.domElem)}}},_changeIcon:function(e,t){var i=this.menu,n=this.button,o=i.getItems("checked","yes").filter((function(e){return i.elemParams(e).val===t.currVal})).shift(),s=o&&i.findElem(o,"icon"),r=n.findElem("icon","side","left");r.length&&r.remove(),s&&n.domElem.prepend(this._buildLeftIcon(s))},_buildLeftIcon:function(e){return e.clone().addClass("button2__icon_side_left button2__icon")}})},function(e,t){BEM.DOM.decl({block:"select2",modName:"text",modVal:"vary"},{_onMenuChange:function(e,t){this.__base.apply(this,arguments),this.button.setText(this.getText()),this._setMinWidth()},getText:function(){var e=this.menu;return e.getItems("checked","yes").map((function(t){return e.elemParams(t).text||e.findElem(t,"text").text()})).join(", ")||this.params.text}})},function(e,t){BEM.DOM.decl({block:"select2",modName:"native",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var e=this.elem("control"),t=this.getVal();BEM.afterCurrentEvent(function(){if(e&&e.length&&this.domElem){var i=e.val();[].concat(i).join("")!==[].concat(t).join("")&&this.setVal(i)}}.bind(this)),this.bindTo("control","change",(function(e){this._onControlChange(e)}))}}},_onControlChange:function(e){var t=this.elem("control").val(),i=[].concat(t),n=this.menu,o=this.getVal();n.getItems().filter((function(e){return n.delMod(e,"checked"),i.indexOf(n.elemParams(e).val)>=0})).forEach((function(e){n.setMod(e,"checked","yes")})),this._onMenuChange(e,{prevVal:o,currVal:t})}},{live:function(){return this.liveBindTo("control","pointerdown").liveBindTo("pointerdown",(function(){this.hasMod("native","yes")&&this.setMod("touched","yes")})),this.__base()}})},function(e,t){BEM.DOM.decl({block:"select2",modName:"fade",modVal:"yes"},{onSetMod:{visibility:function(){var e=this;this.setMod("fade-animate","yes"),setTimeout((function(){e.delMod("fade-animate")}),150)}}})},function(e,t){BEM.DOM.decl({block:"district-inserts",baseBlock:"media-service"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._calcOverflow(this.domElem)}}}},{TEXT_OVERFLOW_LINES:4})},function(e,t){BEM.DOM.decl({name:"district-inserts",modName:"interactive",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this._requestCounters(),this._bindReactions()}},_requestCounters:function(){var e=this.params.api.counters;$.ajax({dataType:"json",url:e,timeout:3e4,context:this,xhrFields:{withCredentials:!0}}).then(function(e){e&&e.state&&this._updateCounters(e.state.events)}.bind(this),(function(t,i,n){home.error.logAjaxError({block:"district-inserts",message:"_updateCounters: ajax",url:e,source:"local-api-counters"},t,i,n)}))},_updateCounters:function(e){if(Array.isArray(e)&&e.length){var t=this.findElem("post");e.forEach(function(e){var i=t.filter("[data-post-id="+e.id+"]");if(e.reactions){var n=e.reactions.me,o=e.reactions.counts;o&&(this._updateValue(i,{type:"likes",count:o.like,active:"like"===n}),this._updateValue(i,{type:"dislikes",count:o.dislike,active:"dislike"===n}))}e.comment&&this._updateCommentValue(i,e.comment.count)}.bind(this))}},_updateValue:function(e,t){if(!(t.count<0)){var i=this.findElem(e,"post-footer-item","type",t.type),n=this.findElem(i,"post-value"),o=this.findElem(i,"post-value-wrapper"),s=$(home.view("district-inserts__post-value",{active:t.active,isNew:t.animate,count:t.count}));t.animate?(s.appendTo(o),t.active?this.setMod(i,"active","yes"):this.delMod(i,"active"),setTimeout(function(){this.setMod(n,"old",!0),this.delMod(s,"new"),setTimeout(function(){n.remove(),this._transitionStarted=!1}.bind(this),300)}.bind(this),50)):(n.remove(),s.appendTo(o),t.active?this.setMod(i,"active","yes"):this.hasMod(i,"active")&&this.delMod(i,"active"))}},_updateCommentValue:function(e,t){t&&(this.findElem(e,"post-footer-item","type","comments").length?this._updateValue(e,{type:"comments",count:t}):this.findElem(e,"post-footer-left").append(home.view("district-inserts__post-footer-item",{type:"comments",count:t})))},_bindReactions:function(){this.bindTo("post-footer-item_type_likes","click",(function(e){this._handleReaction("like",e.data.domElem)}),this),this.bindTo("post-footer-item_type_dislikes","click",(function(e){this._handleReaction("dislike",e.data.domElem)}),this),this.bindTo("post-footer-right","click",(function(e){e.preventDefault(),e.stopPropagation()}),this)},_handleReaction:function(e,t){if(!this._transitionStarted){this._transitionStarted=!0;var i=t.closest(".district-inserts__post"),n=i.data("post-id");if(n){var o="like"===e?"likes":"dislikes",s=this.findElem(t,"post-value"),r=parseInt(s.text(),10);this.hasMod(t,"active")?(this._updateValue(i,{type:o,count:r-1,active:!1,animate:!0}),e=null):this._updateValue(i,{type:o,count:r+1,active:!0,animate:!0});var a="like"!==e?"likes":"dislikes",c=this.findElem(i,"post-footer-item","type",a),l=this.findElem(c,"post-value"),u=parseInt(l.text(),10);this.hasMod(c,"active")&&this._updateValue(i,{type:a,count:u-1,active:!1,animate:!1}),this._csrfToken?this._sendReaction(n,e):this._requestCsrfToken(this._sendReaction.bind(this,n,e))}else home.error.logError({block:"district-inserts",message:"Reacted post id is undefined",method:"_handleReaction"})}},_sendReaction:function(e,t){var i=home.stringf(this.params.api.react,e);$.ajax({dataType:"json",type:"PUT",url:i,timeout:3e4,context:this,xhrFields:{withCredentials:!0},headers:{"X-CSRF-Token":this._csrfToken,"Content-Type":"application/json"},data:JSON.stringify({reaction:t})}).then(null,(function(e,t,n){home.error.logAjaxError({block:"district-inserts",message:"_handleReaction: ajax",url:i,source:"local-api-react"},e,t,n)}))},_requestCsrfToken:function(e){$.ajax({dataType:"json",url:this.params.api.sk,timeout:3e4,context:this,xhrFields:{withCredentials:!0}}).then(function(t){this._csrfToken=t,e&&e.call(this)}.bind(this),function(e,t,i){home.error.logAjaxError({block:"district-inserts",message:"_requestCsrfToken: ajax",url:this.params.api.sk,source:"local-api-react"},e,t,i)}.bind(this))}})},function(e,t){BEM.DOM.decl({block:"stream-inserts",baseBlock:"media-service"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._calcOverflow()}}},_calcOverflow:function(){var e=this.__self.getName();this.hasMod("type","horizontal")&&BEM.blocks["i-multiline-overflow"].calcOverflow(this.elem("horizontal-card-title"),2,e+"__title")}})},function(e,t){home.formatDuration=function(e){e=Math.round(e);var t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60),n=[i,e-3600*t-60*i].map((function(e){return(e<10?"0":"")+e}));return t&&n.unshift(String(t)),n.join(":")}},function(e,t){!function(){"use strict";var e={entity_search:"OO","kino-vod-films-gallery":"KINOPOISK",vh:"VH","vh-cv":"VH",vthumb:"VH",video_thumb_fresh:"VH",ott:"OTT",video_frame:"VIDEO"},t={s180x270:{w:180,h:270,x1:"180x270",x2:"320x480"},s156x88:{w:156,h:88,x1:"156x88",x2:"312x176"},s200x112:{w:200,h:112,x1:"200x112",x2:"400x224"},s200x150:{w:200,h:150,x1:"200x150",x2:"400x300"},s240x135:{w:240,h:135,x1:"240x135",x2:"480x270"},s282x159:{w:282,h:159,x1:"282x159",x2:"564x318"},s320x180:{w:320,h:180,x1:"320x180",x2:"640x360"},s400x225:{w:400,h:225,x1:"400x225",x2:"800x450"},s400x300:{w:400,h:300,x1:"400x300",x2:"936x524"}},i=Object.assign({},t,{s175x98:{w:175,h:98,x1:"175x98",x2:"350x196"},s112x112:{w:112,h:112,x1:"112x112",x2:"112x112_2x"},s936x524:{w:936,h:524,x1:"936x524",x2:"1920x1080"}}),n={OO:{s168x252:{w:168,h:252,x1:"S168x252",x2:"S168x252_2x"},s184x276:{w:184,h:276,x1:"S184x276",x2:"S184x276_2x"},s114x171:{w:114,h:171,x1:"S114x171",x2:"S114x171_2x"}},VH:Object.assign({},i,{s48x72:{w:48,h:72,x1:"48x72"},s80x45:{w:80,h:45,x1:"80x45",x2:"168x96"},s168x96:{w:168,h:96,x1:"168x96",x2:"336x192"}}),OTT:Object.assign({},i,{s80x45:{w:80,h:45,x1:"80x45",x2:"160x90"}}),KINOPOISK:{s320x240:{w:320,h:240,x1:"320x240",x2:"640x360"}},VIDEO:t};function o(t,i,o,r){var a=function(e){var t=e.match(s);if(!t)return null;return{host:t[1],namespace:t[2],parts:t.slice(3)}}(t);if(!a)throw new Error("Unsupported Avatars url: "+t);var c=a.namespace,l="x"+i,u="s"+o+"x"+r,d=n[e[c]];if(!d)throw new Error("Namespace "+c+" not found");if(!d[u])throw new Error("Alias "+u+" not found in "+c+" namespace");if(!d[u][l])throw new Error("Scale "+l+" not found");return a.parts[2]=d[u][l],a.host+"/get-"+a.namespace+"/"+a.parts.join("/")}var s=/(.*)\/get-([\w-]+)\/([^/]+)\/([^/]+)\/*([^/]+)?$/;function r(e){var t,i=e.url||"",n=e.n||1040,r=(e.retinaScale||0)>=1.25?2:1,a=s.test(i);if(e.size){var c=e.size.split("x");t={w:c[0],h:c[1]}}if(!i)throw new Error("Bad url: "+i);if(i.indexOf("data:image")>-1)return i;if(i.indexOf("//strm.yandex.ru/vh-ott-converted")>-1)return i;if(!t||!t.w&&!t.h)throw new Error("Bad size: "+e.size);var l=t.w||0,u=t.h||0;return i=a?o(i,r,l,u):function(e,t,i,n,o){return i*=t,n*=t,-1===e.indexOf("?")&&(e+="?"),e=e.replace(/&?$/,"&"),e+="n="+o+"&w="+i+"&h="+n}(i,r,l,u,n)}home.getVideoThumbUrl=function(e){try{return r(e)}catch(t){return home.error&&home.error({block:e.block,sourceType:"render",method:"getVideoThumbUrl",message:"Get address tumb video",meta:{url:e.url}},t),e.url||""}},home._getVideoThumbUrl=r}()},function(e,t){BEM.DOM.decl({block:"stream-inserts-loader",baseBlock:"insert-loader"},{_checkData:function(e){return e&&e.length},_getHTML:function(e){return home.view("stream-inserts",home.deepExtend(e,this.params))},_loadBlockData:function(){if(!this._loadStarted){this._loadStarted=!0;var e=Ya.Rum.getTime();return Ya.streamCms.getCarouselItems({carousel_id:this.params.carouselId,limit:20}).then(function(t){if(!this._checkData(t)){var i=Ya.streamCms.onError({block:"stream-inserts-loader",method:"_loadBlockData",message:"empty carousel",meta:{carouselId:this.params.carouselId},source:"vh",sourceMethod:"carousel"});return Promise.reject(i)}this._drawBlock({set:Ya.streamCms.addReqIdsByDocuments(t,"carousel"),carousel_id:this.params.carouselId,type:this.params.type}),home.streamRum.sendBlockShowDelta("stream-inserts",{requestStart:e})}.bind(this))["catch"](function(e){Ya.streamCms.onError({block:"stream-inserts-loader",message:"_loadBlockData: fail",method:"_loadBlockData",source:"code",meta:{carouselId:this.params.carouselId}},e),BEM.blocks["zen-inserter"].hide(this.domElem.closest("[data-blockname]"))}.bind(this))}}})},function(e,t){BEM.DOM.decl({block:"edadeal",baseBlock:"media-service",baseMix:["mix-tabber","mix-tabber-labels","mix-tabber-labels-keyboard","mix-tabber-media-service"]},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),BEM.blocks["i-multiline-overflow"].calcOverflow(this.elem("retailer-title"),2)}}},_getPanelHTML:function(e,t){return this.toggleMod("distance","no","all"===e),home.view("edadeal__panel",{id:e,title:t.title,distance:t.hasGeolocation,retailers:t.retailers,logShow:!0})},_getInitData:function(){return home.getData("edadeal.data.data",{})}})},function(e,t){BEM.DOM.decl({name:"widgets-list",baseBlock:"media-service"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.channel("widget").on("commit",this._onWidgetCommit,this),this._isHidden()||this._initWidgets()}}},_initWidgets:function(){this.findBlocksInside("widget").forEach((function(e){e.bindTo("click",(function(){home.stat.logPath("click","widgets_list.fakeclick")}))}))},_toggle:function(e){this.__base.apply(this,arguments),e&&this._initWidgets()},_onWidgetCommit:function(e,t){if("remove"===t.type){var i=t.widget.domElem.closest(".widgets-list__item");i.length&&(this.setMod(i,"hidden","yes"),i.onceAnimationEnd("animation",400,function(){BEM.DOM.destruct(i);var e=this.findBlockInside("arrowed-list");e&&e.onScroll(),this.findBlocksInside("widget").length||this._remove()}.bind(this)))}},_createMenu:function(){this.__base.apply(this,arguments),this._control.on("delete_all",(function(){window.confirm(home.l10n("widgetcontrol.confirm_delete_all"))&&this.findBlocksInside("widget").forEach((function(e){e.setMod("removed","yes")}))}),this)},_getMenuCustomItems:function(){return[{id:"delete_all",icon:"delete",text:home.l10n("widgetcontrol.delete_all")}]}})},function(e,t){BEM.DOM.decl("widgets-list",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._sendCounter("show_url"),this.bindTo("promo-close","pointerclick",this._closePromo)}}},_sendCounter:function(e){var t=this.params.promo&&this.params.promo[e];t&&((new Image).src=t)},_closePromo:function(){var e=this.elem("promo");this.setMod("promo-close","yes"),e.onceAnimationEnd("animation",600,function(){e.remove(),this.delMod("promo-close"),this.delMod("promo")}.bind(this)),this._sendCounter("close_url")},_toggle:function(e){this.__base.apply(this,arguments),e||this._sendCounter("close_url")}})},function(e,t){BEM.DOM.decl("scrollbar",{onSetMod:{js:{inited:function(){this._scrollable=this.elem("scrollable"),this._inner=this.elem("inner"),this._thumb=this.elem("thumb"),this._onScroll=this._onScroll.bind(this),this._onDragStart=this._onDragStart.bind(this),this._onDrag=this._onDrag.bind(this),this._onDragEnd=this._onDragEnd.bind(this),this._scrollable.on("scroll",this._onScroll),this._thumb.on("pointerdown",this._onDragStart),this.__base.apply(this,arguments),this._onScroll(),"undefined"==typeof window.IntersectionObserver||"THROTTLE_TIMEOUT"in IntersectionObserver.prototype?this._checker=setInterval(this._onScroll,1e3):(this._observer=new IntersectionObserver(this._onScroll,{root:this._scrollable[0],rootMargin:"0px 50px 0px 0px",threshold:[1]}),this._observer.observe(this._inner[0]))}},"":function(){this._observer?this._observer.unobserve(this._scrollable):clearInterval(this._checker),this._onDragEnd(),this._scrollable.off("scroll",this._onScroll),this._thumb.off("pointerdown",this._onDragStart)}},_onScroll:function(){var e=this._scrollable.prop("scrollHeight"),t=this._scrollable.height(),i=this._scrollable.scrollTop(),n=t<e,o=n?t/e:0,s=0;o===this._scrollHeightRatio&&this._scroll===i||(this._scroll=i,this._scrollHeightRatio=o,n&&(o=Math.max(o,.1),s=100*(1-o)/(e-t)),requestAnimationFrame(function(){this._thumb.css({height:(100*o).toFixed(2)+"%",top:(s*i).toFixed(2)+"%"})}.bind(this)))},_onDragStart:function(e){var t=window;this._onScroll(),this._startScrollValue=this._scrollable.scrollTop(),this._startValue=e.screenY,$("body").addClass("scrollbar__body-styles"),this.setMod(this._thumb,"active","yes"),t.addEventListener("pointermove",this._onDrag,{passive:!0}),t.addEventListener("pointerup",this._onDragEnd)},_onDrag:function(e){var t=e.screenY-this._startValue;this._scrollable.scrollTop(this._startScrollValue+t/this._scrollHeightRatio)},_onDragEnd:function(){var e=window;e.removeEventListener("pointermove",this._onDrag),e.removeEventListener("pointerup",this._onDragEnd),this.delMod(this._thumb,"active"),$("body").removeClass("scrollbar__body-styles")}},{live:!1})},function(e,t){BEM.DOM.decl({block:"geo-collections",baseBlock:"media-service",baseMix:["mix-tabber","mix-tabber-labels","mix-tabber-labels-keyboard","mix-tabber-media-service"]},{_getPanelHTML:function(e,t){return home.view("geo-collections__panel",{items:t.collections,title:t.title,id:e,logShow:e!==this._defaultKey})}})},function(e,t){BEM.DOM.decl({block:"geo-collections-loader",baseBlock:"insert-loader"},{_getDataUrl:function(){return this.params.url},_checkData:function(e){return e.tabs&&e.tabs.length},_selectData:function(e){return e},_getHTML:function(e){return home.view("geo-collections",e)}})},function(e,t){BEM.DOM.decl({block:"tutor",baseBlock:"media-service",baseMix:["mix-tabber","mix-tabber-labels","mix-tabber-labels-keyboard","mix-tabber-media-service"]},{_calcOverflow:function(e){BEM.blocks["i-multiline-overflow"].calcOverflow(e,2,"tutor")}})},function(e,t){BEM.DOM.decl({block:"stream-inserts-platform",baseBlock:"media-service",baseMix:["mix-tabber","mix-tabber-labels","mix-tabber-labels-keyboard","mix-tabber-loader","mix-tabber-loader-keyboard","mix-tabber-labels-preloader","mix-tabber-media-service"]},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._redesignPlatform=home.getData("stream-inserts-platform.data.redesignPlatform"),this._delayVideoPreview=home.getData("stream-inserts-platform.data.delayVideoPreview"),this.largeThumbsPlatform=home.getData("stream-inserts-platform.data.largeThumbsPlatform"),this.redesignPlatformAvatar=home.getData("stream-inserts-platform.data.redesignPlatformAvatar"),this._redesignPlatform&&(this._isWindowActive=!0,this._bindEvents()),this._showedPanels[this._defaultKey]=!1,this._loadAndDrawData(this._defaultKey,this._$panel)}}},_observeIntersection:function(){this._observer=BEM.blocks["i-intersection-observer-wrapper"].create(function(e){this._isElementVisible=e[0].isIntersecting,this._onVisibilityStateChange()}.bind(this)),this._observer.observe(this.domElem[0])},_bindEvents:function(){this._observeIntersection(),this._bindWindowFocus()},_bindWindowFocus:function(){BEM.channel("i-window-focus").on("blur",this._onWindowBlur,this),BEM.channel("i-window-focus").on("focus",this._onWindowFocus,this)},_unbindWindowFocus:function(){BEM.channel("i-window-focus").un("blur",this._onWindowBlur,this),BEM.channel("i-window-focus").un("focus",this._onWindowFocus,this)},_onWindowFocus:function(){this._onWindowActiveChange(!0)},_onWindowBlur:function(){this._onWindowActiveChange(!1)},_onVisibilityStateChange:function(){this._shouldAutoPlayPreview()?this._startVideoPreview():this._stopVideoPreview()},_startVideoPreview:function(){if(this._$panel&&!this.params.disableAutoplayExp){var e=this.findBlockInside(this._$panel,"stream-inserts").elem("main-thumb");this._currentThumb=this.findBlockInside(e,"thumb-preview"),this._currentThumb&&(this._currentThumb.__self._delay=this._delayVideoPreview,this._currentThumb.setMod("active","yes"))}},_stopVideoPreview:function(){this._currentThumb&&this._currentThumb.stop()},_onWindowActiveChange:function(e){this._isWindowActive=e,this._onVisibilityStateChange()},_shouldAutoPlayPreview:function(){return this._isElementVisible&&this._isWindowActive},destruct:function(){this._unBindEvents(),this.__base.apply(this,arguments)},_unBindEvents:function(){this._observer&&this._observer.unobserve(this.domElem[0]),this._unbindWindowFocus()},_getPanelHTML:function(e,t){var i={set:t.set,channelEpisodes:t.channelEpisodes,carouselId:e,statRoot:"stream_inserts_platform",withIcons:home.getData("stream-inserts-platform.data.withIcons"),allowVideoPreview:home.getData("stream-inserts-platform.data.allowVideoPreview"),allowFirstVideoPreview:home.getData("stream-inserts-platform.data.allowFirstVideoPreview"),delayVideoPreview:home.getData("stream-inserts-platform.data.delayVideoPreview"),groups:home.getData("stream-inserts-platform.data.groups"),redesignPlatform:home.getData("stream-inserts-platform.data.redesignPlatform"),largeThumbsPlatform:home.getData("stream-inserts-platform.data.largeThumbsPlatform"),redesignPlatformAvatar:home.getData("stream-inserts-platform.data.redesignPlatformAvatar")};return e===this._defaultKey&&(i.channels=home.getData("stream-inserts-platform.data.channels"),i.defaultPanel=!0),home.view("stream-inserts-platform__panel",i)},_renderLoader:function(e){return home.view("stream-inserts-platform__panel",{carouselId:e,redesignPlatform:this._redesignPlatform,largeThumbsPlatform:this.largeThumbsPlatform,redesignPlatformAvatar:this.redesignPlatformAvatar})},_changeTab:function(e){this._currentKey=e,this._showBlockOnError=!0,this.__base.apply(this,arguments)},_onPanelChange:function(e){this.__base.apply(this,arguments),this._redesignPlatform&&(this._stopVideoPreview(),this._startVideoPreview()),home.stat.logPath("show","stream_inserts_platform."+e+".realshow",{customParams:this._reqIds})},_checkData:function(e){return e&&e.length},_loadData:function(e){var t=this.params.defaultCarouselId===e,i=this.params.enablePersonalChannel,n=t&&i;return this._loadStartedTs=Ya.Rum.getTime(),Promise.all([this._getCarouselItems(e),n?this._getPersonal():Promise.resolve(null)]).then(function(t){var i=t[0],n=t[1],o={},s=[];return n&&(o[n.parent_id]=n),s=this.params.promoExp?i:(s=n&&this._redesignPlatform?[this.params.personalChannel]:[]).concat(t[0]),this._showBlockOnError=!0,{channelEpisodes:o,set:s,key:e}}.bind(this))["catch"](function(e){throw this._showBlockOnError||BEM.blocks["zen-inserter"].hide(this.domElem.closest("[data-blockname]")),e}.bind(this))},_onPanelFirstShow:function(){home.streamRum.sendBlockShowDelta("platform-panel",{requestStart:this._loadStartedTs}),this.__base.apply(this,arguments)},_getPersonal:function(){var e=this.params.personalChannel||{};return Ya.streamCms.getPersonalEpisode(e.content_id).then((function(t){return t&&(t.channel=e),t}))["catch"]((function(){return null}))},_getCarouselItems:function(e){return Ya.streamCms.getCarouselItems({carousel_id:e,limit:this.params.cardsLimit}).then(function(t){if(!t||!t.length){var i=Ya.streamCms.onError({block:"stream-inserts-platform",method:"_getCarouselItems",message:"_getCarouselItems -> empty carousel",meta:{carouselId:e},source:"vh",sourceMethod:"carousel"});return Promise.reject(i)}var n=Ya.streamCms.addReqIdsByDocuments(t,"carousel");return this._reqIds={frontend_vh_reqid:n[0].frontendVhReqId,recommender_reqid:n[0].recommenderReqId},n}.bind(this))},_calcOverflow:function(){var e=this.__self.getName();this.hasMod("type","horizontal")&&BEM.blocks["i-multiline-overflow"].calcOverflow(this.elem("horizontal-card-title"),2,e+"__title")}},{_numberCardsLoad:20})},function(e,t){Ya.streamCms.constructor.prototype.fetchEpisodes=function(e){var t="episodes",i="fetchEpisodes",n=Boolean(e.personal),o=this.settings.exp.stream_descrete_scheme;return n&&(t="mychannel",i+="(mychannel)",this.getPersonalSkipAndDislikeIds&&(e.skip_id=this.getPersonalSkipAndDislikeIds().join(",")),e.refresh_schedule!==undefined&&(e.refresh_schedule=Number(e.refresh_schedule)),delete e.personal),o&&(e.discrete_scheme=1),(this.settings.exp.ether_graphql?n?this.fetchPersonalSchedule(e):this.fetchSchedule(e):this.ajax(t,e)).then(function(i){var o=e.end_date__from||-Infinity,s=e.start_date__to||Infinity,r=e.limit,a=(e.parent_id||"").split(",");if(!r)return{data:i,start:o,end:s,channels:a};var c=i&&i.set||i||[],l=r/a.length;return n&&!c.length&&this.onError({message:"mychannel/episodes -> empty items",method:"fetchEpisodes",meta:Object.assign(this.getMetaToVhError(i),e),source:"vh",sourceMethod:t}),a.map((function(e){var t=c.filter((function(t){return t.parent_id===e})),i=s;return t.length>=l&&(i=t[t.length-1].end_time),{data:t,start:o,end:i,channels:[e]}}),this)}.bind(this),function(n){return Promise.reject(this.onError({method:i,source:"vh",sourceMethod:t,meta:e},n))}.bind(this))}},function(e,t){var i;(i=Ya.streamCms.constructor).prototype.getPersonalEpisode=function(e){return this._gettingPersonalEpisode||(this._gettingPersonalEpisode=e?this.fetchCurrentProgram(e)["catch"](function(t){this.onError({method:"getPersonalEpisode",message:"Get pers channel from network",meta:{channel_id:e},sourceType:"network"},t)}.bind(this)):Promise.resolve()),this._gettingPersonalEpisode},i.prototype.fetchCurrentProgram=function(e){var t=Math.floor(home.now()/1e3);return Ya.streamCms.fetchEpisodes({personal:!0,parent_id:e,end_date__from:t,now:t,limit:1}).then((function(e){return e&&e[0]&&e[0].data&&e[0].data[0]||Promise.reject(new Error("_fetchCurrentProgram  -> empty data"))}),(function(e){return Promise.reject(new Error("_fetchCurrentProgram -> "+(e&&e.message)))}))}},function(e,t){BEM.DOM.decl("stream-inserts-mix",{onSetMod:{js:{inited:function(){var e=this.elem("player").length;this._shouldAutoplay=home.getData("stream-inserts-platform.data.autoplayFirstChannel")&&e,this._allowVideoPreview=home.getData("stream-inserts-platform.data.allowVideoPreview"),this._delayVideoPreview=home.getData("stream-inserts-platform.data.delayVideoPreview"),this._updateCurrentProgramInfo(),this._isWindowActive=!0,(this._shouldAutoplay||this._allowVideoPreview)&&this._bindEvents()}}},_bindEvents:function(){this._observeIntersection(),this._bindWindowFocus(),this._shouldAutoplay&&this._bindSandBoxEvents()},_unBindEvents:function(){this._observer&&this._observer.unobserve(this.domElem[0]),this._shouldAutoplay&&this._unBindSandBoxEvents(),this._unbindWindowFocus()},_observeIntersection:function(){this._observer=BEM.blocks["i-intersection-observer-wrapper"].create(function(e){this._isElementVisible=e[0].isIntersecting,this._onVisibilityStateChange()}.bind(this)),this._observer.observe(this.domElem[0])},_bindWindowFocus:function(){BEM.channel("i-window-focus").on("blur",this._onWindowBlur,this),BEM.channel("i-window-focus").on("focus",this._onWindowFocus,this)},_unbindWindowFocus:function(){BEM.channel("i-window-focus").un("blur",this._onWindowBlur,this),BEM.channel("i-window-focus").un("focus",this._onWindowFocus,this)},_onWindowFocus:function(){this._onWindowActiveChange(!0)},_onWindowBlur:function(){this._onWindowActiveChange(!1)},_bindSandBoxEvents:function(){this.bindToWin("message",this._onSandboxMessage,this)},_unBindSandBoxEvents:function(){this.bindToWin("message",this._onSandboxMessage,this)},_onSandboxMessage:function(e){var t,i,n=e.originalEvent,o=this._playerFrame&&this._playerFrame[0]&&this._playerFrame[0].contentWindow;if(o&&o===n.source){try{t=JSON.parse(n.data)}catch(s){return void Ya.streamCms.onError({block:"stream-inserts-mix",method:"_bindSandBoxEvents",meta:{msg:n.data},source:"sandbox_player"},s)}"started"===(i=t.event)?this._onVideoStart():"ended"===i&&this._onVideoEnd()}},_onWindowActiveChange:function(e){this._isWindowActive=e,this._onVisibilityStateChange()},_onVisibilityStateChange:function(){this._allowVideoPreview?this._shouldAutoPlayPreview()?this._startVideoPreview():this._stopVideoPreview():this._shouldCreatePlayer()?this._insertPlayer():this._destroyPlayer()},_startVideoPreview:function(){this._getCurrentProgram().then(function(e){e&&e.ya_video_preview&&this._setPersonalPreview(e),this._playVideoPreview()}.bind(this))},_playVideoPreview:function(){var e=this.findBlockInside(this.elem("main-item"),"thumb-preview");e&&(e.__self._delay=this._delayVideoPreview,e.setMod("active","yes"))},_stopVideoPreview:function(){var e=this.findBlockInside(this.elem("main-item"),"thumb-preview");e&&e.stop()},_setPersonalPreview:function(e){var t=this.elem("item","personal","yes");if(!this._updatedPersonalPreview&&e.ya_video_preview){t.addClass("thumb-preview thumb-preview_video");var i=this.findBlockInside(t,"thumb-preview");i.setPreview(e.ya_video_preview),i.activeLoop(),this._updatedPersonalPreview=!0}},_shouldCreatePlayer:function(){return this._isElementVisible&&this._isWindowActive&&!this._playerFrame},_shouldAutoPlayPreview:function(){return this._isElementVisible&&this._isWindowActive},_onVideoStart:function(){this.setMod(this.elem("main-item"),"playing","yes")},_onVideoEnd:function(){this._destroyPlayer()},_getCurrentProgram:function(){return this._gettingCurrentProgram||(this._gettingCurrentProgram=this.params.isPersonal?this._fetchCurrentProgram().then((function(e){return e})):Promise.resolve()),this._gettingCurrentProgram},_fetchCurrentProgram:function(){var e=Math.floor(home.now()/1e3);return Ya.streamCms.fetchEpisodes({personal:!0,parent_id:this.params.autoplayId,end_date__from:e,now:e,limit:2}).then((function(e){return e&&e[0]&&e[0].data[0]}),(function(e){var t=Ya.streamCms.onError({block:"stream-inserts-mix",message:"_fetchCurrentProgram: fail ",source:"code"},e);return Promise.reject(t)}))},_updateCurrentProgramInfo:function(){this._updatedCurrentProgramInfo||this._getCurrentProgram().then(function(e){e&&this.elem("main-item-subtitle").text(e.title),this._updatedCurrentProgramInfo=!0}.bind(this))},_getSandboxUrl:function(){var e=this.params.autoplayId;return(this.params.isPersonal?this._getCurrentProgram().then((function(e){return e&&e.content_id?{contentId:e.content_id}:Promise.reject()})):Promise.resolve({contentId:e})).then(this._makeSandboxUrl.bind(this))},_makeSandboxUrl:function(e){return home.makeUrl({host:this._SANDBOXHOST,path:"player/"+e.contentId,query:{autoplay:1,mute:1,tv:1,from:"morda",no_ad:!0,reqid:home.getData("stream-inserts-platform.data.reqid")}})},_insertPlayer:function(){return this._creatingPlayer||(this._creatingPlayer=this._getSandboxUrl().then(this._createPlayer.bind(this))),this._creatingPlayer},_createPlayer:function(e){this._shouldCreatePlayer()&&(BEM.DOM.update(this.elem("player"),home.view("stream-inserts-mix__player-iframe",{src:e})),this._playerFrame=this.findElem("player-iframe"),this.setMod(this.elem("main-item"),"playing","preparing")),delete this._creatingPlayer},_destroyPlayer:function(){$(this._playerFrame).attr("src",""),BEM.DOM.destruct(this._playerFrame),this._playerFrame=null,this.delMod(this.elem("main-item"),"playing")},destruct:function(){this._destroyPlayer(),this._unBindEvents(),this.__base.apply(this,arguments)},_SANDBOXHOST:"frontend.vh.yandex.ru"})},function(e,t){BEM.DOM.decl("i-window-focus",{},{init:function(){var e=this,t=BEM.channel("i-window-focus");e._focused=!0,$.browser&&$.browser.msie?($(document).bind("focusout",(function(){e._focused=!1,t.trigger("blur")})),$(document).bind("focusin",(function(){e._focused=!0,t.trigger("focus")}))):($(window).focus((function(){e._focused=!0,t.trigger("focus")})),$(window).blur((function(){e._focused=!1,t.trigger("blur")})))},isFocused:function(){return this._focused}}),BEM.blocks["i-window-focus"].init()},function(e,t){BEM.DOM.decl("thumb-preview",{_setCurrent:function(e){return this.__self._current=e,this}},{live:function(){BEM.blocks["b-page"]&&BEM.blocks["b-page"].on("blur",this.stop,this)},getCurrent:function(){return this._current},stop:function(){this._current&&this._current.delMod("active")}})},function(e,t){BEM.DOM.decl("thumb-preview",{_longTapBrakeTimeout:500,_sendHoverCounter:function(){var e=encodeURIComponent(this.params.preview.url);home.stat.logPath("tech","thumbs-preview.hover(url="+e+")")},_onPointerStart:function(){this.setMod("active","yes"),this._pointerStart=home.now()},_onPointerEnd:function(e){home.now()-this._pointerStart>this._longTapBrakeTimeout&&e&&e.cancelable&&e.preventDefault()}},{live:function(){this.__base(),this._isHaveTouch()?(this.liveBindTo("touchstart",(function(){this._onPointerStart()})),this.liveBindTo("touchend touchcancel",(function(e){this._onPointerEnd(e)}))):(this.liveBindTo("pointerover",(function(){this.hasMod("active","yes")||this.hasMod("disabled","yes")||this._sendHoverCounter(),this._onPointerStart()})),this.liveBindTo("pointerout",(function(){this._onPointerEnd()})))},_isHaveTouch:function(){return $(".i-ua_browser_touch").length}})},function(e,t){BEM.decl({block:"thumb-preview",modName:"video",modVal:!0},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),BEM.DOM.append(this.elem("target"),this.__self._getBemHtml()),this._isIOS=Boolean(navigator.platform)&&/iPad|iPhone|iPod/.test(navigator.platform),this._isIOS10=Boolean(navigator.userAgent)&&-1!==navigator.userAgent.indexOf("iPhone OS 10_"),this._retries=0}},active:{yes:function(){var e=this._getCurrent();this._activeStartTime=Date.now(),e&&e!==this&&e.delMod("active"),this._setCurrent(this),this._start()},"":function(){this.stop()}}},destruct:function(){var e=this._getCurrent();clearTimeout(this._startTimer),window.cancelAnimationFrame&&window.cancelAnimationFrame(this._startFrame),e===this&&(e.stop(),e._setCurrent(null)),this.__base.apply(this,arguments)},_start:function(){if(!this.hasMod("active","yes")&&!this.hasMod("disabled",!0)){var e=!this._isIOS||this._isIOS&&this._notFirstTime;window.requestAnimationFrame&&e&&-1===navigator.userAgent.indexOf("Trident")?(window.cancelAnimationFrame(this._startFrame),this._startFrame=window.requestAnimationFrame(function(){this._startAnimationFrame()}.bind(this))):(this._notFirstTime=!0,this._startAnimationFrame())}},_startAnimationFrame:function(){var e;this._addPlayer(),this._player&&(void 0!==(e=this._player[0].play())&&(this._isIOS10&&e.then(function(){this._player[0].pause(),this._player[0].play()}.bind(this)),e["catch"](this._onPlayError.bind(this))),this.trigger("start"))},stop:function(){this.delMod("active"),this._playing&&this._player&&(this._player[0].pause(),this._player[0].readyState>0&&(this._player[0].currentTime=0),this.delMod(this.elem("target"),"playing"),delete this._playing),this.trigger("stop")},_addPlayer:function(){var e=this.params.preview,t={};if(e){t.src=e.url,t.type=e.type,this._player||(this._player=this.__self._getPlayer()),this._player.attr(t);var i=this.findElem("target");i.length&&BEM.DOM.prepend(i,this._player)}},_onError:$.noop,_onPlay:function(){this._playing=!0,this.delMod(this.elem("target"),"loading"),this.setMod(this.elem("target"),"playing",!0),this._retries=0,this.trigger("play")},_onEnded:function(){this.stop(),this.trigger("end")},_onWait:function(){this.setMod(this.elem("target"),"loading",!0)},_onPlayError:function(e){this._isDestructing||(this.delMod(this.elem("target"),"loading"),this.delMod("active"),this._onPlayErrorCallback(e))},_getPlayerError:function(){return this._player&&this._player[0]&&this._player[0].error},_isNotSupportedError:function(){var e=this._getPlayerError();return Boolean(e&&e.code===MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED)},_onPlayErrorCallback:function(){this.__base.apply(this,arguments),this._isNotSupportedError()&&this._retries<this.__self.MAX_RETRIES&&(this.params.preview.url=this._getUrlWithTimestamp(this.params.preview.url),this._retries+=1,this.setMod("active","yes"))},_getUrlWithTimestamp:function(e){if("string"==typeof e){var t=e.indexOf("?")<0?"?":"&";return[e,"t="+Date.now()].join(t)}},_getCurrent:function(){return this.__self.getCurrent()},start:function(){this._isActive||this.hasMod("disabled",!0)||(clearTimeout(this._startTimer),this._startTimer=setTimeout(function(){this.setMod("active","yes")}.bind(this),this.params.startDelay))}},{MAX_RETRIES:3,_getBemHtml:function(){if(!this._videoBemHtml){this._videoBemHtml=document.createElement("div"),this._videoBemHtml.className=BEM.INTERNAL.buildClass(this.getName(),"loader");var e=document.createElement("div");e.className=BEM.INTERNAL.buildClasses("spin2",{progress:"yes",size:"xxs"}),this._videoBemHtml.appendChild(e)}return this._videoBemHtml},_getPlayer:function(){if(!this._player){var e=document.createElement("video"),t={autoplay:"autoplay",muted:"muted","x-yandex-pip":"false","x-webkit-airplay":"deny",playsinline:"playsinline",poster:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"};e.className=BEM.INTERNAL.buildClass(this.getName(),"video"),e.muted="muted",Object.keys(t).forEach((function(i){e.setAttribute(i,t[i])})),this._player=BEM.DOM.append(BEM.DOM.scope,e),["Ended","Playing","Waiting","Error"].forEach(this._addEvent.bind(this))}return this._player},_addEvent:function(e){this._player&&this._player[0].addEventListener(e.toLowerCase(),function(){this._current&&this["_on"+e]()}.bind(this))},_onEnded:function(){this._current._onEnded()},_onPlaying:function(){this._current._onPlay()},_onWaiting:function(){this._current._onWait()},_onError:function(){this._current._onError()}})},function(e,t){BEM.decl({block:"thumb-preview",modName:"video",modVal:!0},{onSetMod:{js:{inited:function(){var e=Ya.streamCms.getSessionParams().reqid;if(this.params.preview&&this.params.preview.url&&e){var t=home.parseUrl(this.params.preview.url);t.query.reqid=e,this.params.preview.url=home.makeUrl(t)}this.__base.apply(this,arguments)}}},_onPlay:function(){this.__self._current=this;var e,t=encodeURIComponent(this.params.preview.url);this._activeStartTime&&(e=Date.now()-this._activeStartTime,home.stat.logPath("tech","thumbs-preview.animation(delay="+e+";type=video;url="+t+")")),this._activeStartTime=0,this.trigger("play"),this.__base.apply(this,arguments)},_onError:function(){var e=encodeURIComponent(this.params.preview.url),t=this._player&&this._player[0]&&this._player[0].error,i={url:e};if(this._activeStartTime=0,t){var n=this.__self.mediaErrorTypes;n||((n=this.__self.mediaErrorTypes={})[MediaError.MEDIA_ERR_ABORTED]="load aborted",n[MediaError.MEDIA_ERR_NETWORK]="network error",n[MediaError.MEDIA_ERR_DECODE]="decode error",n[MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED]="src not supported"),i.type=n[t.code]||"unknown error"}home.error.logError({block:"thumb-preview",method:"_onError",message:"video-preview load error",source:"video-preview",meta:i},t),this.__base.apply(this,arguments)},setPreview:function(e){this.params.preview={url:e}},activeLoop:function(){this.params.loop=!0}})},function(e,t){BEM.decl({block:"thumb-preview",modName:"video",modVal:!0},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),$(".i-ua_browser_touch").length||this.params.disableVideoStop||this.bindTo("pointerleave",(function(){this.delMod("active")}))}}}})},function(e,t){BEM.decl({block:"thumb-preview",modName:"delay",modVal:!0},{_onPointerStart:function(){var e;this.__self._current&&(e=this.__self._current.hasMod("active","yes")),this.__self._delay=e?this.__self._delay:0,this.__self.previewTimeout=setTimeout(function(){clearTimeout(this.__self.previewTimeout),this.__self._delay=0,this.setMod("active","yes")}.bind(this),this.__self._delay?1e3*this.__self._delay:0),this._pointerStart=home.now()},_onPointerEnd:function(){this.__self.previewTimeout&&clearTimeout(this.__self.previewTimeout),this.__base.apply(this,arguments)}})},function(e,t){BEM.DOM.decl({block:"divjson-block",baseBlock:"media-service"},{onSetMod:{js:{inited:function(){BEM.blocks["i-intersection-observer-wrapper"].create((function(e,t){e.forEach((function(e){if(e.isIntersecting){var i=e.target;$(i).bem("divjson-block")._loadBlockData(),t.unobserve(i)}}))}),{threshold:0,rootMargin:"300px 100px"}).observe(this.domElem[0])}}},_loadBlockData:function(){if(!this._loadStarted){this._loadStarted=!0;var e=this.params.api;return $.ajax({url:e,xhrFields:{withCredentials:!0},dataType:"json",timeout:1e4}).asPromise().then(function(e){if(this._checkData(e))return e;throw new Error("Incorrect data")}.bind(this),(function(e){throw e.json&&e.json.errors&&home.error(e.json),e})).then(function(e){if(!e)return Promise.reject();this._onLoad(e)}.bind(this),function(e){throw home.error.logError({block:this.__self.getName(),method:"_loadBlockData",message:"Incorrect data"},e),e}.bind(this))["catch"](function(){BEM.blocks["zen-inserter"].hide(this.domElem.closest("[data-blockname]"))}.bind(this))}},_checkData:function(e){return"object"==typeof e&&Array.isArray(e.states)&&e.states.length>0},_onLoad:function(e){this._drawBlock(e)},_drawBlock:function(e){this._control=null,BEM.DOM.update(this.domElem,home.view("divjson",{json:e,block:this.params.layoutName})),this.domElem.toggleClass("media-service_tabs_yes",!!this.domElem.find(".divjson-tabs__tabs").length),$("html").hasClass("i-ua_browser_touch")&&this._createMenuChecked(),home.stat.logDOMShow(this.domElem)}},{live:function(){return this.__base.apply(this,arguments),!1}})},function(e,t){BEM.DOM.declMix("mix-divjson",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._recalcOverflow()}}},_recalcOverflow:function(){this.domElem.find(".i-multiline-overflow").toArray().forEach((function(e){var t=$(e);BEM.blocks["i-multiline-overflow"].calcOverflow(t,t.data("lines"))}))},_selectTabChecked:function(e){this._keys.indexOf(e)>-1&&this._selectTab(e)},_getPanelHTML:function(e,t){for(var i in this.params.baseData)this.params.baseData.hasOwnProperty(i)&&(t[i]=this.params.baseData[i]);return home.view("divjson__blocks",t)}},{live:function(){return this.liveBindTo("state-setter","click",(function(e){this._selectTabChecked(e.data.domElem.data("set-state"))})),!1}})},function(e,t){BEM.DOM.decl({block:"divjson",baseMix:["mix-tabber","mix-divjson"]},{},{live:function(){var e=this.__base.apply(this,arguments);return this.liveBindKey("state-setter","space enter",(function(e){this._selectTabChecked(e.data.domElem.data("set-state"))})),e}})},function(e,t){var i;i={black:"black",blue:"blue",cyan:"cyan",gray:"#888888",green:"#00ff00",magenta:"magenta",red:"red",transparent:"transparent",white:"white",yellow:"yellow"},home.divjsonUtils={convertColor:function(e){if((e=(e||"").toLowerCase())in i)return i[e];if("#"!==e.charAt(0))return"transparent";if(9===e.length){var t=[e.substr(1,2),e.substr(3,2),e.substr(5,2),e.substr(7,2)];return"rgba("+parseInt(t[1],16)+","+parseInt(t[2],16)+","+parseInt(t[3],16)+","+(parseInt(t[0],16)/255).toFixed(2)+")"}return e},processText:function(e){return e?e.replace(/<font color="(#[\da-f]{8})">/i,(function(){return"<font>"})).replace(//g,'<span class="rouble"></span>'):""},convertPXToEM:function(e){return(Number(e)/20).toFixed(4)+"em"},jsonWrap:function(e,t,i,n){var o=n.json;i.stack||(i.stack=[]),i.stack.push({type:o.type,hasAction:!!o.action});var s=e(t,home.deepExtend({block:i.block,stack:i.stack},n));return i.stack.pop(),s},json2MergeData:function(e,t,i){var n={layoutName:e.layoutName,titleIcon:e.titleIcon,templates:e.templates,context:e.context,stack:e.stack,hasParentAction:e.hasParentAction,hasCurrentAction:e.hasCurrentAction,inGallery:e.inGallery,inPreciseGallery:e.inPreciseGallery};for(var o in i&&(n.containerStyle=e.containerStyle,n.containerMix=e.containerMix),t)t.hasOwnProperty(o)&&(n[o]=t[o]);return n},json2Wrap:function(e,t,i,n){i.stack||(i.stack=[]),i.stack.push(t);var o=home.divjsonUtils.json2MergeData(i,n,!0);o.hasCurrentAction&&(o.hasParentAction=!0,o.hasCurrentAction=!1),i.json&&i.json.action&&(o.hasCurrentAction=!0),"divjson2-gallery"===t&&(o.inGallery=!0,o.json&&o.json.precise_logging&&(o.inPreciseGallery=!0));var s=e(t,o);return i.stack.pop(),s}}},function(e,t){BEM.DOM.decl("divjson-table",{onSetMod:{js:{inited:function(){this._autoSizeTable()}}},_autoSizeTable:function(){var e=1,t=this.elem("sizer").width(),i=this.elem("table")[0];for(i.style.fontSize="";e>.3&&!this._isTextFits(i,t);)i.style.fontSize=e+"em",e-=.05},_isTextFits:function(e,t){if(e.offsetWidth>t+1)return!1;for(var i=Array.from(e.querySelectorAll("td")),n=0;n<i.length;n++){var o=i[n];if(o.offsetWidth+1<o.scrollWidth)return!1}return!0}})},function(e,t){BEM.DOM.decl("divjson-table",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._size=this._calcSize(),this.bindToWin("resize",this.throttle(this._onResize,300))}}},_onResize:function(){var e=this._calcSize();e!==this._size&&(this._size=e,this._autoSizeTable())},_calcSize:function(){var e=BEM.DOM.win.width();return e>=1900?1900:e>=1600?1600:0},destruct:function(){this.unbindFromWin("resize"),this.__base.apply(this,arguments)}})},function(e,t){BEM.DOM.declMix("mix-divjson-tabs",{_getPanelHTML:function(e,t){for(var i in t={json:t},this.params.baseData)this.params.baseData.hasOwnProperty(i)&&(t[i]=this.params.baseData[i]);return home.view("divjson-container",t)},_onPanelChange:function(e,t){this.__base.apply(this,arguments),this.findBlocksInside(t,"imageloader").forEach((function(e){e.setMod("visible","yes")}))},_createPanel:function(){var e=this.__base.apply(this,arguments);return e.addClass(home.view("divjson-tabs__panel-mix")),e}})},function(e,t){BEM.DOM.decl({block:"divjson-tabs",baseMix:["mix-tabber","mix-tabber-labels","mix-tabber-labels","mix-tabber-labels-keyboard","mix-divjson-tabs"]},{_onPanelChange:function(e,t){this.__base.apply(this,arguments);var i=this.findBlockInside(t,"arrowed-list");i&&i.toggleArrows()}})},function(e,t){BEM.DOM.declMix("mix-divjson2",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._recalcOverflow()}}},_recalcOverflow:function(){this.domElem.find(".i-multiline-overflow").toArray().forEach((function(e){var t=$(e);BEM.blocks["i-multiline-overflow"].calcOverflow(t,t.data("lines"))}))},_selectTabChecked:function(e){this._keys.indexOf(e)>-1&&this._selectTab(e)},_getPanelHTML:function(e,t){var i={templates:this.getTemplates(),context:{}};for(var n in this.params.baseData)this.params.baseData.hasOwnProperty(n)&&(i[n]=this.params.baseData[n]);return home.view("divjson2__block",home.divjsonUtils.json2MergeData(i,{json:t},!0))},getTemplates:function(){return this.params.templates}},{live:function(){return this.liveBindTo("state-setter","click",(function(e){this._selectTabChecked(String(e.data.domElem.data("set-state")))})),!1}})},function(e,t){BEM.DOM.decl({block:"divjson2",baseMix:["mix-tabber","mix-divjson2"]},{},{live:function(){var e=this.__base.apply(this,arguments);return this.liveBindKey("state-setter","space enter",(function(e){return this._selectTabChecked(String(e.data.domElem.data("set-state"))),!1})),e}})},function(e,t){BEM.DOM.decl("divjson2-text",{onSetMod:{js:{inited:function(){BEM.blocks["i-multiline-overflow"].calcOverflow(this.elem("range"),this.domElem.data("lines"))}}}})},function(e,t){BEM.DOM.decl({block:"divjson2-text",modName:"marquee",modVal:"yes"},{onSetMod:{js:{inited:function(){this._timeout=setTimeout(function(){var e=this._uniqId+"-frames",t=this.domElem.outerWidth(),i=this.domElem.prop("scrollWidth");if(!(i<=t)){var n=t-i,o=-n/30;this.domElem.before("<style>@keyframes "+e+"{0%{transform:translateX(0);}"+(.5/(o+.5)*100).toFixed(1)+"%{transform:translateX(0);}100%{transform:translateX("+home.divjsonUtils.convertPXToEM(n)+");}}</style>");var s=e+" "+(o+.5).toFixed(2)+"s -.5s "+(-1===this.params.marqueeRepeat?"infinite":2*this.params.marqueeRepeat)+" linear alternate";this.elem("inner").css({animation:s})}}.bind(this),this.params.marqueeDelay)}}},destruct:function(){clearTimeout(this._timeout),this.__base.apply(this,arguments)}})},function(e,t){BEM.DOM.decl("divjson2-image",{onSetMod:{js:{inited:function(){var e=this.params.image;if(e){var t=new Image;t.onload=function(){this._isDestructing||this.elem("image").css({"background-image":'url("'+e+'")',"background-color":"transparent"})}.bind(this),t.src=e}}}}})},function(e,t){BEM.DOM.declMix("mix-divjson2-tabs",{_getPanelHTML:function(e,t){var i={};for(var n in this.params.baseData)this.params.baseData.hasOwnProperty(n)&&(i[n]=this.params.baseData[n]);return i.templates=this.findBlockOutside("divjson2").getTemplates(),home.view("divjson2__block",home.divjsonUtils.json2MergeData(i,{json:t},!0))},_onPanelChange:function(e,t){this.__base.apply(this,arguments),this.findBlocksInside(t,"imageloader").forEach((function(e){e.setMod("visible","yes")}))}})},function(e,t){BEM.DOM.decl({block:"divjson2-tabs",baseMix:["mix-tabber","mix-tabber-labels","mix-tabber-labels","mix-tabber-labels-keyboard","mix-divjson2-tabs"]},{_onPanelChange:function(e,t){this.__base.apply(this,arguments),this._recalcPanel(t)},_recalcPanel:function(e){var t=this.findBlockInside(e,"arrowed-list");t&&t.toggleArrows()}})},function(e,t){BEM.DOM.decl("divjson2-visibility",{onSetMod:{js:{inited:function(){this._actions={},this.params.actions.forEach((function(e){var t=e.percent!==undefined?e.percent:50;t/=100;var i=this.__self._instances[t]||BEM.blocks["i-intersection-observer-wrapper"].create(this.__self._onIntersection,{threshold:t});i.observe(this.domElem[0]),e.observer=i,this._actions[String(i.thresholds)]=e}),this)}}},_onIntersection:function(e,t){var i=this._actions&&this._actions[String(t.thresholds)];i&&(clearTimeout(i.timeout),e.isIntersecting&&(i.timeout=setTimeout(function(){i.log&&home.stat.logPath("show",this.params.layoutName+"."+i.log),i.url&&((new Image).src=i.url),i.observer.unobserve(e.target)}.bind(this),i.duration!==undefined?i.duration:800)))}},{_instances:{},_onIntersection:function(e,t){e.forEach((function(e){$(e.target).bem("divjson2-visibility")._onIntersection(e,t)}))}})},function(e,t){BEM.DOM.decl("banner-inserts",{_sendCounter:function(){var e=home.getData("banner-inserts.data").closeUrl;e&&((new Image).src=e)}},{live:function(){this.liveBindTo("link","pointerclick",(function(){this._sendCounter()}))}})},function(e,t){BEM.DOM.decl("nhl-item",{onSetMod:{js:{inited:function(){var e=this.elem("text","long","yes"),t=BEM.blocks["i-multiline-overflow"];t.calcOverflow(e,2,"nhl-item__text_long_yes");var i=this.elem("news-text"),n=this.__self.NEWS_TITLE_LINE_COUNT;this.hasMod(i,"title","yes")?t.calcOverflow(i,n,"nhl-item__news-text_title_yes"):t.calcOverflow(i,n,"nhl-item__news-text"),t.calcOverflow(this.elem("news-subtext"),6,"nhl-item__news-text")}}}},{NEWS_TITLE_LINE_COUNT:5})},function(e,t){BEM.decl("pusher",{},{_origin:"https://mobile.yandex.net",_prepareTags:function(e,t){return new Promise((function(i){var n=[].concat(e).map((function(e){if(!e||!e.name||!e.value)throw new TypeError(e+"is not a PusherTag");return{name:e.name,value:e.value,op:t}}));if(0===n.length)throw new TypeError("Tags list is empty");i(n)}))},_getBackendTag:function(e,t){return this._tags||(this._tags={}),this._tags.hasOwnProperty(e)||(this._tags[e]=fetch(t).then(this._checkBackendTag.bind(this)).then(this._createBackendTag.bind(this,e))["catch"](this._deleteBackendTag.bind(this,e))),this._tags[e]},_checkBackendTag:function(e){var t=e.status;if(t>=200&&t<300)return e.json();if(404===t)return{value:[]};throw new Error("Failed to load "+e.url+": "+t+" "+e.statusText)},_createBackendTag:function(e,t){var i={};return t.value.forEach((function(e){i[e]=null})),{name:e,values:i}},_deleteBackendTag:function(e,t){throw delete this._tags[e],t},_promisifyTags:function(e,t){return Promise.all(e.map((function(e){return this._getBackendTag(e.name).then(t.bind(this,e))}),this))},_checkTags:function(e){return this._promisifyTags(e,(function(e,t){return t.values.hasOwnProperty(e.value)})).then((function(e){return e.every((function(e){return e}))}))},check:function(e){return this._prepareTags(e).then(this._checkTags.bind(this))},_sendTags:function(e,t){var i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch(t,i).then((function(t){var i=t.status;if(i>=200&&i<300)return e;throw new Error("Failed to load "+t.url+": "+i+" "+t.statusText)}))},_updateBackendTags:function(e){return this._promisifyTags(e,(function(e,t){var i=e.value,n=e.op;"add"===n?t.values[i]=null:"remove"===n&&delete t.values[i]}))},unsubscribe:function(e){return this._prepareTags(e,"remove").then(this._sendTags.bind(this)).then(this._updateBackendTags.bind(this)).then((function(){return!1}))}})},function(e,t){!function(){function e(e){return function(){return this._start(),e.apply(this,arguments).then(this._setSubscribed.bind(this)).then(function(e){return this._finish(),e}.bind(this),function(e){throw this._finish(),e}.bind(this))}}BEM.DOM.decl("pusher-button",{onSetMod:{js:{inited:function(){this.setMod("supported",BEM.blocks.pusher.supported?"yes":"no")}},supported:{yes:function(){this.check(),this.button().on("click",this._onClick,this)},no:function(){this._finish(),this.button().setMod("disabled","yes")}},subscribed:function(e,t){var i=this.params.subscribed,n=i&&i[t];n&&(n.hasOwnProperty("theme")&&this.button().setMod("theme",n.theme),n.hasOwnProperty("text")&&this.button().setText(n.text))}},_onClick:function(){this.toggleSubscription()},_start:function(){this.button().setMod("progress","yes")},_finish:function(){this.button().delMod("progress")},_setSubscribed:function(e){return this.setMod("subscribed",e?"yes":"no"),e},toggleSubscription:function(){return this.hasMod("subscribed","yes")?this.unsubscribe():this.subscribe()},check:e((function(){return BEM.blocks.pusher.check(this.params.tags)})),subscribe:e((function(){return BEM.blocks.pusher.subscribe(this.params.tags)})),unsubscribe:e((function(){return BEM.blocks.pusher.unsubscribe(this.params.tags)})),button:function(){return this._button||(this._button=this.findBlockOn("button2")),this._button}})}()},function(e,t){BEM.DOM.decl("pusher-button",{_onClick:function(){if(this.hasMod("subscribed","yes"))this._unsubscribe();else{var e,t;switch(this.getPermission()){case"granted":if(this.__self._shown())return void this._subscribePermissionGranted();e="popup",t="prompt";break;case"default":e="default",t="prompt";break;default:return void this._openPopup("default","error")}this._openPopup(e,t,function(e){if(!0===e)switch(this.__self._shown(e),this.getPermission()){case"granted":this._subscribePermissionGranted();break;case"default":setTimeout(this._subscribePermissionDefault.bind(this),0);break;default:this._openPopup("default","error")}}.bind(this))}},_unsubscribe:function(){this.unsubscribe()["catch"](this._handleError.bind(this))},_subscribePermissionGranted:function(){this.subscribe()["catch"](this._handleError.bind(this))},_subscribePermissionDefault:function(){var e=this._openPopup("default","wait");BEM.blocks.pusher._requestPermission().then((function(){e.close()}),(function(){e.close()})).then(function(){return this.subscribe()}.bind(this))["catch"](function(e){"default"!==e.permission?"denied"!==e.permission?this._handleError(e):this._onPermissionDenied():e.delay<300&&this._openPopup("default","error")}.bind(this))},_handleError:function(e){throw this._openPopup("default","error"),home.error.logError({method:"_handleError",message:"Error in pusher button",block:this.__self.getName()},e),e},getPermission:function(){return BEM.blocks.pusher.getPermission()},_openPopup:function(e,t,i){var n=this._notice(e),o=this;return this.trigger("open-popup"),this.__self._openPopup(n,t,(function(e){return o.trigger("close-popup"),i&&i(e)})),n},_notice:function(e){return BEM.DOM.blocks["sup-notice"].getInstance(e)},_onPermissionDenied:function(){}},{_popups:{},_openedPopup:null,_onClosePopup:null,_openPopup:function(e,t,i){this._openedPopup!==e&&(this._closePopup(),this._openedPopup=e),this._onClosePopup&&e.un("close",this._onClosePopup),this._onClosePopup=function(e,t){this._openedPopup=null,this._onClosePopup=null,i&&i(t)}.bind(this),e.onFirst("close",this._onClosePopup).open(t)},_closePopup:function(){this._openedPopup&&this._openedPopup.close()},STORAGE_NAME:"notifications",_shownVal:null,_shown:function(e){return e!==undefined?(e&&this._setSessionParameter(this.STORAGE_NAME,""),this._shownVal=e,e):(null!==this._shownVal||(this._shownVal=this._hasSessionParameter(this.STORAGE_NAME)),this._shownVal)},_setSessionParameter:function(e,t){try{window.sessionStorage.setItem(e,t)}catch(i){}},_hasSessionParameter:function(e){try{return window.sessionStorage.hasOwnProperty(e)}catch(t){return!1}}})},function(e,t){BEM.DOM.decl("pusher-button",{_notice:function(e){var t=this.__base.apply(this,arguments);return"popup"===e&&t.setOwner(this.domElem),t}})},function(e,t){BEM.DOM.decl("sup-notice",{onSetMod:{js:{inited:function(){var e=this.close.bind(this,!1),t=this.close.bind(this,!0);this.findBlockOn("cancel","button2").on("click",(function(){home.stat.logPath("click","sup.notice_"+this.getMod("type")+"."+(this.getMod("mode")||"default")+".cancel"),this.afterCurrentEvent(e)}),this),this.findBlockOn("ok","button2").on("click",(function(){home.stat.logPath("click","sup.notice_"+this.getMod("type")+"."+(this.getMod("mode")||"default")+".ok"),this.afterCurrentEvent(t)}),this)}}},open:function(){return this.delMod("hidden"),home.stat.logPath("show","sup.notice_"+this.getMod("type")+"."+(this.getMod("mode")||"default")),this},close:function(e){return this.hasMod("hidden","yes")||(this.setMod("hidden","yes"),this.trigger("close",e)),this},_setTitle:function(e){return this.elem("title").html(e),this},_setText:function(e){return this.elem("text").html(e),this},_setButtonText:function(e,t){return this.findBlockOn(e,"button2").setText(t),this}},{_instances:{},getInstance:function(e){if(!this._instances[e]){var t=BEM.DOM.append(BEM.DOM.scope,home.view("sup-notice_type_"+e));this._instances[e]=t.bem(this.getName())}return this._instances[e]}})},function(e,t){BEM.DOM.decl("sup-notice",{onSetMod:{hidden:{yes:function(){this._destroyKey("ENTER")._destroyKey("ESC"),this.__base.apply(this,arguments)}}},_handlersKeys:{},_initializeKey:function(e,t){return this._handlersKeys[e]||(this._handlersKeys[e]=function(i){BEM.blocks.keycodes.is(i.keyCode,e)&&this.close(t)},this.bindToDoc("keydown",this._handlersKeys[e])),this},_destroyKey:function(e){return this._handlersKeys[e]&&(this.unbindFromDoc("keydown",this._handlersKeys[e]),delete this._handlersKeys[e]),this}})},function(e,t){BEM.DOM.decl({block:"sup-notice",modName:"type",modVal:"default"},{onSetMod:{mode:{wait:function(){this._setTitle(home.l10n("pushes.notice.wait.title"))},error:function(){this._setTitle(home.l10n("pushes.notice.error.title"))._setText(home.l10n("pushes.notice.error.text"))._setButtonText("cancel",home.l10n("pushes.notice.error.cancel"))},"web-error":function(){this._setTitle(home.l10n("pushes.notice.error.title"))._setText(home.l10n("pushes.notice.error.web_error"))._setButtonText("cancel",home.l10n("pushes.notice.error.cancel"))},prompt:function(){this._setTitle(home.l10n("pushes.notice.prompt.title"))._setText(home.l10n("pushes.notice.prompt.text"))._setButtonText("cancel",home.l10n("pushes.notice.prompt.cancel"))}}},open:function(e){return this.setMod("mode",e),this.__base.apply(this,arguments),this}})},function(e,t){BEM.DOM.decl({block:"sup-notice",modName:"type",modVal:"default"},{onSetMod:{mode:{"*":function(e,t){this._prepareKeys(t)}},hidden:{"":function(){this._prepareKeys(this.getMod("mode"))}}},_prepareKeys:function(e){"prompt"===e?this._initializeKey("ENTER",!0)._initializeKey("ESC"):"error"===e||"web-error"===e?this._destroyKey("ENTER")._initializeKey("ESC"):this._destroyKey("ENTER")._destroyKey("ESC")}})},function(e,t){BEM.DOM.decl({block:"sup-notice",modName:"type",modVal:"popup"},{onSetMod:{hidden:{"":function(){this.bindToDoc("pointerdown focusin",this._onOuterAction)},yes:function(){this.unbindFromDoc("pointerdown focusin",this._onOuterAction)}}},_onOuterAction:function(e){0===$(e.target).closest(this.domElem).length&&this.close()}})},function(e,t){BEM.DOM.decl({block:"sup-notice",modName:"type",modVal:"popup"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._updatePositionThrottled=home.throttle(this._updatePosition.bind(this),200)}},hidden:{"":function(){this._initializeKey("ENTER",!0)._initializeKey("ESC"),this._updatePosition(),this.bindToWin("resize",this._updatePositionThrottled),this.__base.apply(this,arguments)},yes:function(){this.unbindFromWin("resize",this._updatePositionThrottled),this.__base.apply(this,arguments)}}},setOwner:function(e){this._$owner=e,this._updatePosition()},_updatePosition:function(){if(this._$owner&&0!==this._$owner.closest("html").length){var e=this._$owner.offset(),t=Math.round(e.left+this._$owner.outerWidth()/2),i=Math.round(e.top+this._$owner.outerHeight()),n=t>260,o=i+150>BEM.DOM.win.scrollTop()+BEM.DOM.win.height();this.setMod("arrow-position",n?"right":"left"),this.setMod("arrow-hidden",o?"yes":""),this.domElem.css({left:t-(n?260:70),top:o?i-170:i+15})}}})},function(e,t){BEM.decl({block:"pusher",modName:"technology",modVal:"push-api"},{},{_getID:function(){return $.cookie("yandexuid")},_getBackendTag:function(e){var t=this._origin+"/psuh/v2/tags/web/"+this._getID()+"/"+e;return this.__base.call(this,e,t)},_sendTags:function(e){var t=this._getID(),i=this._origin+"/psuh/v2/tags/"+t+"/"+t;return this.__base.call(this,e,i)},_requestPermission:function(){var e=Date.now();return Notification.requestPermission().then((function(t){if("granted"!==t){var i=new Error("Access is denied"),n=Date.now();throw i.permission=t,i.delay=n-e,i}}))},_prepareSubscription:function(e){return Promise.all([navigator.serviceWorker.register(this._urlServiceWorker,{scope:"/notifications/"}),this._prepareTags(e,"add")])},_subscribe:function(e){var t=this._getID();return new Promise((function(i,n){var o=e[0],s=e[1],r=new MessageChannel,a=o.installing||o.waiting||o.active;r.port1.onmessage=function(e){var t=e.data||{},o=t.code,r=t.data;if("subscribe"!==o||!0!==r){var a=new Error("Message not processed");"error"===o&&r.stack&&(a.stack=(a.stack?a.stack+"\r\n":"")+r.stack),n(a)}else i(s)},a.postMessage({code:"subscribe",version:1,data:{id:t,tags:s}},[r.port2]),setTimeout((function(){n(new Error("Timeout expired"))}),3e4)}))},subscribe:function(e){return this._requestPermission().then(this._prepareSubscription.bind(this,e)).then(this._subscribe.bind(this)).then(this._updateBackendTags.bind(this)).then((function(){return!0}))},getPermission:function(){return Notification.permission},supported:"serviceWorker"in navigator&&"PushManager"in window&&"MessageChannel"in window&&"Notification"in window&&"indexedDB"in window&&"fetch"in window&&PushSubscription.prototype.hasOwnProperty("getKey")&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")})},function(e,t){BEM.decl({block:"pusher",modName:"technology",modVal:"push-api"},{},{_urlServiceWorker:"/service-workers/pusher-worker/desktop/sup.js"})},function(e,t){BEM.DOM.decl({baseBlock:"pusher-button",block:"promo-pusher-button"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindTo("click",(function(){return this.trigger("click"),!1}))}},subscribed:function(e,t){this.__base.apply(this,arguments),this.domElem.attr("title","yes"===t?home.l10n("pushes.sup_button.unsubscribe"):home.l10n("pushes.sup_button.subscribe")),this.trigger("toggle","yes"===t),this.params.subscribedText&&(this._origText||"yes"!==t||(this._origText=this.elem("text").text()),this.elem("text").text("yes"===t?this.params.subscribedText:this._origText))}},_onClick:function(){this.__base.apply(this,arguments),this.params.counter&&home.stat.logPath("click",this.params.counter+"."+(this.hasMod("subscribed","yes")?"unsubscribe":"subscribe"))},check:function(){var e=this.__base.apply(this,arguments),t=function(e,t){!this._isDestructing&&this.params.counter&&home.stat.logPath("show",this.params.counter+"."+(e&&t?"unsubscribe":"subscribe"))}.bind(this);return e.then(t.bind(this,!0),t.bind(this,!1)),e},button:function(){return this}})},function(e,t){BEM.DOM.decl({block:"nhl",baseBlock:"media-service",baseMix:["mix-tabber","mix-tabber-labels","mix-tabber-labels-keyboard","mix-tabber-loader","mix-tabber-loader-keyboard","mix-tabber-labels-preloader","mix-tabber-media-service"]},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var e=this.findBlockInside("score-tumbler","tumbler");e&&(e.on("change",(function(t,i){if(this.params.logged){this.toggleMod("hide-score","yes",i.checked);var n=i.checked?"hideSpoilers":"showSpoilers",o=this.params[n];o&&((new Image).src=o),home.stat.logPath("click","nhl.spoilers."+(i.checked?"off":"on"))}else e.delMod("checked")}),this),e.on("pseudo-click",this._showAuthPromo,this)),this.params.autoscroll&&this._autoscroll()}}},_loadData:function(e){return $.ajax({url:home.makeUrl({path:"/portal/hockey/"+e,query:this.params.query}),xhrFields:{withCredentials:!0},dataType:"json",timeout:15e3}).asPromise().then((function(t){if(Array.isArray(t[e])&&t[e].length)return{items:t[e]};throw new Error("Incorrect data")}))},_getPanelHTML:function(e,t){return t.isDark=this.params.isDark,t.useSprite=this.params.useSprite,home.view("nhl__panel",t)},_renderLoader:function(){return home.view("nhl__panel",{dummy:!0})},_calcOverflow:function(){},_showAuthPromo:function(){if(!this._tooltip){var e=$(home.view("nhl__auth-promo-popup",{size:"m",authUrl:this.params.authUrl}));e.appendTo("body"),home.stat.logPath("show","nhl.auth_promo"),this._tooltip=this.findBlockOn(e,"tooltip"),this._tooltip.on("hide",(function(){home.stat.logPath("click","nhl.auth_promo.cancel")}))}this._tooltip.setOwner(this.findBlockInside("score-tumbler","tumbler").elem("box")).setMod("shown","yes")},_autoscroll:function(){var e=this.domElem.offset().top,t=this.domElem.outerHeight(),i=BEM.DOM.win.height();t<i&&(e-=(i-t)/2.618),$("html,body").stop().animate({scrollTop:e},"slow")}},{live:function(){return this.__base.apply(this,arguments),!1}})},function(e,t){BEM.DOM.decl({block:"nhl-loader",baseBlock:"insert-loader"},{_getDataUrl:function(){return this.params.url},_checkData:function(e){return Array.isArray(e.tabs)&&e.tabs.length&&Array.isArray(e[e.tabs[0].id])&&e[e.tabs[0].id].length>0},_selectData:function(e){return e},_getHTML:function(e){return e.isDark=this.params.isDark,e.query=this.params.query,e.hideSpoilers=this.params.hide_spoilers,e.hideSpoilersUrl=this.params.hide_spoilers_url,e.showSpoilersUrl=this.params.show_spoilers_url,e.retryButtonTheme=this.params.retryButtonTheme,e.useSprite=this.params.useSprite,e.logged=this.params.logged,e.authUrl=this.params.authUrl,e.autoscroll=this.params.autoscroll,home.view("nhl__content",e)}})},function(e,t){BEM.DOM.decl({block:"tumbler",modName:"pseudo-disabled",modVal:"yes"},{_toggle:function(){this.trigger("pseudo-click")}})},function(e,t){BEM.DOM.decl({block:"imageloader",modName:"different",modVal:"yes"},{_getViewedCards:function(e,t){for(var i=this.elem("column"),n=i.length&&i.eq(0).offset().left||0,o=0;o<i.length;++o){var s=i.eq(o),r=s.offset().left-n,a=s.outerWidth();if(!(r+a<e||(e-r)/a>=t)){i=i.slice(0,o);break}}return i.find(".imageloader__card").add(i.filter(".imageloader__card"))}})},function(e,t){BEM.DOM.decl({block:"stream-top",baseBlock:"media-service"},{_calcOverflow:function(){BEM.blocks["i-multiline-overflow"].calcOverflow(this.elem("item-title"),3)}})},function(e,t){BEM.DOM.decl({block:"stream-top-loader",baseBlock:"insert-loader"},{_checkData:function(e){return e&&e.length>4},_selectData:function(e){return{items:Ya.streamCms.addReqIdsByDocuments(e,"carousel")}},_getHTML:function(e){return e.isDark=this.params.isDark,e.allowVideoPreview=this.params.allowVideoPreview,e.withReasons=this.params.withReasons,home.view("stream-top__block",e)},_drawBlock:function(){this.__base.apply(this,arguments),home.streamRum.sendBlockShowDelta("stream-top",{requestStart:this._loadStartedTs})},_load:function(){return Ya.streamCms.getTopVideos({limit:10})},_loadBlockData:function(){return this._loadStartedTs=Ya.Rum.getTime(),this.__base.apply(this,arguments)}})},function(e,t){var i;(i=Ya.streamCms.constructor).prototype.topVideosId="ChJoaHpseGh6anlrZXF5dGNjaGgSCHZpZGVvaHViGg9DQVRFR19FVEhFUl9UT1AgACgB",i.prototype.getTopVideos=function(e){var t=this.topVideosId;return e=e||{},Ya.streamCms.getCarouselItems({carousel_id:t,limit:e.limit||10,offset:e.offset}).then((function(e){return(e||[]).sort((function(e,t){return e.top_position-t.top_position}))}))["catch"](function(t){return this.onError({message:"getTopVideos failed",method:"getTopVideos",meta:{limit:e.limit,offset:e.offset},source:"vh"},t),[]}.bind(this))}},function(e,t){home.getData("i-sw-reporter.on")&&"serviceWorker"in navigator&&setTimeout((function(){window.defaultMetrikaCounter&&Promise.resolve().then((function(){return navigator.serviceWorker.getRegistrations()})).then((function(e){var t=null;e.forEach((function(e){var i=home.parseUrl(e.scope).path;i=i.replace(/(^\/|\/$)/g,"").replace(/\//g,"_"),["active","installing","waiting"].forEach((function(n){e[n]&&((t=t||{})["sw-report"]=t["sw-report"]||{},t["sw-report"][i]=t["sw-report"][i]||{},t["sw-report"][i][n]=e[n].scriptURL||1)}))})),t&&window.defaultMetrikaCounter.params(t)}))["catch"]((function(){}))}),5e3)},function(e,t){window.home&&home.getData&&home.getData("i-jquery.disableEval")&&(window.$.globalEval=function(){var e;window.BEM&&BEM.blocks["i-block-renderer"]&&(e=BEM.blocks["i-block-renderer"].getCurrent()),home.error.logError({message:"Eval is forbidden",block:"i-jquery",meta:e})}),window.home&&home.getData&&home.getData("i-jquery.logScript")&&$(document).on("ajaxComplete",(function(e,t,i){if(i&&i.dataTypes&&"text"===i.dataTypes[0]&&"script"===i.dataTypes[1]){var n;try{n=t&&t.getResponseHeader("Content-Type")}catch(o){}home.error.logError({message:"Processing ajax script response",block:"i-jquery",meta:{url:i.url,type:n}})}}))},function(e,t){!function(){if(window.home&&home.getData&&home.getData("i-scroll-changes.data")){var e,t=home.getData("i-scroll-changes.data");t.scroll_slowdown_listener&&(e=!!BEM.blocks["i-ua"].passiveEvents&&{passive:!1},window.addEventListener("scroll",(function(){}),e)),t.scroll_slowdown_dom_calc&&function(){var e=!!BEM.blocks["i-ua"].passiveEvents&&{passive:!0},t=0;window.addEventListener("scroll",(function(){var e=$("[data-blockname]").toArray(),i=window.pageYOffset,n=$(window).height();e.forEach((function(e){var o=$(e),s=o.offset().top,r=o.height();s>=i&&s+r<=i+n&&++t>10&&(t=0)}))}),e)}(),t.scroll_speedup_hover&&function(){var e,t=!!BEM.blocks["i-ua"].passiveEvents&&{passive:!0};window.addEventListener("scroll",(function(){$("body").addClass("body_hover_none"),clearTimeout(e),e=setTimeout((function(){$("body").removeClass("body_hover_none")}),200)}),t)}()}}()},function(e,t){var i=home.getData("service-worker-connector.isMordaInstallingEnabled"),n=home.getData("service-worker-connector.shouldUnregisterSw"),o=home.getData("service-worker-connector.homePageNoArgs"),s=o+"/chrome/",r=o+"/portal/service-worker/white/_fake_newtab.js";i&&!n&&navigator.serviceWorker.getRegistration(s).then((function(e){e&&e.active&&e.active.scriptURL!==r||setTimeout((function(){navigator.serviceWorker.register(r,{scope:"./portal/home-app/"})}),100)})),n&&navigator.serviceWorker.getRegistration(s).then((function(e){!e||e.active&&e.active.scriptURL!==r||e.unregister()}))},function(e,t){window.addEventListener("beforeinstallprompt",(function(){home.stat.logPath("tech","installing_promotion.avaliable_promote")}))},function(e,t){!function(){"use strict";var e="#hs"===window.location.hash;e&&(window.history&&history.replaceState?history.replaceState(history.state,"",location.pathname+location.search):location.hash="");var t=home.localStorage,i=!home.disabledLS&&t,n=$(window);function o(e){return e?new Date(e).getTime():(new Date).getTime()}i&&BEM.DOM.decl("b-hs-balloon",{onSetMod:{js:function(){var t=this;if(e)t._setDoNotShowFlag();else if(!t._getDoNotShowFlag()&&90!==Math.abs(window.orientation)){var i=t._getData();i.length<3&&BEM.blocks["i-message-locker"].acquireLock("b-hs-balloon").then((function(){t.show(),t._updateShownDates(i),t.adjustBalloonPosition(),t._bindScroll(),t.elem("close").on("click",(function(){t.forceHideBalloon()}))}))}}},adjustBalloonPosition:function(){var e=n.scrollTop();this.domElem.css("top",e)},_bindScroll:function(){n.on("scroll.balloon",this.changeThis(this.adjustBalloonPosition))},_unbindScroll:function(){n.off("scroll.balloon")},show:function(){var e=this;window.setTimeout((function(){e.setMod("display","yes"),e.adjustBalloonPosition(),e.setMod("opacity","visible"),home.stat.logDOMShow(e.domElem)}),0),window.setTimeout((function(){e.hide()}),15e3),window.location.hash="hs"},hide:function(){var e=this;this.setMod("opacity","hidden"),setTimeout((function(){e._unbindScroll(),e.setMod("display","no"),BEM.blocks["i-message-locker"].releaseLock("b-hs-balloon")}),500)},immediateHide:function(){this._unbindScroll(),this.setMod("display","no"),this.setMod("opacity","hidden"),BEM.blocks["i-message-locker"].releaseLock("b-hs-balloon")},forceHideBalloon:function(){this._setDoNotShowFlag(),this.hide()},_getData:function(){var e;try{e=JSON.parse(t.getItem("balloonShownDates")).filter((function(e){return!isNaN(o(e))&&o()-o(e)<12096e5}))}catch(i){e=[]}return e},_updateShownDates:function(e){e.push(o());var i,n=(i=3,e.reverse().splice(0,i).reverse());t.setItem("balloonShownDates",JSON.stringify(n))},_setDoNotShowFlag:function(){t.setItem("doNotShowHSBalloon",1)},_getDoNotShowFlag:function(){return t.getItem("doNotShowHSBalloon")}})}()},function(e,t,i){"use strict";i.r(t);i(6),i(7),i(8),i(9),i(10),i(11),i(12),i(13),i(14),i(15),i(16),i(2),i(17),i(18);home.getTouchEvents=function(e){var t=e.originalEvent;return t.touches&&t.touches.length?t.touches:t.changedTouches},home.getTouchEvent=function(e){var t,i=home.getTouchEvents(e);return{x:(t=i&&i.length?i[0]:e.originalEvent).pageX||t.clientX,y:t.pageY||t.clientY}};i(3),i(19),i(20),i(21),i(22),i(23),i(24),i(25),i(26),i(27),i(28),i(29),i(30),i(31),i(32),i(33),i(34),i(35),i(36),i(37),i(38),i(4),i(39),i(40),i(41);$((function(){var e=home&&home.getData&&home.getData("fingerprint.data");e&&e.enabled&&setTimeout((function(){var t=e.zmblt;try{window.Ya.F.calibrate("Yandex-UI-Icons-Private",(function(i){null!==i&&Number(i)!==Number(t)&&((new Image).src=e.cookieUrl+"&zmblt="+i)}))}catch(i){}}),0)}));i(42),i(43),i(44),i(45),i(46),i(47),i(48),i(49),i(50),i(51),i(52),i(53),i(54),i(55),i(56),i(57),i(58);function n(e){var t;if(!e.getAttribute&&"length"in e){t=new Array(e.length);for(var i=0;i<e.length;++i)t[i]=e[i];return t}return[e]}!function(){var e,t,i,o={},s={},r=/([^.(]+)(?:\(([^)]*)\))?\.?/g,a=/^([^=]+)=(.+)$/,c={show:!0};home.stat={},home.stat.attr="data-statlog",home.stat.brfix=1,home.stat.getCustomPageParams=function(){var e=home&&home.getData&&home.getData("redir-stats.data")||"",t="",i="";window.Ya&&Ya.Rum&&Ya.Rum.getTime&&(t+="/timefs="+Math.floor(Ya.Rum.getTime()));var n=home.getData?home.getData("timing.vars"):"";return n&&(n[1964]?i="/mexp=0":n[1965]&&(i="/mexp=1")),e+t+i};home.stat._sendPost=function(t,i,n){var o;if("XDomainRequest"in window?o=new XDomainRequest:"XMLHttpRequest"in window&&(o=new XMLHttpRequest),o){o.open("post",n||e,!0),o.withCredentials=!0;try{o.setRequestHeader("Accept","text/plain, */*; q=0.01"),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")}catch(s){}i&&("onreadystatechange"in o?o.onreadystatechange=function(){4===o.readyState&&i()}:o.onload=o.onerror=i),o.send(t)}};var l,u=function(e){return"/dtype=clck"+home.stat.getCustomPageParams()+"/session_id="+o.showId+"/events="+encodeURIComponent(JSON.stringify(e.map((function(e){return{event:e.type,url:e.url,"parent-path":o.statRoot,blocks:e.array}})))).replace(/\*/g,"%2A")+"/*"},d=function(i){if(t){var n=u(t);!function(t){if(o.useBeacon&&"sendBeacon"in navigator)return navigator.sendBeacon(e,t)}(n)?home.stat._sendPost(n,i):i&&i(),t=null}};home.stat.flushQueue=d;var h=function(e,t){var i=t,n=[];e.replace(r,(function(e,t,i){n.push({key:t,params:i?i.split(";"):[]})}));for(var o=0;o<n.length;++o){var s,c=n[o].params,l=n[o].key;!i.some((function(e){if(e.ctag===l)return s=e,!0}))&&(s={ctag:l},i.push(s)),c.length&&c.forEach((function(t){var i=t.match(a);try{s[i[1]]=decodeURIComponent(i[2])}catch(n){home.error.logError({block:"home__stat",message:"Cannot decode counter",method:"convertPathToData",meta:{counter:e,decodingUri:i[2]}})}})),o+1<n.length&&(i=s.children=s.children||[])}return t};home.stat.logPath=function(e,n,r){var a,u,m;if(r&&"clean"===r.mode&&function(e){e&&t&&t.length&&0===(t=t.filter((function(t){return t.type!==e}))).length&&(t=null)}(e),r&&r.customParams&&(n+=function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i+"="+encodeURIComponent(e[i]));return t.length?"("+t.join(";")+")":""}(r.customParams)),o.enabled&&e&&n){if(t||(t=[]),"show"===e){if(n in s)return;s[n]=!0}c[e]&&(m=function(e){if(!c[e])throw new Error(e+" is not mergeable type");for(var i=0;i<t.length;++i)if(t[i].type===e)return t[i]}(e)),m=m||(t[t.length]={type:e,url:r&&r.url,array:[]}),h(n,m.array),r&&r.callback?(d(a=function(){u||(u=!0,r.callback())}),r.callbackTimeout!==undefined&&setTimeout(a,r.callbackTimeout)):(l||(l=home.delayedTask((function(){i=!1,d()}),25)),o.delayedOneTimer&&i||(i=!0,l()))}else r&&r.callback&&setTimeout(r.callback,0)},home.stat.redirect=function(t,i){if(!o.enabled||!i)return!0;var n,s,r=t.href;if(o.useBeacon&&"sendBeacon"in navigator&&(s=u([{type:"click",url:r,array:h(i,[])}]),navigator.sendBeacon(e,s)))return!0;if("_blank"===t.target)return s=u([{type:"click",url:r,array:h(i,[])}]),home.stat._sendPost(s),!0;if(!t.getAttribute("data-statlog-timeout")&&-1===r.indexOf("/lid="+o.statRoot)){if(n=t.getAttribute("data-statlog-url"))t.href=n;else{var a=function(e){var t=[];return{counter:e.replace(/\(([^)]+)\)/g,(function(e,i){return t.push(i.replace(/;/g,",")),""})),vars:t=t.length?"/vars="+t.join(","):""}}(i);t.href=o.redirHost+"redir/dtype=clck"+home.stat.getCustomPageParams()+"/lid="+o.statRoot+"."+a.counter+"/sid="+o.showId+a.vars+"/rnd="+((new Date).getTime()+Math.round(100*Math.random()))+"/*data="+encodeURIComponent("url="+encodeURIComponent(r.match(/^http/)?r:location.protocol+"//"+location.host+(r.match("^/")?r:"/"+r)))}t.setAttribute("data-statlog-orig-href",r),t.setAttribute("data-statlog-timeout",setTimeout((function(){t.href=r,t.removeAttribute("data-statlog-timeout"),t.removeAttribute("data-statlog-orig-href")}),500))}return!0};home.stat.collectShows=function(e,t){var i=[],o=[];return n(e).forEach((function(e){i=i.concat(n(e.querySelectorAll("["+home.stat.attr+"], [data-stat-select]"))),(e.getAttribute(home.stat.attr)||e.getAttribute("data-stat-select"))&&i.push(e)})),i.forEach((function(e){var i=e.getAttribute(home.stat.attr)||e.getAttribute("data-stat-select"),n=e.getAttribute("data-statlog-showed")||i in s,r=!!e.getAttribute("data-statlog-precise");i&&!n&&(!r||t&&t.precise)&&(t&&!1===t.visibilityCheck||function(e){return e&&(0!==e.offsetWidth||0!==e.offsetHeight)}(e))&&o.push(t&&t.convertCounters&&t.convertCounters(i)||i)})),o},home.stat.logDOMShow=function(e,t){o.enabled&&home.stat.collectShows(e,t).forEach((function(e){home.stat.logPath("show",e)}))},home.stat._countShows=function(e){o.enabled&&e.forEach((function(e){s[e]=!0}))},home.stat.clearShows=function(){o.enabled&&(s={})},home.stat.getRoot=function(){return o.enabled&&o.statRoot||""},home.stat.setCounter=function(e,t){n(e).forEach((function(e){e.setAttribute(home.stat.attr,t)}))};var m=function(e){var t,i=e.target||e.srcElement;if((e.which||e.button)<2){for(;i&&1===i.nodeType&&!(t=i.getAttribute(home.stat.attr));)i=i.parentNode;if(t&&i)"0"!==i.getAttribute("data-statlog-redir")&&i.href?i.href&&"click"===e.type&&!e.defaultPrevented&&!1!==e.returnValue&&(home.stat.redirect(i,t)||("preventDefault"in e?e.preventDefault():e.returnValue=!1)):"mousedown"===e.type&&home.stat.logPath("click",t)}},p=function(e,t){"addEventListener"in document?document.addEventListener(e,t,!1):document.attachEvent("on"+e,t)},f=function(){o.enabled&&(p("mousedown",m),p("click",m))};home.subscribeData((function(t){o=t||home.getData("statlog.config",{}),e=o.clckDemonHost+"counter","querySelectorAll"in document||(o.enabled=!1),f()})),home.stat._processClicks=m,home.stat._setConfig=function(t){e=(o=t).clckDemonHost+"counter",s={},f()}}(),home.debounce=function(e,t,i,n){var o;return 3===arguments.length&&"boolean"!=typeof i&&(n=i,i=!1),function(){var s=arguments;n=n||this,i&&!o&&e.apply(n,s),clearTimeout(o),o=setTimeout((function(){i||e.apply(n,s),o=null}),t)}};var o,s,r,a,c,l,u,d,h;i(59),i(60),i(61),i(62),i(63),i(64),i(65),i(66),i(67),i(68),i(69),i(70),i(71),i(72),i(73),i(74),i(75),i(76),i(77),i(78),i(79),i(80),i(81);a={},c=!1,l=0,u=!0,d=[],h=!0,BEM.decl("i-xiva",{},{listen:function(e,t,i,n){var o=!a[e],s=n&&n.force;o&&(a[e]={handlers:[]}),a[e].ignoreFilterByTime=n&&n.ignoreFilterByTime,a[e].ignoreBlurEvent=n&&n.ignoreBlurEvent,a[e].ts=t,a[e].handlers.push(i),this._init(s),o&&this._updateSubscription()},stopListen:function(e,t){a[e]&&(a[e].handlers=a[e].handlers.filter((function(e){return e!==t})),a[e].handlers.length||(delete a[e],this._updateSubscription()))},send:function(e){var t;this._hasXivaSupport()&&e&&e.ch&&(this._connected||this._init(!0),t=JSON.stringify(e),this._sendQueue.push(t),this._sendDelayed())},_sendQueue:[],_sendDelayed:function(){var e;if(this._connected)for(;this._sendQueue.length;)e=this._sendQueue.pop(),o.send(e)},connect:function(){u=!0,this._connect()},disconnect:function(e){u=e,o&&o.close&&o.close(1e3,"unload")},_deliverReceived:function(){var e,t;for(e=0,t=d.length;e<t;++e)(0,d[e].handler)(d[e].data,!0);d=[]},_toggleFocus:function(e){(h=e)&&this._deliverReceived()},_initFocusEvents:function(){var e=this;$.browser&&$.browser.msie?$(document).bind("focusout",(function(){e._toggleFocus(!1)})).bind("focusin",(function(){e._toggleFocus(!0)})):$(window).focus((function(){e._toggleFocus(!0)})).blur((function(){document.activeElement&&"IFRAME"===document.activeElement.tagName||e._toggleFocus(!1)}))},_bindOnUnload:function(){var e=this;$(window).on("beforeunload",(function(){e.disconnect(!1)}))},_init:function(e){c&&!e||this._connected||(c=!0,this._initFocusEvents(),this._bindOnUnload(),this._connect=this._connect.bind(this),clearTimeout(this._connectTimeout),e?this._connect():this._connectTimeout=setTimeout(function(){this._connect()}.bind(this),6e4))},_hasXivaSupport:function(){return!!window.WebSocket},_connect:function(){var e=home.getData("i-xiva.url");this._hasXivaSupport()&&e&&(o||((o=new SockJS("//"+e+"/xiva",null,{protocols_whitelist:["websocket"]})).onopen=function(){this._connected=!0,this._updateSubscription(),this._checkConnection(),this._sendDelayed()}.bind(this),o.onmessage=this._onMessage.bind(this),o.onclose=function(e){this._connected=!1,o=null,this._reconnect(1e3===e.code)}.bind(this)))},_reconnect:function(e){if(this._stopConnectionTimer(),u){l++;var t=0;e||(t+=l<=1?120*Math.random()*1e3:300*Math.random()*1e3),t+=l<=2?1e4:l<=6?3e4:6e4,setTimeout(this._connect,t)}},_stopConnectionTimer:function(){s&&(clearTimeout(s),s=null)},_checkConnection:function(){this._stopConnectionTimer(),s=setTimeout(function(){this._connected&&(l=0)}.bind(this),5e3)},_updateSubscription:function(){r&&clearTimeout(r),r=setTimeout(function(){this._subscribeSend()}.bind(this),100)},_subscribeSend:function(){var e;if(this._connected){for(var t in e={subscribe:{}},a)a.hasOwnProperty(t)&&(e.subscribe[t]=a[t].ts);o.send(JSON.stringify(e))}},_onMessage:function(e){var t,i,n,o,s=$.trim(e.data);try{if(n=(t=JSON.parse(s)).ch+"_"+t.key,t.mts&&(this._timeDelta=+new Date-t.mts),a[n]&&(i=parseInt(t.ts),a[n].ts<i||a[n].ignoreFilterByTime)){a[n].ts=i,o=a[n].handlers;for(var r=0,c=o.length;r<c;++r)h||a[n].ignoreBlurEvent?o[r](t):d.push({handler:o[r],data:t})}}catch(l){}},getTimeDelta:function(){return this._timeDelta}});i(82),i(83),i(84),i(85),i(86),i(87),i(88),i(89),i(90),i(91),i(5),i(92),i(93),i(94),i(95),i(96),i(97),i(98),i(99),i(100),i(101),i(102),i(103),i(104),i(105),i(106),i(107),i(108),i(109),i(110),i(111),i(112),i(113),i(114),i(115),i(116),i(117),i(118),i(119),i(120),i(121),i(122),i(123),i(124),i(125),i(126),i(127),i(128),i(129),i(130),i(131),i(132),i(133),i(134),i(135),i(136),i(137),i(138),i(139),i(140),i(141),i(142),i(143),i(144),i(145),i(146),i(147),i(148),i(149),i(150),i(151),i(152),i(153),i(154),i(155),i(156),i(157),i(158),i(159),i(160),i(161),i(162),i(163),i(164),i(165),i(166),i(167),i(168),i(169),i(170),i(171),i(172),i(173),i(174),i(175),i(176),i(177),i(178),i(179),i(180),i(181),i(182),i(183),i(184),i(185),i(186),i(187),i(188),i(189),i(190),i(191),i(192),i(193),i(194),i(195),i(196),i(197),i(198),i(199),i(200),i(201),i(202),i(203),i(204),i(205),i(206),i(207),i(208),i(209),i(210),i(211),i(212),i(213),i(214),i(215),i(216),i(217),i(218),i(219),i(220),i(221),i(222),i(223),i(224),i(225),i(226),i(227),i(228),i(229),i(230),i(231),i(232),i(233),i(234),i(235),i(236),i(237),i(238),i(239),i(240),i(241),i(242),i(243),i(244),i(245),i(246),i(247),i(248),i(249);function m(e,t){try{if(window.CSS&&CSS.supports)return CSS.supports(e,t);if(window.supportsCSS)return window.supportsCSS(e,t)}catch(i){}}var p,f=/(|\.\.\.)$/,_=!(m("-webkit-line-clamp","1")||m("text-overflow","-o-ellipsis-lastline"))&&"querySelectorAll"in document,g={},v={};function b(e){var t=getComputedStyle(e),i=t.lineHeight,n=t.fontSize;i="normal"===i?1.2*parseFloat(n):parseFloat(i);for(var o=e;"inline"===getComputedStyle(o).display&&o&&o!==document;)o=o.parentNode;return{width:o.offsetWidth+"px",lineHeight:i+"px",fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:n,wordWrap:t.wordWrap,whiteSpace:t.whiteSpace,hyphens:t.hyphens,wordBreak:e.wordBreak}}function y(e,t){return p.textContent=e,p.offsetHeight/parseFloat(t.lineHeight)}function w(e,t,i){var n,o=0,s=e.length;if(function(e){for(var t in p||((p=document.createElement("div")).style.position="absolute",p.style.left="-1000px",p.style.top="0",p.style.visibility="hidden",p.setAttribute("aria-hidden","true"),document.body.appendChild(p)),e)e.hasOwnProperty(t)&&v[t]!==e[t]&&(p.style[t]=e[t]);v=e}(i),y(e,i)<=t+.5)return e;for(e=e.replace(f,"");o<s;)n=Math.ceil((o+s)/2),y(e.substr(0,n)+"",i)>t+.5?s=n-1:o=n;return e.substr(0,o).replace(/[-:;,.\s]+$/,"")+""}BEM.decl("i-multiline-overflow",{},{calcOverflow:function(e,t,i){!function(e,t,i){_&&n(e).forEach((function(e){if(e.offsetWidth&&!(e.innerHTML.indexOf("<")>-1)){var o=n(e.querySelectorAll(".i-multiline-overflow"));e.className.indexOf("i-multiline-overflow")>-1&&o.push(e),o.forEach((function(e){var n=i&&g[i];n||(n=b(e),i&&(g[i]=n)),e.textContent=w(e.textContent,t,n)}))}}))}(e,t,i)}}),BEM.decl("i-multiline-overflow",{},{calcAutoOverflow:function(e){var t;t=e,_&&n(t).forEach((function(e){n(e.querySelectorAll('[class *= "i-multiline-overflow_lines_"]:not(.i-multiline-overflow_overflowed_yes)')).forEach((function(e){var t=b(e),i=e.className.match("i-multiline-overflow_lines_(\\d+)"),n=i&&i[1];n&&(e.className+=" i-multiline-overflow_overflowed_yes",e.textContent=w(e.textContent,Number(n),t))}))}))}});var k={},E=function(e){function t(e){e||(e={}),this._url=e.url||"/portal/ntp/banner",this._node=e.node,this._loadTimeout=e.loadTimeout||30,this._timeout=e.timeout,this._limit=e.limit||3,this._ratio=e.ratio||1;var t=e.autoRefreshCheck||function(e){this._onError("No autorefresh check"),e()};this._check=t.bind(this,this.refreshBanner.bind(this)),this._query=e.queryParams,this._bannerClass=e.className,this._loadingClass=e.loadingClassName,this._wrapClass=e.wrapClass,this._onBannerMessage=e.onBannerMessage,this._onBeforeSwitchBanner=e.onBeforeSwitchBanner||function(){},this._onBeforeRefreshBanner=e.onBeforeRefreshBanner||function(){},this._onRefreshBanner=e.onRefreshBanner||function(){},this._logFunc=e.logFunc||function(){},this._container=this._node&&this._node.parentNode,"number"!=typeof this._timeout&&(this._onError("invalid timeout "+this._timeout+" set to 90"),this._timeout=90),this._node&&this._container||this._onError("invalid or detached node"),e.skip&&this.updateUsedBanners(e.skip.slice()),e.queryParams&&"touch"===e.queryParams["morda-refresh"]&&(this._feed=e.queryParams.feed||1)}return t.prototype={updateUsedBanners:function(e){if(Array.isArray(e))e.forEach((function(e){k[e]=1}));else if(i(e))k[e]=1;else if("object"==typeof e)for(var t in e)i(e[t])&&(k[e[t]]=1);function i(e){return"string"==typeof e||"number"==typeof e}},_getUsedBanners:function(){return Object.keys(k)},_onError:function(e){var t=new Error("BannerRefresh:"+e);t.block="banner-refresh",this._node&&(t.meta={cls:this._node.className},this._container&&(t.meta.cnt=this._container.className)),home.error.logError({},t)},_bindOnMessage:function(t){this._onMessage&&this._unbindOnMessage(),this._onMessage=function(e){if(!t||t.contentWindow===e.source){var i;try{i=JSON.parse(e.data)}catch(n){return}i&&i.type&&(r(),this._unbindOnMessage(),this._onEvent(i,t))}}.bind(this);var i=function(){s(),t._loaded=!0},n=function(){r(),this._onEvent({type:"none"},t)}.bind(this),o=setTimeout(n,1e3*this._loadTimeout);function s(){t.removeEventListener("load",i),t.removeEventListener("error",n)}function r(){clearTimeout(o),s()}t.addEventListener("load",i),t.addEventListener("error",n),e.addEventListener("message",this._onMessage)},_unbindOnMessage:function(){this._onMessage&&(e.removeEventListener("message",this._onMessage),this._onMessage=null)},setRefresh:function(){this._timeout?setTimeout(this._check,1e3*this._timeout):this._check()},refreshBanner:function(e){if(!(this._limit<=0)){this._limit--,this._timeout*=this._ratio;var t=home.deepExtend(home.deepExtend({},this._query),e||{}),i=this._getUsedBanners();i.length&&(t["skip-banner"]=i.join(","));var n=home.addQueryToUrl(this._url,t);if(this._container){var o={" ":i.join(", ")||""," ":isFinite(this._limit)?this._limit:"","":this._timeout};this._feed&&(o.stat_id=this._feed),this._logFunc({action:"    ",params:o}),this._container.appendChild(this._createNew(n))}else this._onError("No container on refresh")}},_onEvent:function(e,t){if(this._onBannerMessage&&this._onBannerMessage(e),"none"===e.type)return this._logFunc({action:"     ",params:{}}),void this._destroyNew();if("statpixel"!==e.type){if(t._loaded?this._switchBanners(e):t.addEventListener("load",this._switchBanners.bind(this,e)),e.bannerId){var i=e.type.split("."),n={"":i.length>2?i[1]+" - "+i[2]:e.type,id:e.bannerId};this._feed&&(n.stat_id=this._feed),this._logFunc({action:" ",params:n}),this.updateUsedBanners([e.bannerId])}}else this._logFunc({action:"    ",params:{}})},_switchBanners:function(e){this._onBeforeSwitchBanner(e,this._new),this._new&&(this._onBeforeRefreshBanner(),this._container.removeChild(this._node),this._new.className=this._new.className.replace(new RegExp("\\b"+this._loadingClass+"\\b"),""),this._node=this._new,this._new=null,this.setRefresh(),this._onRefreshBanner())},_createNew:function(e){this._destroyNew();var t=this._new=document.createElement("iframe");if(t.className=this._bannerClass,this._bindOnMessage(t),t.src=e,this._wrapClass){var i=this._new=document.createElement("div");i.className=this._wrapClass,i.appendChild(t)}return this._new.className+=" "+this._loadingClass,this._new},_destroyNew:function(){if(this._new){var e=this._new;e.parentNode.removeChild(e),this._unbindOnMessage(),this._new=null}}},t}(window);window.AwapsJsonAPI={Json:{}},window.CAWBrowser=function(){var e,t=[];for(e=6;e<35;e++)t[e]=!1;var i=navigator.userAgent;this.msie=i&&parseFloat(navigator.appVersion)>=4&&i.indexOf("Opera")<0&&i.indexOf("MSIE 4")<0&&i.indexOf("MSIE")>=0,this.win=i&&(i.indexOf("Windows 95")>=0||i.indexOf("Windows NT")>=0||i.indexOf("Windows 98")>=0),this.mac=navigator.platform&&-1!==navigator.platform.indexOf("Mac"),this.opera7=-1!==i.indexOf("Opera")&&window.opera&&document.readyState?1:0,this.gecko=-1!==i.toLowerCase().indexOf("gecko")&&-1===i.indexOf("safari");var n=navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]?navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin:0;if(n)for(e=6;e<35;e++)t[e]=n,t[e]=parseInt(t[e].description.substring(t[e].description.indexOf(".")-2),10)>=e;else if(this.msie&&this.win&&!this.mac)for(e=6;e<35;e++)try{t[e]=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+e)}catch(o){}for(this.other=!((this.gecko||this.msie)&&this.win&&!this.mac),this.flash=0,e=6;e<35;e++)t[e]&&(this.flash=e);this.full_version=this.flash+"",n&&n.version&&(this.full_version=n.version+"")},window.AwapsJsonAPI.Json=function(e,t,i,n,o,s,r,a){void 0===a&&(a=""),a&&a.length>2&&a.indexOf(":")<0&&(a+=":"),this.w=t,this.h=i;for(var c=String(i);c.length<4;)c="0"+c;for(c=t+c;c.length<8;)c="0"+c;o||(o="awaps.yandex.ru"),n=n?"&charset="+n:"",s=s?"&subsection="+s:"",this.object_name=r||"aw_json";var l=Math.round(65535*Math.random());this.json_awaps_url=a+"//"+o+"/10/"+e+"/"+c+".?charset="+n+"&callback="+this.object_name+".awaps_callback&rnd="+l+n+s,this.awaps_div_code='<div id="awaps_ad_div" width="'+t+'" height="'+i+'"></div>'},window.AwapsJsonAPI.Json.prototype.setID=function(e){e&&(this.html_cont_id=document.getElementById(e))},window.AwapsJsonAPI.Json.prototype.refreshAd=function(){this.callJson(this.json_awaps_url)},window.AwapsJsonAPI.Json.prototype.callJson=function(e){if(e){var t=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.src=e,t.appendChild(i)}},window.AwapsJsonAPI.Json.prototype.awaps_callback=function(e){var t=e.media&&e.media[0];t&&(t.bnImg||t.bnHtm)&&this.drawBanner(this.html_cont_id,t)},window.AwapsJsonAPI.Json.prototype.sendCounts=function(e){var t=$(home.cls.full(".b-banner__content"))[0]||$("."+home.getData("banner.image.contentCls"))[0];this.activateScriptMeasureres(t),this.sendBnCounts(e,t),this.sendWinNotices(e,t)},window.AwapsJsonAPI.Json.prototype.activateScriptMeasureres=function(e){var t=home.getData("banner.scriptMeasurers");t&&BEM.blocks["i-measurers"].getScriptMeasurers(t,e)},window.AwapsJsonAPI.Json.prototype.sendBnCounts=function(e,t){e.bnCounts&&e.bnCounts.length&&BEM.blocks["i-showed-counter"].setCounter({elem:t,urls:e.bnCounts,useIntersection:!e.statpixel,showedTime:e.statpixel?0:2e3,blockId:e.statpixel?"statpixel":"banner"})},window.AwapsJsonAPI.Json.prototype.sendWinNotices=function(e,t){e.win_notice&&e.win_notice.length&&BEM.blocks["i-showed-counter"].setCounter({elem:t,blockId:"banner.win_notice",useIntersection:!1,showedTime:0,urls:e.win_notice.map((function(e){var t,i=Math.round(65535*Math.random()),n=String(e).replace("%aw_random%",i);return 0===n.indexOf("https://awaps.yandex.net")&&((t=home.parseUrl(e)).query.pageview_id=home.getData("statlog.config.showId"),n=home.makeUrl(t)),n}))})},window.AwapsJsonAPI.Json.prototype.drawBanner=function(e,t){var i;e&&(i=this.getHTML(t),$(e).append(i),BEM.blocks["i-performance"].preparePerformanceBuffer(),this.sendCounts(t),this.autorefresh(t,$(home.cls.full(".b-banner__wrap"))),BEM.channel("adb").trigger("rendered",{id:"desktop.main.awaps",elem:e}))},window.AwapsJsonAPI.Json.prototype.initBanner=function(e,t){e&&(BEM.blocks["i-performance"].preparePerformanceBuffer(),this.sendCounts(t),this.autorefresh(t,$(home.cls.full(".b-banner__wrap"))),BEM.channel("adb").trigger("rendered",{id:"desktop.main.awaps",elem:e}))},window.AwapsJsonAPI.Json.prototype.getHTML=function(e){var t=-1!==document.documentElement.className.indexOf("i-ua_browser_presto"),i=e.html5_iframe_src||e.small_swiffy_iframe_src||e.bnHtm||e.small_iframe_src,n="";if(i&&!t){var o=$(home.view("b-banner__iframe",{src:i,name:"b"+(Math.random()+"").substr(3,7)}));o[0].onload=function(){BEM.blocks["i-performance"].checkUrlLoaded(i)||$("#banner.b-banner__content").parents(".container__banner").eq(0).hide()},n=o}else if(e.image)n=home.view("b-banner__img",{attrs:{width:e.width,height:e.height,border:0,alt:e.image_alt,src:window.detector.isRetina()&&e.hidpi_image?e.hidpi_image:e.image}}),e.click_url&&(n=home.view("b-banner__link",{url:e.click_url,content:n}));else if(this.checkFlash(e)){var s=location.protocol||"http:";0===s.toLowerCase().indexOf("https")&&(e.bnFlash+="&cache=1"),n="<object classid=clsid:D27CDB6E-AE6D-11cf-96B8-444553540000 codebase="+s+"//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab width="+e.bnW+" height="+e.bnH+' ><param name="allowScriptAccess" value="Always" ><param name=movie value="'+e.bnFlash+'" ><param name=menu value=false><param name=quality value=high><param name=wmode value=opaque><param name="flashvars" value="'+e.flashvars+'" ><EMBED src="'+e.bnFlash+'"  flashvars="'+e.flashvars+'" quality=high  allowScriptAccess=Always wmode=opaque menu=false swLiveConnect=FALSE WIDTH='+e.bnW+" HEIGHT="+e.bnH+' TYPE="application/x-shockwave-flash" PLUGINSPAGE="'+s+'//www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash"></EMBED> </object>'}else e.bnImg&&e.bnW&&e.bnH&&(n=home.view("b-banner__img",{attrs:{width:e.bnW,height:e.bnH,border:0,src:e.bnImg,alt:e.bnAlt}}),e.gif_tizer||(n=home.view("b-banner__link",{url:e.bnHref,content:n})));return n},window.AwapsJsonAPI.Json.prototype.autorefresh=function(e,t){var i=t&&t[0],n=e&&e._refresh;if(!n||n.refresh_counts<=0||!i||this.isBannerExpandable(e))BEM.blocks["i-performance"].destroy();else{var o=$(window),s=home.cls.full("b-banner__iframe"),r=home.cls.full("b-banner__iframe_refreshed"),a=n.mock,c={url:n.refresh_url,limit:n.refresh_counts,timeout:0,skip:e.skipBanner?e.skipBanner.split(","):[],queryParams:{pageview_id:home.getData("statlog.config.showId"),slots:home.getData("timing.exp")||"","morda-refresh":"big",statPath:"refresh.v14"},className:[s,r].join(" "),loadingClassName:home.cls.full("b-banner__iframe b-banner_loading_yes"),node:i,autoRefreshCheck:this.autorefreshCheck.bind(this,n),logFunc:home.logBanner&&home.logBanner.log};a&&(c.queryParams.usemock=a),n.flex&&(c.queryParams.flex=1),e.darkTheme&&(c.queryParams["dark-theme"]=e.darkTheme),new E(c).setRefresh(),o.on("message",(function(e){var t=(e=e.originalEvent).data,i=$("."+r);if(i.length&&e.source!==i[0].contentWindow)return;"counters"===t.type&&"banner"===t.blockId&&BEM.channel("i-showed-counter").trigger("sent",{blockId:t.blockId})}))}},window.AwapsJsonAPI.Json.prototype.autorefreshCheck=function(e,t){var i,n,o=$(home.cls.full(".b-banner__content")),s={},r={},a=!document.hidden,c=!1,l=e.watch_timeout,u=e.tab_timeout,d=e.overlapping_timeout;function h(e,t){if("banner"===t.blockId){g("watch",l),g("bannerOverlappingTimeout",d);(n=BEM.blocks["i-intersection-observer-wrapper"].create((function(e){var t=e[e.length-1];i=t.intersectionRatio>=.5,m()}),{threshold:.5})).observe(o[0]),BEM.channel("sys").on({hidden:p,visible:f}),BEM.channel("banner").on({overlapping:_})}}function m(){i&&a&&!c&&(s.tabHidden||s.watch||s.bannerOverlapping)&&(v("tabHidden"),v("watch"),s.bannerOverlapping=!1,t.call(this,{"ntp-sandwich":s.tabHidden?1:""}),BEM.channel("i-showed-counter").un("sent",h),BEM.channel("sys").un({hidden:p,visible:f}),BEM.channel("banner").un({overlapping:_}),n.unobserve(o[0]))}function p(){a=!1,v("watch"),g("tabHidden",u)}function f(){a=!0,v("tabHidden"),m()}function _(e,t){c=!!t,t||(s.bannerOverlappingTimeout&&(s.bannerOverlapping=!0,v("bannerOverlappingTimeout")),m())}function g(e,t){v(e),r[e]=setTimeout((function(){s[e]=!0,clearTimeout(r[e]),r[e]=null,"watch"===e&&m()}),1e3*t)}function v(e){r[e]&&(clearTimeout(r[e]),r[e]=null,s[e]=!1)}BEM.channel("i-showed-counter").on("sent",h)},window.AwapsJsonAPI.Json.prototype.isBannerExpandable=function(e){return e.swf_big_show_url||e.big_iframe_src},window.AwapsJsonAPI.Json.prototype.initAntiadbImageBanner=function(){var e=home.getData("banner.image");if(e){var t=$("."+e.contentCls);BEM.channel("adb").trigger("rendered",{id:"desktop.main.awaps.aadb",elem:t[0]}),this.sendCounts(e.data),e.data.href&&t.click((function(){home.openWindow(e.data.href)}))}},window.AwapsJsonAPI.Json.prototype.addIframeContent=function(e,t,i){this.sendCounts(i);var n=document.createElement("iframe");if(n.className=home.getData("banner.cls.banner__size"),n.setAttribute("style",""),n.setAttribute("allowtransparency","true"),n.setAttribute("frameborder","0"),n.setAttribute("id",""),n.setAttribute("name",""),i.write||(n.src="data:text/html;charset=utf-8,"+encodeURIComponent(e)),this.addContent(t,n,i),i.write){var o=n.contentWindow.document;o.open(),o.write(e),o.close()}},window.AwapsJsonAPI.Json.prototype.addContent=function(e,t,i){i.noshcb&&this.removeShadowBlockers();var n=home.getData("banner.cls.banner__parent"),o=home.getData("banner.cls.banner__content"),s=home["_banner"+n];s?$("."+o,s).append(t):e.append(t)},window.AwapsJsonAPI.Json.prototype.restoreShadow=function(){var e,t=document.createElement("iframe");t.sandbox="allow-same-origin allow-scripts";try{document.body.appendChild(t),e=Object.getOwnPropertyDescriptor(t.contentWindow.Element.prototype,"createShadowRoot"),Object.defineProperty(Element.prototype,"createShadowRoot",e),Object.defineProperty(HTMLElement.prototype,"createShadowRoot",e)}catch(i){}try{document.body.removeChild(t)}catch(i){}},window.AwapsJsonAPI.Json.prototype.removeShadowBlockers=function(){this.restoreShadow();var e,t=document.documentElement;t.createShadowRoot&&((e=document.createElement("content")).innerHTML="",t.createShadowRoot().appendChild(e))},window.AwapsJsonAPI.Json.prototype.checkFlash=function(e){var t=new window.CAWBrowser,i=t.flash>=e.flashV&&(e.bnFlash||e.swf_big_show_url);return e.minFlashVersion&&t.full_version&&home.compareVersions(t.full_version,e.minFlashVersion)<0&&(i=!1),i},window.AwapsJsonAPI.Json.prototype.initExpandableBanner=function(e){if(this.isBannerExpandable(e)){var t=$("#banner");if(t.append('<div class="banner__expand_innerclick"></div>'),$(".banner__expand_innerclick").click((function(){home.openWindow(e.click_url)})),!(e.swf_big_show_url&&!this.checkFlash(e)||e.big_iframe_src&&!e.show_big)){t.addClass("banner__expand").append('<div class="banner__expand_inner"></div>');var i,n=$(".popup_expand_banner"),o=n?n.bem("popup"):null;if(home.expandableBannerAPI={close:function(){o&&o.hide()}},o)o.on({show:function(){i=Date.now()},hide:function(){i&&(e.show_big_seconds_stat_url&&((new Image).src=e.show_big_seconds_stat_url+Math.round((Date.now()-i)/1e3)),i=null)}}),o.bindOnIframeMessage($(".popup__banner-iframe",n)[0]);$(".banner__expand_inner").click((function(){o&&o.addParamsAndShow(e.click_url),$(window).trigger("bannerpopup.show")}))}}},$((function(){window.AwapsJsonAPI.Json.prototype.initAntiadbImageBanner();var e=$(home.cls.full(".b-banner_fake"));e&&e.length&&BEM.blocks["i-showed-counter"].setCounter({elem:e[0],blockId:"banner.fake",fakeMeasurer:!0})}));var x;i(250),i(251),i(252),i(253),i(254),i(255),i(256),i(257),i(258),i(259),i(260),i(261),i(262),i(263),i(264),i(265),i(266),i(267),i(268),i(269),i(270),i(271),i(272),i(273),i(274),i(275),i(276),i(277),i(278),i(279),i(280),i(281),i(282),i(283),i(284),i(285),i(286),i(287),i(288),i(289),i(290),i(291),i(292),i(293),i(294),i(295),i(296),i(297),i(298),i(299),i(300),i(301),i(302),i(303),i(304),i(305),i(306),i(307),i(308),i(309),i(310),i(311),i(312),i(313),i(314),i(315),i(316),i(317),i(318),i(319),i(320),i(321),i(322),i(323),i(324),i(325),i(326),i(327);(x=home.getData("stream.settings",{})).isMorda=!0,Ya.streamCms.init({errorLib:home.error,rumLib:home.streamRum,disabled:home.getData("stream.disabled"),settings:x,reqparamsCms:home.getData("stream.reqparams-cms",{}),sessionParams:home.getData("stream.reqparams",{})});i(328),i(329),i(330),i(331),i(332),i(333),i(334),i(335),i(336),i(337),i(338),i(339),i(340),i(341),i(342),i(343),i(344),i(345),i(346),i(347),i(348);var M=i(0),C=i.n(M);function T(e){if(!e)return"";var t,i,n="";for(t in e)e.hasOwnProperty(t)&&(i=e[t],/^_temp/.test(t)&&"string"==typeof i?n+=" "+i:(i||0===i)&&(!0===i?n+=" "+t.toLowerCase():(i=i.toString(),/"/.test(i)&&(i=i.replace(/"/g,"&quot;")),n+=" "+t.toLowerCase()+'="'+i+'"')));return n}function S(e,t,i){var n=e.groups||[{options:e.options}],o=e.selected.split(",").reduce((function(e,t){return e[t]=1,e}),{});return e.mix?e.mix+=" i-bem":e.mix="i-bem","<div "+T({"class":home.getBEMClassname("multiselect",e),"data-bem":'{"multiselect":{}}'})+">"+C()([n.map((function(t){return i(I,{group:t,mods:e.mods,selectedMap:o})})),"<input "+T({"class":"multiselect__selected",type:"hidden",name:e.name,value:e.selected})+" >"])+"</div>"}function P(e,t,i){var n=e.option,o=e.selected;return i("checkbox",{checkboxAttrs:{value:n.value},mods:{size:n.size,theme:n.theme,checked:o?"yes":undefined,lines:"multi"},label:n.label})}function I(e,t,i){var n=e.group,o=e.mods,s=e.selectedMap,r="";n.label&&(r="<div class='multiselect__label'>"+C()([home.htmlFilter(n.label)])+"</div>");var a=[],c=Math.ceil(n.options.length/3);return n.options.forEach((function(e,t){var i=Math.floor(t/c);a[i]||(a[i]=[]),o&&(e.size=o.size,e.theme=o.theme),a[i].push(e)})),"<div class='multiselect__group'>"+C()([r,"<div "+T({"class":"multiselect__items ".concat(home.cls.full("row"))})+">"+C()([a.map((function(e){return"<div "+T({"class":"multiselect__column ".concat(home.cls.full("col"))})+">"+C()([e.map((function(e){return"<div class='multiselect__item'>"+C()([i(P,{option:e,selected:e.value in s})])+"</div>"}))])+"</div>"}))])+"</div>"])+"</div>"}function B(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return O(e,t)}(e))){var t=0,i=function(){};return{s:i,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,s=!0,r=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){r=!0,o=e},f:function(){try{s||null==n["return"]||n["return"]()}finally{if(r)throw o}}}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function D(e,t,i){var n=e.button,o=e.initOption,s=e.mods,r=e.tabindex,a={arrow:"down"};s&&(s.theme&&(a.theme=s.theme),s.size&&(a.size=s.size),s.disabled&&(a.disabled="yes"));var c={role:"listbox",type:"button","aria-haspopup":"true","aria-expanded":"false"};return void 0!==r&&(c.tabindex=r),i("button",{mix:"select__button",content:(null==o?void 0:o.content)||n.content,mods:a,attrs:c})}function j(e){var t,i=e.labelId,n=e.option,o=home.rnd(),s=n.attrs;return s.id=o,(null===(t=n.elemMods)||void 0===t?void 0:t.label)&&(i&&(s.id=i),s["aria-hidden"]="true"),"<option "+T(Object.assign({"class":"select__option"},s))+">"+C()([n.content])+"</option>"}function A(e,t,i){var n,o=e.index,s=e.total,r=e.group,a=home.rnd(),c=0===o,l=o===s-1;n=l&&c?"both":l?"last":c?"first":"middle";var u=r.attrs;return u.role="group",u["aria-labelledby"]=a,u.position=n,"<optgroup "+T({"class":"select__group select__group_position_".concat(n),role:"group","aria-labelledby":a})+">"+C()([r.content.map((function(e){return i(j,{labelId:a,option:e})}))])+"</optgroup>"}function R(e,t,i){var n=e.id,o=e.name,s=e.mods,r=e.control,a=e.initOption,c={};if(a&&(c=home.deepExtend(c,{value:a.attrs.value})),r.controlAttrs)c=home.deepExtend(c,r.controlAttrs);else{var l={};l.id=n,o&&(l.name=o),s&&(l.disabled=Boolean(s.disabled)),l.tabindex=-1,l["aria-hidden"]="true",c=home.deepExtend(c,l)}return"<select "+T(Object.assign({"class":"select__control"},c))+">"+C()([r.content.map((function(e,t){return"option-group"===e.elem?i(A,{index:t,total:r.content.length,group:e}):i(j,{option:e})}))])+"</select>"}function N(e,t,i){e.mix?e.mix+=" i-bem":e.mix="i-bem";var n,o={select:home.deepExtend({live:!1},e.js||{})};if(o.select.live){var s,r=null===(s=e.content.filter((function(e){return"elem"in e&&"control"===e.elem}))[0])||void 0===s?void 0:s.content;if(r&&r.length){(n=function e(t){var i,n,o=B(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;if("option"===s.elem&&Object(s.attrs).selected?i=s:"option-group"===s.elem&&(i=e(s.content)),i)break}}catch(r){o.e(r)}finally{o.f()}return i}(r))||(n="option-group"===r[0].elem?r[0].content[0]:r[0])}}var a=e.id||home.rnd(),c=e.content.map((function(t){return"block"in t&&"button"===t.block?i(D,{button:t,initOption:n,mods:e.mods,tabindex:e.tabindex}):"elem"in t&&"control"===t.elem?i(R,{control:t,id:a,name:e.name,mods:e.mods,initOption:n}):void 0})).filter(Boolean);return"<span "+T({"class":home.getBEMClassname("select",e),"data-bem":home.getBEMParams(o)})+">"+C()([c])+"</span>"}function L(e){var t,i;return"<div "+T({"class":home.getBEMClassname("select__item",{mods:e.elemMods}),id:home.rnd()})+">"+C()(["<span class='select__text'>"+C()([null===(t=e.content)||void 0===t||null===(i=t.content)||void 0===i?void 0:i.html])+"</span>"])+"</div>"}function F(e){var t=e.name,i=e.controlAttrs;return i.checked=Boolean(i.checked),i.disabled=Boolean(i.disabled),i.disabled&&(i.tabindex="-1"),i.name=t,"<input "+T(Object.assign({"class":"radio-button__control",type:"radio"},i))+" >"}function U(e,t,i){var n=e.index,o=e.total,s=e.name,r=e.value,a=e.mods,c=e.radio,l=c.elemMods||{},u=c.controlAttrs||{};if(u.value!==undefined&&u.value===r&&(l.checked="yes"),a.disabled&&(l.disabled="yes"),"default"!==a.view&&!l.side){var d=0===n?1:0,h=n===o-1?1:0;l.side=["","right","left","both"][2*d+h]}return u.checked=Boolean(l.checked),u.disabled=Boolean(l.disabled),u.id||(u.id=home.rnd()),"<label "+T({"class":home.getBEMClassname("radio-button__radio",{mods:l}),"for":String(u.id)})+">"+C()([i(F,{name:s,controlAttrs:u}),"<span class='radio-button__text'>"+C()([c.content])+"</span>"])+"</label>"}function z(e,t,i){var n=home.deepExtend({live:!1},e.js);return e.mix?e.mix+=" i-bem":e.mix="i-bem","<span "+T({"class":home.getBEMClassname("radio-button",e),"data-bem":home.getBEMParams({"radio-button":n})})+">"+C()([e.content.map((function(t,n){return i(U,{index:n,total:e.content.length,name:e.name,value:e.value,mods:e.mods,radio:t})}))])+"</span>"}function H(e){var t=e.item;return"<input "+T({type:"hidden",name:t.name,value:t.value})+" >"}function W(e,t,i){var n=e.item;return"<div class='b-wdgt-preferences__pref-col'>"+C()([i("checkbox",{mods:{size:"s",theme:"normal",checked:"true"===n.value?"yes":"",lines:"multi"},label:n.label,checkboxAttrs:{value:1,name:n.name},stat:""})])+"</div>"}function V(e,t,i){var n=e.item;return"<div class='b-wdgt-preferences__pref-col b-wdgt-preferences__pref-col_labeled_yes'>"+C()(["<span class='b-wdgt-preferences__label'>"+C()([n.label])+"</span>",i(N,{name:n.name,mods:{theme:"normal",size:"s",layout:"fixed",width:"200"},js:{live:!0,elemPopupMods:{width:200}},content:[{block:"button",content:""},{elem:"control",content:n.options.map((function(e){return{elem:"option",attrs:{value:e.value,selected:e.value===(n.value||n["default"])?"selected":undefined},content:e.label}}))}]})])+"</div>"}function q(e){var t=e.item;return"<div class='b-wdgt-preferences__comment-cell'>"+C()(["<span class='b-wdgt-preferences__comment-title'>"+C()([t.value])+"</span>"])+"</div>"}function Y(e,t,i){var n=e.item;return"<div class='b-wdgt-preferences__pref-col b-wdgt-preferences__pref-col_labeled_yes'>"+C()(["<span class='b-wdgt-preferences__label'>"+C()([n.label])+"</span>",i(z,{name:n.name,value:n.value,mods:{size:"xs",view:"classic",theme:"normal"},content:n.options.map((function(e){return{elem:"radio",content:e.label,controlAttrs:{value:e.value}}}))})])+"</div>"}function K(e,t,i){var n=e.item;return"<div class='b-wdgt-preferences__pref-col'>"+C()(["<span class='b-wdgt-preferences__label'>"+C()([n.label])+"</span>",i(S,{name:n.name,selected:n.value,groups:n.groups,options:n.options,mods:{theme:"normal",size:"s"}})])+"</div>"}function G(e,t,i){var n=e.item;return"<table class='b-wdgt-preferences__pref-table'>"+C()(["<td class='b-wdgt-preferences__pref-td b-wdgt-preferences__pref-td_labeled_yes'>"+C()(["<span class='b-wdgt-preferences__label'>"+C()([n.label])+"</span>"])+"</td>","<td class='b-wdgt-preferences__pref-td'>"+C()([i("input",{mods:{size:"s",suggest:"yes"},js:{live:!1,dataprovider:{name:"dataprovider-geo",url:"https://suggest-maps."+document.domain.replace(/[\w\d-.]+\.(yandex\.[.\w]+)/,"$1")+"/suggest-geo"},popupMods:{fade:"yes"}},control:{attrs:{value:n.geoname}}}),"<input "+T({"class":"input__geo",type:"hidden",name:n.name,value:n.value||n["default"]})+" >"])+"</td>"])+"</table>"}function X(e,t,i){var n=e.item;return"<table class='b-wdgt-preferences__pref-table'>"+C()(["<td class='b-wdgt-preferences__pref-td b-wdgt-preferences__pref-td_labeled_yes'>"+C()(["<span class='b-wdgt-preferences__label'>"+C()([n.label])+"</span>"])+"</td>","<td class='b-wdgt-preferences__pref-td'>"+C()([i("input",{mods:{size:"s"},name:n.name,value:n.value||n["default"]})])+"</td>"])+"</table>"}function Z(e,t,i){return"<form class='b-wdgt-preferences__data'>"+C()(["<div class='b-wdgt-preferences__table'>"+C()([e.list.filter((function(e){return"name"in e&&e.name})).map((function(e){var t="";if("hidden"===e.type?t=i(H,{item:e}):"bool"===e.type||"boolean"===e.type?t=i(W,{item:e}):"list"===e.type?t=i(V,{item:e}):"comment"===e.type?t=i(q,{item:e}):"radio-button"===e.type?t=i(Y,{item:e}):"multi"===e.type?t=i(K,{item:e}):"geoselect"===e.type||"geo"===e.type?t=i(G,{item:e}):"text"===e.type&&(t=i(X,{item:e})),t)return"<div class='b-wdgt-preferences__pref'>"+C()([t])+"</div>"}))])+"</div>"])+"</form>"}var J=i(478);function Q(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ee(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&e[i]!==undefined&&t.push(i+"="+encodeURIComponent(e[i]));return t.length?"("+t.join(";")+")":""}var te=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,n;return t=e,(i=[{key:"getAttr",value:function(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(!e)return"";i.customParams&&(e+=ee(i.customParams)),(e=String(e)).indexOf('"')>-1&&(e=e.replace(/"/g,"&quot;"));var n=!1!==i.isRedirect;return' data-statlog="'+e+'"'+(n?"":' data-statlog-redir="0"')+(i.precise?' data-statlog-precise="1"':"")}},{key:"logShow",value:function(e,t){return e?(t&&(e+=ee(t)),home.stat.logPath("show",e),e):""}}])&&Q(t.prototype,i),n&&Q(t,n),e}();function ie(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}for(var ne=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,n;return t=e,(i=[{key:"add",value:function(e,t,i){home["export"][i]||(home["export"][i]={}),home["export"][i][e]?home.deepExtend(home["export"][i][e],t):home["export"][i][e]=t}},{key:"has",value:function(e,t){return Boolean(home.getData&&home.getData(t+"."+e))}}])&&ie(t.prototype,i),n&&ie(t,n),e}(),oe={stub:!0},se=function(){var e=ae[re];oe[e]=function(t){if(home.error&&(!home.getData||!0===home.getData("csp.report"))){var i=new Error("req.csp."+e+" was called on clientside");i.meta={url:t},i.block="home.views",home.error.logError(i)}}},re=0,ae=["allowDefault","allowStyle","allowPlugin","allowObject","allowMedia","allowImg","allowFont","allowConnect","allowScript","allowChild","allowForm"];re<ae.length;re++)se();var ce={l10n:J.a,stat:new te,settingsJs:new ne,csp:oe};function le(e,t,i){for(var n in i=i||{},ce)i.hasOwnProperty(n)||(i[n]=ce[n]);var o="object"==typeof window&&window.home&&home.getData&&home.getData("common.req")||{};for(var s in o)o.hasOwnProperty(s)&&!i.hasOwnProperty(s)&&(i[s]=o[s]);return function r(e,t){var n;return(n="string"==typeof e?home.view(e,t,i):e(t,i,r))===undefined&&(n=""),n}(e,t)}BEM.DOM.decl("b-wdgt-preferences",{onSetMod:{js:function(){var e=this;this.popup=this.findBlockOn(this.domElem,"popup"),this.popup.delMod("position"),this.bindTo("save","click",this.save),this.bindTo("cancel","click",this.cancel),this.bindTo("reset","click",this.reset),Widget.Init({hidePreferencesHandler:this.changeThis((function(){this.hide()}))}),this.bindToWin("widgetSettingsTuned",(function(t){e.widget&&t.id===e.widget.getId()&&e.widget.markChanged(!1,!0)})),this.popup.on("show",(function(){this._skipReturnFocus=!0})),this.popup.on("hide",(function(){this.channel("widget").trigger("hidePreferences",{elem:e.widget}),e._resetPopup()})),this.popup.on("show",(function(){this.channel("widget").trigger("showPreferences",{elem:e.widget})})),this.baseTitle||(this.baseTitle=this.elem("head").text())}},show:function(e,t){this.widget=e,this.callback=t||function(){},this.setMod("loading","yes"),BEM.DOM.destruct(this.elem("form"),!0),Widget.Framework.showEditForm(e.getId(),this.elem("form"),this.changeThis(this.updateForm)),this.popup.show(this._setPopupParams()),this.bindToWin("resize",$.debounce(this.changeThis((function(){this.popup.repaint(this._setPopupParams())})),100))},hide:function(){this.widget=null,this.callback=null,this.popup.hide()},_resetPopup:function(){this.elem("head").text(this.baseTitle),this.unbindFromWin("resize")},_getPopupPos:function(){var e=this.domElem.width(),t=this.domElem.height(),i=$(window).height();return{left:($(window).width()-e)/2,top:Math.max(50,$(window).scrollTop()+(i-t)/2)}},_setPopupParams:function(){var e=this._getPopupPos();return this.popup.params.top=e.top,this.popup.params.left=e.left,e},updateForm:function(e){var t;e&&(this.delMod("loading"),e.title&&this.elem("head").text(e.title),e.form?t=e.form:e.prefs&&(t=this.buildForm(e.prefs)),t?(BEM.DOM.update(this.elem("form"),t),BEM.DOM.init(this.elem("form")),this.elem("controls").show()):this.elem("controls").hide(),this.popup.hasMod("visibility","visible")&&this.popup.repaint(this._setPopupParams()))},buildForm:function(e){return le(Z,{list:e})},save:function(){for(var e=this.elem("form").find("form")[0],t={},i=0;i<e.length;i++){var n=e[i];n.name&&("checkbox"===n.type?t[n.name]=!!n.checked:"radio"===n.type?n.checked&&(t[n.name]=n.value):t[n.name]=n.value)}this.widget.markChanged(!1,!0),this.widget.getInstance().saveValues(t,this.callback.bind(this.widget)),this.hide()},cancel:function(){this.hide()},reset:function(){this.widget.getInstance().dropValues(this.callback.bind(this.widget)),this.channel("catalog").trigger("enableAction"),this.hide()}},{live:!0});i(349),i(350),i(351),i(352),i(353),i(354),i(355),i(356),i(357),i(358),i(359),i(360),i(361);function ue(e){e.mix?e.mix+=" i-bem":e.mix="i-bem";var t="";return e.subtitle&&(t="<span class='b-autocomplete-item__details b-autocomplete-item__full'>"+C()([" (".concat(home.htmlFilter(e.subtitle),")")])+"</span>"),"<li "+T({"class":home.getBEMClassname("b-autocomplete-item",e),"data-bem":home.getBEMParams({"b-autocomplete-item":{}}),"data-id":e.geoid})+">"+C()(["<span class='b-autocomplete-item__reg'>"+C()([home.htmlFilter(e.title)])+"</span>",t])+"</li>"}function de(e){e.mix?e.mix+=" i-bem":e.mix="i-bem";var t={addressLine:e.name,addressLineShort:e.name_short,coordinates:[e.lat,e.lon]},i=function(e,t){var i,n=[],o=0,s=t.sort((function(e,t){return e[0]-t[0]})),r=[],a=-1!==e.indexOf("?"),c=function(e){if(a)return e;for(;-1!==e.indexOf("?")&&r.length;)e=e.replace("?",r[0]),r.shift();return e};return a||function(){for(var t,i=/&(#\d+|#x[a-f\d]+|\w+);/gi;t=i.exec(e);)r.push(t[0]),e=e.replace(t[0],"?")}(),s.forEach((function(t){i=o>t[0]?o:t[0],n.push({elem:"span",content:c(e.slice(o,i))}),n.push({elem:"em",content:c(e.slice(i,o=t[1]))})})),n.push({elem:"span",content:c(e.slice(o))}),n}(home.htmlFilter(e.data[1].name),e.data[1].hl).map((function(e){return"<span "+T({"class":"b-autocomplete-item__".concat(e.elem)})+">"+C()([e.content])+"</span>"}));return"<li "+T({"class":home.getBEMClassname("b-autocomplete-item",e),"data-bem":home.getBEMParams({"b-autocomplete-item":t})})+">"+C()([i])+"</li>"}function he(e,t){var i="div";e.tag&&(i=e.tag);var n=me(e.content,t),o=home.getBEMClassname((e.block||t||"")+(e.elem?"__"+e.elem:""),e);e.js&&(o+=" i-bem");var s,r,a,c={};if(c["class"]=o,e.js&&(e.block||t)){var l=e.block||t||"";e.elem&&(l+="__"+l),c["data-bem"]=home.getBEMParams((s={},r=l,a=e.js,r in s?Object.defineProperty(s,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[r]=a,s))}return"<"+i+home.getAttributes(c)+">"+n+"</"+i+">"}function me(e,t){return e?Array.isArray(e)?e.map((function(e){return he(e,t)})).join(""):he(e,t):""}var pe={popup:function(e){var t="",i=e.mix&&"object"==typeof e.mix&&e.mix[0];return i&&i.js&&(t=(i.block||"")+(i.elem?"__"+i.elem:"")),le("popup",{mods:e.mods,js:e.js,mix:e.mix,jsMix:i&&i.js?home.getBEMParams(t)+":"+home.getBEMParams(i.js):null,content:me(e.content&&!Array.isArray(e.content)&&"content"===e.content.elem?e.content.content:undefined,"popup")})},"b-autocomplete-item":function(e){return e.mods&&"geo"===e.mods.type&&e.geoid&&e.title?le(ue,e):e.mods&&"address"===e.mods.type&&e.name&&e.name_short&&e.lat&&e.lon&&e.data?le(de,e):(home.error.logError({block:"i-bemhtml-wrapper",message:"Unknown b-autocomplete-item: "+(e.mods&&e.mods.type||"unknown")}),"")},select:function(e){return"item"===e.elem?le(L,e):(home.error.logError({block:"i-bemhtml-wrapper",message:"Unknown select: "+(e.elem||"unknown")}),"")}};function fe(e){if(e.block&&e.block in pe){var t=e.block;return pe[t](e)}return home.error.logError({block:"i-bemhtml-wrapper",message:"Unknown block: "+(e.block||"unknown")}),""}window.BEMHTML=window.BEMHTML||{apply:function(e){try{return function(e){return Array.isArray(e)?e.map(fe).join(""):fe(e)}(e)}catch(t){return home.error.logError({block:"i-bemhtml-wrapper",method:"apply"},t),""}}};i(362),i(363),i(364);function _e(e){return function(e,t){var i=e.getBoundingClientRect();return Math.max(Math.min(t.clientHeight,i.bottom)-Math.max(0,i.top),0)}(e,document.documentElement)}BEM.DOM.decl("media-grid",{ADB_BLOCKS:{rtb_inserts:home.cls.full("rtb_inserts")},onSetMod:{js:function(){this._notInitedBlocks=this.params.layout,this._notShowedBlocks=this._notInitedBlocks.slice(),this._sendRealShowDebounced=$.debounce(this._sendRealShow,400,this),this._onScroll(null,BEM.DOM.win.scrollTop()),this.channel("i-reposition-event").on("reposition",this._onScroll,this),this.channel("media-service").on("collapse remove",(function(e,t){var i=t.$elem.closest(this.findElem("row"));BEM.DOM.destruct(i)}),this);var e=BEM.blocks["blender-logger"];e.initBlock(),e.updateMediaRows(),e.sendStat();var t=this.elem("media-content")[0];if(t){var i=Math.floor(_e(t));home.stat.logPath("tech","mediafooter.initial_visibility(id="+i+")")}}},_getDom:function(e){return this.elem("row").filter('[data-blockname="'+e+'"]').children().eq(0)},_getBlock:function(e,t){if(!e.hasClass("i-bundle-bem"))return this.findBlockOn(e,home.view("media-grid__layout-to-block-name",t))},_requestInit:function(e){var t=this;this._notInitedBlocks=this._notInitedBlocks.filter((function(i){var n=t.ADB_BLOCKS[i]||i,o=this._getDom(n);return o.length?e<o.offset().top||(this.setMod("visible","yes"),this._getBlock(o,n),home.stat.logDOMShow(o,{convertCounters:function(e){return t.ADB_BLOCKS[i]?e.replace(t.ADB_BLOCKS[i],i):e}}),void this.setMod(o.closest("[data-blockname]"),"visible","yes")):(home.error.logError({block:"media-grid",method:"_requestInit",message:"Child not found: "+i}),!1)}),this)},_sendRealShow:function(e,t){this._notShowedBlocks=this._notShowedBlocks.filter((function(i){var n=this._getDom(i);if(!n.length)return!1;var o=n.height(),s=n.offset().top,r=s+o;if(!(e<=s&&r<=t||s<=e&&r<=t&&(r-e)/o>.5||e<=s&&t<=r&&(t-s)/o>.5))return!0;var a=this._getBlock(n,i);a&&a.setMod("visible","yes"),home.stat.logPath("show",i+".realshow")}),this),this._notShowedBlocks.length||this.channel("i-reposition-event").un("reposition",this._onScroll,this)},_onScroll:function(e,t){var i=window.innerHeight+t;this._requestInit(i),this._sendRealShowDebounced(t,i),!this._shown&&i>this.domElem.offset().top+this.__self.MIN_VISIBLE_HEIGHT&&(this._shown=!0,home.stat.logPath("show","mediafooter.realshow"))}},{MIN_VISIBLE_HEIGHT:62});i(365),i(366),i(367),i(368),i(369),i(370);var ge={show:{entity:"card",eventType:"show"},click:{entity:"card",eventType:"click"},"comments:counter_click":{entity:"comments",eventType:"click"},"comments:counter_show":{entity:"comments",eventType:"show"},"feedback:cancel_more":{entity:"feedback_cancel_more",eventType:"click"},"feedback:cancel_less":{entity:"feedback_cancel_less",eventType:"click"},"feedback:more":{entity:"feedback_more",eventType:"click"},"feedback:less":{entity:"feedback_less",eventType:"click"},"feedback:favourite":{entity:"feedback.favourite",eventType:"click"},"feedback:cancel_favourite":{entity:"feedback.cancel_favourite",eventType:"click"},"feedback:block":{entity:"feedback.block",eventType:"click"},"feedback:cancel_block":{entity:"feedback.cancel_block",eventType:"click"},"preview:click":{entity:"preview",eventType:"click"},"preview:show":{entity:"preview",eventType:"show"},"favourite_button:show":{entity:"favourite_button",eventType:"show"},"favourite_button:click":{entity:"favourite_button",eventType:"click"},"custom_user_feedback:show":{entity:"custom_user_feedback",eventType:"show"},"complain:click":{entity:"complain",eventType:"click"},"complain:show":{entity:"complain",eventType:"show"},select:{entity:"iceboarding",eventType:"click"},"iceboarding:show":{entity:"iceboarding",eventType:"show"},"ad_feed:show":{entity:"ad_feed",eventType:"show"},"ad_feed:click":{entity:"ad_feed",eventType:"click"},autoplay_on:{entity:"video.autoplay_on",eventType:"click"},autoplay_off:{entity:"video.autoplay_off",eventType:"click"},sound_on:{entity:"video.sound_on",eventType:"click"},sound_off:{entity:"video.sound_off",eventType:"click"},"call2action:show":{entity:"call2action",eventType:"show"},"call2action:click":{entity:"call2action",eventType:"click"},"content_item:show":{entity:"content_item",eventType:"show"},"content_item:swipe":{entity:"content_item",eventType:"swipe"},"ad_gallery:show":{entity:"ad_gallery",eventType:"show"},"ad_gallery:click":{entity:"ad_gallery",eventType:"click"},"source:show":{entity:"source",eventType:"show"},"source:click":{entity:"source",eventType:"click"},external_click:{entity:"external_click",eventType:"click"},expand_text:{entity:"expand_text",eventType:"click"}},ve=["deepwatch","ad_feed:load","heartbeat","autoplay","autopause","play","pause","end","replay","custom_user_feedback:click","custom_user_feedback:cancel_click","short","view","content_item:tap"],be=function(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0};BEM.DOM.decl("zen-lib",{onSetMod:{js:function(){var e,t,i;window.Ya&&Ya.Rum&&Ya.Rum.makeSubPage&&(this._rumPage=Ya.Rum.makeSubPage(this.params.pageId)),this.bindTo("retry-button","click",this._onRetryClick),this._loadDevLibParamsMemo=(e=this._loadDevLibParams,function(){return t&&be(t,arguments)?i:(t=arguments,i=e.apply(null,arguments))}),BEM.channel("adb").on("detect",this._handleAdblockDetection.bind(this))},state:function(e,t){if("loaded"===t&&"prerender"===document.visibilityState){home.stat.logPath("show",this.params.statRoot+".loaded_in_prerender");var i=this;document.addEventListener("visibilitychange",(function e(){"visible"===document.visibilityState&&(home.stat.logPath("show",i.params.statRoot+".visible_after_prerender"),document.removeEventListener("visibilitychange",e))}))}home.stat.logPath("show",this.params.statRoot+"."+t),this._rumPage&&"retry"===t&&this._rumPage.cancel()}},_triggerFirstPaint:function(){this._rumPage&&!this.triggered&&(requestAnimationFrame(function(){requestAnimationFrame(function(){this.trigger("painted")}.bind(this))}.bind(this)),Ya.Rum.sendTimeMark("2793",Ya.Rum.getTime(),!1,this._rumPage),this.triggered=!0)},_waitIdleSearchMoment:function(e,t){var i,n=[{event:"init",channel:"suggest2"},{event:"focus",channel:"suggest2"},{event:"change",channel:"suggest2"},{event:"start-input",channel:"mini-suggest",type:"mbem"},{event:"input-change",channel:"mini-suggest",type:"mbem"},{event:"show",channel:"mini-suggest",type:"mbem"},{event:"init",channel:"voice-search"},{event:"change",channel:"voice-search"}];function o(){n.forEach((function(e){"mbem"===e.type?"MBEM"in window&&MBEM.channel&&MBEM.channel(e.channel).un(e.event,i):BEM.channel(e.channel).un(e.event,i)}))}return this._isForceLoad&&e?t&&!this._hasEventsAfterResolve?(o(),Promise.resolve()):new Promise(function(t){i=$.debounce((function(){o(),t(),this._hasEventsAfterResolve=!1}),e,!1,this),n.forEach((function(e){"mbem"===e.type?"MBEM"in window&&MBEM.channel&&MBEM.channel(e.channel).on(e.event,i):BEM.channel(e.channel).on(e.event,i),this._hasEventsAfterResolve=!0}),this),i()}.bind(this)):Promise.resolve()},loadAndRender:function(e){if(this._isForceLoad=e&&e.isForceLoad,!this._bundleRequested){this._bundleRequested=!0,home.stat.logPath("show",this.params.statRoot+".init"),this.params.isSsrExperiment&&(this.params.libParams.appContainer=this.elem("container")[0]);var t=this.params.zenClientHost?this._loadDevLibParamsMemo(this.params.zenClientHost,this.params.isSsrExperiment,this.params.libParams.isAdblock).then(function(e){var t=this._combineParams(e,this.params.libParams);return console.log("Current zen lib params:",t),t}.bind(this)):Promise.resolve(this.params.libParams),i=this.params.zenLoaderHost?this._loadDevLibParamsMemo(this.params.zenLoaderHost,this.params.isSsrExperiment,this.params.libParams.isAdblock).then(function(e){return this._injectZen(e.pathToLoader)}.bind(this)):Promise.resolve(this._runIncludedLoader());return Promise.all([t,i]).then(function(e){return this._createZen(e[0])}.bind(this))}},_onRetryClick:function(){this.setMod("state","loading"),this._bundleRequested=!1,this.loadAndRender()},_runIncludedLoader:function(){},_loadDevLibParams:function(e,t,i){var n="//"+e+"/lib-config",o=[["withSsr",t],["withAdblock",i]].reduce((function(e,t){return t[1]&&e.push(t[0]+"=true"),e}),[]).join("&");return n+=o?"?"+o:"",$.ajax({url:n,xhrFields:{withCredentials:!0}})},_combineParams:function(e,t){var i=["isDev","pathToLoader","staticHost","version"].reduce((function(t,i){return t[i]=e[i],t}),{});return $.extend({},t,i)},_initialForcedDelay:function(e){return this._isForceLoad&&e?new Promise((function(t){setTimeout(t,e)})):Promise.resolve()},_promoCards:[],PROMO_CARD_DELAY_COLLECT:50,_debouncedTriggerPromoCards:$.debounce((function(){this.trigger("promoCards",this._promoCards.sort((function(e,t){return e.index-t.index})))}),50),_collectPromoCards:function(e){this._promoCards.push(e),this._debouncedTriggerPromoCards()},_writeCacheTtlToCookie:function(e,t,i){var n=Number(t(i)),o=Number(this.params.timestamp);if(n&&o){var s={};s[e]=o+n,window.Ya&&window.Ya.ycCookie&&window.Ya.ycCookie.set(this.__self.ZEN_COOKIE_CONTAINER,s)}},_removeCacheTtlFromCookie:function(){window.Ya.ycCookie.remove(this.__self.ZEN_COOKIE_CONTAINER)},_rows:[],_createZen:function(e){var t=this.params.initialForcedDelay,i=this.params.idleSearchTimeLoad,n={api:"1096","js-chunk":"628",css:"2447","react-chunk":"2953"},o=this.params.timeout||1e4,s=window.YandexZen.loader;s.on("timings",function(e){if(this._rumPage){var t=this._rumPage;Object.keys(n).forEach((function(i){var o=e[i];o>-1&&Ya.Rum.sendDelta(n[i],o,t)}))}}.bind(this));var r=this.__self.CacheType;return s.on("cachePut",this._writeCacheTtlToCookie.bind(this,r.cach,(function(e){return e&&e.ttl}))),s.on("renderCachePut",this._handleRenderCachePut.bind(this)),s.on("packShown",this._removeCacheTtlFromCookie.bind(this)),s.on("invalidatePack",this._removeCacheTtlFromCookie.bind(this)),s.on("firstPaint",this._triggerFirstPaint.bind(this)),s.on("placeholder",function(e){this.trigger("placeholder",e)}.bind(this)),s.on("rowsChanged",function(e){e&&(this._rows=e,this.trigger("rowsChanged",e))}.bind(this)),s.on("ssrSchemeFailed",function(e){home.stat.logPath("tech",this.params.statRoot+".ssr_scheme_failed",{customParams:$.extend({},e.meta,{causeError:e.message,step:e.key})})}.bind(this)),s.on("precacheMiss",function(){this._logError({name:"MordaZenLibError",message:"Precache missed",method:"_createZen",owner:"backend",sourceType:"logic"})}.bind(this)),this._initialForcedDelay(t).then(this._waitIdleSearchMoment.bind(this,i)).then(function(){var t=s.create(e);return this._lateRenderingRace({loader:t,lagTime:o}),t}.bind(this)).then(function(e){this.trigger("loaded"),e.on("firstPaint",function(){this._triggerFirstPaint(),this._rumPage&&Ya.Rum.sendTTI(!1,Ya.Rum.getTime(),this._rumPage)}.bind(this)),e.on("promoCard",this._collectPromoCards.bind(this)),e.on("stat",this._onZenStatData.bind(this)),e.on("placeholder",function(e){this.trigger("placeholder",e)}.bind(this)),e.on("placeholderShow",function(e){this.trigger("placeholderShow",e)}.bind(this)),e.on("rowMounted",function(e){var t=e.grid[0].row;this._rows[t]=e.grid[0].type,e.grid[0].row>this.params.MAX_ROW_TO_LOG||this.trigger("rowMounted",e)}.bind(this)),e.on("morePackLoadingError",function(e){this.trigger("morePackLoadingError",e)}.bind(this)),e.on("rowsChanged",function(e){this._rows=e,this.trigger("rowsChanged",e)}.bind(this)),e.on("advManagerReceived",function(e){this.trigger("advManagerReceived",e)}.bind(this)),e.on("advManagerReceiveFailed",function(e){this._logError(e),this.trigger("advManagerReceiveFailed",e)}.bind(this)),e.on("cachePut",this._writeCacheTtlToCookie.bind(this),r.cach,(function(e){return e&&e.ttl})),this.params.isSsrExperiment&&(e.on("packShown",this._removeCacheTtlFromCookie.bind(this)),e.on("invalidatePack",this._removeCacheTtlFromCookie.bind(this))),e.render(this.elem("container")[0]),this.setMod("state","loaded")}.bind(this))["catch"](function(e){this.trigger("error"),this.setMod("state","retry"),this._logError(e)}.bind(this))},_handleRenderCachePut:function(e){var t=this.__self.CacheType;this.isAdblockDetected&&!this.params.libParams.isAdblock||this._writeCacheTtlToCookie(t.cachStatic,(function(e){return e&&e["static"]&&e["static"].ttl}),e)},_handleAdblockDetection:function(){this.isAdblockDetected||this.params.libParams.isAdblock||this._removeCacheTtlFromCookie(),this.isAdblockDetected=!0},_lateRenderingRace:function(e){var t=(e=e||{}).loader,i=e.lagTime,n=new Promise((function(e){setTimeout(e,i,i)}));return Promise.race([t["catch"]((function(){})),n]).then(function(e){e===i&&this.trigger("lateRendering")}.bind(this))},_checkIsPlaceholderRow:function(e){return"Placeholder"===this._rows[e]},_onZenStatData:function(e){var t=this.params.MAX_ROW_TO_LOG,i=e&&e.statMeta&&e.statMeta.rowIndex,n=e&&e.statMeta&&e.statMeta.link;if(!this._checkIsPlaceholderRow(i)){var o=e.eventName.split("#")[0];if(-1===ve.indexOf(o)){var s=ge[o];if(s){var r="number"==typeof i&&i<t?this.params.statRoot+".row"+i:this.params.statRoot,a=s.eventType,c=r+"."+s.entity,l="click"===a?{url:n}:undefined;home.stat.logPath(a,c,l),"click"===a&&home.stat.flushQueue()}else home.error.logError({block:"zen-lib",message:"Unknown zen stat event type",meta:e,sourceType:"logic"})}}},_injectZen:function(e){return new Promise((function(t,i){var n=e,o=document.createElement("script");o.src=n,o.onload=function(){t()},document.body.appendChild(o),setTimeout((function(){i(new Error("_injectZen: Unreachable Zen loader"))}),5e3)}))},_logError:function(e){var t=e.name,i=e.message;home.error.logError({block:"zen_lib"+(this.params.blockerror_adblock?"_adblock":""),method:"_logError",message:t||i?t+" "+i:"UNKNOWN_ERROR"+JSON.stringify(e),sourceType:e.sourceType,source:e.owner,meta:e.meta})}},{ZEN_COOKIE_CONTAINER:"zen",CacheType:{cach:"cach",cachStatic:"cacS"},PLACEHOLDER_ROW:"Placeholder"});i(371),i(372),i(373),i(374);var ye={rtb_inserts:home.cls&&home.cls.full("rtb_inserts")},we={};for(var ke in ye)we[ye[ke]]=ke;function Ee(e){return we[e]||e}BEM.decl("blender-logger",{},{initBlock:function(){this._inited||(this._inited=!0,this.updateMediaRows(),this._zenRows=[],this.MAX_ZEN_ROW_COUNT=home.getData("infinity-zen.MAX_ROW_TO_LOG"),this._zenInserter=BEM.blocks["zen-inserter"])},updateMediaRows:function(){this._mediaRows=this._getMediaRows()},_getMediaRows:function(){var e=$(".media-grid__media-content>[data-blockname]"),t=[],i=home.getData("media-grid.layoutMap",{});return home.getData("rows.first_screen_height")&&t.push({name:"first_screen",height:$(".rows__row_first").height()+$(".rows__row_main").height()}),e.each((function(){var e=$(this),n=e.attr("data-blockname");if(n in i&&"infinity_zen"!==n){var o=0;n&&e.is(":visible")&&(o=Math.floor(e.outerHeight(!0))),t.push({name:n,height:o})}})),t},updateZenRowsAndSendStat:function(e){var t=this._getDefaultZenRowHeight(),i=this._zenInserter.ZEN_ROW_FOR_BLENDER;this._zenRows=e.map((function(e,n){return e.name===i?{name:e.name+".row"+n,height:t}:e})),this.sendStat()},_getDefaultZenRowHeight:function(){if(this._defaultZenRowHeight)return this._defaultZenRowHeight;var e=$(".feed__row").first();return this._defaultZenRowHeight=e.length?e.outerHeight(!0):336,this._defaultZenRowHeight},_toStatFormat:function(e){return Ee(e).replace(/-/g,"_").replace(/\./g,"#")},logBlockShow:function(e){home.stat.logPath("show",e+".realshow")},sendStat:function(){var e=[];if((e=(e=e.concat(this._mediaRows)).concat(this._zenRows)).length>this.MAX_ZEN_ROW_COUNT&&(e=e.slice(0,this.MAX_ZEN_ROW_COUNT)),(e=e.filter(function(e){return e.name!==this._zenInserter.EMPTY_PLACEHOLDER}.bind(this))).every((function(e){return e&&"number"==typeof e.height&&"string"==typeof e.name}))){var t=e.map((function(e){return this._toStatFormat(e.name)+"="+e.height}),this).join(",");home.stat.logPath("media_services_height",t)}}}),BEM.decl("zen-inserter",{},{EMPTY_PLACEHOLDER:"EMPTY",PLACEHOLDER_FROM_ZEN:"Placeholder",ZEN_ROW_FOR_BLENDER:"infinity-zen",CLASS_NAME:"zen-insert",RENDERED_BLOCKS:{},BLOCK_NAME_TO_HEIGHT:{},initBlock:function(){if(!this._inited){this._inited=!0,this._blocks=home.getData("zen-inserter.blocks",[]);var e=this;this._isZenInsertMultiplePlaceholdersExp=home.getData("zen-inserter.zen_insert_multiple_placeholders",!1),this._flatBlocks=this._isZenInsertMultiplePlaceholdersExp?Object.keys(this._blocks).map((function(t){return e._blocks[t]})).reduce((function(e,t){return Array.prototype.push.apply(e,t),e}),[]):this._blocks,this._rows=[];var t=home.getData("zen-inserter.namesMapper",{});this.ppToMordaNamesMapper=Object.keys(t).reduce((function(e,i){return e[t[i]]=i,e}),{}),this._blocks&&(this._blenderLogger=BEM.blocks["blender-logger"],this._blenderLogger.initBlock())}},logRealShow:function(e){var t=home.getData("zen-inserter.zen_united_feed",!1);if(this._blocks){var i=e.index,n=t?e.cardPayload:this._blocks[i];this._isZenInsertMultiplePlaceholdersExp&&(n=this._blocks[e.nextZenRowIndex]&&this._blocks[e.nextZenRowIndex][e.placeholderIndex]),n&&this.RENDERED_BLOCKS[n]&&this.BLOCK_NAME_TO_HEIGHT[n]&&this._blenderLogger.logBlockShow(n)}},onZenRowsUpdated:function(e,t){var i=home.getData("zen-inserter.zen_united_feed",!1);if(this._blocks){var n=0,o=e.map((function(e,o){if(e!==this.PLACEHOLDER_FROM_ZEN)return{name:this.ZEN_ROW_FOR_BLENDER,height:null};var s,r=t[o];s=this._isZenInsertMultiplePlaceholdersExp?r&&this._blocks[r.nextZenRowIndex]&&this._blocks[r.nextZenRowIndex][r.placeholderIndex]||this.EMPTY_PLACEHOLDER:i?r&&r.cardPayload||this.EMPTY_PLACEHOLDER:this._blocks[n]||this.EMPTY_PLACEHOLDER;var a=this.BLOCK_NAME_TO_HEIGHT[s]||0;return n++,{name:s,height:a}}),this);this._blenderLogger.updateZenRowsAndSendStat(o)}},renderBlock:function(e,t){var i=this._getHtml(e,t);if(i){var n=$(i);return n.addClass(this.CLASS_NAME),n}},render:function(e){var t=home.getData("zen-inserter.zen_united_feed",!1);if(this._blocks){var i=e.container,n=e.index,o=t?this.ppToMordaNamesMapper[e.cardPayload]:this._blocks[n];if(this._isZenInsertMultiplePlaceholdersExp&&(o=this._blocks[e.nextZenRowIndex]&&this._blocks[e.nextZenRowIndex][e.placeholderIndex]),o)if(BEM.blocks["i-block-renderer"].wrapRender({from:"zen-inserter",layoutName:o},function(){var e=this.renderBlock(o);if(e){var t=$(i);return t.append(e),BEM.DOM.init(e),home.stat.logDOMShow(t,{convertCounters:function(e){return ye[o]?e.replace(ye[o],o):e}}),t.find("[data-blockname]").addClass("media-grid__row_visible_yes"),this.BLOCK_NAME_TO_HEIGHT[o]=Math.floor(e.outerHeight(!0)),this._rows.push(e),e}}.bind(this)))return o}},hide:function(e){var t=e.data("blockname");BEM.DOM.destruct(e),this.BLOCK_NAME_TO_HEIGHT.hasOwnProperty(t)?this.BLOCK_NAME_TO_HEIGHT[t]=0:this._blenderLogger&&this._blenderLogger.updateMediaRows(),BEM.blocks["i-reposition-event"].trigger()},_getHtml:function(e,t){if(this.RENDERED_BLOCKS[e])return"";var i=home.view("media-grid__layout-to-block-name",e),n=home.view("media-grid__row",{view:i+"__client-view",layoutName:e,blockParams:{layoutName:e},expand:t&&t.expand},{zenInsert:!0});return n&&(this.RENDERED_BLOCKS[e]=!0),n},renderAllBefore:function(e){if(this._flatBlocks){this._blenderLogger.updateZenRowsAndSendStat([]);var t=this._flatBlocks.map(this._getHtml,this).join("");if(t){var i=$(t);i.insertBefore(e),BEM.DOM.init(i),home.stat.logDOMShow(i)}}},pullOutAllBefore:function(e){this._rows.forEach((function(t){t.removeClass("zen-insert").insertBefore(e)})),this._rows=[],this.renderAllBefore(e)}});i(375);BEM.DOM.decl({name:"infinity-zen",baseBlock:"media-service"},{onSetMod:{js:function(){var e={},t={},i=home.getData("infinity-zen.zen_united_placeholders",!1),n=home.getData("zen-inserter.namesMapper",{}),o=home.getData("zen-inserter.zen_united_feed",!1);this._zenLib=this.findBlockInside("zen-lib"),o||this._insertZenHeaderAtTop(this._zenLib.params),this._grid=$(".media-grid").bem("media-grid"),this._grid.hasMod("collapsed","yes")||this._onGridExpand(),this._grid.on("collapsed",this._onGridCollapse,this),this._grid.on("expanded",this._onGridExpand,this);var s,r,a=BEM.blocks["zen-inserter"];a.initBlock(),this._debouncedRowsUpdated=$.debounce(a.onZenRowsUpdated.bind(a),this.DEBOUNCE_ZEN_ROWS_UPDATED_TIMEOUT),this._zenRow=this.domElem.closest(".media-grid__row"),this._insertHeaderOnce=(s=this._insertHeader,r=!1,function(){if(!r){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];r=s.apply(this,t)}}),this._zenLib.on("placeholder",(function(s,r){var c=a.render(r);(i||o)&&(e[r.rowIndex]=r,c&&(t[n[c]]=r),c&&!r.cardPayload&&(r.cardPayload=n[c],n[c]||home.error.logError({block:"infinity-zen",message:"Mapping for zen layoutName not found",meta:{mordaLayoutName:c},sourceType:"logic"})),c&&r.setPlaceholderInfo&&r.setPlaceholderInfo(r.cardPayload),!c&&a.RENDERED_BLOCKS[a.ppToMordaNamesMapper[r.cardPayload]]&&r.setPlaceholderInfo&&(c=e[r.rowIndex].cardPayload,r.setPlaceholderInfo(c),t[c]=r,r.cardPayload=c))})),this._zenLib.on("rowsChanged",function(t,i){this._debouncedRowsUpdated(i,e),o&&this._insertHeaderOnce(i,e,this._zenLib.params)}.bind(this)),this._zenLib.on("placeholderShow",(function(e,t){a.logRealShow(t)})),this._zenLib.on("lateRendering",this.changeThis((function(){a.renderAllBefore(this._zenRow),home.stat.logPath("tech",this.params.statRoot+".render_at_the_bottom")}))),this._zenLib.on("error",function(){a.renderAllBefore(this._zenRow)}.bind(this)),this._zenLib.on("error",function(){this._showAlert()}.bind(this)),this.domElem.is(":visible")&&!this.elem("content-suffix").is(":visible")&&this._showAlert(),this.params.needForceLoad&&this.forceLoad(),this._initMenuEvents(),(i||o)&&home.stat.addHandler(null,(function(e,i,o){if("redirect"===o||"click"===e){var s=n[Ee(i.split(".")[0])],r=t[s];if(r&&r.onClick)"redirect"===o||r.cardPayload===n.rtb_inserts?r.onClick(r.cardPayload):r.onSwipe(r.cardPayload)}}))},collapsed:{yes:function(){BEM.blocks["zen-inserter"].pullOutAllBefore(this._zenRow)},"":function(){this._zenLib.loadAndRender()}}},_getMenuId:function(){return"infinity_zen"},_showAlert:function(){this.hasMod("alert")||this.params.alert&&(this.domElem.append(home.view("infinity-zen__alert",this.params.alert)),this.setMod("alert","yes"),home.stat.logPath("show",this.params.statRoot+".alert"))},destruct:function(){this.channel("i-reposition-event").un("reposition",this._updateScroll,this),this.__base.apply(this,arguments)},forceLoad:function(){this._grid.hasMod("collapsed","yes")||this._isHidden()||this._zenLib.loadAndRender({isForceLoad:!0})},_appendContent:function(){this._grid.hasMod("collapsed","yes")||this._isHidden()||this._zenLib.loadAndRender()},_onGridCollapse:function(){this.channel("i-reposition-event").un("reposition",this._updateScroll,this)},_onGridExpand:function(){this.channel("i-reposition-event").on("reposition",this._updateScroll,this);var e=this.__self.HEADER_HEIGHT_PX-this.__self.SCROLL_PX;this._updateScroll(null,BEM.DOM.win.scrollTop()-e)},_updateScroll:function(e,t){var i=window.innerHeight;t-this.domElem.offset().top+i>this.__self.SCROLL_PX&&(e?this._appendContent():this.forceLoad())},_insertZenHeaderAtTop:function(e){document.querySelector(".infinity-zen").insertAdjacentHTML("afterbegin",home.view("infinity-zen__render-header",{isZenInsert:!1,params:e}))},_insertHeader:function(e,t,i){var n=e.indexOf("Zen");if(-1!==n)return 0===n?this._insertZenHeaderAtTop(i):t[n-1]?t[n-1].container.insertAdjacentHTML("beforeend",home.view("infinity-zen__render-header",{isZenInsert:!0,params:i})):(home.error.logError({block:"infinity-zen",method:"_insertHeader",message:"infinity zen header hasn't been inserted"}),this._insertZenHeaderAtTop(i)),!0}},{SCROLL_PX:-200,HEADER_HEIGHT_PX:50,DEBOUNCE_ZEN_ROWS_UPDATED_TIMEOUT:1e3,live:!1});i(376),i(377),i(378),i(379),i(380),i(381),i(382),i(383),i(384),i(385),i(386),i(387),i(388),i(389),i(390),i(391),i(392),i(393),i(394);function xe(e,t,i,n){var o=Math.abs(n-i),s="exact";o>100?s="huge":o>10?s="big":o>=1&&(s="small"),home.stat.logPath("tech",t+".height_change."+s,{customParams:{oldHeight:i,newHeight:n,layoutName:e}})}BEM.DOM.decl({name:"insert-loader",baseBlock:"media-service"},{onSetMod:{js:{inited:function(){this._isHidden()||(this.channel("i-reposition-event").on("reposition",this._onScroll,this),this._onScroll(null,BEM.DOM.win.scrollTop()),home.stat.logPath("show",this._getStatName()+".loading")),this._initMenuEvents()}},state:function(e,t){home.stat.logPath("show",this._getStatName()+"."+t)}},_getStatName:function(){return this.__self.getName().replace(/-/g,"_")},_getDataUrl:function(){},_selectData:function(){},_checkData:function(){},_getHTML:function(){},_onScroll:function(e,t){var i=this.domElem.offset().top;t+BEM.DOM.win.height()>i-this.__self._initOffset&&(this.channel("i-reposition-event").un("reposition",this._onScroll,this),this._loadBlockData())},_makeRequest:function(e){return $.ajax({url:e,xhrFields:{withCredentials:!0},dataType:"json",timeout:1e4})},_load:function(){var e=this._getDataUrl();return this._makeRequest(e).asPromise()},_loadBlockData:function(){if(!this._loadStarted){this._loadStarted=!0;var e=this.params.source||"morda_api",t=this.domElem.closest("[data-blockname]");return this._load().then(function(e){if(this._checkData(e))return e}.bind(this),function(t){"logic"===t.sourceType?home.error.logError({block:this.__self.getName(),sourceType:"logic",message:"_loadBlockData: "+t.message,source:e}):home.error.logError({block:this.__self.getName(),message:"_loadBlockData: ajax",source:e},t)}.bind(this)).then(function(e){if(!e)return Promise.reject();try{this._drawBlock(this._selectData(e))}catch(t){throw home.error.logError({block:this.__self.getName(),sourceType:"client",message:"Render error"},t),t}}.bind(this),function(t){throw home.error.logError({block:this.__self.getName(),sourceType:"backend",message:"Incorrect data",source:e},t),t}.bind(this))["catch"]((function(){BEM.blocks["zen-inserter"].hide(t)}))}},_drawBlock:function(e){BEM.blocks["i-block-renderer"].wrapRender({from:"insert-loader",layoutName:this._getStatName()},function(){var t,i=this.domElem.height(),n=this.domElem.closest("[data-blockname]").hasClass("media-grid__row_visible_yes");e=$.extend(e,{retryButtonTheme:this.params.retryButtonTheme}),t=BEM.DOM.replace(this.domElem,this._getHTML(e)),home.stat.logPath("tech",this._getStatName()+".loaded"),n&&home.stat.logDOMShow(t),setTimeout(function(){t&&xe(this._getStatName(),"tech.insert_loader",i,t.height())}.bind(this),100)}.bind(this))},_onRetryClick:function(){this.setMod("state","loading"),this._loadBlockData()},_toggle:function(e){this.__base.apply(this,arguments),e&&this._loadBlockData()}},{_initOffset:300,live:function(){return this.liveBindTo("retry-button","click",(function(){return this._onRetryClick(),!1})),!1}});i(395),i(396),i(397),i(398),i(399),i(400),i(401),i(402),i(403),i(404),i(405),i(406),i(407),i(408),i(409),i(410);BEM.DOM.decl(home.cls.full("rtb-inserts"),{onSetMod:{js:{inited:function(){this._renderCounter=0,this.params=window.home.rtbInserts||home.getData("rtb-inserts.data"),this.channel("i-reposition-event").on("reposition",this._onScroll,this),this._onScroll(null,BEM.DOM.win.scrollTop())}}},_getBanner:function(){var e=this,t={blockId:this.params.blockId,renderTo:home.cls.full("rtb-inserts"),async:!0,onRender:function(){BEM.channel("adb").trigger("rendered",{id:"desktop.rtb_inserts",elem:e.domElem[0]}),e.delMod(home.cls.part("dummy")),home.stat.logPath("tech","rtb_inserts.banner.rendered")},onError:function(t){e._logRtbError("cannot render banner: "+t),e._hide()},onHide:function(){home.stat.logPath("tech","rtb_inserts.banner.hide"),BEM.blocks["zen-inserter"].hide(e.domElem.closest("[data-blockname]"))}},i=this.params.nonce;i&&(t.cspNonce=i);var n,o=this.params.shouldGetAdvManagerFromZenLib?this._renderRsyaByZenlib(t)["catch"](function(){return this._renderRsyaByNetwork(t)}.bind(this)):this._renderRsyaByNetwork(t);Promise.race([o["catch"](function(){this._logRtbError("cannot load context: Error"),this._hide()}.bind(this)),(n=15e3,new Promise((function(e,t){setTimeout(t,n)})))])["catch"](function(){this._logRtbError("cannot load context: Timeout"),this._hide()}.bind(this))},_logRtbError:function(e){home.error.logError({block:"rtb_inserts",message:e,sourceType:"network"})},_renderRsya:function(e,t){home.stat.logPath("tech","rtb_inserts.banner.rendering."+ ++this._renderCounter),e.render(t,this._noDataCallback.bind(this))},_renderRsyaByNetwork:function(e){return this._getAdvManagerByNetwork().then(function(t){this._renderRsya(t,e)}.bind(this))},_renderRsyaByZenlib:function(e){return this._advManagerByZenlibPromise.then(function(t){if("error"===t.state)throw t.error;this._renderRsya(t.value,e)}.bind(this))},_getAdvManagerByNetwork:function(){return new Promise(function(e,t){if(window.Ya&&window.Ya.Context&&window.Ya.Context.AdvManager)e(window.Ya.Context.AdvManager);else{var i=document.getElementsByTagName("script")[0],n=document.createElement("script");n.crossorigin="use-credentials",n.type="text/javascript",n.src=this.params.contextUrl,n.async=!0,n.onerror=function(e){BEM.channel("adb").trigger("download",{id:"desktop.rtb_inserts.context"}),t(e)},i.parentNode.insertBefore(n,i),window.yandexContextAsyncCallbacks=window.yandexContextAsyncCallbacks||[],window.pcodever=this.params.pcodever,window.yandexContextAsyncCallbacks.push((function(){window.Ya&&window.Ya.Context&&window.Ya.Context.AdvManager&&e(window.Ya.Context.AdvManager),t(new Error("window.Ya.Context.AdvManager not found"))}))}}.bind(this))},_onScroll:function(e,t){var i=this.domElem.offset().top;t+BEM.DOM.win.height()>i-500&&(this.channel("i-reposition-event").un("reposition",this._onScroll,this),this._getBanner())},_hide:function(){BEM.blocks["zen-inserter"].hide(this.domElem.closest("[data-blockname]"))},_noDataCallback:function(){home.stat.logPath("tech","rtb_inserts.banner.no_data"),this._hide()},_advManagerByZenlibPromise:new Promise((function(e){var t=$(".zen-lib");if(!t.length)return e({state:"error",value:Error("zen-lib not found")});t.bem("zen-lib").on({advManagerReceived:function(t,i){e({state:"success",value:i})},advManagerReceiveFailed:function(t,i){e({state:"error",value:Error(i)})},error:function(t,i){e({state:"error",value:Error(i)})}})}))});i(411),i(412),i(413),i(414),i(415),i(416),i(417),i(418),i(419),i(420),i(421),i(422),i(423),i(424),i(425),i(426),i(427),i(428),i(429),i(430),i(431),i(432),i(433),i(434),i(435),i(436),i(437),i(438),i(439),i(440);BEM.DOM.decl({block:"divjson2-block",baseBlock:"media-service"},{onSetMod:{js:{inited:function(){this.params.api&&BEM.blocks["i-intersection-observer-wrapper"].create((function(e,t){e.forEach((function(e){if(e.isIntersecting){var i=e.target;$(i).bem("divjson2-block")._loadBlockData(),t.unobserve(i)}}))}),{threshold:0,rootMargin:"300px 100px"}).observe(this.domElem[0])}}},_loadBlockData:function(){if(!this._loadStarted){this._loadStarted=!0;var e=this.params.api;if(e)return e=home.addQueryToUrl(this.params.api,{dpr:window.devicePixelRatio||1}),$.ajax({url:e,xhrFields:{withCredentials:!0},dataType:"json",timeout:1e4}).asPromise().then(function(t){if(t&&t.error){var i=new Error("Server error: "+t.error),n=home.parseUrl(e);throw i.url=n.host+n.path,i.meta=home.deepExtend({reqid:t.reqid},t.additional||{}),i}var o=this._checkData(t);if(!o)return t;throw new Error("Incorrect data: "+o)}.bind(this),(function(e){throw e.json&&e.json.errors&&home.error(e.json),e})).then(function(e){try{this._onLoad(e)}catch(t){throw t&&t.message&&(t.message="Render error: "+String(t.message)),t}}.bind(this))["catch"](function(e){home.error.logError({block:this.__self.getName(),source:this.params.layoutName},e),BEM.blocks["zen-inserter"].hide(this.domElem.closest("[data-blockname]"))}.bind(this))}},_checkData:function(e){if(!e||"object"!=typeof e||!e.card||"object"!=typeof e.card)return'Missing "card" field';var t=home.view("divjson2__check",{json:e});return"ok"!==t?t||"Unknown error":""},_onLoad:function(e){this._drawBlock(e)},_drawBlock:function(e){var t=this.domElem.height();this.domElem.removeClass("media-service_dummy_yes"),this._control=null,BEM.DOM.update(this.domElem,home.view("divjson2",{json:e,layoutName:this.params.layoutName,titleIcon:this.params.titleIcon}));var i=!!this.domElem.find(".media-service__tabs").length;this.domElem.toggleClass("media-service_tabs_yes media-service_inline-tabs_yes",i),$("html").hasClass("i-ua_browser_touch")&&this._createMenuChecked(),home.stat.logDOMShow(this.domElem),setTimeout(function(){this.domElem&&xe(this.params.layoutName,"tech.divjson2",t,this.domElem.height())}.bind(this),100)}},{live:function(){return this.__base.apply(this,arguments),!1}});i(441),i(442),i(443),i(444),i(445),i(446),i(447),i(448),i(449),i(450),i(451),i(452),i(453),i(454),i(455),i(456),i(457),i(458),i(459),i(460),i(461),i(462),i(463),i(464),i(465),i(466),i(467),i(468),i(469),i(470),i(471),i(472),i(473),i(474),i(475),i(476)},function(e,t,i){i.d(t,"a",(function(){return o}));var n={},o=function(e){for(var t=e.split("."),i=n,o=0;o<t.length;++o){if(!i||!i[t[o]])return console.error("home.l10n: undefined translation "+e),"";i=i[t[o]]}return i}}]),function(e){if("function"==typeof e.I18N&&e.I18N._proto)return e.I18N;"undefined"==typeof i18n&&(i18n={}),BEM=e;var t={},i=[],n=!1,o="undefined"!=typeof console&&"function"==typeof console.log;function s(e,t){if(n&&o){var i="keyset: "+t._keyset+" key: "+t._key+" (lang: "+t._lang+")";console.log(e,i)}}function r(){this._lang="",this._prj="lego",this._keyset="",this._key=""}r.prototype={lang:function(e){return this._lang=e,this},project:function(e){return this._prj=e,this},keyset:function(e,t){var n;return t&&function(e){e&&i.push(e)}(this._keyset),this._keyset="string"==typeof(n=e)?n:n.block+(n.elem?"__"+n.elem:"")+(n.modName?"_"+n.modName+"_"+n.modVal:""),this},key:function(e){return this._key=e,this},decl:function(e){var i=function(e){var t={};return e.split("__").forEach((function(e,i){var n=[i?"elem":"block","mod","val"];e.split("_").forEach((function(e,i){t[n[i]]=e}))})),t}(this._keyset),n="i-tanker"===i.block?"tanker":this._prj,o=i.elem||this._keyset,s=this._key;(o=(n=i18n[n]||(i18n[n]={}))[o]||(n[o]={}))[s]="function"==typeof e?e:function(){return e};var r=t[this._lang]||(t[this._lang]={});(r[this._keyset]||(r[this._keyset]={}))[s]=e},val:function(e,i){var n=t[this._lang]&&t[this._lang][this._keyset];if(!n)return s("[I18N_NO_KEYSET] %s",this),"";var o=typeof(n=n[this._key]);return"undefined"===o?(s("[I18N_NO_VALUE] %s",this),""):"string"===o?n:n.call(i||this,e)},_cache:function(){return t}};var a=function(e,t,i){return a.keyset(e).key(t,i)};a._proto=new r,a.project=function(e){return this._proto.project(e),this},a.keyset=function(e){return this._proto.keyset(e,!0),this},a.key=function(e,t){var n,o,s=this._proto;return s.lang(this._lang).key(e),n=s.val(t,a),(o=i.length&&i.pop())&&s.keyset(o,!1),n},a.decl=function(e,t,i){var n,o=this._proto;for(n in i&&i.lang&&o.lang(i.lang),o.keyset(e),t)t.hasOwnProperty(n)&&o.key(n).decl(t[n]);return this},a.lang=function(e){return void 0!==e&&(this._lang=e),this._lang},a.debug=function(e){n=!!e},a.lang("ru"),e.I18N=a}("undefined"==typeof BEM?{}:BEM),"undefined"!=typeof BEM&&BEM.I18N&&(BEM.I18N.decl("b-keyboard-popup",{close:""},{lang:"ru"}),BEM.I18N.decl("notifier",{"new-notifications":function(e){return" : "+e.count},"no-new-notifications":"  ",notifier:" "},{lang:"ru"}),BEM.I18N.decl("popup",{add:"",cancel:"",revert:"",apply:""},{lang:"ru"}),BEM.I18N.decl("search2",{"search-button-text":"","search-input-label":"","search-service-label":"  ","search-web-label":"  "},{lang:"ru"}),BEM.I18N.decl("tooltip__close",{close:""},{lang:"ru"}),BEM.I18N.decl("tumbler",{off:"",on:""},{lang:"ru"}),BEM.I18N.lang("ru")),home.lang={afisha:{all_films_today:"  ",buy:" ",cards:" ",cinema:"",cinemaNoSessions:"    ",cinemaSeeNextDay:"  ",cinemaSeeOtherDays:"   ",cityDayText:"  &nbsp;",cityDayTitle:"%s  &nbsp;<b>%s</b>",cityday:"  &nbsp;",citydayShort:" ",citydayToday:"&#32;",concerts:"",defaultTab:"",defaultTabLong:" ",desc:"    ",desc_inserts:"    ",elki:"",events:"",favoritePlace:" ",festival:"",from:" %s",geolocationFail:"  ",geolocationInaccuracy:"  ",multiple_locations:"    ",myCinemas:" ",nearestCinemas:"",nearestCinemasFull:" ",newyear:" ",noCinemas:"   ",popularFilms:"<br>",premiere:"",premiere_in:" %s",reload:"",schedule:"",scheduleError:"   ",scheduleInProgress:" ",scheduleTryAgain:"  ",searchInProgress:"   ",show:"",showObjects:"  ",showObjectsShort:" ",since_date:" %s",sorry:",     ",sport:"",summer:" ",theatres:"",title:""},covid:{speed:{cases:"",cured:"",deaths:"",from_date:"  %day %month",infections:["","",""],infections2:["%s ","%s ","%s "],new_cases:"",subtitle:"  ",total_cases:"%s   ",total_cases_short:"%s ",week:"%s    7 ",week_short:"   7 .",week_short_extra:" .  7 .",yesterday:["%s   %date","%s   %date","%s   %date"]}},desktopNotifications:{menu:{ban:" ",close:"",collapse:"",expand:"",settings:"",setup:"",toggle:""},stream:{ether:"",live:" ",may_like:"  "}},direct:{bought_already:" ",not_interest:" ",spam:""},domik:{active:""},foot:{promo_tooltip:"  <br>   "},head:{region:" "},hockey:{highlights:" "},informationsMessages:{beforeReset:" ,       ?     .",cannotSaveSettings:",     .  .",maxCount:"   ",settingsNotSaved:"      ."},messenger:{title:""},month_accus:{1:"",10:"",11:"",12:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:""},months_short_genetive:{apr:"",aug:"",dec:"",feb:"",jan:"",jul:"",jun:"",mar:"",may:"",nov:"",oct:"",sep:""},notifications:{no_unread:"  ",unread_full:"%count %word",unread_word:[" "," "," "]},plus:{"subscription-expires-days":["O %d  ","O %d  ","O %d  "],"subscription-expires-today":"  "},pushes:{notice:{error:{cancel:"",text:",     .",title:"-   ",web_error:"   .  "},prompt:{cancel:", ",text:"     ,    .<br>     .      .",title:"  "},wait:{title:" <b></b><br>  ."}},sup_button:{subscribe:"",unsubscribe:""}},rates:{newalt:{ceni:"%s:  ",index:"%s:  ",korz:" ",kurs:"%s:  "}},spok_yes:{month_accus:{1:"",10:"",11:"",12:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:""}},stream:{card:{category:{anim_film:"",anim_series:"",film:"",series:""}},inserts:{categ_anim_film:"",categ_anim_series:"",categ_film:"",categ_series:""},month:{short:{1:"",10:"",11:"",12:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:""}},top_reason:{audience:"",exclusive:"  ",fresh:"",hot_external:"",popular_category:" ",watch_count:" "}},traffic:{personal:{hour_abbr:"&nbsp;&nbsp;",minutes_abbr:"&nbsp;",time:["","",""]}},"voice-search":{popup:{"chrome-permission":{subtitle:"  ,    %icon%   "},connectionproblem:{subtitle:" ",title:"   "},noaccess:{subtitle:"   ,    ",title:"    "},unknownerror:{title:" "}}},widgetcontrol:{confirm_delete_all:"     ?","delete":"",delete_all:" ",hide:"",hide2:"",setup:""}},function(){!function(){"use strict";home.parseRules={l10n:function(e,t,i){return t.l10n||home.error("Can't proccess 'l10n:"+i+"', check context of template"),t.l10n&&t.l10n(i)},baseViews:function(e,t,i){return t.baseViews(i,e)},bem:function(e,t,i){e=e||{};var n=(i=i.split(".")).pop(),o=i.pop(),s=i.pop();switch(n){case"class":var r=home.getBEMClassname(o,(s?e[s]:e)||{});return t&&t.cls&&t.cls.contains(o)?t.cls.full(r):r;case"js":return home.getBEMParams(e[o||"js"]||{});case"attrs":return home.getAttributes(e[o||"attrs"])}},cls:function(e,t,i){return t&&t.cls?t.cls.full(i):i}}}();var e,t=home.view?Object.create(home.view.templates):{},i={l10n:home.l10n,stat:{logShow:function(e,t){return t&&(e+=n(t)),home.stat.logPath("show",e),e},getAttr:function(e,t,i){return e?((i=i||{}).customParams&&(e+=n(i.customParams)),' data-statlog="'+e+'"'+(!1!==i.isRedirect?"":' data-statlog-redir="0"')+(i.precise?' data-statlog-precise="1"':"")):""},getAdaptiveCounter:function(e,t){return e?' data-statlog="'+e+'"'+(t?' data-statlog-redir="0"':"")+' data-statlog-autoshow="1"':""},getClientCounter:function(e,t,i){return(e=i?e+n(i):e)?' data-statlog="'+e+'"'+(t?' data-statlog-redir="0"':""):""}},settingsJs:{add:function(e,t,i){home["export"][i]||(home["export"][i]={}),home["export"][i][e]=t},has:function(e,t){return home.getData&&home.getData(t+"."+e)}},csp:(e={stub:!0},["allowDefault","allowStyle","allowPlugin","allowObject","allowMedia","allowImg","allowFont","allowConnect","allowScript","allowChild","allowForm"].forEach((function(t){e[t]=function(e){if(home.error&&(!home.getData||!0===home.getData("csp.report"))){var i=new Error("req.csp."+t+" was called on clientside");i.meta={url:e},i.block="home.views",home.error.logError(i)}}})),e)};function n(e){var t=[];if(Array.isArray(e))t=e;else for(var i in e)e.hasOwnProperty(i)&&e[i]!==undefined&&t.push(i+"="+encodeURIComponent(e[i]));return t.length?"("+t.join(";")+")":""}function o(e,i){if(i){var n=t[e];t[e]=i instanceof Function?i:home.templateGenerator(i,e),n&&(t[e].base=n)}}o.cached=function(e,i){i&&(o(e,i),t[e].cached=!0)},home.view=function(e,n,o){var s,r=o||n||{},a=[];for(s in i)r.hasOwnProperty(s)||(r[s]=i[s]);var c=window.home&&home.getData&&home.getData("common.req")||{};for(s in c)c.hasOwnProperty(s)&&!r.hasOwnProperty(s)&&(r[s]=c[s]);function l(e,i){var n=e instanceof Function?e:t[e],o="";return n&&(o=n.cached?n(r,l):n(i,r,l)),o}return l.withReq=function(e,t,i){if(!i||"object"!=typeof i)throw new Error("withReq should be called with 3d arg");a.push(r),r=i;try{return l(e,t)}finally{r=a.pop()}},l(e,n)},home.view.templates=t,home.view.define=o,o("consistency-popup__html",(function(e,t,i){var n,o;return"<div "+(e.className!==o?e.className:t.className!==o?t.className:(n=i("className",e))!==o?n:"")+' style="position:fixed;z-index:'+(e.zIndex!==o?e.zIndex:t.zIndex!==o?t.zIndex:(n=i("zIndex",e))!==o?n:"")+';bottom:16px;right:16px;width:340px;color:#FFF;background-color:#E26A68;padding:16px;"><div style="font-size:120%;margin-top:5px;margin-bottom:10px;">'+(e.title!==o?e.title:t.title!==o?t.title:(n=i("title",e))!==o?n:"")+'</div><div style="line-height: 18px;">'+(e.text!==o?e.text:t.text!==o?t.text:(n=i("text",e))!==o?n:"")+'</div><div style="margin-top: 30px;text-align: right"><a class="button_theme_cpopup" '+(e.stat!==o?e.stat:t.stat!==o?t.stat:(n=i("stat",e))!==o?n:"")+' style="margin-right: 16px;" role="button" href="'+(e.yesLink!==o?e.yesLink:t.yesLink!==o?t.yesLink:(n=i("yesLink",e))!==o?n:"")+'"><div class="button_theme_cpopup__text b-inline" style="background-color: #EB9796;">'+(e.yesButton!==o?e.yesButton:t.yesButton!==o?t.yesButton:(n=i("yesButton",e))!==o?n:"")+'</div></a><a class="button_theme_cpopup" role="button" href="'+(e.noLink!==o?e.noLink:t.noLink!==o?t.noLink:(n=i("noLink",e))!==o?n:"")+'"><div class="button_theme_cpopup__text b-inline">'+(e.noButton!==o?e.noButton:t.noButton!==o?t.noButton:(n=i("noButton",e))!==o?n:"")+'</div></a></div><div class="button_theme_cpopup__close"><div class="button_theme_cpopup__close_img"></div></div></div>'})),o("usermenu__email",(function(e){var t=home.cleverString.cutEndOfString(e.email,25);return'<div class="usermenu__user-email">'+home.htmlFilter(t)+"</div>"})),o("usermenu__user",(function(e,t,i){var n=e.user,o=n.email&&n.mailbox,s=home.htmlFilter(home.cleverString.cutEndOfString(n.UserName.str,20)),r=home.htmlFilter(n.UserName.str),a=n.uid,c=n.avatar_id,l=n["default"];return i("usermenu__user-layout",{mod:l?"":" usermenu__user_clickable_yes usermenu__item",name:s,email:o?i("usermenu__email",n):"",userIcon:i("avatar",{mix:"usermenu__user-icon usermenu__user-icon_type_"+("0/0-0"===c?"default":"custom"),avatarId:c,passportHost:e.passportHost,retpath:e.retpath,origin:"morda",mods:{size:"l","has-camera":e.hasCamera?"yes":""}}),attrs:{tabindex:l?undefined:"0","data-uid":a,role:"button","aria-label":l?"":home.stringf("   %s",r)},stat:l?"":n.changeStat,exit:l?"":i("usermenu__user-exit",{attrs:{tabindex:l?undefined:"0","data-uid":a,role:"button",title:l?"":home.stringf("    %s",r)},stat:e["default"]?"":n.exitStat})})})),o("usermenu",(function(e,t,i){var n=e.defaultUser,o=e.otherUsers,s=[],r=e.passportHost,a="mail.login.usermenu.",c=e.retpath,l=r+"/auth?mode=add-user&retpath="+c+"&origin=home_desktop_"+t.MordaZone.replace(".","")+e.authOriginSuffix,u=e.services;if(e.plus&&e.plus.active){var d="",h=e.plus.subscription_expire_days;h>=0&&(d=i("span",{mod:"usermenu__plus-subtitle",content:0===h?" ":home.decline(h,["O %d ","O %d ","O %d "]).replace("%d",h)})),s.push({href:e.plus.url,stat:t.stat.getAttr(a+"plus_info"),attrs:{"aria-label":"."},content:i("span",{mod:"usermenu__plus-icon"})+i("span",{mod:"usermenu__plus-title",content:""})+d})}return s.push({href:r+"/passport?mode=passport",stat:t.stat.getAttr(a+"passport"),text:"",attrs:{"aria-label":""}}),u&&u.forEach((function(e){s.push({href:e.url,stat:t.stat.getAttr(a+e.id),text:e.title,attrs:{"aria-label":e.title}})})),e.setupPage&&s.push({href:e.setupPage,stat:t.stat.getAttr(a+"settings"),text:"",attrs:{"aria-label":""}}),s.push({href:r+"/passport?mode=logout&yu="+e.yandexuid+"&retpath="+c,stat:t.stat.getAttr(a+"exit"),text:"",attrs:{"aria-label":""}}),i("usermenu__layout",{mods:{multi:o.length?"yes":"no"},defaultUser:i("usermenu__user",{user:n,passportHost:r,retpath:c,hasCamera:"0/0-0"===n.avatar_id}),links:i("menu",{mods:{view:"default",tone:"default",size:"sx",type:"navigation"},items:s.map((function(e){return e.mix="usermenu__item",e}))}),otherUsers:o.map((function(e,n){return e.changeStat=t.stat.getAttr(a+"change.user"+n,null,{isRedirect:!1}),e.exitStat=t.stat.getAttr(a+"exit.user"+n,null,{isRedirect:!1}),i("usermenu__user",{user:e,passportHost:r})})).join(""),addUser:e.allowMoreUsers?i("usermenu__user-add",{href:l,stat:t.stat.getAttr(a+"adduser"),text:"<br/>".replace("<br/>"," ")}):"",js:{usermenu:{passport:l,auth:{action:r+"/passport?mode=embeddedauth",params:{yu:e.yandexuid,retpath:e.loginStatusRetpath,action:"change_default"}}}}})})),o("usermenu__user-add",(function(e,t,i){var n;return'<div class="usermenu__list-item" role="menuitem"><a class="usermenu__user usermenu__user-add usermenu__item" href="'+(e.href!==n?e.href:"")+'" aria-label="'+(e.text!==n?e.text:"")+'"'+(e.stat!==n?e.stat:"")+'><div class="usermenu__user-icon-wrapper"><div class="usermenu__user-icon usermenu__user-add-icon"></div></div><div class="usermenu__user-info"><div class="usermenu__user-add-text">'+(e.text!==n?e.text:"")+"</div></div></a></div>"})),o("usermenu__user-exit",(function(e,t,i){return'<div class="usermenu__user-exit popup__link"'+home.parseRules.bem(e,t,"attrs")+(void 0!==e.stat?e.stat:"")+'><div class="usermenu__user-exit-icon"></div></div>'})),o("usermenu__user-layout",(function(e,t,i){var n;return'<div class="usermenu__list-item" role="menuitem"><div class="usermenu__user '+(e.mod!==n?e.mod:"")+'"'+home.parseRules.bem(e,t,"attrs")+(e.stat!==n?e.stat:"")+'><div class="usermenu__user-icon-wrapper">'+(e.userIcon!==n?e.userIcon:"")+'</div><div class="usermenu__user-info"><div class="usermenu__user-name">'+(e.name!==n?e.name:"")+"</div>"+(e.email!==n?e.email:"")+"</div></div>"+(e.exit!==n?e.exit:"")+"</div>"})),o("usermenu__layout",(function(e,t,i){var n;return'<div class="'+home.parseRules.bem(e,t,"usermenu.class")+' i-bem" data-bem="'+home.parseRules.bem(e,t,"js")+'">'+(e.defaultUser!==n?e.defaultUser:"")+(e.links!==n?e.links:"")+'<div class="usermenu__separator"></div><div class="usermenu__list">'+(e.otherUsers!==n?e.otherUsers:"")+(e.addUser!==n?e.addUser:"")+"</div></div>"})),o("popup2",(function(e,t,i){var n=e.mods||{},o=e.content||"";return n.view===undefined&&(n.view="classic"),e.hasTail&&(o=i("popup2__tail")+o),i("popup2__layout",{mix:e.mix,mods:n,js:home.deepExtend({popup2:{mainOffset:e.mainOffset,secondaryOffset:e.secondaryOffset,viewportOffset:e.viewportOffset,tailOffset:e.tailOffset,tailSize:e.tailSize,directions:e.directions,zIndexGroupLevel:e.zIndexGroupLevel,position:e.position}},e.jsMix||{}),content:o,attrs:e.attrs})})),o("popup2__tail",(function(e,t,i){return'<div class="popup2__tail"></div>'})),o("popup2__layout",(function(e,t,i){return'<div class="'+home.parseRules.bem(e,t,"popup2.class")+' i-bem" data-bem="'+home.parseRules.bem(e,t,"js")+'" '+home.parseRules.bem(e,t,"attrs")+">"+(void 0!==e.content?e.content:"")+"</div>"})),o("menu",(function(e,t,i){var n,o=e.mods||{},s=o.disabled,r=o.type,a=e.tabindex!==undefined?e.tabindex:undefined;n=e.val!==undefined?[].concat(e.val):[],o.view===undefined&&(o.view="classic"),"default"===o.view&&o.size===undefined&&(o.size="n"),-1!==["radio","radiocheck"].indexOf(r)&&(n=n.slice(0,1));var c=function(e){return[].concat(e).filter((function(e){return!1!==e&&null!==e&&e!==undefined})).map((function(e){return"string"==typeof e&&(e={text:e}),e.items?(e.content||(e.content=c(e.items).join("")),i("menu__group",e)):(e.mods=o,e.elem="item",e.elemMods||(e.elemMods={}),-1!==["check","radio","radiocheck"].indexOf(r)?e.elemMods=home.deepExtend({type:"option",checked:-1!==n.indexOf(e.val)?"yes":undefined},e.elemMods):"navigation"===r&&(e.elemMods=home.deepExtend({type:"link"},e.elemMods)),i("menu__item",e))}),this)};return i("menu__layout",{mods:o,mix:e.mix,tag:"navigation"===r?"ul":"div",attrs:{tabindex:s||null===a?undefined:a,"aria-disabled":!!s&&"true","data-bem":home.getBEMParams({menu:home.deepExtend(e.js||{},{_tabindex:null!==a&&s?a:undefined})})},content:c(e.items).join("")})})),o("menu__layout",(function(e,t,i){var n;return"<"+(e.tag!==n?e.tag:"")+' class="'+home.parseRules.bem(e,t,"menu.class")+' i-bem"'+home.parseRules.bem(e,t,"attrs")+">"+(e.content!==n?e.content:"")+"</"+(e.tag!==n?e.tag:"")+">"})),o("menu__item",(function(e,t,i){var n=e.elemMods||{},o="link"===n.type?"menu__item-layout-link":"menu__item-layout",s="navigation"===e.mods.type&&e.href?"link":e.mods.type&&"navigation"!==e.mods.type?"option":"menuitem";return i(o,{className:home.getBEMClassname("menu__"+(e.elem||"item"),{mods:n,mix:(e.mix||"")+(e.mixJs?" i-bem":"")}),js:home.deepExtend({menu__item:home.deepExtend(e.js||{},{val:e.val})},e.mixJs),attrs:home.deepExtend({title:e.title&&home.htmlFilter(e.title),"aria-disabled":!!n.disabled&&"true","aria-selected":!!n.checked&&"true",href:e.href||"",target:e.href?e.target:"",rel:"_blank"===e.target?"noopener":"",role:s},e.attrs||{}),tag:e.href?"a":"div",content:[e.mods&&"default"===e.mods.view&&e.mods.type!==undefined&&"navigation"!==e.mods.type&&i("icon",{mods:{glyph:"type-check"}}),e.icon&&i("menu__icon",home.deepExtend({mods:{size:e.mods.size},mix:e.iconMix},e.icon)),e.text!==undefined&&i("span",{mod:"menu__text",mix:e.textMix,content:home.htmlFilter(e.text)}),e.content].filter(Boolean).join(""),stat:e.stat||""})})),o("menu__item-layout-link",(function(e,t,i){var n;return'<li class="menu__list-item"><'+(e.tag!==n?e.tag:"")+' class="'+(e.className!==n?e.className:"")+'" data-bem="'+home.parseRules.bem(e,t,"js")+'"'+home.parseRules.bem(e,t,"attrs")+(e.stat!==n?e.stat:"")+">"+(e.content!==n?e.content:"")+"</"+(e.tag!==n?e.tag:"")+"></li>"})),o("menu__item-layout",(function(e,t,i){var n;return'<div class="'+(e.className!==n?e.className:"")+'" data-bem="'+home.parseRules.bem(e,t,"js")+'"'+home.parseRules.bem(e,t,"attrs")+(e.stat!==n?e.stat:"")+">"+(e.content!==n?e.content:"")+"</div>"})),o("avatar__camera",(function(e,t,i){return i("home-link",{mix:"avatar__camera",href:home.addQueryToUrl(e.passportHost+"/profile/public",{origin:e.origin,retpath:e.retpath})})})),o("avatar__href",(function(e,t){var i="https://avatars.mds.yandex.net/get-yapic/"+(e.avatar_id||"0/0-0")+"/"+(e.avatar_size||"islands-middle");return t.csp&&!t.csp.stub&&t.csp.allowImg(i),i})),o("avatar__image",(function(e,t,i){var n,o,s=e.avatarSizes||(e.mods?{s:{"default":"islands-small","2x":"islands-retina-small"},m:{"default":"islands-34","2x":"islands-68"},l:{"default":"islands-middle","2x":"islands-retina-middle"}}[e.mods.size]:null)||{},r="avatar__image "+(e.imageMix||""),a=i("retina-scale")>=1.25,c="";e.avatarUrl?n=e.avatarUrl:(n=i("avatar__href",{avatar_id:e.avatarId,avatar_size:s["default"]}),s["2x"]&&(o=i("avatar__href",{avatar_id:e.avatarId,avatar_size:s["2x"]}))),n&&(c+="background-image:url("+(a&&o||n)+");"+(o?"background-image:-webkit-image-set(url("+n+") 1x, url("+o+") 1.25x);":""));var l=i("span",{mod:r,attrs:{style:c}});return e.mods&&e.mods["has-camera"]&&e.passportHost&&(l+=i("avatar__camera",e)),i("span",{mod:"avatar__image-wrapper",content:l})})),o("avatar",(function(e,t,i){var n=e.mix||"",o=e.mods||{},s=e.attrs||{};return i("home-link",{mix:n+=" "+home.getBEMClassname("avatar",{mods:o}),attrs:s,href:e.href,stat:e.stat,content:i("avatar__image",e)})})),o("home-link",(function(e,t,i){var n="a",o=e.attrs||{},s=e.mods||{},r=e.mix||"",a="";return o["class"]=home.getBEMClassname("home-link",{mix:r,mods:s}),e.href?o.href=e.href:n=e.tag||"span",e.title&&(o.title=e.title),e.role&&(o.role=e.role),e.tabindex&&(o.tabindex=e.tabindex),e.target&&(o.target=e.target),!o.target&&o.href&&i("new-tab-links__check",t)&&(o.target="_blank"),"_blank"===o.target&&"undefined"==typeof o.rel&&(o.rel="noopener"),a="<"+n,o&&(a+=home.getAttributes(o)),e.stat&&(a+=e.stat),e.js&&(a+=' data-bem="'+home.getBEMParams(e.js)+'"'),a+=">",e.inlineIcon&&(a+=e.inlineIcon),e.content&&(a+=e.content),a+="</"+n+">"})),o("span",(function(e,t,i){var n;return'<span class="'+(e.mod!==n?e.mod:"")+" "+(e.mix!==n?e.mix:"")+'"'+home.parseRules.bem(e,t,"attrs")+">"+(e.content!==n?e.content:"")+"</span>"})),o("div",(function(e,t,i){var n,o;return'<div class="'+(e.mix!==o?e.mix:"")+'"'+home.parseRules.bem(e,t,"attrs")+">"+(e.content!==o?e.content:t.content!==o?t.content:(n=i("content",e))!==o?n:"")+"</div>"})),o.cached("retina-scale__is-big",(function(e,t){return t("retina-scale")>=1.25})),o.cached("retina-scale",(function(e){return"number"==typeof devicePixelRatio?devicePixelRatio:e.UserDevice&&e.UserDevice.ratio&&parseFloat(e.UserDevice.ratio.replace("_","."))||1})),o.cached("new-tab-links__check",(function(e){return e&&e.media_footer&&e.media_footer.new_tab_links})),o("mix-tabber__panel",(function(e,t,i){var n;return'<div class="'+(e.block!==n?e.block:"")+"__panel"+(e.mix!==n?e.mix:"")+'" role="tabpanel" id="'+(e.id!==n?e.id:"")+"_panel_"+(e.key!==n?e.key:"")+'" data-key="'+(e.key!==n?e.key:"")+'"'+home.parseRules.bem(e,t,"attrs")+">"+(e.content!==n?e.content:"")+"</div>"})),o("mix-tabber__tab",(function(e,t,i){var n=e.attrs||{},o=e.mods||{},s=e.mix||"";return n.role="tab",i("home-link",{mix:s+=" "+home.getBEMClassname("mix-tabber__tab",{mods:o}),attrs:e.attrs,href:e.href,stat:e.stat,content:e.content})})),o("mix-tabber-loader__retry-button",(function(e,t,i){return i("button",{mods:e.buttonMods,mix:"mix-tabber-loader__retry-button "+e.block+"__retry-button",content:"  ",attrs:{"data-statlog":e.statRoot+".retry","data-key":e.key}})})),o("mix-tabber-loader__retry",(function(e,t,i){var n,o;return'<div class="mix-tabber-loader__retry '+(e.block!==o?e.block:"")+'__retry">   '+(((n=i("mix-tabber-loader__retry-button",e))!==o?n:"")+"</div>")})),o("datetime__date",(function(e,t,i){var n;return'<span class="datetime__date"><span class="datetime__day">'+(e.day!==n?e.day:"")+'</span><span class="datetime__month">'+(e.month!==n?e.month:"")+', </span><span class="datetime__wday">'+(e.wday!==n?e.wday:"")+" </span></span>"})),o("news__panel-content",(function(e,t,i){return Array.isArray(e.news)&&e.news.length?i("news__list-inner",e):"covid"===e.name?i("news__covid",e):(home.error({block:"news",message:"No content for tab "+e.name}),"")})),o("news__list-inner",(function(e,t,i){var n,o=e.nolinks,s=e.news,r=e.showIcons,a=e.newTabLinks,c=[];e.news.length>5&&(s=e.news.slice(0,4),c=e.news.slice(4));var l=i("news__list-content",{newsList:s,extraStatPath:"",hasAnimation:!1,nolinks:o,showIcons:r,statId:e.statid,newTabLinks:a});return n=i("list",{mix:"news__list",content:l,type:"o"}),c.length&&(n+=i("list",{mix:"news__list news__animation-list",content:i("news__list-content",{newsList:c,extraStatPath:"animation.",hasAnimation:!0,nolinks:o,showIcons:r,statId:e.statid,newTabLinks:a,startIndex:4})+i("news__height-spacer"),type:"o"})),n})),o("news__list-content",(function(e,t,i){var n=e.newsList,o=e.extraStatPath,s=e.hasAnimation,r=e.nolinks,a=e.newTabLinks,c=e.showIcons;return n.reduce((function(n,l,u){var d=e.statId+".links."+o+(u+1)+(l.ishot?".main":""),h=s&&0===u&&!e.shift?"list__item_fade_in":"",m=l.full,p="";return c?l.agency_name?(h+=" list__item_icon"+(l.ishot?"_hot":""),p=i("news__agency-icon-with-url",{agencyUrl:l.agency_logo,agencyTitle:l.agency_name,favoriteIcon:l.is_favorite?i("div",{mix:"news__agency-icon-favorite",content:i("div",{mix:"news__agency-icon-favorite-union"})+i("div",{mix:"news__agency-icon-favorite-sign",attrs:{title:"   "}})}):""})):l.ishot&&(h+=" list__item_icon_empty"+(l.ishot?"_hot":"")):l.ishot&&(h+=" list__item_hot"),s&&(h+=" news__animated-item"),l.is_favorite&&(h+=" list__item_favorite"),n+i("list__item",{mix:h,content:i("home-link",{href:!r&&l.href,content:i("span",{mod:"news__item-inner",content:(l.ishot?i("news__hot",{}):"")+p+i("span",{mod:"news__item-content",content:m})}),stat:t.stat.getAttr(d),mix:"list__item-content"+(p?" list__item-content_with-icon":""),mods:{black:"yes"},attrs:{"aria-label":m,target:a?"_blank":""}}),attrs:{value:s&&e.startIndex?u+e.startIndex+1:undefined}})}),"")})),o("news__height-spacer",(function(e,t,i){return'<span aria-hidden="true">&nbsp;</span>'})),o("news__loader",(function(e,t,i){return'<div class="news__loader"><div class="news__loader-line"></div><div class="news__loader-line"></div><div class="news__loader-line"></div><div class="news__loader-line"></div><div class="news__loader-line"></div></div>'})),o("news__hot",(function(e,t,i){return'<svg class="b-ico news__hot" focusable="false" aria-hidden="true" width="16" height="16"><path class="news__hot-icon" d="M4 9l6-8-1.7 6H12l-6 8 1.7-6"/></svg>'})),o("news__covid-chat-icon",(function(e,t,i){var n=home.rnd().substr(0,5);return e.icon?i("news__covid-chat-icon-layout",{mods:{id:n},id:n,icon:"//yastatic.net/s3/home/covid/block/"+e.icon+".svg",iconSkin:"//yastatic.net/s3/home/covid/block/"+e.icon+"_skin.svg"}):""})),o("news__covid",(function(e,t,i){var n=e.data&&e.data.blocks||[],o={},s="";return n.forEach((function(e,n){if(!e.title)return"";o[e.chat_id]||(o[e.chat_id]=[i("home-link",{mix:"news__covid-chat",mods:{gray:"yes"},content:i("span",{mix:"news__covid-chat-title",content:e.subtitle.toUpperCase()})+i("news__covid-chat-icon",e),href:e.url_subtitle,stat:t.stat.getAttr("news.covid.chanel",e.url_subtitle)})]),o[e.chat_id].push(i("news__covid-item",{title:i("home-link",{href:e.url,target:"_blank",title:e.title,mix:"news__covid-item-title-link",mods:{black:"yes"},stat:t.stat.getAttr("news.covid.item."+n,e.url),content:i("span",{mod:"news__covid-item-title",content:e.title})})}))})),n.forEach((function(e){o[e.chat_id]&&(s+=o[e.chat_id].join(""),delete o[e.chat_id])})),i("news__covid-layout",{items:s})})),o("news__covid-chat-icon-layout",(function(e,t,i){var n;return'<span class="'+home.parseRules.bem(e,t,"news__covid-chat-icon.class")+'"></span><style>.news__covid-chat-icon_id_'+(e.id!==n?e.id:"")+" { background-image: url("+(e.icon!==n?e.icon:"")+"); } .b-page_theme_content-text_light .news__covid-chat-icon_id_"+(e.id!==n?e.id:"")+" { background-image: url("+(e.iconSkin!==n?e.iconSkin:"")+"); }</style>"})),o("news__covid-item",(function(e,t,i){var n;return'<li class="news__covid-item">'+(e.title!==n?e.title:"")+" "+(e.subtitle!==n?e.subtitle:"")+"</li>"})),o("news__covid-layout",(function(e,t,i){return'<ul class="news__covid">'+(void 0!==e.items?e.items:"")+"</ul>"})),o("list__item",(function(e,t,i){return e.mix=e.mod&&e.mix?e.mix+" "+e.mod:e.mix||e.mod||"",i("list-item__layout",e)})),o("list",(function(e,t,i){return e.tag=e.type&&"o"===e.type?"ol":"ul",e.mix=e.mod&&e.mix?e.mix+" "+e.mod:e.mix||e.mod||"",i("list__layout",e)})),o("list-item__layout",(function(e,t,i){var n,o;return'<li class="'+home.parseRules.bem(e,t,"list__item.class")+'" '+home.parseRules.bem(e,t,"attrs")+">"+(e.content!==o?e.content:t.content!==o?t.content:(n=i("content",e))!==o?n:"")+"</li>"})),o("list__layout",(function(e,t,i){var n,o;return"<"+(e.tag!==o?e.tag:t.tag!==o?t.tag:(n=i("tag",e))!==o?n:"")+' class="'+home.parseRules.bem(e,t,"list.class")+'">'+(e.content!==o?e.content:t.content!==o?t.content:(n=i("content",e))!==o?n:"")+"</"+(e.tag!==o?e.tag:t.tag!==o?t.tag:(n=i("tag",e))!==o?n:"")+">"})),o("news__agency-icon-with-url",(function(e,t,i){return e.agencyUrl?i("news__agency-icon-with-url-layout",e):i("news__agency-icon-with-url-default",e)})),o("news__agency-icon-with-url-default",(function(e,t,i){var n;return'<div class="news__agency-icon news__agency-icon_image_yes">'+(e.favoriteIcon!==n?e.favoriteIcon:"")+'<div class="news__agency-icon-image-empty" title="'+(e.agencyTitle!==n?e.agencyTitle:"")+'"></div></div>'})),o("news__agency-icon-with-url-layout",(function(e,t,i){var n;return'<div class="news__agency-icon news__agency-icon_image_yes"><object class="news__agency-icon-image" title="'+(e.agencyTitle!==n?e.agencyTitle:"")+'" data="'+(e.agencyUrl!==n?e.agencyUrl:"")+'" type="image/png"><div class="news__agency-icon-image-empty"></div></object>'+(e.favoriteIcon!==n?e.favoriteIcon:"")+"</div>"})),o("inline-stocks__head",(function(e){if(!e.col2&&!e.col4)return"";for(var t=[e.col2,e.col4],i="",n=0;n<t.length;n++)t[n]&&(i+='<th class="inline-stocks__cell" colspan="2">'+t[n]+"</th>");return'<tr class="inline-stocks__head">'+i+"</tr>"})),o("inline-stocks__t-title",(function(e,t,i){var n,o;switch(e.type){case"currency":n="",o="";break;case"cash":n="",o=""}return i("inline-stocks__head",{col2:n,col4:o})})),o("inline-stocks__date",(function(e,t,i){var n=e.datetime||e.time||e.date;return n?i("inline-stocks__cell_datetime",{value:n}):""})),o("inline-stocks__delta",(function(e,t,i){var n,o,s=e.data,r="";return e.klimit&&(o="     %d%%".replace(/%d%(%)/,e.klimit+"$1")),n=Number((s.delta||"").replace("","-").replace(/[+%]/g,"").replace(",",".")),s.is_hot?n>0?r="up":n<0&&(r="down"):r="small",s.delta?i("inline-stocks__cell_type_delta",{mods:{type:"delta",hidden:e.hidden?"yes":"",change:r},delta:(s.delta||"").replace("%",'<span class="inline-stocks__cell-delta-prc">%</span>'),title:o&&s.is_hot?o:"",a11y:String(s.delta).replace("","-")}):""})),o("inline-stocks__rows-by-type",(function(e,t,i){var n=e.klimit;switch(e.type){case"cash":return e.rows.map((function(e){return i("inline-stocks__val",e)})).join("");case"currency":return e.rows.map((function(e,t){return(t?i("inline-stocks__delta",{data:e,klimit:n}):"")+i("inline-stocks__val",e)})).join("");case"indexes":var o=e.rows[0];return i("inline-stocks__date",o)+i("inline-stocks__delta",{data:o,klimit:n})+i("inline-stocks__val",o)}})),o("inline-stocks__replaceCaps",(function(e){return e.text.replace(/<(\w)>([^<]+)<\/\1>/g,(function(e,t,i){switch(t){case"c":return'<span class="inline-stocks__caps">'+i+"</span>";case"d":return'<span class="inline-stocks__numbers">'+i+"</span>";default:return e}}))})),o("inline-stocks__block-content",(function(e,t,i){for(var n="",o=e.rows,s=0,r=o.length;s<r;s++){var a=o[s],c=t.l10n("rates.newalt."+a.alt).replace(/%s/,a.text);n+='<tr class="inline-stocks__row_id_'+a.id+'" data-klimit="'+a.klimit+'" data-precision="'+a.precision+'"><td class="inline-stocks__row-title">'+i("home-link",{href:!t.nolinks&&a.href,mix:"home-link_blue_yes",attrs:{title:c,"data-statlog":"news_rates_manual.popup."+a.id},content:i("inline-stocks__replaceCaps",{text:a.text_caps})})+(a.nscale?i("inline-stocks__row-nscale",{nscale:a.nscale}):"")+"</td>"+i("inline-stocks__rows-by-type",{type:e.type,rows:a.data,klimit:a.klimit})+"</tr>"}return i("inline-stocks__block-content-layout",{text:e.text,type:e.type,id:e.i,content:i("inline-stocks__t-title",e)+n})})),o("inline-stocks__grid",(function(e,t,i){var n,o=e.data,s=o.length/2,r="",a="";for(n=0;n<s;n++)r+='<div class="inline-stocks__grid-item inline-stocks__grid-item_first">'+o[2*n]+"</div>",a+=o[2*n+1]?'<div class="inline-stocks__grid-item">'+o[2*n+1]+"</div>":"";return i("inline-stocks__grid-row",{columnLeft:r,columnRight:a})})),o("inline-stocks__tables",(function(e,t,i){var n,o=e.blocks;return o?(n=o.map((function(e,t){return e.i=t,"cash_rate"===e.type&&(e.type="cash"),i("inline-stocks__block-content",e)})),i("inline-stocks__grid",{data:n})):""})),o("inline-stocks__block-content-layout",(function(e,t,i){var n;return'<h2 class="inline-stocks__table-title">'+(e.text!==n?e.text:"")+'</h2><table class="inline-stocks__table inline-stocks__table_type_'+(e.type!==n?e.type:"")+" inline-stocks__table_id_"+(e.id!==n?e.id:"")+'">'+(e.content!==n?e.content:"")+"</table>"})),o("inline-stocks__grid-row",(function(e,t,i){var n;return'<tr class="inline-stocks__grid-row"><td>'+(e.columnLeft!==n?e.columnLeft:"")+"</td><td>"+(e.columnRight!==n?e.columnRight:"")+"</td></tr>"})),o("inline-stocks__row-nscale",(function(e,t,i){return'<span class="inline-stocks__row-nscale">'+(void 0!==e.nscale?e.nscale:"")+"</span>"})),o("inline-stocks__nscale",(function(e,t,i){var n,o;return'<span class="inline-stocks__nscale text_gray_yes">('+(e.nscale!==o?e.nscale:t.nscale!==o?t.nscale:(n=i("nscale",e))!==o?n:"")+")</span>"})),o("inline-stocks__val",(function(e,t,i){var n,o;return'<td><i class="inline-stocks__cell">'+(e.value!==o?e.value:t.value!==o?t.value:(n=i("value",e))!==o?n:"")+"</i></td>"})),o("inline-stocks__cell_datetime",(function(e,t,i){return'<td><i class="inline-stocks__cell_datetime" aria-hidden="true">'+(void 0!==e.value?e.value:"")+"</i></td>"})),o("inline-stocks__cell_type_delta",(function(e,t,i){var n;return'<td><span class="'+home.parseRules.bem(e,t,"inline-stocks__cell.class")+'" title="'+(e.title!==n?e.title:"")+'" aria-hidden="true">'+(e.delta!==n?e.delta:"")+'</span><span class="a11y-hidden">'+(e.a11y!==n?e.a11y:"")+"</span></td>"})),o("widget__save-buttons",(function(e,t,i){return i("div",{mix:"widget__buttons",content:i("div",{mix:"buttons-line",content:i("button",{mods:{theme:"pseudo-sharp",size:"line"},mix:"widget__reject",content:""})+i("button",{mods:{theme:"action-sharp",size:"line"},mix:"widget__accept",content:""})})+(e.yandex?"":i("div",{mix:"widget__warn",content:"       ."}))})})),o("button",(function(e,t,i){var n=e.mods||{},o="button",s=e.attrs||{};return e.url?o="a":e.tag&&(o=e.tag),n.theme||("yes"===n.pseudo?n.theme="pseudo":n.theme="normal"),s.role=s.role||"button",e.tabindex&&(s.tabindex=e.tabindex),e.url?(s.href=e.url,e.target?s.target=e.target:i("new-tab-links__check")&&(s.target="_blank"),n.disabled&&(s["aria-disabled"]=!0),"_blank"===s.target&&"undefined"==typeof s.rel&&(s.rel="noopener")):(s.type=e.type||"button",e.name&&(s.name=e.name),e.value&&(s.value=e.value),n.disabled&&(s.disabled="disabled")),"<"+o+' class="'+home.getBEMClassname("button",{mods:n,mix:e.mix})+' i-bem" data-bem="{&quot;button&quot;:{}}"'+home.getAttributes(s)+(e.stat||"")+'><span class="button__text">'+(e.content||"")+"</span>"+(e.afterContent||"")+"</"+o+">"})),o.cached("widget-control__stat-map",(function(){return{topnews:"news",services:"sites",geo:"maps"}})),o("widget-control",(function(e,t,i){return i("widget-control__layout",{mods:e.mods,js:{"widget-control":e.params},dropdown:{dropdown2:{}}})})),o("widget-control__layout",(function(e,t,i){return'<div class="'+home.parseRules.bem(e,t,"widget-control.class")+' i-bem" data-bem="'+home.parseRules.bem(e,t,"js")+'"><span class="widget-control__button widget-control__menu i-bem dropdown2 dropdown2_switcher_elem dropdown2__switcher" tabindex="0" title=" " data-bem="'+home.parseRules.bem(e,t,"dropdown.js")+'" role="button" aria-haspopup="true" aria-expanded="false"></span><span class="widget-control__button widget-control__show" tabindex="0" title=""></span></div>'})),o("menu__group",(function(e,t,i){var n=e.content,o=e.title?i("menu__group-title",{content:e.title}):"";return i("menu__group-layout",{content:o+n})})),o("menu__group-title",(function(e,t,i){return'<div class="menu__title" aria-hidden="true">'+(void 0!==e.content?e.content:"")+"</div>"})),o("menu__group-layout",(function(e,t,i){return'<div class="menu__group" role="group">'+(void 0!==e.content?e.content:"")+"</div>"})),o("menu__icon",(function(e,t,i){return i(e.block||"icon",{mix:home.getBEMClassname("menu__icon",e),mods:e.mods})})),o("icon",(function(e,t,i){var n=e||{},o={},s=n.url!==undefined,r=Object(n.attrs).style!==undefined,a=(r?n.attrs.style:"")+(s?";background-image:url('"+n.url+"');":"");return n.mods=n.mods||{},n.mods["has-glyph"]="yes",r&&(n.attrs.style=a),a&&(o.style=a),i("icon__html",{mods:n.mods,attrs:o,mix:n.mix,content:i("icon_glyph_"+n.mods.glyph)})})),o("icon__html",(function(e,t,i){return'<span class="'+home.parseRules.bem(e,t,"icon.class")+'" '+home.parseRules.bem(e,t,"attrs")+">"+(void 0!==e.content?e.content:"")+"</span>"})),o("icon_glyph_settings",(function(e,t,i){return'<svg focusable="false" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M3.051 3.05h.001l.371-.37a.4.4 0 0 1 .547-.019l.849.745a1.296 1.296 0 0 0 2.18-.904h.003l.073-1.127a.4.4 0 0 1 .4-.374H8V1v.001h.525a.4.4 0 0 1 .399.374l.074 1.127H9A1.296 1.296 0 0 0 10.3 3.75c.345 0 .658-.134.89-.353l.84-.736a.4.4 0 0 1 .546.018l.371.371h.002v.002l.37.37a.4.4 0 0 1 .019.547l-.744.85a1.297 1.297 0 0 0 .04 1.803c.223.222.527.364.864.377v.003l1.127.074a.4.4 0 0 1 .373.399V8H15V8h-.002v.525a.4.4 0 0 1-.373.4L13.498 9a1.3 1.3 0 0 0-.903 2.182h-.001l.744.85a.4.4 0 0 1-.018.546l-.371.372v.001l-.372.37a.4.4 0 0 1-.546.019l-.82-.717a1.296 1.296 0 0 0-1.833.01 1.296 1.296 0 0 0-.377.867h-.003l-.074 1.127a.4.4 0 0 1-.376.373H7.451a.4.4 0 0 1-.376-.373L7.002 13.5h-.003A1.296 1.296 0 0 0 5.7 12.25c-.352 0-.672.14-.906.368l-.825.722a.4.4 0 0 1-.547-.018l-.37-.371-.002-.001-.37-.372a.4.4 0 0 1-.019-.546l.745-.85a1.302 1.302 0 0 0-.904-2.181l-1.128-.076a.4.4 0 0 1-.373-.4v-.524L1 8l.001-.525a.4.4 0 0 1 .374-.4l1.127-.073v-.003A1.296 1.296 0 0 0 3.75 5.7c0-.342-.132-.654-.349-.886l-.74-.845a.4.4 0 0 1 .019-.546l.371-.371-.001-.002h.001zM8 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" fill="#000" fill-rule="nonzero"/></svg>'})),o("icon_glyph_hide",(function(e,t,i){return'<svg focusable="false" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><g fill="#000" fill-rule="nonzero"><path d="M10.445 2.536L8.423 5.763a.5.5 0 0 1-.847 0l-2.02-3.227A.35.35 0 0 1 5.851 2h4.296a.35.35 0 0 1 .297.536zM10.445 13.462l-2.022-3.227a.5.5 0 0 0-.847 0l-2.02 3.227a.35.35 0 0 0 .296.536h4.296a.35.35 0 0 0 .297-.536z"/><rect x="1" y="7" width="14" height="2" rx=".5"/></g></svg>'})),o("icon_glyph_hide2",(function(e,t,i){return'<svg focusable="false" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M2.917 4.332L1.293 2.707a1 1 0 1 1 1.414-1.414l12 12a1 1 0 0 1-1.414 1.414l-1.954-1.954A7.871 7.871 0 0 1 8 13.5C3.5 13.5.5 9.65.5 8c0-.897.886-2.443 2.417-3.668zm6.822 6.821l-1.06-1.06a2.2 2.2 0 0 1-2.772-2.772l-1.06-1.06a3.6 3.6 0 0 0 4.892 4.892zM6.123 2.729A7.784 7.784 0 0 1 8 2.5c4.5 0 7.5 3.85 7.5 5.5 0 .673-.5 1.713-1.397 2.709L11.595 8.2A3.6 3.6 0 0 0 7.8 4.405L6.123 2.73z"/></svg>'})),o("icon_glyph_geo",(function(e,t,i){return'<svg focusable="false" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M13.565 3.086l-3.992 9.98a.5.5 0 0 1-.95-.064L7.5 8.502l-4.5-1.124a.5.5 0 0 1-.065-.95l9.982-3.992a.5.5 0 0 1 .65.65z" fill="#000" fill-rule="nonzero"/></svg>'})),o("icon_glyph_delete",(function(e,t,i){return'<svg focusable="false" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M11 2h2.5a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1H5l.854-.854A.5.5 0 0 1 6.207 1h3.586a.5.5 0 0 1 .353.146L11 2zm1.015 11.843A1.25 1.25 0 0 1 10.768 15H5.232a1.25 1.25 0 0 1-1.247-1.157l-.694-9.255a.55.55 0 0 1 .549-.591l8.32-.002a.55.55 0 0 1 .549.591l-.694 9.257zM6.5 6a.5.5 0 0 0-.5.5v6a.5.5 0 1 0 1 0v-6a.5.5 0 0 0-.5-.5zm3 0a.5.5 0 0 0-.5.5v6a.5.5 0 1 0 1 0v-6a.5.5 0 0 0-.5-.5z" fill="#000" fill-rule="nonzero"/></svg>'})),o("i-install-download__content",(function(e,t,i){var n,o;return'<div class="'+home.parseRules.bem(e,t,"i-install-download__content.class")+'" '+home.parseRules.bem(e,t,"attrs")+' data-bem="'+home.parseRules.bem(e,t,"js")+'"><div class="i-install-download__target-pointer"><div class="i-install-download__arrow"><div class="i-install-download__stick"></div></div></div><div class="i-install-download__install-text">'+(e.text!==o?e.text:t.text!==o?t.text:(n=i("text",e))!==o?n:"")+'</div><div class="i-install-download__agreement">'+(e.legalText!==o?e.legalText:t.legalText!==o?t.legalText:(n=i("legalText",e))!==o?n:"")+' <a href="'+(e.legalLink!==o?e.legalLink:t.legalLink!==o?t.legalLink:(n=i("legalLink",e))!==o?n:"")+'" class="home-link home-link_gray_yes i-install-download__legal">'+(e.legalLinkText!==o?e.legalLinkText:t.legalLinkText!==o?t.legalLinkText:(n=i("legalLinkText",e))!==o?n:"")+"</a></div></div>"})),o("popup",(function(e){var t=e.mods||{},i=e.attrs||{};return t.theme=t.theme||"ffffff",t.autoclosable===undefined&&(t.autoclosable="yes"),t.adaptive===undefined&&(t.adaptive="yes"),t.animate===undefined&&(t.animate="yes"),e.zIndex&&(i.style=i.style||"",i.style+="z-index:"+e.zIndex),'<div class="i-bem '+home.getBEMClassname("popup",{mods:t,mix:e.mix})+'" data-bem="{&quot;popup&quot;:'+home.getBEMParams(e.js?e.js:[])+(e.jsMix?","+e.jsMix:"")+'}"'+home.getAttributes(i)+'><div class="'+home.getBEMClassname("popup__under",{mods:e.underMods,mix:e.underMix})+'"></div>'+(e.tail?'<i class="popup__tail"></i>':"")+(e.content?'<div class="'+home.getBEMClassname("popup__content",{mods:e.contentMods,mix:e.contentMix})+'"'+home.getAttributes(e.contentAttrs||{})+">"+e.content+"</div>":"")+("yes"===t["has-close"]?'<i class="popup__close"'+(e.statClose||"")+">"+(e.closeText?'<div class="popup__close-text">'+e.closeText+"</div>":"")+"</i>":"")+"</div>"})),o("teaser__last-nowrap",(function(e,t,i){var n=e.before||"",o=e.after,s=n.lastIndexOf(" "),r=s>-1?n.slice(0,s+1):"",a=s>-1?n.slice(s+1):n;return n?r+i("teaser__part",{part:a+o}):""})),o("teaser__age",(function(e,t,i){return e&&e.age_restriction?i("span",{mod:"teaser__age",content:e.age_restriction}):""})),o("teaser__inner-action",(function(e){return"download"===e.type||"extensions-download"===e.type})),o("teaser_types",(function(e){return{download:"download","extensions-download":"download"}[e]})),o("teaser__rtrim",(function(e){return e.replace(/(\s|&nbsp;|&ensp;|&emsp;|&thinsp;)+$/g,"")})),o("teaser__description",(function(e,t,i){var n,o=[],s=i("teaser__age",e);return e.text1&&o.push(i("teaser__part",{part:i("teaser__rtrim",e.text1)+(!e.text2||e.title1&&e.title2?s:"")})),!e.text2||e.text1&&e.title1&&e.title2||(e.url2?o.push(i("home-link",{href:e.url2,content:e.text2+s,mix:"teaser__nowrap",attrs:{target:"_blank",rel:"noopener"}})):o.push(i("teaser__part",{part:e.text2+s}))),(n=o.length?o.join("&#32;"):i("teaser__last-nowrap",{before:e.text,after:s}))?i("teaser__desc",{content:n}):""})),o("teaser__title",(function(e,t,i){var n,o,s=[],r=e.url,a=t.stat.getAttr(e.statPath+".title",e.url);if(o=e.text||e.text1||e.text2?"":i("teaser__age",e),e.title1&&s.push(i("teaser__part",{part:i("teaser__rtrim",e.title1)+(e.title2?"":o)})),e.title2&&s.push(i("teaser__part",{part:e.title2+o})),n=s.length?s.join("<br>"):i("teaser__last-nowrap",{before:e.title,after:o}))return i("header",{header__level:1,attrs:home.getAttributes({"class":"teaser__title"}),header__content:i("home-link",{href:r,content:n,stat:a,mix:"home-link_blue_yes teaser__link",attrs:i("teaser__inner-action",e)?{}:{target:"_blank",rel:"noopener"}})})})),o("teaser__image",(function(e,t,i){var n=i("teaser__inner-action",e),o={},s=t.UserDevice&&t.UserDevice.ratio,r=s&&i("retina-scale")>=1.25,a=e.img.url,c=e.img_retina&&e.img_retina.url;return e.id&&(o.id=e.id),!s&&c&&(o.srcset=c+" 1.25x"),i("home-link",{href:e.url,stat:t.stat.getAttr(e.statPath+".image",e.url),mix:"teaser__link",attrs:{target:n?"":"_blank",rel:n?"":"noopener",tabindex:"-1"},content:i("image",{mix:"teaser__image",src:r&&c?c:a,width:e.img.width,height:e.img.height,alt:e.alt,attrs:o})})})),o("teaser",(function(e,t,i){var n,o,s,r,a,c,l,u={},d={},h="";if(e.refreshedData)h=i("teaser__statpixel",{pixel:(c=e).refreshedData.linkHead+c.refreshedData.linkNext});else{if(!home.hasBlock(t.Teaser)||!(t.ads.hasBanner("teaser")||t.Teaser.mock||t.Teaser.value))return void home.warn({message:"no teaser block (v14)",block:"teaser",method:"teaser"});n=t.options&&t.options.disable_teaser_checks,o=t.options&&home.is(t.options.disable_teaser_errors),c=t.ads.banner("teaser")||t.Teaser.mock||t.Teaser.value,a=1e3*home.flags.get(t,"refresh_teaser_timeout")*60,(r=t.Banners&&t.Banners.params_request_yabs)&&a&&(s=home.makeUrl({host:"yabs.yandex."+t.MordaZone,path:"/page/"+r.pageid,query:r.query_args}),t.settingsJs.add("refresh",{refreshUrl:s,refreshTimeout:a},"teaser"),t.csp.allowConnect(s))}if("zombie"!==(l=Object.create(c)).type&&"inline"!==l.type&&"stream"!==l.type){if("stories"!==l.type)if(l.img&&l.img.width&&l.img.height){if(n||l.img&&("120"===l.img.width||"148"===l.img.width)&&"90"===l.img.height){if(l.url=l.url||l.url1,l.statPath="dist.teaser.link.yabs",d.install=i("teaser_types",l.type),d.source="yabs","download"===l.type||"extensions-download"===l.type){if(e.refreshedData)return;u.statPath="dist.teaser.link.yabs",u.url=l.url,l.raw_url&&t.csp.allowChild(l.raw_url),t.csp.allowChild(u.url),t.csp.allowImg(l.guide_image),t.csp.allowChild("//downloader.yandex.net"),t.csp.allowChild("https://*.cdn.yandex.net"),u.text=l.install_text,u.counters={click:l.install_yes},u.mods={position:l.position,image:"right-top"===l.position&&l.guide_image?"yes":""},u.attrs={style:"right-top"===l.position&&l.guide_image?"background-image: url("+l.guide_image+");":""},u.legalText=l.legal.text,u.legalLink=l.legal.link,u.legalLinkText=l.legal.linkText,u.bannerid=l.bannerid?"0201"+l.bannerid:"",l.paas&&(u.paas=l.paas)}for(var m in!l.bannerid||"extensions-landing"!==l.type&&"extensions-download"!==l.type||(u.bannerid="0201"+l.bannerid,u.yaCounterId=l.metrikaCounter),u.counters)u.counters.hasOwnProperty(m)&&t.csp.allowImg(u.counters[m]);return i("teaser__layout",{js:u,mods:d,statPixel:h,content:i("teaser__image",l)+i("teaser__title",l)+i("teaser__description",l)})}home.warn({message:"[teaser_size][v14] Incorrect teaser size",block:"teaser",method:"teaser",additional:{teaser:c}})}else o||home.warn({message:"[teaser][v14] No img in teaser, will not show",block:"teaser",method:"teaser",additional:{teaser:c}})}else home.warn({message:l.type+"-teaser is not supported",block:"teaser"})})),o("teaser__statpixel",(function(e,t,i){return'<img aria-hidden="true" src="'+(void 0!==e.pixel?e.pixel:"")+'" alt="" class="teaser__statpixel">'})),o("teaser__desc",(function(e,t,i){return'<div class="teaser__description">'+(void 0!==e.content?e.content:"")+"</div>"})),o("teaser__part",(function(e,t,i){return'<span class="teaser__nowrap">'+(void 0!==e.part?e.part:"")+"</span>"})),o("teaser__layout",(function(e,t,i){var n;return'<div class="'+home.parseRules.bem(e,t,"teaser.class")+' i-bem" role="complementary" aria-label="" data-bem="{&quot;teaser&quot;:'+home.parseRules.bem(e,t,"js")+'}"><div class="teaser__content">'+(e.content!==n?e.content:"")+"</div>"+(e.statPixel!==n?e.statPixel:"")+"</div>"})),o("stories-teaser",(function(e,t,i){var n=e.stories;if(n&&n.length){t.settingsJs.add("key",t.sk,"stories");var o=n.map((function(e){return e.id})).join(",");return i("stories-teaser__layout",{content:n.map((function(e,t){return e.index=t,e.ids=o,0===t&&(e.iconMix="stories-teaser__item-play-icon_visible"),i("stories-teaser__item",e)})).join("")})}})),o("image",(function(e,t){var i=e.attrs||{},n="";return i.src=e.src||"//yastatic.net/lego/_/La6qi18Z8LwgnZdsAr1qy1GwCwo.gif",i.alt=e.alt||"",e.width&&(i.width=e.width),e.height&&(i.height=e.height),t.csp&&!t.csp.stub&&t.csp.allowImg(i.src),!1!==e.bem&&(n=' class="'+home.getBEMClassname("image",e)+'"'),"<img"+n+home.getAttributes(i)+"/>"})),o("header",(function(e,t,i){var n,o;return"<h"+(e.header__level!==o?e.header__level:t.header__level!==o?t.header__level:(n=i("header__level",e))!==o?n:"")+(e.attrs!==o?e.attrs:t.attrs!==o?t.attrs:(n=i("attrs",e))!==o?n:"")+">"+(e.header__content!==o?e.header__content:t.header__content!==o?t.header__content:(n=i("header__content",e))!==o?n:"")+"</h"+(e.header__level!==o?e.header__level:t.header__level!==o?t.header__level:(n=i("header__level",e))!==o?n:"")+">"})),o("input__ahead",(function(e,t,i){return'<div class="input__ahead"><input class="input__ahead-hint" type="text" disabled="disabled" aria-hidden="true"><span class="input__ahead-filler"></span><div class="input__ahead-hintholder"></div></div>'})),o("voice-search-popup__buttons",(function(e,t,i){return i("button",{mods:{size:"m",theme:"action"},mix:"voice-search-popup__continue-button voice-search-popup__error-button",content:" ",attrs:{"data-statlog":"voice.popup.continue-search"}})})),o("voice-search-popup",(function(e,t,i){return i("voice-search-popup__layout",{js:{"voice-search-popup":{}},startLetters:"...".split("").map((function(e,t,n){return i("voice-search-popup__start-text-span",{letter:e,delay:.3/n.length*t,duration:.3})})).join(""),errorButtons:i("voice-search-popup__buttons",e),showMicHelper:e.showMicHelper})})),o("voice-search-popup__start-text-span",(function(e,t,i){var n;return'<span class="voice-search-popup__letter" style="-webkit-animation-delay: '+(e.delay!==n?e.delay:"")+"s; -webkit-animation-duration: "+(e.duration!==n?e.duration:"")+"s; animation-delay: "+(e.delay!==n?e.delay:"")+"s; animation-duration: "+(e.duration!==n?e.duration:"")+'s;">'+(e.letter!==n?e.letter:"")+"</span>"})),o("voice-search-popup__text",(function(e,t,i){return'<div class="voice-search-popup__text"></div>'})),o("voice-search-popup__layout",(function(e,t,i){var n,o;return'<div class="voice-search-popup__paranja" data-statlog="voice.popup.paranja"></div><div class="voice-search-popup voice-search-popup_state_closed i-bem" data-bem="'+home.parseRules.bem(e,t,"js")+'" data-statlog="voice.popup.popup"><div class="voice-search-popup__close" data-statlog="voice.popup.close"></div><div class="voice-search-popup__content"><div class="voice-search-popup__init"></div><div class="voice-search-popup__start">'+(e.startLetters!==o?e.startLetters:"")+'</div><div class="voice-search-popup__error"><div class="voice-search-popup__title voice-search-popup__error-title"></div><div class="voice-search-popup__subtitle voice-search-popup__error-subtitle"></div><div class="voice-search-popup__error-actions">'+(e.errorButtons!==o?e.errorButtons:"")+"</div></div>"+(((n=i("voice-search-popup__text",e))!==o?n:"")+'<div class="voice-search-popup__indicator"></div>')+(((n=i("voice-search-popup__access",e))!==o?n:"")+"</div></div>")})),o("voice-search-popup__access",(function(e,t,i){if(e.showMicHelper)return i("voice-search-popup__access-layout",e)})),o("voice-search-popup__buttons",(function s(e,t,i){return i(s.base,e)+i("button",{mods:{size:"m"},mix:"voice-search-popup__help-button voice-search-popup__error-button",url:"https://yandex.ru/support/search/how-to-search/voice-search.html",content:"  ",target:"_blank",attrs:{"data-statlog":"voice.popup.help-button"}})})),o("voice-search-popup__access-layout",(function(e,t,i){return'<div class="voice-search-popup__access"><div class="voice-search-popup__title">   </div><div class="voice-search-popup__subtitle">     ,       </div></div>'})),o("home-tabs3__more-tabs-list",(function(e,t,i){return e.list.map((function(n){var o=n.id,s=i("home-link",{href:n.href,mix:"home-tabs3__more-link home-link_black_yes"+(n.search?" home-tabs3__search":""),content:n.title,attrs:{"data-id":o},stat:t.stat.getAttr("tabsPopup."+o)});return i("home-tabs3__more-item",{content:s,mix:e.mix})})).join("")})),o("home-tabs3__more-tabs-bottom",(function(e,t,i){return i("home-tabs3__more-tabs-list",{list:e.bottom,mix:" home-tabs3__more-item_bottom"})})),o("home-tabs3__more-tabs-top",(function(e,t,i){return i("home-tabs3__more-tabs-list",{list:e.top})})),o("home-tabs3__more-item",(function(e,t,i){var n;return'<div class="home-tabs3__more-item'+(e.mix!==n?e.mix:"")+'" role="menuitem">'+(e.content!==n?e.content:"")+"</div>"})),o("home-tabs3__more",(function(e,t,i){var n;return'<div class="home-tabs3__more"><div class="home-tabs3__more-top">'+(e.top!==n?e.top:"")+'</div><div class="home-tabs3__more-bottom">'+(e.bottom!==n?e.bottom:"")+"</div></div>"})),o("direct-close-block",(function(e,t,i){var n={},o=t.cls.full("direct-close-block"),s=e.idleTheme||"light",r=e.closingTheme||"light",a={abuseUrl:e.abuseUrl,statName:e.statName,sendStat:e.sendStat};if(e.isDark&&(s="dark",r="dark"),e.theme=e.theme||t.cls.part("direct"),n.mod=o+"_"+e.theme,n.mod+=t.cls.full(" direct-close-block_idle-theme_"+s),n.mod+=t.cls.full(" direct-close-block_closing-theme_"+r),n.js={},n.js[o]={name:o,id:e.directId},e.clientOnly)n.js[o].data=a;else{var c={};c[e.directId]={closeData:a},t.settingsJs.add("data",c,"direct")}return e.isTouch||(n.tooltip=i("direct-close-block__tooltip")),i("direct-close-block__layout",n)})),o("direct-close-block__close-block",(function(e,t,i){return'<div class="'+home.parseRules.cls(e,t,"direct-close-block__close-popup")+'"><div class="'+home.parseRules.cls(e,t,"direct-close-block__close-popup-content-wrapper")+'"><div class="'+home.parseRules.cls(e,t,"direct-close-block__close-popup-content")+'"><span class="'+home.parseRules.cls(e,t,"direct-close-block__close-popup-capture")+'"> :</span>'+(void 0!==e.buttons?e.buttons:"")+"</div></div></div>"})),o("direct-close-block__confirm-block",(function(e,t,i){return'<div class="'+home.parseRules.cls(e,t,"direct-close-block__confirm-popup")+'"><div class="'+home.parseRules.cls(e,t,"direct-close-block__confirm-popup-content")+'"><div class="'+home.parseRules.cls(e,t,"direct-close-block__check-icon")+'"></div>,  </div></div>'})),o("direct-close-block__layout",(function(e,t,i){var n;return'<div class="'+home.parseRules.cls(e,t,"direct-close-block")+" "+home.parseRules.cls(e,t,"direct-close-block_state_idle")+" "+(e.mod!==n?e.mod:"")+' i-bem" data-bem="'+home.parseRules.bem(e,t,"js")+'"><div class="'+home.parseRules.cls(e,t,"direct-close-block__close-button")+'"><div class="'+home.parseRules.cls(e,t,"direct-close-block__close-icon-wrapper")+'"><div class="'+home.parseRules.cls(e,t,"direct-close-block__close-icon")+'"></div></div>'+(e.tooltip!==n?e.tooltip:"")+"</div></div>"})),o("direct-close-block__tooltip",(function(e,t,i){return i("direct-close-block__tooltip-layout")})),o("direct-close-block__tooltip-layout",(function(e,t,i){return'<div class="'+home.parseRules.cls(e,t,"direct-close-block__tooltip")+'"><div class="'+home.parseRules.cls(e,t,"direct-close-block__tooltip-triangle")+'"></div><div class="'+home.parseRules.cls(e,t,"direct-close-block__tooltip-content")+'"> </div></div>'})),o("b-banner__link",(function(e,t,i){var n;return'<a class="'+home.parseRules.cls(e,t,"b-banner__link")+'" href="'+(e.url!==n?e.url:"")+'" target="_blank" rel="noopener">'+(e.content!==n?e.content:"")+"</a>"})),o("b-banner__iframe",(function(e,t,i){var n;return'<iframe class="'+home.parseRules.cls(e,t,"b-banner__iframe")+'" name="'+(e.name!==n?e.name:"")+'" src="'+(e.src!==n?e.src:"")+'" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe>'})),o("b-banner__img",(function(e,t,i){return'<img class="'+home.parseRules.cls(e,t,"b-banner__image")+'"'+home.parseRules.bem(e,t,"attrs")+">"})),o.cached("widgets__check-arrow-middle",(function(e){var t=e.Widgets&&e.Widgets.NotEmptyColumns&&!e.Widgets.NotEmptyColumns.Column1&&!e.Widgets.NotEmptyColumns.Column2,i=e.Widgets&&e.Widgets.NotEmptyColumns&&!e.Widgets.NotEmptyColumns.Column3&&!e.Widgets.NotEmptyColumns.Column4&&!e.Widgets.NotEmptyColumns.Column5,n=e.blocks&&e.blocks[0],o=n&&"topnews"===n[0]&&home.hasBlock(e.Topnews)&&0===e.Topnews.tabs.length;return e.Skin||e.SkinsCatalog&&"default"!==e.DefskinArg||o||t&&i})),o.cached("stream-url__fromblock-prefix",(function(){return"main_"})),o("hidden-blocks-popup__content",(function(e,t,i){var n=Math.ceil(e.length/2),o=e.map((function(e){return i("hidden-blocks-popup__item",{layoutName:e.layoutName,tumbler:i("tumbler",{mods:{size:"n",tone:"grey",theme:"normal",view:"default","no-wrap":"yes"},content:[{side:"right",content:i("hidden-blocks-popup__item-label",{title:e.title,desc:e.desc})}]})})})),s=o.slice(0,n),r=o.slice(n);return i("hidden-blocks-popup__layout",{left:s.join(""),right:r.join(""),cancel:i("button",{mix:"hidden-blocks-popup__button hidden-blocks-popup__cancel",mods:{theme:"normal-sharp",size:"line"},content:""}),submit:i("button",{mix:"hidden-blocks-popup__button hidden-blocks-popup__submit",mods:{theme:"action-sharp",size:"line"},content:""})})})),o("hidden-blocks-popup__item-label",(function(e,t,i){var n;return'<span class="hidden-blocks-popup__item-title">'+(e.title!==n?e.title:"")+'</span><span class="hidden-blocks-popup__item-desc">'+(e.desc!==n?e.desc:"")+"</span>"})),o("hidden-blocks-popup__item",(function(e,t,i){var n;return'<div class="hidden-blocks-popup__item" data-layout-name="'+(e.layoutName!==n?e.layoutName:"")+'">'+(e.tumbler!==n?e.tumbler:"")+"</div>"})),o("hidden-blocks-popup__layout",(function(e,t,i){var n,o;return'<div class="hidden-blocks-popup i-bem" data-bem="{&quot;hidden-blocks-popup&quot;:{}}"><div class="hidden-blocks-popup__inside"><h1 class="hidden-blocks-popup__title">  </h1><div class="hidden-blocks-popup__content"><div class="hidden-blocks-popup__column">'+(e.left!==o?e.left:"")+'</div><div class="hidden-blocks-popup__column">'+(e.right!==o?e.right:"")+'</div></div></div><div class="hidden-blocks-popup__buttons buttons-line buttons-line_border-bottom_no">'+(e.cancel!==o?e.cancel:"")+(e.submit!==o?e.submit:"")+"</div></div>"+((n=i("modal__close",e))!==o?n:"")})),o("modal",(function(e,t,i){return i("popup2",{jsMix:{modal:{}},mix:home.getBEMClassname("modal",e),content:i("modal__layout",{content:e.content}),zIndexGroupLevel:e.zIndexGroupLevel||20,mods:{autoclosable:e.mods&&e.mods.autoclosable}})})),o("modal__layout",(function(e,t,i){return'<div class="modal__table"><div class="modal__cell"><div class="modal__content">'+(void 0!==e.content?e.content:"")+"</div></div></div>"})),o("modal__close",(function(e,t,i){return'<div class="modal__close" role="button" tabindex="0" aria-label=""></div>'})),o("tumbler",(function(e,t,i){var n=e.id||home.rnd(),o=e.content===undefined?[]:[].concat(e.content),s="",r="",a=function(e){"left"!==e.side&&"right"!==e.side&&home.error("tumbler:   option    side   left  right"),"left"===e.side&&(s=i("tumbler__option",e)),"right"===e.side&&(r=i("tumbler__option",e))},c=e.mods||{};c.view||(c.view="classic"),o[0]&&a(o[0]),o[1]&&a(o[1]);var l={values:[s.value||"false",r.value||"true"],view:c.view,name:e.name||n,leftId:s?"left"+n:undefined,rightId:r?"right"+n:undefined,tabindex:e.tabindex||0,checked:"yes"===c.checked,disabled:"yes"===c.disabled};return i("span",{mod:home.getBEMClassname("tumbler",{mix:"i-bem"+(e.mix?" "+e.mix:""),mods:c}),attrs:{"data-bem":home.getBEMParams({tumbler:home.deepExtend({live:!1},e.js||{})})},content:s+i("tumbler__box",l)+r+i("tumbler__input",l)})})),o("tumbler__box",(function(e,t,i){return i("span",{mod:"tumbler__box",content:i("tumbler__sticker",{mods:{position:"left"},content:i("tumbler__sticker-label",{content:""})})+i("tumbler__sticker",{mods:{position:"right"},content:i("tumbler__sticker-label",{content:""})})+i("button2",{js:{prvntKeys:["ENTER"],clickKeys:["SPACE"]},mods:{view:"classic"===e.view?"classic":undefined,theme:"normal",disabled:e.disabled?"yes":undefined},tabindex:e.tabindex,attrs:{"aria-labelledby":e.leftId||e.rightId,"aria-pressed":e.checked},mix:"tumbler__button"})})})),o("tumbler__input",(function(e,t,i){var n=e.checked?e.rightId||e.leftId:e.leftId||e.rightId;return i("tumbler__input-layout",{attrs:{"data-bem":home.getBEMParams({tumbler__input:{_values:e.values}}),name:e.name,checked:e.checked,value:e.values[Number(e.checked)],disabled:e.disabled,tabindex:-1,autocomplete:"off","aria-hidden":"true","aria-labelledby":n}})})),o("tumbler__input-layout",(function(e,t,i){return'<input type="checkbox" class="tumbler__input"'+home.parseRules.bem(e,t,"attrs")+">"})),o("tumbler__sticker",(function(e,t,i){return i("div",{mix:home.getBEMClassname("tumbler__sticker",{mods:e.mods}),attrs:{"aria-hidden":"true"},content:e.content})})),o("tumbler__sticker-label",(function(e,t,i){return i("div",{mix:"tumbler__sticker-label",content:e.content})})),o("tumbler__option",(function(e,t,i){return i("span",{mod:home.getBEMClassname("tumbler__label",{mods:{side:e.side}}),content:i("tumbler__text",{side:e.side,mix:e.textMix,content:e.content})})})),o("tumbler__text",(function(e,t,i){return i("span",{mod:home.getBEMClassname("tumbler__text",{mods:{side:e.side},mix:e.mix}),content:e.content})})),o("covid-speed__popup",(function(e,t,i){var n=[],o="",s="badge"===e.from?["cases","new_cases","cured","deaths"]:["new_cases","cured","deaths","cases"],r=new Date(e.date),a=r.getMonth()+1,c=r.getDate();return"badge"===e.from&&(o=i("covid-speed-histogram",{mix:"covid-speed__popup-histogram",columns:e.dates,columnWidth:2,columnMargin:2,columnBorderRadius:!e.disableColumnBorderRadius&&1,chartHeight:34})),s.forEach((function(t){e[t]>=0&&n.push(i("covid-speed__popup-item",{title:home.l10n("covid.speed."+t),count:home.formatNumber(e[t])}))})),i("covid-speed__popup-layout",{headText:r?"  %day %month".replace("%day",c).replace("%month",t.l10n("month_accus."+a)):"",items:n.join(""),histogram:o,mods:{from:e.from}})})),o("covid-speed__popup-item",(function(e,t,i){var n;return'<div class="'+home.parseRules.bem(e,t,"covid-speed__popup-item.class")+'"><div class="covid-speed__popup-item-title">'+(e.title!==n?e.title:"")+'</div><div class="covid-speed__popup-item-count">'+(e.count!==n?e.count:"")+"</div></div>"})),o("covid-speed__popup-layout",(function(e,t,i){var n;return'<div class="'+home.parseRules.bem(e,t,"covid-speed__popup.class")+'">'+(e.histogram!==n?e.histogram:"")+'<div class="covid-speed__popup-head">'+(e.headText!==n?e.headText:"")+'</div><div class="covid-speed__popup-items">'+(e.items!==n?e.items:"")+"</div></div>"})),o("covid-speed-histogram",(function(e,t,i){var n=t.BrowserDesc||{},o="MSIE"===n.BrowserName||"Edge"===n.BrowserName,s=e.columns.map((function(t,n){o&&(e.columnBorderRadius=null);var s=(100*t.ratio_of_max).toFixed(1);return i("covid-speed-histogram__column",{attrs:{x:(e.columnWidth+e.columnMargin)*n,y:(100-s).toFixed(1)+"%",width:e.columnWidth,height:s+"%",rx:e.columnBorderRadius,ry:e.columnBorderRadius,fill:t.color,"data-date":e.addDataDate&&t.date}})}));return i("covid-speed-histogram__layout",{mix:e.mix||"",columns:s.join(""),attrs:{width:(e.columnWidth+e.columnMargin)*s.length-e.columnMargin,height:e.chartHeight}})})),o("covid-speed-histogram__column",(function(e,t,i){return"<rect "+home.parseRules.bem(e,t,"attrs")+"></rect>"})),o("covid-speed-histogram__layout",(function(e,t,i){return'<svg xmlns="http://www.w3.org/2000/svg" class="'+home.parseRules.bem(e,t,"covid-speed-histogram.class")+'" '+home.parseRules.bem(e,t,"attrs")+">"+(void 0!==e.columns?e.columns:"")+"</svg>"})),o("services-new__more-popup",(function(e,t,i){var n="",o=e.fullList.map((function(e,n){return e.iconSrc=i("services-new__item-icon-src",{service:e,isDark:!1}),i("services-new__item",{mix:" services-new__more-popup-item",item:e,stat:t.stat.getAttr("services_new.popup.item."+e.service+"."+n)})})).join("");return e.bottomLinks&&e.bottomLinks.length&&(n=e.bottomLinks.map((function(e,n){return i("home-link",{content:e.text,href:e.url,mix:"services-new__more-popup-bottom-link",stat:t.stat.getAttr("services_new.popup.bottom_link."+n),mods:{black:"yes"}})})).join("")),i("services-new__more-popup-content",{services:o,bottomLinks:n})})),o("services-new__more-popup-content",(function(e,t,i){var n;return'<div class="services-new__more-popup-content"><div class="services-new__more-popup-close" role="button" tabindex="0" title=""></div><div class="services-new__more-popup-services">'+(e.services!==n?e.services:"")+'</div><div class="services-new__more-popup-bottom-links">'+(e.bottomLinks!==n?e.bottomLinks:"")+"</div></div>"})),o("services-new__item-icon-src",(function(e,t,i){var n="boolean"==typeof e.isDark?e.isDark:i("services-new__is-dark");return t.getStaticURL.getHost()+"/s3/home/services/block/"+e.service.icon+(n?"_skin":"")+".svg"})),o("services-new__item-icon",(function(e,t,i){var n=e.iconSrc||i("services-new__item-icon-src",{service:e});return i("div",{mix:home.getBEMClassname("services-new__icon",{mix:e.mix||""}),attrs:{style:home.makeStyle({"background-image":"url("+n+")"})}})})),o("services-new__item",(function(e,t,i){if(!e.item||!e.item.text||!e.item.url)return home.error({block:"services-new",message:"Incorrect item data",method:"services-new__item",additional:{item:e.item}}),"";var n=e.item,o=e.attrs||{},s=e.icon||i("services-new__item-icon",n),r=e.mix||"",a=e.mods||{};return o["data-id"]=n.service,a.search=n.search&&"yes",i("home-link",{mods:{black:"yes"},mix:home.getBEMClassname("services-new__item",{mix:r,mods:a}),href:n.url,attrs:o,stat:e.stat,content:s+i("div",{mix:"services-new__item-title",content:n.text})})})),o("desk-notif__rate-chart",(function(e,t,i){var n,o,s,r,a=e.width||50,c=e.heigth||16,l=e.values,u=Math.min.apply(Math,l),d=Math.max.apply(Math,l),h=Math.floor((a-3-3)/(l.length-1)),m=[];for(s=0,r=l.length;s<r;s++)n=s*h+3,o=c-3-Math.floor((l[s]-u)*(c-6)/(d-u)),m.push([n,o]);return i("desk-notif-card__rate-image",{width:a,height:c,line:i("desk-notif-card__rate-line",{points:m.map((function(e){return e[0]+","+e[1]})).join(" ")}),label:e.text})})),o("desk-notif-card__rate-line",(function(e,t,i){return'<polyline class="desk-notif-card__rate-line" fill="none" stroke-width="1" stroke-linecap="round" points="'+(void 0!==e.points?e.points:"")+'"/>'})),o("desk-notif-card__rate-image",(function(e,t,i){var n;return'<svg class="desk-notif-card__rate-image" width="'+(e.width!==n?e.width:"")+'" height="'+(e.height!==n?e.height:"")+'">'+(e.line!==n?e.line:"")+"</svg>"})),o("desk-notif-card__inner",(function(e,t,i){var n="";return n+=e.link||"",n+=e.title?i("desk-notif-card__title",e):"",n+=e.details?i("desk-notif-card__details",e):"",(e.iconSrc||e.iconClass)&&(n+=i("desk-notif-card__icon",{iconClass:e.iconClass||"",attrs:e.iconSrc?{style:home.makeStyle({"background-image":"url("+t.getStaticURL.getAbsolute(e.iconSrc)+")"})}:""})),n+=e.extraElems||"",n+=e.switcher||""})),o("desk-notif-card__icon",(function(e,t,i){return'<div class="desk-notif-card__icon '+(void 0!==e.iconClass?e.iconClass:"")+'" '+home.parseRules.bem(e,t,"attrs")+"></div>"})),o("desk-notif-card__details",(function(e,t,i){return'<div class="'+home.parseRules.bem(e,t,"detailsDesc.desk-notif-card__details.class")+'">'+(void 0!==e.details?e.details:"")+"</div>"})),o("desk-notif-card__title",(function(e,t,i){return'<div class="'+home.parseRules.bem(e,t,"titleDesc.desk-notif-card__title.class")+'">'+(void 0!==e.title?e.title:"")+"</div>"})),o("route__api-url",(function(e,t){function i(e){return e.longitude!==undefined&&e.latitude!==undefined?e.longitude+","+e.latitude:"string"==typeof e?e:void home.warn({message:"Incorrect format for point from route. Got something wrong instead Object.ll Object.lt or string.",block:"route",method:"route__api-url",additional:{point:e}})}var n=i(e.start),o=i(e.finish),s=e.transit,r=s&&s.length?s.map(i).join("~"):"",a=t.TestingInstance&&t.Getargshash&&t.Getargshash.geohelperMocks||"",c=e.transit&&e.transit.length&&!r;if(n&&o&&!c)return"https://"+t.GeohelperHost+"/geohelper/api/v1/router?points="+n+"~"+o+"&locale="+t.Locale+"&domain="+t.MordaZone+"&feature=bypass_first"+(r?"&via="+r:"")+(a?"&usemock="+a:"")+"&from="+e.from||t.MordaContent})),o("desk-notif-card__zen-layout",(function(e,t,i){var n;return(e.link!==n?e.link:"")+'<div class="desk-notif-card__zen desk-notif-card__icon"></div><div class="desk-notif-card__zen-domain desk-notif-card__style_bold">'+(e.domainTitle!==n?e.domainTitle:"")+'</div><div class="desk-notif-card__zen-text desk-notif-card__style_text">'+(e.title!==n?e.title:"")+"</div>"})),o("desk-notif-card__stream-details",(function(e,t,i){var n=e.year&&e.subtitle,o=e.watched_object?"  &laquo;"+e.watched_object+"&raquo;":"  ",s=e.thumb?i("desk-notif-card__stream-thumbnail",{thumb:e.thumb}):"",r=i("stream-url",{fromBlock:"desk-notif-stream",streamId:e.content_id,streamChannel:e.channel_id,frontendVhReqId:e.frontendVhReqId,recommenderReqId:e.recommenderReqId});return i("desk-notif-card__stream-content",{link:e.isClient?i("home-link",{mix:"desk-notif-card__link",href:r,stat:t.stat.getAttr("notifications.stream.card",r,{customParams:{content_id:e.content_id}}),attrs:{target:"_blank"}}):"",title:e.title,subtitle:e.subtitle,year:e.year,reference:e.from_default||s?"":o,thumbnail:s,mods:{separator:n?"yes":"",reference:e.from_default||s?"no":"",font:"new","two-line":"yes",thumb:s?"yes":""}})})),o("desk-notif-card__stream-thumbnail",(function(e,t,i){return'<div class="desk-notif-card__stream-thumb" style="background-image: url(\''+(void 0!==e.thumb?e.thumb:"")+'\')"><div class="desk-notif-card__stream-thumb-play"></div></div>'})),o("desk-notif-card__stream-content",(function(e,t,i){var n;return(e.link!==n?e.link:"")+'<div class="'+home.parseRules.bem(e,t,"desk-notif-card__stream-details.class")+'"><div class="desk-notif-card__stream-wrapper">'+(e.thumbnail!==n?e.thumbnail:"")+'<div class="desk-notif-card__stream-title-wrapper"><div class="desk-notif-card__stream-title i-multiline-overflow desk-notif-card__style_text">'+(e.title!==n?e.title:"")+'</div></div><div class="desk-notif-card__stream-subtitle-wrapper"><div class="desk-notif-card__stream-year desk-notif-card__style_sub">'+(e.year!==n?e.year:"")+'</div><div class="desk-notif-card__stream-subtitle desk-notif-card__style_sub">'+(e.subtitle!==n?e.subtitle:"")+'</div></div></div><div class="desk-notif-card__stream-reference-wrapper"><div class="desk-notif-card__stream-reference desk-notif-card__style_sub i-multiline-overflow">'+(e.reference!==n?e.reference:"")+"</div></div></div>"})),o("desk-notif-card__etrains-time",(function(e,t,i){var n,o=e.row;return o.uid&&(n=e.host+"thread/"+o.uid),i("desk-notif-card__etrains-time-html",{link:i("home-link",{href:n,stat:t.stat.getAttr("notifications.etrains.rasp",n,{logShow:!1}),content:o.stime||o.departure,mix:o.express?"desk-notif-card__etrains-time_express":"",mods:{black:"yes"},attrs:{title:(o.express?"&#32;":"")+(o.name||o.title)}})})})),o("desk-notif-card__etrains-draw",(function(e,t,i){var n=e.table;if(n&&n.length)return n.map((function(t){return i("desk-notif-card__etrains-time",{row:t,host:e.host})})).join("")})),o("desk-notif-card__etrains-schedule",(function(e,t,i){var n=i("desk-notif-card__etrains-draw",{table:e.from,host:e.host}),o=i("desk-notif-card__etrains-draw",{table:e.to,host:e.host});if(n||o)return i("desk-notif-card__etrains-schedule-html",{from:n,to:o,stat:t.stat.getAttr("notifications.etrains.rasp")})})),o("desk-notif-card__etrains-title-content",(function(e,t,i){var n=i("desk-notif-card__etrains-route",{from:(e.from||"").replace(/\s*\(.*$/,""),to:(e.to||"").replace(/\s*\(.*$/,"")});return i("desk-notif-card__etrains-title-html",{content:n})})),o("desk-notif-card__etrains-route",(function(e,t,i){var n;return'<div class="desk-notif-card__etrains-part desk-notif-card__etrains-from"><div class="desk-notif-card__icon desk-notif-card__etrains-icon"></div><div class="desk-notif-card__etrains-part-text"><div class="desk-notif-card__etrains-route">'+(e.from!==n?e.from:"")+'</div><div class="desk-notif-card__etrains-route">'+(e.to!==n?e.to:"")+'</div></div></div><div class="desk-notif-card__etrains-part desk-notif-card__etrains-to"><div class="desk-notif-card__icon desk-notif-card__etrains-icon"></div><div class="desk-notif-card__etrains-part-text"><div class="desk-notif-card__etrains-route">'+(e.to!==n?e.to:"")+'</div><div class="desk-notif-card__etrains-route">'+(e.from!==n?e.from:"")+"</div></div></div>"})),o("desk-notif-card__etrains-title-html",(function(e,t,i){return'<div class="desk-notif-card__etrains-title desk-notif-card__style_bold">'+(void 0!==e.content?e.content:"")+"</div>"})),o("desk-notif-card__etrains-time-html",(function(e,t,i){return'<li class="'+home.parseRules.bem(e,t,"desk-notif-card__etrains-time.class")+'">'+(void 0!==e.link?e.link:"")+"</li>"})),o("desk-notif-card__etrains-schedule-html",(function(e,t,i){var n;return'<div class="'+home.parseRules.bem(e,t,"desk-notif-card__etrains-schedule.class")+'" '+(e.stat!==n?e.stat:"")+'><div class="desk-notif-card__etrains-list-wrapper"><div class="desk-notif-card__etrains-list-from-wrapper"><ul class="desk-notif-card__etrains-list desk-notif-card__etrains-list-from">'+(e.from!==n?e.from:"")+'</ul></div><div class="desk-notif-card__etrains-list-to-wrapper"><ul class="desk-notif-card__etrains-list desk-notif-card__etrains-list-to">'+(e.to!==n?e.to:"")+"</ul></div></div></div>"})),o("dist-popup__image",(function(e,t,i){return'<img class="dist-popup__image" alt="" src="'+(void 0!==e.image?e.image:"")+'"/>'})),o("checkbox",(function(e,t,i){e.mods||(e.mods={}),e.mods.theme||(e.mods.theme="normal"),e.mods.size||(e.mods.size="m"),e.mods.view||(e.mods.view="classic"),e.attrs||(e.attrs={}),e.js=e.js||{},e.stat&&(e.js.stat=e.stat);var n=e.checkboxAttrs||{};return n.type="checkbox",e.name&&(n.name=e.name),e.mods.disabled&&(n.disabled="disabled"),e.mods.checked&&(n.checked="checked"),n.id||(n.id=e.id||"cbid"+(""+Math.random()).substr(3,12)),e.checkboxAttrs=n,"label"in e&&(e.label=i("checkbox__label",{attrs:{"for":e.checkboxAttrs.id},label:e.label})),i("checkbox__layout",e)})),o("checkbox__layout",(function(e,t,i){var n,o;return'<span class="i-bem '+home.parseRules.bem(e,t,"checkbox.class")+'" data-bem="{&quot;checkbox&quot;:'+home.parseRules.bem(e,t,"js")+'}"'+home.parseRules.bem(e,t,"attrs")+'><span class="checkbox__box"><input class="checkbox__control"'+home.parseRules.bem(e,t,"checkboxAttrs.attrs")+(e.stat!==o?e.stat:t.stat!==o?t.stat:(n=i("stat",e))!==o?n:"")+'><i class="checkbox__tick"></i></span>'+(e.label!==o?e.label:t.label!==o?t.label:(n=i("label",e))!==o?n:"")+"</span>"})),o("checkbox__label",(function(e,t,i){var n,o;return'<label class="checkbox__label"'+home.parseRules.bem(e,t,"attrs")+">"+(e.label!==o?e.label:t.label!==o?t.label:(n=i("label",e))!==o?n:"")+"</label>"})),o("input",(function(e,t,i){var n=e.mods||{},o=e.js||{};return n.theme||(n.theme="normal"),e.keyboard&&(n.keyboard="yes"),"gradient"===n.popup&&(o.popupMods={gradient:"yes"}),e.mods=n,'<span class="'+home.getBEMClassname("input",e)+' i-bem" data-bem="{&quot;input&quot;:'+home.getBEMParams(o)+'}">'+(e.before||"")+'<span class="input__box">'+(e.noclear?"":i("input__clear",e))+(e.forgot?'<span class="input__forgot input__forgot_visible_yes" unselectable="on">'+e.forgot+"</span>":"")+("yes"===n.keyboard?i("keyboard-loader",{mix:"input__keyboard-button"}):"")+("yes"===n["voice-search"]?i("input__voice-search",e):"")+i("input__control",e)+(e.search?e.search:"")+"</span>"+(e.after||"")+"</span>"})),o("input__clear",(function(e,t,i){var n="&nbsp;",o=e.mods&&e.mods.type?i("input__clear_type_"+e.mods.type):"",s=e.clearMix;return o&&(n=o),'<span class="input__clear'+(s?" "+s:"")+'" unselectable="on">'+n+"</span>"})),o("input__control",(function(e){var t=e.control&&e.control.attrs||{},i=e.mods,n="textarea"===i.type,o=n?"textarea":"input",s=n?">"+(e.value||"")+"</textarea":"/",r=e.control&&e.control.mix&&" "+e.control.mix||"";switch(e.value&&!n&&(t.value=e.value),e.name&&(t.name=e.name),i.disabled&&(t.disabled="disabled"),e.placeholder&&(t.placeholder=e.placeholder),i.type){case"password":case"search":t.type=i.type}return"<"+o+' class="input__control input__input'+r+'"'+home.getAttributes(t)+s+">"})),o("media-grid__row",(function(e,t,i){var n,o=e.view,s=e.layoutName,r={};return o&&(n=i(o,{mods:{width:"full"},params:e.blockParams||{}}))?(r.collapsed=!e.expand&&(t.blocks_folded||{})[s]?"yes":undefined,r.collapsed&&t.stat.logShow(s+".widget_control.show"),i("media-grid__row-layout",{mods:r,content:n,attrs:{"data-blockname":i("media-grid__layout-adb-name-map")[s]||s}})):""})),o.cached("media-grid__layout-adb-name-map",(function(e){return e&&e.cls?{rtb_inserts:e.cls.full("rtb_inserts"),"rtb-inserts":e.cls.full("rtb-inserts")}:{rtb_inserts:home.cls.full("rtb_inserts"),"rtb-inserts":home.cls.full("rtb-inserts")}})),o.cached("media-grid__layout-name-map",(function(){return{broadcast:"media-broadcast",tv_online:"media-stream",stream_inserts_films:"stream-inserts",stream_inserts_series:"stream-inserts",stream_inserts_anim_films:"stream-inserts",stream_inserts_anim_series:"stream-inserts"}})),o("media-grid__block-name-to-layout",(function(e){return e.replace(/-/g,"_")})),o("media-grid__layout-to-block-name",(function(e,t,i){var n=i("media-grid__layout-name-map");if(n[e])return n[e];if("div_"===e.substr(0,4)){if(home.getData&&home.getData("media-grid.div2")){if(home.getData("media-grid.div2").indexOf(e)>-1)return"divjson2-block"}else if(t.DivBlocks&&t.DivBlocks.blocks&&t.DivBlocks.blocks[e]&&"div2"===t.DivBlocks.blocks[e].type)return"divjson2-block";return"divjson-block"}return e.replace(/_/g,"-")})),o("media-grid__row-layout",(function(e,t,i){return'<div class="'+home.parseRules.bem(e,t,"media-grid__row.class")+'" '+home.parseRules.bem(e,t,"attrs")+">"+(void 0!==e.content?e.content:"")+"</div>"})),o.cached("media-service__tabs-theme",(function(e,t){return t("media-service__inline-tabs")?"mix-tabber_theme_inline-media":"mix-tabber_theme_media"})),o.cached("media-service__inline-tabs",(function(e){return e.inline_tabs?e.inline_tabs:home.flags&&home.flags.checkBool(e,"inline_tabs")})),o("media-service__desc",(function(e,t,i){var n=e.desc||e.collapsedText;if(n)return i("media-service__desc-layout",{block:e.block,desc:n,mods:{collapsed:e.desc?null:"yes"}})})),o("media-service__more",(function(e,t,i){if(e&&e.more)return i("home-link",{mix:"media-service__more "+(e.more.mix||""),mods:{black:"yes",pseudo:"yes"},target:e.more.target,stat:e.more.stat,href:e.more.href,attrs:e.more.href?e.more.attrs:home.deepExtend(e.more.attrs,{role:"button",tabindex:"0"}),content:i("media-service__more-layout",{text:e.more.content})})})),o("media-service__title-icon-url",(function(e,t){var i=home.flags&&home.flags.checkBool(t,"inserts_icons")||home.getData&&home.getData("media-grid.inserts_icons");if(e&&e.layoutName&&i){var n=t.blocks_settings||home.getData&&home.getData("media-grid.blocks_settings"),o=n&&n[e.layoutName],s=o&&o.service.icon_id;return s?"//yastatic.net/s3/home/services/all/svg/"+s+".svg":void 0}})),o("media-service__title",(function(e,t,i){var n="",o=e.titleMix||"";return e.titleIcon&&(n=i("div",{mix:"media-service__title-icon",attrs:{style:home.makeStyle({"background-image":"url("+e.titleIcon+")"})}}),o+=" media-service__title-text_icon_yes"),i("home-link",{mix:e.block+"__title media-service__title-text"+(o?" "+o:""),href:e.href,content:n+e.title,attrs:e.titleAttrs,stat:e.titleStat,target:e.target})})),o("media-service__render-layout-header",(function(e,t,i){var n=e["title-after"]||"";return i("media-service__layout-header",home.deepExtend(e,{header:i("media-service__header",{title:i("media-service__title",e),descTmpl:e.desc?i("media-service__desc",e):""}),headerMods:e.headerMods,"title-after":n,more:i("media-service__more",e)}))})),o("media-service",(function(e,t,i){var n,o=e.content||"",s="";return e.tabs&&(s=i("div",{mix:e.block+"__tabs media-service__tabs",attrs:{role:"tablist"},content:e.tabs}),n=i("media-service__tabs-theme"),i("media-service__inline-tabs")?(e["title-after"]=(e["title-after"]||"")+s,e.mods=e.mods||{},e.mods["inline-tabs"]="yes"):o=s+o,n&&(e.mix=(e.mix||"")+" "+n)),!e.titleIcon&&e.block&&(e.titleIcon=i("media-service__title-icon-url",{layoutName:i("media-grid__block-name-to-layout",e.block)})),i("media-service__layout",home.deepExtend(e,{title:e.title&&i("media-service__render-layout-header",e),content:o}))})),o("media-service__more-layout",(function(e,t,i){return'<span class="media-service__more-text">'+(void 0!==e.text?e.text:"")+'</span><span class="media-service__more-icon"></span>'})),o("media-service__desc-layout",(function(e,t,i){var n;return'<div class="'+home.parseRules.bem(e,t,"media-service__desc.class")+" "+(e.block!==n?e.block:"")+'__desc">'+(e.desc!==n?e.desc:"")+"</div>"})),o("media-service__header",(function(e,t,i){var n;return'<div class="media-service__title-wrapper"><h1 class="'+home.parseRules.bem(e,t,"titleMods.media-service__title.class")+'">'+(e.title!==n?e.title:"")+"</h1>"+(e.descTmpl!==n?e.descTmpl:"")+"</div>"})),o("media-service__layout-header",(function(e,t,i){var n;return'<div class="'+home.parseRules.bem(e,t,"headerMods.media-service__header.class")+'">'+(e.header!==n?e.header:"")+(e["title-after"]!==n?e["title-after"]:"")+(e.more!==n?e.more:"")+"</div>"})),o("media-service__layout",(function(e,t,i){var n;return'<div class="'+(e.rootMod!==n?e.rootMod:"")+" "+home.parseRules.bem(e,t,"media-service.class")+'" '+home.parseRules.bem(e,t,"attrs")+">"+(e.before!==n?e.before:"")+(e.title!==n?e.title:"")+'<div class="'+(e.block!==n?e.block:"")+"__content media-service__content "+(e.contentMix!==n?e.contentMix:"")+'">'+(e.content!==n?e.content:"")+"</div></div>"})),o("media-stream__title",(function(e,t){return(home.getData?home.getData("media-stream.data.expStreamNewPlatform"):home.flags&&(home.flags.checkBool(t,"stream_new_platform")||home.flags.checkBool(t,"stream_new_platform_promo_desktop")))?" ":""})),o("media-stream__content",(function(e,t,i){var n=e.items,o=t.zenInsert,s=e.moreLength,r=e.more,a=n.map((function(e,n){var o="tv_online.items."+n,s=e.current.HHMM+"&nbsp;&nbsp;"+(e.current.title||e.current.subtitle||e.title),r="media-play__container media-service__item media-stream__item ";return r+=home.getBEMClassname("media-service__item",{mods:e.mods}),i("home-link",{href:i("stream-url",{streamChannel:e.channel_id,fromBlock:"media_footer_stream_item",streamId:e.content_id}),mods:{hover:"inherit"},target:"_blank",mix:r,stat:t.stat.getClientCounter(o),content:i("media-stream__item-inner",{thumbnail:{"data-image":e.thumbnail},title:home.prepareSpaces(s),mediaPlay:i("media-play")})})})).join("");return s>0&&(r={href:i("stream-url",{fromBlock:"media_footer_stream_more",streamDefault:1}),target:"_blank",stat:t.stat.getClientCounter("tv_online.more"),content:" "}),i("media-service",{block:"media-stream",rootMod:"i-bem media-stream imageloader imageloader_scroll_no",title:i("media-stream__title"),titleIcon:i("media-service__title-icon-url",{layoutName:e.layoutName}),href:i("stream-url",{fromBlock:"media_footer_stream_title",streamDefault:1}),target:"_blank",titleStat:t.stat.getClientCounter("tv_online.title"),content:i("media-stream__items-wrapper",{content:a}),mods:e.mods,more:r,attrs:{role:"complementary","aria-label":"","data-bem":home.getBEMParams({"media-stream":{live:!o},imageloader:{}})}})})),o("media-stream__client-view",(function(e,t,i){var n=home.getData("media-stream.data");if(n)return i("media-stream__content",n)})),o("media-stream__items-wrapper",(function(e,t,i){return'<div class="media-service__panels media-stream__panels">'+(void 0!==e.content?e.content:"")+"</div>"})),o("media-stream__item-inner",(function(e,t,i){var n;return'<div class="media-service__stream-bg media-service__shadow"><div class="media-service__image media-stream__thumbnail imageloader__image imageloader__image_loaded_no" '+home.parseRules.bem(e,t,"thumbnail.attrs")+"></div>"+(e.mediaPlay!==n?e.mediaPlay:"")+'</div><div class="media-service__item-title i-multiline-overflow">'+(e.title!==n?e.title:"")+"</div>"})),o("media-play",(function(e,t,i){return i("media-play__layout",{mods:e&&e.mods||{}})})),o("media-play__layout",(function(e,t,i){return'<div class="'+home.parseRules.bem(e,t,"media-play.class")+'"></div>'})),o("zen-lib__title-link",(function(e,t,i){var n=i("zen-lib__title-link-default-clid"),o=e.libParams;return"//zen.yandex."+e.tld+"?clid="+n+"&country_code="+o.countryCode})),o("zen-lib__title-link-default-clid",(function(){return 101})),o("infinity-zen__desc",(function(){return" &nbsp;  "})),o("infinity-zen__title",(function(){return""})),o("infinity-zen__render-header",(function(e,t,i){var n=home.getData("infinity-zen.media-promo"),o=i("zen-lib__title-link",e.params);return i("media-service__render-layout-header",{block:"infinity-zen",href:o,target:i("new-tab-links__check")?"_blank":"",title:i("infinity-zen__title"),desc:i("infinity-zen__desc"),titleStat:t.stat.getClientCounter(e.params.statRoot+".title"),"title-after":n,headerMods:{mix:"infinity-zen__header"+(e.isZenInsert?" zen-insert":""),mods:{valign:n?"center":undefined,"inline-desc":"yes",style:"padding-bottom: 10px"}}})})),o("infinity-zen__alert",(function(e,t,i){var n;return'<div class="infinity-zen__alert"><div class="infinity-zen__alert-left"><div class="infinity-zen__alert-icon"></div></div><div class="infinity-zen__alert-right"><div class="infinity-zen__alert-title">'+(e.title!==n?e.title:"")+'</div><div class="infinity-zen__alert-text">'+(e.text!==n?e.text:"")+"</div></div></div>"})),o("tooltip",(function(e,t,i){var n=e.mods||{};n.view=n.view||"classic";var o=e.js||{};return i("popup2",{mods:home.deepExtend({target:"anchor",hiding:"yes",autoclosable:e.mods&&e.mods.autoclosable||"no",theme:"normal",view:e.mods&&e.mods.view},e.popupMods||{}),directions:o.to||["right-center","bottom-center","top-center","left-center"],mainOffset:o.mainOffset,secondaryOffset:o.secondaryOffset,tailOffset:o.tailOffset,zIndexGroupLevel:o.zIndexGroupLevel,mix:home.getBEMClassname("tooltip",{mods:n,mix:e.mix}),content:i("div",{mix:"tooltip__backdrop",content:!1!==e.tail&&i("div",{mix:"popup2__tail",content:""})})+i("div",{mix:"tooltip__content",content:e.content})})})),o("kinopoisk__film-list",(function(e,t,i){var n=home.transliterate(e.title.toLowerCase()).replace(/,/g,"").replace(/\s/g,"-"),o="kinopoisk.film."+n.replace(/-/g,"_"),s=e.hasStream,r=s||i("new-tab-links__check")?"_blank":"";return e.films.map((function(a,c){var l,u=a.url&&"PROMOCODE"===a.type,d="",h=c+1+(e.startIndex||0);u?l=a.url:s&&a.contentGroupUuid!==undefined&&(l=i("stream-url",{fromBlock:"kinopoisk_item_"+n,streamId:a.contentGroupUuid,query:{utm_medium:"yamain_middle_block",utm_source:"kinopoisk"}})),a.kpRating&&(d=i("kinopoisk-rating",{mix:"kinopoisk__film-rating",rating:a.kpRating}));var m={};return a.coId&&(m[a.coId]=h),u&&(m.promocode=h),i("home-link",{href:l,target:r,role:"listitem",tabindex:"0",tag:l?"":"div",stat:t.stat.getAttr(o,null,{logShow:!1,customParams:m,precise:!0}),mix:"imageloader__card home-link_hover_inherit kinopoisk__film media-service__item media-play__container"+(s?"":" kinopoisk-control__link"),content:i("kinopoisk__film",{rating:d,title:home.prepareSpaces(a.title),poster:home.getBEMParams({1:a.poster.replace("/orig","/150x225"),2:a.poster.replace("/orig","/300x450")}),bgColor:a.medianColor||"#dfdcd7",mediaPlay:u?"":i("media-play",{mods:{type:"kinopoisk"}}),restrictionAge:a.ageLimit>=18?i("restriction-age",{restrictionAge:a.ageLimit,mods:{type:"poster"}}):""}),attrs:{"data-film-id":a.contentGroupUuid,"data-selection-id":String(e.id),"data-from-block":n,"data-from-position":h,"data-stat":"kinopoisk.link"}})})).join("")})),o("kinopoisk__panel",(function(e,t,i){var n=e.films?i("kinopoisk__film-list",e):"";return i("arrowed-list_theme_media",{mix:"kinopoisk__list-wrapper media-service__list-wrapper imageloader imageloader_tracking_yes",wrapMix:"kinopoisk__wrap media-service__wrap imageloader__scroller",listMix:"kinopoisk__list media-service__list",content:n,mods:{theme:"media","arrow-position":"weighted","list-out":"yes"},js:{"arrowed-list":{counter:"kinopoisk"},imageloader:{}}})})),o("kinopoisk__content",(function(e,t,i){var n,o=e.retryButtonTheme,s=e.defaultTabId,r=e.data[s],a=e.groups,c=t.zenInsert,l="kinopoisk_"+home.rnd().substr(0,5),u=e.hasStream;return u&&(n=i("stream-url",{fromBlock:"kinopoisk_title",streamDefault:1,streamActive:"category",streamCategory:"subscription",query:{utm_medium:"yamain_middle_block",utm_source:"kinopoisk"}})),i("media-service",{block:"kinopoisk",rootMod:home.getBEMClassname("kinopoisk",e)+" i-bem kinopoisk-control media-grid__kinopoisk",mods:{"has-carousel":"yes",tabs:"yes"},href:n,target:u||i("new-tab-links__check")?"_blank":undefined,title:e.title,titleMix:"home-link_pseudo_yes"+(u?"":" kinopoisk-control__link"),titleAttrs:{"data-stat":"kinopoisk.link","data-selection-id":String(r.id),"data-from-block":"block_title",tabindex:0},titleStat:t.stat.getClientCounter("kinopoisk.title"),tabs:a.map((function(e){var t=e["default"],n="kinopoisk.tab.select."+home.transliterate(e.title.toLowerCase()).replace(/,/g,"").replace(/\s/g,"-").replace(/-/g,"_");return i("mix-tabber__tab",{mods:{selected:t?"yes":"no"},mix:home.getBEMClassname("kinopoisk__tab",{mods:{selected:t?"yes":"no"}}),content:e.title,attrs:{tabindex:t?"0":"-1","aria-selected":t?"true":"false","aria-controls":t?l+"_panel_"+e.id:undefined,"data-key":e.id,"data-stat-select":n,id:l+"_tab_"+e.id}})})).join(""),content:i("kinopoisk__layout",{panel:i("mix-tabber__panel",{block:"kinopoisk",id:l,key:s,mix:" media-service__panel",attrs:{"aria-labelledby":l+"_tab_"+r.id},content:i("kinopoisk__panel",{id:r.id,title:r.title,films:r.films,hasStream:u,retryButtonTheme:o})})}),attrs:{role:"complementary","aria-label":e.title,"data-bem":home.getBEMParams({kinopoisk:{selectedTab:s,retryButtonTheme:o,live:!c,uniqId:l,country:e.country},"kinopoisk-control":{}})}})})),o("kinopoisk__client-view",(function(e,t,i){var n=home.getData("kinopoisk.data");if(n)return n.params=e&&e.params,i("kinopoisk__content",n)})),o("kinopoisk__film-loader",(function(e,t,i){return'<div class="kinopoisk__film kinopoisk__film-loader"><div class="kinopoisk__film-loader-inner loader"></div></div>'})),o("kinopoisk__film",(function(e,t,i){var n;return'<span class="kinopoisk__film-inner"><span class="kinopoisk__film-bg media-service__bg media-service__shadow"><span class="kinopoisk__film-image media-service__image imageloader__image" data-image="'+(e.poster!==n?e.poster:"")+'" style="background-color:'+(e.bgColor!==n?e.bgColor:"")+'"></span>'+(e.rating!==n?e.rating:"")+(e.mediaPlay!==n?e.mediaPlay:"")+(e.restrictionAge!==n?e.restrictionAge:"")+'</span></span><span class="kinopoisk__film-title media-service__item-title">'+(e.title!==n?e.title:"")+"</span>"})),o("kinopoisk__layout",(function(e,t,i){return'<div class="media-service__panels kinopoisk__panels">'+(void 0!==e.panel?e.panel:"")+"</div>"})),o("kinopoisk-rating__color",(function(e){var t=e.rating;return t>=8?"#32ba43":t>=7?"#89c939":t>=5?"#91a449":t>=3?"#85855d":"#727272"})),o("kinopoisk-rating",(function(e,t,i){var n,o,s;return e.rating?(o=(n=parseFloat(e.rating)).toFixed(1).replace(".",","),s=" %s".replace("%s",o),i("kinopoisk-rating__tmpl",{mix:e.mix,text:o,label:s,color:i("kinopoisk-rating__color",{rating:n})})):""})),o("kinopoisk-rating__tmpl",(function(e,t,i){var n;return'<span class="'+home.parseRules.bem(e,t,"kinopoisk-rating.class")+'" style="background-color:'+(e.color!==n?e.color:"")+';" aria-hidden="true">'+(e.text!==n?e.text:"")+'</span><span class="a11y-hidden">'+(e.label!==n?e.label:"")+"</span>"})),o("player-control__loader",(function(e,t,i){return'<div class="player-control__loader"><div class="player-control__close" role="button" tabindex="0" title=""></div><span class="player-control__spin loader"></span></div>'})),o("arrowed-list_theme_media",(function(e,t,i){var n=e.initiallyHidden||"both";return e.mods=e.mods||{},"right"===n&&(e.mods.left="yes"),"left"===n&&(e.mods.right="yes"),i("arrowed-list__layout_theme_media",e)})),o("arrowed-list__content_theme_media",(function(e,t,i){var n;return(e.beforeWrap!==n?e.beforeWrap:"")+'<div class="arrowed-list__content scroller '+(e.wrapMix!==n?e.wrapMix:"")+'"><div class="arrowed-list__list '+(e.listMix!==n?e.listMix:"")+'" role="list"'+home.parseRules.bem(e,t,"attrs")+">"+(e.content!==n?e.content:"")+'</div></div><div class="arrowed-list__shadow arrowed-list__shadow_left"></div><div class="arrowed-list__shadow arrowed-list__shadow_right"></div><div class="arrowed-list__left arrowed-list__control" '+(e.prevStat!==n?e.prevStat:"")+'></div><div class="arrowed-list__right arrowed-list__control" '+(e.nextStat!==n?e.nextStat:"")+"></div>"})),o("arrowed-list__layout_theme_media",(function(e,t,i){var n;return'<div class="'+home.parseRules.bem(e,t,"arrowed-list.class")+' i-bem" data-bem="'+home.parseRules.bem(e,t,"js")+'">'+((void 0!==(n=i("arrowed-list__content_theme_media",e))?n:"")+"</div>")})),o("music__choose-banner",(function(e,t,i){return e.logged?e.available?"":i("music__banner",{color:e.color,text:"      ",later:"",href:e.plus,action:" "}):i("music__banner",{color:e.color,text:"  .  &nbsp; ",later:"",href:e.passport,action:""})})),o("music__tracks",(function(e,t,i){return e.pairs.map((function(t){return i("music__pair",t.map((function(t){var n={1:i("music__image-url",{img:t.coverUri}),2:i("music__image-url",{img:t.coverUri,large:!0})};return i("music__track",{attrs:{style:"background-color:"+t.chartColor,tabindex:0,"data-index":t.chartPosition-1},info:i("music__track-info",{position:t.chartPosition,progress:t.chartProgress}),cover:i("music__track-cover",{picture:i("div",{mix:"music__track-picture media-service__image imageloader__image",attrs:{style:"background-color:"+t.chartColor,"data-image":JSON.stringify(n)}}),recent:t.recent?i("music__track_recent",{text:""}):""}),description:i("music__track-description",{title:t.title,artists:t.artists,error:" ",retry:""}),preview:i("music__choose-banner",{logged:e.logged,passport:e.passport,plus:e.plus,available:t.available,color:t.chartColor}),explicit:t.explicit?i("music__track_explicit",{}):""})})))})).join("")})),o("music__image-url",(function(e){var t=e.img,i=e.large;return t?(-1===t.indexOf("//")&&(t="//"+t),t=t.replace("%%",i?"150x150":"75x75")):""})),o("music__panel",(function(e,t,i){var n="";return"dummy"===e.id?n=e.dummyItems:e.pairs&&(n=i("music__tracks",e)),i("arrowed-list_theme_media",{mix:"music__list-wrapper media-service__list-wrapper imageloader imageloader_tracking_yes",wrapMix:"music__wrap media-service__wrap imageloader__scroller",listMix:"music__list media-service__list",content:n,mods:{theme:"media"},js:{"arrowed-list":{counter:"music"},imageloader:{}}})})),o("music__desc",(function(e,t){return",   "})),o("music__title",(function(e,t){return" ."})),o("music",(function(e,t,i){var n={block:"music",rootMod:home.getBEMClassname("music",e)+" i-bem media-grid__music",mods:{"has-carousel":"yes"},href:e.host+"/home?from=home_chart",title:i("music__title"),titleStat:t.stat.getClientCounter("music.title"),titleAttrs:{tabindex:0},desc:i("music__desc"),content:i("music__layout",{panel:i("music__panel",e)}),attrs:{role:"complementary","aria-label":i("music__title"),"data-bem":home.getBEMParams({music:{tracks:e.tracks,logged:e.logged,passport:e.passport,plus:e.plus,host:e.host,live:!1}})}};return e.logged&&(n["title-after"]=i("button2",{mods:{view:"classic",tone:"default",size:"ws-head",theme:"action"},mix:" music__play-button ",content:i("music__button",{play:i("music__button-inner",{text:""}),pause:i("music__button-inner",{text:""})})}),n.headerMods={mods:{valign:"center"}}),i("media-service",n)})),o("music__client-view",(function(e,t,i){var n=home.getData("music");if(n)return i("music-loader",n)})),o("music__pair",(function(e,t,i){var n;return'<div class="music__pair imageloader__card">'+(e[0]!==n?e[0]:"")+(e[1]!==n?e[1]:"")+"</div>"})),o("music__track",(function(e,t,i){var n;return'<div class="music__track music__track_preview_no music__track_active_no" '+home.parseRules.bem(e,t,"attrs")+'><div class="music__track-overlay"></div>'+(e.preview!==n?e.preview:"")+'<div class="music__track-content">'+(e.info!==n?e.info:"")+(e.cover!==n?e.cover:"")+(e.description!==n?e.description:"")+(e.explicit!==n?e.explicit:"")+"</div></div>"})),o("music__track_dummy",(function(e,t,i){return'<div class="music__track music__track_dummy"><div class="music__track-content"><div class="music__track-info"><div class="music__track-position"></div><div class="music__track-progress"></div></div><div class="music__track-cover"></div><div class="music__track-description"><div class="music__track-title"></div><div class="music__track-artists"></div></div></div></div>'})),o("music__banner",(function(e,t,i){var n;return'<div class="music__banner"><div class="music__banner-text">'+(e.text!==n?e.text:"")+'</div><div class="music__banner-actions"><span class="music__banner-close media-service__item" tabindex="0">'+(e.later!==n?e.later:"")+'</span><a href="'+(e.href!==n?e.href:"")+'" class="music__banner-go media-service__item" tabindex="0">'+(e.action!==n?e.action:"")+"</a></div></div>"})),o("music__track-description",(function(e,t,i){var n;return'<div class="music__track-description"><div class="music__track-error"><div class="music__track-title i-multiline-overflow">'+(e.error!==n?e.error:"")+'</div><div class="music__track-retry">'+(e.retry!==n?e.retry:"")+'</div></div><div class="music__track-ok"><div class="music__track-title i-multiline-overflow" title="'+(e.title!==n?e.title:"")+'">'+(e.title!==n?e.title:"")+'</div><div class="music__track-artists" title="'+(e.artists!==n?e.artists:"")+'">'+(e.artists!==n?e.artists:"")+"</div></div></div>"})),o("music__track-cover",(function(e,t,i){var n;return'<div class="music__track-cover">'+(e.picture!==n?e.picture:"")+(e.recent!==n?e.recent:"")+'<div class="music__track-bubble"></div><div class="music__track-hover"><div class="music__track-hover__icon"></div></div></div>'})),o("music__track_explicit",(function(e,t,i){return'<div class="music__track_explicit"></div>'})),o("music__track_recent",(function(e,t,i){return'<div class="music__track_recent">'+(void 0!==e.text?e.text:"")+"</div>"})),o("music__track-info",(function(e,t,i){var n;return'<div class="music__track-info"><div class="music__track-position">'+(e.position!==n?e.position:"")+'</div><div class="music__track-progress music__track-progress_'+(e.progress!==n?e.progress:"")+'"></div></div>'})),o("music__button",(function(e,t,i){var n;return'<div class="music__button music__button_active_no"><div class="music__button-play">'+(e.play!==n?e.play:"")+'</div><div class="music__button-pause">'+(e.pause!==n?e.pause:"")+"</div></div>"})),o("music__button-inner",(function(e,t,i){return'<div class="music__button-inner">'+(void 0!==e.text?e.text:"")+"</div>"})),o("music__layout",(function(e,t,i){return'<div class="music__layout">'+(void 0!==e.panel?e.panel:"")+"</div>"})),o("music-loader",(function(e,t,i){var n=Array(5).join(i("music__pair",Array(2).fill(i("music__track_dummy",{}))));return i("media-service",{block:"music",rootMod:home.getBEMClassname("music-loader",{mods:{state:"loading"}})+" i-bem media-grid__music",title:" .",titleAttrs:{tabindex:0},desc:",   ",mods:{"has-carousel":"yes"},content:i("music__layout",{panel:i("music__panel",{id:"dummy",dummyItems:n})}),attrs:{role:"complementary","aria-label":" .","data-bem":home.getBEMParams({"music-loader":e})}})})),o("games__items",(function(e,t,i){var n=i("new-tab-links__check")?"_blank":"";return e.items.map((function(o,s){var r=o.coverUrlSet?{1:o.coverUrlSet["104x104"],2:o.coverUrlSet["208x208"]}:undefined;return i("home-link",{stat:t.stat.getClientCounter("games.item.tab_"+e.id+"."+s+"(id="+o.id+")"),href:o.url,target:n,mix:"games__item media-service__item media-service__shadow imageloader__card",mods:{hover:"inherit"},attrs:{role:"listitem"},content:i("games__item",{img:r?home.htmlFilter(JSON.stringify(r)):undefined,title:o.title,category:o.category[t.Locale]||o.category.ru,rating:i("games-rating",o)})})})).join("")})),o("games__panel",(function(e,t,i){var n="";return"dummy"===e.id?n=e.items:e.items&&(n=i("games__items",e)),i("arrowed-list_theme_media",{mix:"games__list-wrapper media-service__list-wrapper imageloader",wrapMix:"games__wrap media-service__wrap imageloader__scroller",listMix:"games__list media-service__list",content:n,mods:{theme:"media"},js:{"arrowed-list":{counter:"games"},imageloader:{}}})})),o("games__title",(function(e,t){return""})),o("games",(function(e,t,i){var n,o="games_"+home.rnd().substr(0,5),s="//yandex."+t.MordaZone+"/games",r={};return e.tabs.forEach((function(e,t){var i=home.deepExtend({},e),n=t;i.key=n,r[n]=i})),r.tabs=e.tabs,n=r[0],t.csp&&!t.csp.stub&&t.csp.allowImg("https://avatars.mds.yandex.net/get-games"),i("media-service",{block:"games",rootMod:home.getBEMClassname("games",e)+" i-bem",mods:{"has-carousel":"yes",tabs:e.tabs.length>1?"yes":undefined},href:s,target:i("new-tab-links__check")?"_blank":"",title:i("games__title"),titleAttrs:{tabindex:0},titleStat:t.stat.getClientCounter("games.title"),tabs:e.tabs.map((function(e,t){var n=0===t,s=t;return i("mix-tabber__tab",{mods:{selected:n?"yes":"no"},mix:home.getBEMClassname("games__tab",{mods:{selected:n?"yes":"no"}}),content:e.ru,attrs:{tabindex:n?"0":"-1","aria-selected":n?"true":"false","aria-controls":n?o+"_panel_"+s:undefined,"data-key":s,"data-stat-select":"games.tab.select."+t,id:o+"_tab_"+s}})})).join(""),content:i("games__layout",{panel:i("mix-tabber__panel",{block:"games",id:o,key:n.key,mix:" media-service__panel",attrs:{"aria-labelledby":o+"_tab_"+n.key},content:i("games__panel",{id:n.key,items:n.games})})}),attrs:{role:"complementary","aria-label":"","data-bem":home.getBEMParams({games:{data:r,live:!1,uniqId:o}})}})})),o("games__client-view",(function(e,t,i){var n=home.getData("games.data");if(n)return n.params=e&&e.params,i("games-loader",n)})),o("games__item_dummy",(function(e,t,i){return'<div class="games__item games__item_dummy_yes media-service__shadow"><div class="games__item-header"></div><div class="games__item-content games__item-content_dummy"><div class="games__item-placeholder games__item-placeholder_title"></div><div class="games__item-placeholder"></div></div></div>'})),o("games__item",(function(e,t,i){var n;return'<div class="games__item-header"><div class="games__item-img media-service__image imageloader__image" data-image="'+(e.img!==n?e.img:"")+'"></div></div><div class="games__item-content"><div class="games__item-title">'+(e.title!==n?e.title:"")+'</div><div class="games__item-category">'+(e.category!==n?e.category:"")+'</div><div class="games__item-rating">'+(e.rating!==n?e.rating:"")+"</div></div>"})),o("games__layout",(function(e,t,i){return'<div class="media-service__panels games__panels">'+(void 0!==e.panel?e.panel:"")+"</div>"})),o("games-loader",(function(e,t,i){var n="games_"+home.rnd().substr(0,5),o=new Array(8).join(i("mix-tabber__tab",{mix:home.getBEMClassname("games__tab",{mods:{dummy:"yes"}}),content:"&nbsp;",stat:""})),s=new Array(8).join(i("games__item_dummy",{}));return i("media-service",{block:"games",rootMod:home.getBEMClassname("games-loader",{mods:{state:"loading"}})+" i-bem media-grid__games",headerMods:{mods:{multyline:"yes"}},title:"",titleAttrs:{tabindex:0},mods:{"has-carousel":"yes",tabs:"yes"},tabs:o,content:i("games__layout",{panel:i("mix-tabber__panel",{block:"games",id:n,key:"dummy",mix:" media-service__panel",attrs:{"aria-labelledby":n+"_tab_dummy"},content:i("games__panel",{mix:"games-loader__panel",id:"dummy",items:s})})}),attrs:{role:"complementary","aria-label":"","data-bem":home.getBEMParams({"games-loader":{url:e.url}})}})})),o("games-rating",(function(e,t,i){var n,o;return e.rating?(n=parseFloat(e.rating).toFixed(1).replace(".",","),o=" %s".replace("%s",e.rating),i("games-rating__tmpl",{mix:e.mix,value:n,label:o})):""})),o("games-rating__tmpl",(function(e,t,i){var n;return'<span class="'+home.parseRules.bem(e,t,"games-rating.class")+' games-rating__icon" aria-hidden="true">'+(e.value!==n?e.value:"")+'</span><span class="a11y-hidden">'+(e.label!==n?e.label:"")+"</span>"})),o.cached("autoru-inserts__item-image-mix",(function(){return" media-service__image"})),o.cached("autoru-inserts__item-mix",(function(){return" media-service__item media-service__bg media-service__shadow"})),o("autoru-inserts__item-url",(function(e){return e.url.desktop})),o("autoru-inserts__panel",(function(e,t,i){var n="autoru-inserts";return i("arrowed-list_theme_media",{mix:n+"__list-wrapper media-service__list-wrapper imageloader",wrapMix:n+"__wrap media-service__wrap imageloader__scroller",listMix:n+"__list media-service__list",content:i("autoru-inserts-items",e),mods:{theme:"media"},js:{"arrowed-list":{counter:"autoru_inserts"},imageloader:{}}})})),o("autoru-inserts",(function(e,t,i){var n="autoru-inserts_"+home.rnd().substr(0,5),o=e.tabs[0];return i("media-service",{block:"autoru-inserts",rootMod:home.getBEMClassname("autoru-inserts",e)+" i-bem media-grid__autoru-inserts",mods:{"has-carousel":"yes",tabs:"yes"},href:e.main.url.desktop,target:i("new-tab-links__check")?"_blank":"",title:e.main.title,titleStat:t.stat.getClientCounter("autoru_inserts.title"),tabs:e.tabs.map((function(e,t){var o=0===t;return i("mix-tabber__tab",{mods:{selected:o?"yes":"no"},mix:home.getBEMClassname("autoru-inserts__tab",{mods:{selected:o?"yes":"no"}}),content:e.title,attrs:{tabindex:o?"0":"-1","aria-selected":o?"true":"false","aria-controls":o?n+"_panel_"+e.type:undefined,"data-key":e.type,id:n+"_tab_"+e.type,"data-stat-select":"autoru_inserts.tab.select."+e.type}})})).join(""),content:i("autoru-inserts__layout",{panel:i("mix-tabber__panel",{block:"autoru-inserts",mix:" media-service__panel",id:n,key:o.type,attrs:{"aria-labelledby":n+"_tab_"+o.type},content:i("autoru-inserts__panel",{id:o.type,items:o.content,linkTarget:i("new-tab-links__check")?"_blank":""})})}),attrs:{role:"complementary","aria-label":e.main.title,"data-bem":home.getBEMParams({"autoru-inserts":{data:e.tabs.reduce((function(e,t){return e[t.type]=t,e}),{}),live:!1,uniqId:n}})}})})),o("autoru-inserts__client-view",(function(e,t,i){var n=home.getData("autoru-inserts.data");if(n)return n.params=e&&e.params,i("autoru-inserts-loader",n)})),o("autoru-inserts__layout_dummy",(function(e,t,i){return'<div class="media-service__panels autoru-inserts__panels"><div class="autoru-inserts__panel media-service__panel">'+(void 0!==e.panel?e.panel:"")+"</div></div>"})),o("autoru-inserts__layout",(function(e,t,i){return'<div class="media-service__panels autoru-inserts__panels">'+(void 0!==e.panel?e.panel:"")+"</div>"})),o("autoru-inserts-items",(function(e,t,i){var n="dummy"===e.id,o=e.items||[];return n?new Array(5).join(i("autoru-inserts-items__item_dummy",{mix:i("autoru-inserts__item-mix")})):o.map((function(n,o){return i("home-link",{stat:t.stat.getClientCounter("autoru_inserts.item."+e.id,!1,{id:o}),href:i("autoru-inserts__item-url",n),target:e.linkTarget||"",mix:"autoru-inserts-items__item autoru-inserts__item imageloader__card"+i("autoru-inserts__item-mix"),mods:{hover:"inherit"},attrs:{role:"listitem"},content:i("autoru-inserts-items__item",{img:home.getBEMParams({1:n.image.x1,2:n.image.x2}),imgMix:i("autoru-inserts__item-image-mix"),title:home.htmlFilter(n.nameplate||""),price:home.htmlFilter(n.price||"")})})})).join("")})),o("autoru-inserts-items__item_dummy",(function(e,t,i){return'<div class="autoru-inserts-items__item autoru-inserts-items__item_dummy autoru-inserts__item autoru-inserts__item_dummy '+(void 0!==e.mix?e.mix:"")+'"><div class="autoru-inserts-items__img"></div><div class="autoru-inserts-items__content autoru-inserts-items__content_dummy"><div class="autoru-inserts-items__placeholder"></div><div class="autoru-inserts-items__placeholder"></div></div></div>'})),o("autoru-inserts-items__item",(function(e,t,i){var n,o;return'<div class="autoru-inserts-items__img imageloader__image '+(e.imgMix!==o?e.imgMix:"")+'" data-image="'+(e.img!==o?e.img:"")+'"></div><p class="autoru-inserts-items__content"><span class="autoru-inserts-items__price">'+(e.price!==o?e.price:"")+" "+(((n=i("rouble",e))!==o?n:"")+'</span><span class="autoru-inserts-items__title">')+(e.title!==o?e.title:"")+"</span></p>"})),o("autoru-inserts-loader",(function(e,t,i){var n=i("mix-tabber__tab",{content:"&nbsp;",stat:"",attrs:{hidden:!0}}),o=i("autoru-inserts__layout_dummy",{panel:i("autoru-inserts__panel",{id:"dummy"})});return i("media-service",{block:"autoru-inserts",rootMod:"autoru-inserts-loader i-bem media-grid__autoru-inserts",mods:{"has-carousel":"yes",tabs:"yes"},tabs:[n],title:".",content:o,attrs:{role:"complementary","aria-label":".","data-bem":home.getBEMParams({"autoru-inserts-loader":e})}})})),o("select2",(function(e,t,i){var n=e.mods||{},o=e.items,s=[],r=[],a=e.val,c=e.text,l=e.content,u=e.mixJs||{};if(u.select2=home.deepExtend({text:c},e.js||{}),o.forEach((function m(e){e.items?e.items.forEach(m):(r.push(e),s.push(e.val))}),this),a=a===undefined?[]:[].concat(a).filter((function(e){return-1!==s.indexOf(e)})),-1!==["radio","radiocheck"].indexOf(n.type)&&(a.length>1?a=a.slice(-1):a&&a.length||"radio"!==n.type||(a=r[0]&&[r[0].val])),c===undefined&&(c=""),l===undefined){var d=Boolean(a.length),h=d&&-1!==["check","radiocheck"].indexOf(n.type);c="fixed"!==n.width&&d?r.reduce((function(e,t){return-1!==a.indexOf(t.val)&&e.push(t.text),e}),[]).join(", "):c,!d&&"radio"===n.type&&o[0]&&(o[0]=function t(e){return e.items?e.items=[t(e.items[0])].concat(e.items.slice(1)):(e.elemMods=Object(e.elemMods),e.elemMods.checked="yes"),e}(o[0]),c=r[0].text),l=[i("select2__button",{multiselectable:"check"===n.type,required:e.required,items:r,val:a,button:home.deepExtend({mods:{size:n.size,theme:n.theme,view:n.view,tone:n.buttonTone||n.tone,disabled:n.disabled,checked:h?"yes":undefined},content:c},e.button||{})}),e.control&&i("select2__control",home.deepExtend({mods:n,elemMods:{disabled:n.disabled},multiple:"radio"!==n.type,required:e.required,name:e.name,items:r,val:a},e.control&&"object"==typeof e.control||{})),i("select2__popup",{popup:home.deepExtend({mods:{view:n.view,tone:n.tone,theme:n.theme}},e.popup),itemIconHidden:Boolean(n["item-icon-hidden"]),menu:home.deepExtend({mods:{size:n.menuSize||n.size,type:n.type,view:n.view,tone:n.tone,disabled:n.disabled,theme:n.theme},val:a,items:o},e.menu)})].filter(Boolean).join("")}return i("select2__layout",{mix:e.mix,mods:n,attrs:e.attrs,content:l,js:u})})),o("select2__layout",(function(e,t,i){return'<div class="'+home.parseRules.bem(e,t,"select2.class")+' i-bem"'+home.parseRules.bem(e,t,"attrs")+' data-bem="'+home.parseRules.bem(e,t,"js")+'"'+home.parseRules.bem(e,t,"attrs")+">"+(void 0!==e.content?e.content:"")+"</div>"})),o("select2__button",(function(e,t,i){var n,o=home.rnd(),s=e.button||{};return e.items.some((function(t){return!!(e.val.indexOf(t.val)>-1&&t.icon)&&(n=t.icon,!0)})),i("button2",home.deepExtend({mods:{width:"max"},attrs:{role:"listbox","aria-labelledby":o,"aria-expanded":"false","aria-multiselectable":e.multiselectable?"true":undefined},iconLeftObj:n,iconRightObj:"default"===s.mods.view?{mods:{size:s.mods.size,glyph:"carets-v"},mix:"select2__arrow"}:"",mix:{block:"select2",elem:"button",elemMods:e.mods,js:e.js},text:{attrs:{id:o}},content:e.text},s))})),o("select2__menu",(function(e,t,i){var n=e.mods||{};return n["item-icon-hidden"]=e.itemIconHidden?"yes":undefined,i("menu",home.deepExtend({mix:{block:"select2",elem:"menu",elemMods:n},mods:{theme:"normal",width:"max"},val:e.val,tabindex:null},e.menu))})),o("select2__popup",(function(e,t,i){var n=e.mods||{};return i("popup2",home.deepExtend({mods:{theme:"normal",target:"anchor",hiding:"yes",autoclosable:"yes"},mainOffset:"default"===n.view?2:undefined,mix:{block:"select2",elem:"popup",elemMods:e.mods,js:e.js},directions:["bottom-left","bottom-right","top-left","top-right"],content:i("select2__menu",{itemIconHidden:e.itemIconHidden,menu:e.menu})},e.popup))})),o("select2__control",(function(e,t,i){var n=e.mods||{},o=e.content;if(o===undefined){var s=e.val,r=Boolean(n.native);o=e.items.map((function(e){return i("select2__control-option",{attrs:{value:e.val,disabled:Boolean((e.elemMods||{}).disabled),selected:-1!==s.indexOf(e.val)?"selected":undefined},content:r?home.htmlFilter(e.text):undefined})})).join("")}return i("select2__control-layout",{attrs:{name:e.name,tabindex:"-1",multiple:e.multiple,required:e.required,disabled:Boolean(n.disabled)},content:o})})),o("select2__control-option",(function(e,t,i){return"<option"+home.parseRules.bem(e,t,"attrs")+">"+(void 0!==e.content?e.content:"")+"</option>"})),o("select2__control-layout",(function(e,t,i){return'<select class="'+home.parseRules.bem(e,t,"select2__control.class")+'"'+home.parseRules.bem(e,t,"attrs")+">"+(void 0!==e.content?e.content:"")+"</select>"})),o("afisha-event-film",(function(e,t,i){var n=e.event||{},o=Boolean(e.dummy),s=(e.mix||"")+" afisha-event-film",r={imageMix:e.imageMix||"",imageAttrs:e.imageAttrs||{}};return o?(s+=" afisha-event-film_dummy",r.content=i("span",{mod:"afisha-event-film__dummy-text"})):(r.imageAttrs["data-image"]||(r.imageMix+=" afisha-event-film__image_empty_yes",r.imageMix+=" afisha-event-film__image_empty-type_"+Math.floor(5*Math.random())),r.content=i("span",{mod:"afisha-event-film__title",content:home.prepareSpaces(n.full||n.name)})+i("span",{mod:"afisha-event-film__genre",content:n.genre||""})),n.release&&(n.premiere_badge=""),r.premiere=n.premiere_badge?i("span",{mod:"afisha-event-film__premiere",content:home.capitalize(n.premiere_badge.toLowerCase())}):"",i("home-link",{href:e.href,mix:s,stat:e.stat,content:i("afisha-event-film__layout",r),target:i("new-tab-links__check")?"_blank":""})})),o("afisha-event-film__layout",(function(e,t,i){var n;return'<span class="afisha-event-film__image-wrapper"><span class="afisha-event-film__image '+(e.imageMix!==n?e.imageMix:"")+'"'+home.parseRules.bem(e,t,"imageAttrs.attrs")+"></span>"+(e.premiere!==n?e.premiere:"")+'</span><span class="afisha-event-film__content">'+(e.content!==n?e.content:"")+"</span>"})),o("afisha-event-show__dates",(function(e,t,i){var n=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],o=e.dates,s=[],r=[];function a(e){var t=new Date(e);isNaN(t.valueOf())||(s.push(t.getMonth()),r.push(t.getDate()))}return a(o[0]),o[0].split("-")[1]===o[o.length-1].split("-")[1]?(a(o[1]),s.length=1):(a(o[o.length-1]),r.length=0),i("span",{mod:"afisha-event-show__date afisha-event-show__date_days_"+r.length,content:(r.length?i("span",{mod:"afisha-event-show__day",content:r.join(", ")}):"")+s.map((function(e){return i("span",{mod:"afisha-event-show__month",content:t.l10n("months_short_genetive."+n[e])})})).join("")})})),o("afisha-event-show",(function(e,t,i){var n=e.event||{},o=Boolean(e.dummy),s=(e.mix||"")+" afisha-event-show",r={innerMix:e.innerMix||"",imageMix:e.imageMix||"",imageAttrs:e.imageAttrs||{}};if(n.place||(n.place="    "),n.title&&n.description&&n.place&&(s+=" afisha-event-show_content_full"),n.price){var a={rub:i("rouble",{}),kzt:"",byn:".."}[n.currency_code];if(a){var c=n.price/100;r.price=i("span",{mod:"afisha-event-show__price",content:" %s".replace("%s",c+" "+a)})}else home.error.logError({block:"afisha-event-show",message:"Unknown currency: "+n.currency_code})}return o?(s+=" afisha-event-show_dummy",r.content=i("span",{mod:"afisha-event-show__dummy-text"})):(!r.imageAttrs["data-image"]&&n.type&&(r.imageMix+="afisha-event-show__image_empty_"+n.type+"_"+Math.floor(4*Math.random())),r.dates=Array.isArray(n.dates)&&n.dates.length?i("afisha-event-show__dates",{dates:n.dates}):"",r.content=["title","description","place"].reduce((function(e,t){return n[t]&&(e+=i("span",{mod:"afisha-event-show__"+t,content:n[t]})),e}),"")),i("home-link",{mix:s,href:e.href,stat:e.stat,content:i("afisha-event-show__layout",r),target:i("new-tab-links__check")?"_blank":""})})),o("afisha-event-show__layout",(function(e,t,i){var n;return'<span class="afisha-event-show__inner '+(e.innerMix!==n?e.innerMix:"")+'"><span class="afisha-event-show__image '+(e.imageMix!==n?e.imageMix:"")+'" '+home.parseRules.bem(e,t,"imageAttrs.attrs")+"></span>"+(e.price!==n?e.price:"")+'<span class="afisha-event-show__content"><span class="afisha-event-show__text">'+(e.content!==n?e.content:"")+"</span>"+(e.dates!==n?e.dates:"")+"</span></span>"})),o("rouble",(function(e,t,i){return'<span class="rouble'+(void 0!==e.mod?e.mod:"")+'"></span>'})),o("afisha-inserts__panel-shows",(function(e,t,i){var n,o="afisha_inserts.link."+e.key+".all";return e.events&&e.events.length?(t.stat.logShow(o),n=e.events.map((function(n){var s;return n.image_url&&(s=n.image_url.raw?n.image_url.raw:{1:n.image_url+"/s280x136",2:n.image_url+"/s560x272"}),n.type=e.key,i("afisha-event-show",{href:n.url,mix:"afisha-inserts__event afisha-inserts__event_type_show media-service__item home-link_hover_inherit imageloader__card",innerMix:"media-service__shadow",imageMix:"media-service__image imageloader__image",imageAttrs:{"data-image":s?home.htmlFilter("string"==typeof s?s:JSON.stringify(s)):undefined},stat:t.stat.getAttr(o,null,{logShow:!1}),event:n})})).join(""),i("afisha-inserts__carousel",{content:n,js:{counter:"afisha_inserts"}})):i("afisha-inserts__panel-empty",{content:n=",     "})})),o("afisha-inserts__carousel",(function(e,t,i){var n="afisha-inserts";return i("arrowed-list_theme_media",{mix:n+"__list-wrapper media-service__list-wrapper",wrapMix:n+"__wrap media-service__wrap imageloader__scroller",listMix:n+"__list media-service__list",content:e.content,mods:{theme:"media","arrow-position":"weighted"},js:{"arrowed-list":e.js,imageloader:{}}})})),o("afisha-inserts__dummy-panel",(function(e,t,i){var n;return n=i("afisha-event-show",{mix:"afisha-inserts__event media-service__item",innerMix:"media-service__shadow",imageMix:"media-service__image",stat:"",dummy:!0}),i("afisha-inserts__carousel",{content:new Array(6).join(n),js:{step:680,offset:1120}})})),o("afisha-inserts__panel-cinema",(function(e,t,i){var n,o="afisha_inserts.link.cinema."+("cinema"===e.key?"all":"fav");return e.events&&e.events.length?(n=e.events.map((function(e){var n,s;return(n=e.posters&&Object.keys(e.posters).length)&&(s=e.posters.base?{1:e.posters.base+"/120x180",2:e.posters.base+"/240x360"}:e.posters.raw?e.posters.raw:{1:e.posters["120x180"],2:e.posters["240x360"]}),e.genre=(e.genre||"").toLowerCase(),i("afisha-event-film",{href:e.href,mix:"afisha-inserts__event afisha-inserts__event_type_film media-service__item home-link_hover_inherit imageloader__card",imageMix:"media-service__shadow media-service__image imageloader__image",imageAttrs:{"data-image":n?home.htmlFilter("string"==typeof s?s:JSON.stringify(s)):undefined},stat:t.stat.getClientCounter(o),event:e})})).join(""),i("afisha-inserts__carousel",{content:n,js:{counter:"afisha_inserts"}})):(n="    ",e.cinema&&e.cinema.href&&(n+=i("button2",{mix:"afisha-inserts__no-films-link",mods:{theme:"normal",size:"s"},content:"  ",url:home.addQueryToUrl(e.cinema.href,{"schedule-preset":"tomorrow"}),stat:t.stat.getClientCounter("afisha_inserts.no_timetable")})),i("afisha-inserts__panel-empty",{content:n}))})),o("afisha-inserts__tabs",(function(e,t,i){var n=[],o=e.tabs||[];return o.length>0&&(o=[{id:"cinema"}].concat(o)),o.forEach((function(o){var s=o.id===e.defaultTab,r=o.title||t.l10n("afisha."+o.id);n.push(i("mix-tabber__tab",{mods:{selected:s?"yes":"no"},mix:home.getBEMClassname("afisha-inserts__tab",{mods:{selected:s?"yes":"no"}}),content:r,attrs:{tabindex:s?0:-1,"aria-selected":s?"true":"false","aria-controls":s?"afisha-inserts_panel_"+o.id:undefined,"data-key":o.id,id:"afisha-inserts_tab_"+o.id,"data-stat-select":"afisha_inserts.tab.select."+o.id}}))})),n})),o("afisha-inserts__title",(function(e,t){return""})),o("afisha-inserts__content",(function(e,t,i){var n=e.retryButtonTheme,o=t.zenInsert,s=e.afisha.events,r=i("afisha-inserts__tabs",{tabs:e.afisha.tabs,defaultTab:"cinema"}),a="afisha-inserts_"+home.rnd().substr(0,5);return e.mods=e.mods||{},i("media-service",{block:"afisha-inserts",rootMod:home.getBEMClassname("afisha-inserts",e)+" i-bem media-grid__afisha-inserts",mods:{"has-carousel":"yes",tabs:r.length>1?"yes":undefined},href:e.href,target:i("new-tab-links__check")?"_blank":"",title:i("afisha-inserts__title"),titleStat:t.stat.getClientCounter("afisha_inserts.title"),tabs:r.join("")||" ",content:i("afisha-inserts__layout",{panelId:a+"_panels",panel:i("mix-tabber__panel",{block:"afisha-inserts",id:a,key:"cinema",mix:" media-service__panel",attrs:{"aria-labelledby":a+"_tab_cinema"},content:i("afisha-inserts__panel-cinema",{key:"cinema",events:s})})}),attrs:{role:"complementary","aria-label":"","data-bem":home.getBEMParams({"afisha-inserts":{selectedKey:"cinema",retryButtonTheme:n,live:!o,uniqId:a,logged:e.logged,geoId:e.geoId,locale:e.locale,geohelperHost:e.geohelperHost,nativeSelect:Boolean(e.nativeSelect)}})}})})),o("afisha-inserts__client-view",(function(e,t,i){var n=home.getData("afisha-inserts.data");if(n)return i("afisha-inserts__content",n)})),o("afisha-inserts__panel-empty",(function(e,t,i){return'<div class="afisha-inserts__panel-empty"><div class="afisha-inserts__panel-empty-center">'+(void 0!==e.content?e.content:"")+"</div></div>"})),o("afisha-inserts__fav-icon",(function(e,t,i){return'<svg class="afisha-inserts__fav-icon" width="14" height="14" viewBox="0 0 14 14"><path d="M2 13.38V1h10v12.38L7 9.67" clip-rule="evenodd" fill-rule="evenodd"/></svg>'})),o("afisha-inserts__layout",(function(e,t,i){var n;return'<div class="media-service__panels afisha-inserts__panels" id="'+(e.panelId!==n?e.panelId:"")+'">'+(e.panel!==n?e.panel:"")+"</div>"})),o("mix-tabber-select",(function(e,t,i){return e.mix=e.mix||"",e.mix+=" mix-tabber__select",i("select2",e)})),o("button2__icons",(function(e,t,i){var n=[];return e.icon?n.push(i("button2__icon",{mod:e.icon})):e.iconObj&&n.push(i("icon",{mods:e.iconObj.mods,mix:"button2__icon"+(e.iconObj.mix?" "+e.iconObj.mix:""),url:e.iconObj.url})),e.iconLeft?n.push(i("button2__icon",{mod:"button2__icon_side_left "+e.iconLeft})):e.iconLeftObj&&n.push(i("icon",{mods:e.iconLeftObj.mods,mix:"button2__icon button2__icon_side_left"+(e.iconLeftObj.mix?" "+e.iconLeftObj.mix:""),url:e.iconLeftObj.url})),e.iconRight?n.push(i("button2__icon",{mod:"button2__icon_side_right "+e.iconRight})):e.iconRightObj&&n.push(i("icon",{mods:e.iconRightObj.mods,mix:"button2__icon button2__icon_side_right"+(e.iconRightObj.mix?" "+e.iconRightObj.mix:""),url:e.iconRightObj.url})),n.join("")})),o("button2__default_mods",(function(){return"i-bem"})),o("button2",(function(e,t,i){var n=e.mods||{},o=e.tag||"button",s=e.textMix?" "+e.textMix:"",r=e.mixJs||{},a=e.attrs||{};return e.url?o="a":e.tag&&(o=e.tag),n.theme||("yes"===n.pseudo?n.theme="pseudo":n.theme="normal"),a.role="button",e.tabindex&&(a.tabindex=e.tabindex),e.url?(a.href=e.url,e.target&&(a.target=e.target),n.disabled&&(a["aria-disabled"]=!0),"_blank"===a.target&&"undefined"==typeof a.rel&&(a.rel="noopener")):(a.type=e.type||"button",e.name&&(a.name=e.name),e.value&&(a.value=e.value),n.disabled&&(a.disabled="disabled")),n.view||(n.view="classic"),r.button2=e.js||{},a["data-bem"]=home.getBEMParams(r),"<"+o+' class="'+home.getBEMClassname("button2",{mods:n,mix:e.mix})+" "+i("button2__default_mods",e)+'"'+home.getAttributes(a)+(e.stat||"")+">"+i("button2__icons",e)+'<span class="button2__text'+s+'"'+(e.text&&e.text.attrs?home.getAttributes(e.text.attrs):"")+">"+(e.content||"")+"</span></"+o+">"})),o("button2__icon",(function(e,t,i){return'<span class="icon button2__icon '+(void 0!==e.mod?e.mod:"")+'" aria-hidden="true"></span>'})),o("icon_glyph_afisha-fav",(function(e,t,i){return'<svg focusable="false" xmlns="http://www.w3.org/2000/svg" width="12" height="16"><path d="M2 1h8a1 1 0 0 1 1 1v11.96a.5.5 0 0 1-.812.39L6 11l-4.188 3.35A.5.5 0 0 1 1 13.96V2a1 1 0 0 1 1-1z" fill-rule="evenodd"/></svg>'})),o("icon_glyph_carets-v",(function(e,t,i){return'<svg focusable="false" xmlns="http://www.w3.org/2000/svg" width="8" height="14" viewBox="0 0 8 14"><path d="M4 0l4 6H0l4-6zm0 14l4-6H0l4 6z"/></svg>'})),o("icon_glyph_type-check",(function(e,t,i){return'<svg focusable="false" xmlns="http://www.w3.org/2000/svg" width="16" height="10" viewBox="0 0 16 10"><path d="M7.207 7.506L3.629 3.81 2.343 4.939l4.841 5.002 8.462-8.428L14.382.362z"/></svg>'})),o.cached("geohelper__disable-check",(function(e){return Boolean(e.options&&"1"===e.options.disable_geohelper_blocks||home.getData&&home.getData("geohelper.disabled"))})),o("district-inserts__post-value",(function(e,t,i){var n="district-inserts__post-value";return e.active&&(n+=" district-inserts__post-value_active"),e.isNew&&(n+=" district-inserts__post-value_new"),i("span",{mod:n,content:e.count})})),o("district-inserts__title",(function(e,t){return"uz"===t.MordaZone?"":home.flags.checkBool(t,"rename_district")?" ":" "})),o("district-inserts__panel",(function(e,t,i){var n="district-inserts",o=e.exp&&e.exp.district_pic,s=e.exp.interactive,r=s?"district-inserts__post-footer-item-interactive":"district-inserts__post-footer-item",a=i("new-tab-links__check")?"_blank":"",c=e.data.map((function(e,n){var c=e.user||{},l=i("district-inserts__avatar",{url:c.avatar_url||i("avatar__href",{})});return i("home-link",{href:e.url,target:a,mods:{hover:"inherit"},mix:"district-inserts__post district-inserts__post_visible_no media-service__item imageloader__card",stat:t.stat.getClientCounter("district_inserts.link."+n,!1,{id:e.id}),attrs:{"data-post-id":e.id},content:i("district-inserts__post",{avatar:l,name:home.htmlFilter(c.display_name),address:home.htmlFilter(e.district),text:home.htmlFilter(e.text),postImg:o&&e.image?i("district-inserts__post-img",{img:e.image+(i("retina-scale__is-big")?"/s136x136_crop":"/s68x68_crop"),mods:{many:e.images_count>1?"yes":""},mix:"imageloader__image imageloader__image_loaded_no"}):"",images:!o&&e.images_count&&i("district-inserts__post-footer-item",{type:"images",value:i("district-inserts__post-value",{count:e.images_count})})||"",comments:e.comments_cnt&&i("district-inserts__post-footer-item",{type:"comments",value:i("district-inserts__post-value",{count:e.comments_cnt})})||"",likes:i(r,{type:"likes",stat:s&&t.stat.getClientCounter("district_inserts.like."+n,!1,{id:e.id})||"",value:i("district-inserts__post-value",{count:e.likes_cnt})}),dislikes:i(r,{type:"dislikes",stat:s&&t.stat.getClientCounter("district_inserts.dislike."+n,!1,{id:e.id})||"",value:i("district-inserts__post-value",{count:e.dislikes_cnt})})})})})).join("");return i("arrowed-list_theme_media",{mix:n+"__list-wrapper media-service__list-wrapper imageloader",wrapMix:n+"__wrap media-service__wrap imageloader__scroller",listMix:n+"__list media-service__list",content:c,mods:{theme:"media"},js:{"arrowed-list":{counter:"district_inserts"},imageloader:{}}})})),o("district-inserts__content",(function(e,t,i){var n=e.exp.interactive,o={live:!t.zenInsert},s="ru";"uz"!==t.MordaZone&&"by"!==t.MordaZone||(s=t.MordaZone);var r="local.yandex."+s;if(n){o.api={react:home.makeUrl({scheme:"https",host:r,path:"/api/events/%s/react",query:{from:"home"}}),sk:home.makeUrl({scheme:"https",host:r,path:"/sapi/sk",query:{from:"home"}})};var a=e.data,c={ids:[],from:"home"};Array.isArray(a)&&a.forEach((function(e){e.id&&c.ids.push(e.id)})),c.ids.length&&(o.api.counters=home.makeUrl({scheme:"https",host:r,path:"/api/events/counters",query:c}))}return i("media-service",{block:"district-inserts",rootMod:home.getBEMClassname("district-inserts",e)+" i-bem media-grid__district-inserts"+(n?" district-inserts_interactive_yes":""),mods:{"has-carousel":"yes"},href:e.url+"?utm_source=main&utm_medium=zenpromoblock&from=home",title:e.title,target:i("new-tab-links__check")?"_blank":"",titleStat:t.stat.getClientCounter("district_inserts.title",!1,{rtxreqid:e.rtxreqid}),"title-after":i("home-link",{content:i("district-inserts__compose",e),href:home.makeUrl({scheme:"https",host:r,path:"/create",query:{utm_source:"main",utm_medium:"zenpromoblock",utm_content:"write",from:"home"}}),target:i("new-tab-links__check")?"_blank":"",stat:t.stat.getClientCounter("district_inserts.compose"),mix:"home-link_gray_yes district-inserts__compose"}),content:i("district-inserts__layout",{panel:i("district-inserts__panel",e)}),attrs:{role:"complementary","aria-label":" ","data-bem":home.getBEMParams({"district-inserts":o})}})})),o("district-inserts__client-view",(function(e,t,i){var n=home.getData("district-inserts.data");if(n)return i("district-inserts__content",n)})),o("district-inserts__avatar",(function(e,t,i){return'<span class="district-inserts__post-avatar imageloader__image imageloader__image_loaded_no" data-image="'+(void 0!==e.url?e.url:"")+'"></span>'})),o("district-inserts__post-img",(function(e,t,i){return'<span class="'+home.parseRules.bem(e,t,"district-inserts__post-img.class")+'" data-image="'+(void 0!==e.img?e.img:"")+'"></span>'})),o("district-inserts__compose",(function(e,t,i){return'<span class="district-inserts__compose-icon"><svg class="district-inserts__compose-icon-svg" width="16" height="16"><path fill-rule="evenodd" d="M14 0l2 2-8 8-3 1 1-3 8-8zM0 2h5v2H2v10h10v-4h2v6H0V2z"/></svg></span> '})),o("district-inserts__post-footer-item",(function(e,t,i){var n;return'<span class="district-inserts__post-footer-item district-inserts__post-footer-item_type_'+(e.type!==n?e.type:"")+'"><span class="district-inserts__post-icon-wrapper"><span class="district-inserts__post-icon"></span></span><span class="district-inserts__post-value-wrapper">'+(e.value!==n?e.value:"")+"</span></span>"})),o("district-inserts__post",(function(e,t,i){var n;return'<span class="district-inserts__post-inner media-service__bg media-service__shadow"><span class="district-inserts__post-header">'+(e.avatar!==n?e.avatar:"")+'<span class="district-inserts__post-header-texts"><span class="district-inserts__post-name">'+(e.name!==n?e.name:"")+'</span><span class="district-inserts__post-address">'+(e.address!==n?e.address:"")+"</span></span></span>"+(e.postImg!==n?e.postImg:"")+'<span class="district-inserts__post-text i-multiline-overflow">'+(e.text!==n?e.text:"")+'</span><span class="district-inserts__post-footer"><span class="district-inserts__post-footer-left">'+(e.images!==n?e.images:"")+(e.comments!==n?e.comments:"")+'</span><span class="district-inserts__post-footer-right">'+(e.likes!==n?e.likes:"")+(e.dislikes!==n?e.dislikes:"")+"</span></span></span>"})),o("district-inserts__layout",(function(e,t,i){return'<div class="media-service__panels district-inserts__panels"><div class="media-service__panel district-inserts__panel">'+(void 0!==e.panel?e.panel:"")+"</div></div>"})),o("district-inserts__post-footer-item-interactive",(function(e,t,i){var n;return'<span class="district-inserts__post-footer-item district-inserts__post-footer-item_type_'+(e.type!==n?e.type:"")+'" '+(e.stat!==n?e.stat:"")+'><span class="district-inserts__post-icon-wrapper"><span class="district-inserts__post-icon district-inserts__post-icon_default"></span><span class="district-inserts__post-icon district-inserts__post-icon_active"></span></span><span class="district-inserts__post-value-wrapper">'+(e.value!==n?e.value:"")+"</span></span>"})),o("rtb-inserts__content",(function(e,t,i){var n,o,s,r,a={};return t&&t.cls?(n=t.cls.full("rtb-inserts"),o=t.cls.full("rtb-inserts_dummy"),s=t.cls.full("rtb_inserts"),r=t.cls.full("rtb-inserts_dark"),t.settingsJs.add("data",e.clientData,"rtb-inserts")):(n=home.cls.full("rtb-inserts"),o=home.cls.full("rtb-inserts_dummy"),s=home.cls.full("rtb_inserts"),r=home.cls.full("rtb-inserts_dark"),window.home.rtbInserts=e.clientData),a[n]={},i("div",{mix:n+" "+o+" i-bem "+(e.isDark?r:""),attrs:{"data-statlog":s+".content",id:n,"data-bem":home.getBEMParams(a)}})})),o("rtb-inserts__client-view",(function(e,t,i){var n=home.getData("rtb-inserts.data")||{},o=$.extend({},n.clientData,{live:t.zenInsert});return i("rtb-inserts__content",$.extend({},n,{clientData:o}))})),o("stream-inserts__carousel-id",(function(e,t,i){var n=i("stream-inserts__params")||{};return n[e.layoutName]&&n[e.layoutName].carouselId})),o("stream-inserts__item",(function(e,t,i){var n=e.item||{},o=e.streamInserts||{},s=e.counter||"",r="",a=e.fromBlock||o[e.carousel_id],c=e.itemMix?" "+e.itemMix:"",l=e.isLargeHorizontal,u=e.isLargePoster,d=e.isMain,h=e.redesignPlatformAvatar;if(a=a?a+"_item":"item",e.fromBlockPrefix&&(a=e.fromBlockPrefix+"_"+a),"horizontal"===e.type){d&&(c+=" stream-inserts__main-thumb"),h&&(c+=" stream-inserts__item_with-avatar_yes"),c+=l?"  stream-inserts__item_large-horizontal_yes imageloader__column":" stream-inserts__item_type_horizontal";var m="media-service__bg stream-inserts__item_dummy_yes";m+=l?" stream-inserts__horizontal-card_large_yes":" media-service__shadow",m+=h?" stream-inserts__horizontal-card_with-avatar_yes":"",r=e.dummy?i("stream-inserts__horizontal-card-dummy",{mix:m,mods:{dummy:"yes"},dymmyOwner:h?i("stream-inserts__horizontal-card-dummy-owner"):""}):i("stream-inserts__horizontal-card",{item:n,mix:"media-service__bg"+(l?"":" media-service__shadow"),thumbMix:"media-service__image imageloader__image"+(l?" media-service__shadow":""),allowVideoPreview:e.allowVideoPreview,delayVideoPreview:e.delayVideoPreview,redesignPlatformAvatar:h,fromBlock:a,carouselId:e.carousel_id,counter:e.counter,isLarge:l,isLoop:l})}else{c+=u?" stream-inserts__item_large-poster_yes imageloader__column":"",c+=h?" stream-inserts__item_with-avatar_yes":"",e.dummy&&(c+=" stream-inserts__item_dummy_yes ");var p=u?i("stream-meta",{release_year:n.release_year,genres:n.genres,blogger:n.blogger,lightRecent:!0}):"",f=u?"rgba(0, 0, 0, .1)":"#dfdcd7";r=i("stream-inserts__item-inner",{poster:home.getAttributes({"data-image":n.onto_poster&&home.getVideoThumbUrl({url:n.onto_poster,size:"180x270",block:"stream-inserts",retinaScale:i("retina-scale")})}),bgColorStyle:home.getAttributes({style:!e.dummy&&u&&n.main_color?"background-color: "+(n.main_color||f):""}),mediaPlay:i("media-play",{mods:{type:"kinopoisk"}}),bgMix:e.dummy&&u?"":" media-service__shadow",title:home.prepareSpaces(n.title),subtitle:p,rating:n.rating_kp?i("kinopoisk-rating",{mix:"kinopoisk__film-rating",rating:n.rating_kp}):"",restrictionAge:n.restriction_age>=18?i("restriction-age",{restrictionAge:n.restriction_age,mods:{type:"poster"}}):""})}var _=n.channel?n.channel.content_id:n.content_id;return i("home-link",{href:h&&n.blogger?"":i("stream-url",{fromBlock:a,streamId:_,frontendVhReqId:n.frontendVhReqId,recommenderReqId:n.recommenderReqId}),mods:{hover:"inherit"},target:"_blank",mix:"stream-inserts__item media-service__item media-play__container imageloader__card "+c,stat:t.stat.getClientCounter(s,!1,{content_id:n.content_id,carousel_id:e.carousel_id}),content:r})})),o("stream-inserts__column",(function(e,t,i){var n=e.items,o=e.streamInserts||{},s=e.fromBlock||o[e.carousel_id],r="",a=e.redesignPlatformAvatar;return s=s?s+"_item":"item",e.fromBlockPrefix&&(s=e.fromBlockPrefix+"_"+s),n.forEach((function(n,o){var c=e.dummy?i("stream-inserts__horizontal-card-dummy",{mix:"media-service__bg stream-inserts__item_dummy_yes stream-inserts__horizontal-card_small_yes"+(a?" stream-inserts__horizontal-card_with-avatar_yes":""),mods:{dummy:"yes"},dymmyOwner:a?i("stream-inserts__horizontal-card-dummy-owner"):""}):i("stream-inserts__horizontal-card",{isSmall:!0,item:n,mix:"media-service__bg",thumbMix:"media-service__image imageloader__image media-service__shadow",fromBlock:s,counter:e.counter+"."+(o+e.counterStartIndex),carouselId:e.carousel_id,allowVideoPreview:e.allowVideoPreview,delayVideoPreview:e.delayVideoPreview,redesignPlatformAvatar:e.redesignPlatformAvatar}),l="stream-inserts__item media-service__item media-play__container imageloader__card stream-inserts__item_small-horizontal_yes";a&&(l+=" stream-inserts__item_with-avatar_yes");var u=a&&n.blogger;r+=i("home-link",{href:e.dummy||u?"":i("stream-url",{fromBlock:s,streamId:n.content_id,frontendVhReqId:n.frontendVhReqId,recommenderReqId:n.recommenderReqId}),stat:e.dummy?"":t.stat.getClientCounter(e.counter+"."+(e.counterStartIndex+o),!1,{content_id:n.content_id,carousel_id:e.carousel_id}),mods:{hover:"inherit"},target:"_blank",mix:l,content:c})})),i("stream-inserts__column-inner",{content:r})})),o("stream-inserts__item-list",(function(e,t,i){var n=e.set||[],o=[],s=e.channelEpisodes||{},r=e.counter||i("stream-inserts__stat-root",e.carousel_id)+".item",a="",c=e.redesignPlatform,l=e.largeThumbsPlatform||2,u="poster"===e.type?l+1:2*l+1;n.forEach((function(e){var t="channel"===e.content_type_name?s[e.content_id]:e;t&&o.push(t)}));for(var d=0;d<o.length;d++){var h=c&&!(d%u),m=c&&"poster"===e.type,p=0===d;!c||h||m?a+=i("stream-inserts__item",{item:o[d],type:h?"horizontal":e.type,counter:r+"."+d,streamInserts:e.groups,carousel_id:e.carousel_id,isLargeHorizontal:h,isLargePoster:m,itemMix:e.itemMix,fromBlockPrefix:e.fromBlock,isMain:p,allowVideoPreview:e.allowVideoPreview,delayVideoPreview:e.delayVideoPreview,redesignPlatformAvatar:e.redesignPlatformAvatar}):o[d]&&o[d+1]&&(a+=i("stream-inserts__column",{items:[o[d],o[d+1]],type:e.type,counter:r,counterStartIndex:d,streamInserts:e.groups,carousel_id:e.carousel_id,itemMix:e.itemMix,fromBlockPrefix:e.fromBlock,allowVideoPreview:e.allowVideoPreview,delayVideoPreview:e.delayVideoPreview,redesignPlatformAvatar:e.redesignPlatformAvatar}),d++)}return a})),o("stream-inserts__content",(function(e,t,i){var n="stream-inserts";return e.fromBlock="stream_inserts",e.groups=e.streamCarousels,i("stream-inserts__layout",{content:i("arrowed-list_theme_media",{mix:n+"__list-wrapper media-service__list-wrapper imageloader",wrapMix:n+"__wrap media-service__wrap imageloader__scroller",listMix:n+"__list media-service__list",content:e.dummyItems?e.dummyItems:i("stream-inserts__item-list",e),counter:e.counter,mods:{theme:"media","arrow-position":"weighted"},js:{"arrowed-list":{counter:e.carousel_id&&i("stream-inserts__stat-root",e.carousel_id)},imageloader:{}}})})})),o("stream-inserts",(function(e,t,i){var n=i("stream-inserts__categories-to-insert-name-map"),o=i("stream-inserts__stat-root",e.carousel_id),s=(e.streamCarousels||{})[e.carouselId],r={fromBlock:n[e.carousel_id]+"_title",streamDefault:1},a=e.title;return s?(r.streamActive="category",r.streamCategory=s):(r.streamActive="theme",r.streamPublisher=e.carouselId),e.fromBlock="stream_inserts",e.groups=e.streamCarousels,i("media-service",{block:"stream-inserts",rootMod:"stream-inserts i-bem"+("horizontal"===e.type?" stream-inserts_type_horizontal":""),title:a,titleIcon:i("media-service__title-icon-url",{layoutName:e.layoutName}),mods:{"has-carousel":"yes"},href:i("stream-url",r),titleStat:t.stat.getClientCounter(o+".title"),content:i("stream-inserts__content",e),target:"_blank",attrs:{role:"complementary","aria-label":a,"data-bem":home.getBEMParams({"stream-inserts":{live:!1}})}})})),o("stream-inserts__stat-root",(function(e,t,i){return i("stream-inserts__categories-to-insert-name-map")[e]||""})),o.cached("stream-inserts__params",(function(e){return{stream_inserts_films:{carouselId:"CATEG_FILM",title:"",collapsedText:"  ",exp:"zen_inserts_stream"},stream_inserts_series:{carouselId:"CATEG_SERIES",title:"",collapsedText:"  ",exp:"zen_inserts_stream"},stream_inserts_anim_films:{carouselId:"CATEG_ANIM_FILM",title:"",collapsedText:"  ",exp:"zen_inserts_stream"},stream_inserts_anim_series:{carouselId:"CATEG_ANIM_SERIES",title:"",collapsedText:"   ",exp:"zen_inserts_stream"}}})),o.cached("stream-inserts__categories-to-insert-name-map",(function(e,t){var i=t("stream-inserts__params"),n={};for(var o in i)i.hasOwnProperty(o)&&(n[i[o].carouselId]=o);return n})),o("stream-inserts__zen-insert-shared",(function(e,t,i){var n=home.getData("stream-inserts.data");if(n)return n.carouselId=e.carouselId,n.type=e.type,n.title=e.title,n.collapsedText=e.collapsedText,n.layoutName=e.layoutName,i("stream-inserts-loader",{params:n})})),o("stream-inserts__client-view",(function(e,t,i){var n=i("stream-inserts__params");return n[e.params.layoutName]?i("stream-inserts__zen-insert-shared",{carouselId:n[e.params.layoutName].carouselId,type:n[e.params.layoutName].type,title:n[e.params.layoutName].title,collapsedText:n[e.params.layoutName].collapsedText,layoutName:e.params.layoutName}):""})),o("stream-inserts__column-inner",(function(e,t,i){return'<div class="stream-inserts__column-inner imageloader__column">'+(void 0!==e.content?e.content:"")+"</div>"})),o("stream-inserts__item-inner",(function(e,t,i){var n;return'<span class="stream-inserts__item-inner"><span class="stream-inserts__item-bg media-service__bg '+(e.bgMix!==n?e.bgMix:"")+'"><span class="stream-inserts__item-image media-service__image imageloader__image" '+(e.poster!==n?e.poster:"")+" "+(e.bgColorStyle!==n?e.bgColorStyle:"")+"></span>"+(e.rating!==n?e.rating:"")+(e.mediaPlay!==n?e.mediaPlay:"")+(e.restrictionAge!==n?e.restrictionAge:"")+'</span></span><span class="stream-inserts__item-title media-service__item-title">'+(e.title!==n?e.title:"")+'</span><span class="stream-inserts__item-subtitle">'+(e.subtitle!==n?e.subtitle:"")+"</span>"})),o("stream-inserts__layout",(function(e,t,i){return'<div class="media-service__panels stream-inserts__panels"><div class="media-service__panel stream-inserts__panel">'+(void 0!==e.content?e.content:"")+"</div></div>"})),o("stream-url",(function(e,t,i){(e=e||{}).streamDefault&&!e.streamChannel&&(e.streamChannel="default");var n=e.fromBlock||i("stream-url__fromblock_default"),o=e.fromBlockPrefix;o===undefined&&(o=i("stream-url__fromblock-prefix")),n&&/^([-\w]+)$/.test(n)?n=o+n:o&&!e.fromBlockCode&&(home.error("stream-url: invalid fromBlock "+n),n=undefined),e.fromBlockCode&&(n=undefined);var s,r,a="object"==typeof Ya&&Ya.streamCms&&Ya.streamCms.settings||i("stream-settings"),c=a.streamPath,l=a.streamPaths,u=a.streamSharePath,d=a.streamRetPath,h=a.homePageNoArgs||"",m=a.streamYellowSkin,p=a.streamYellowSkinParams,f={frontend_vh_reqid:e.frontendVhReqId,recommender_reqid:e.recommenderReqId,stream_active:e.streamActive,stream_id:e.streamId,stream_channel:e.streamChannel,stream_category:e.streamCategory,stream_publisher:e.streamPublisher,search_text:e.streamSearchText,filters:e.streamFilters,channels_category:e.channelsCategory,mch:e.mainChannelId,from_block:n,source:e.source,f:e.fromBlockCode},_=c,g=home.parseUrl(h);e.path&&"undefined"!=typeof l[e.path]&&(_=l[e.path]),e.isSharing&&(s=g.host,r="https",_=u),e.isRetPath&&(s=g.host,r="https",_=d),e.isSportContent&&(s=a.yandexSportUrl,r="https",_="/efir"),e.isDRMContent&&(s="yandex."+(t.MordaZone||"ru"),r="https",_="/efir"),(e.withHost||m)&&(s=g.host,r="https"),e.query&&Object.assign(f,e.query),a.videohub_as_vertical&&a.searchAppParams&&(f=Object.assign({},f,{vertical_stream:"1"},a.searchAppParams),r="https");var v=home.makeUrl({scheme:r,host:s,path:_,query:f});return m?home.yellowskin(p,v):v})),o("stream-inserts__horizontal-card",(function(e,t,i){var n,o=e.item||{},s=o.channelSettings||{},r=parseInt(t.Timestamp||home.now&&home.now()/1e3,10),a=r>=o.start_time&&r<=o.end_time,c=e.isSmall?null:o.onto_poster||s.thumbnail,l=e.redesignPlatformAvatar,u="",d="",h=[],m=[],p=i("stream-thumbnail__src",{thumbnail:o.thumbnail,size:e.isLarge?"medium":"small"}),f=e.counter,_=e.fromBlock,g=e.carouselId,v=home.getAttributes({style:e.isLarge&&o.main_color?"background-color: "+(o.main_color||"#dfdcd7"):""}),b=i("stream-duration",{item:o}),y=e.attrs||{},w=e.mix||"",k=e.thumbMix||"",E=e.allowVideoPreview&&o.ya_video_preview,x="object"==typeof Ya?Ya.streamCms&&Ya.streamCms.settings||{}:home.getData?home.getData("stream.settings"):i("stream-settings");E&&!x.videoPreviewDisabled&&(y["data-bem"]=home.getBEMParams({"thumb-preview":{preview:{url:o.ya_video_preview},loop:e.isLoop}}),w+=" thumb-preview thumb-preview_video i-bem",k+=" thumb-preview__target",e.delayVideoPreview&&(w+=" thumb-preview_delay")),c&&(u=i("stream-thumbnail__src",{thumbnail:c}),c=i("stream-inserts__horizontal-card-poster",{mods:{vertical:o.onto_poster?"yes":undefined},thumbMix:e.thumbMix,poster:home.getAttributes({"data-image":u}),bgColorStyle:v,rating:o.rating_kp?i("kinopoisk-rating",{mix:"stream-inserts__horizontal-card-rating",rating:o.rating_kp}):""})),a&&!o.channel&&h.push(i("stream-inserts__horizontal-card-badge",{mods:{live:"yes"},badge:" "})),o.restriction_age>=18&&h.push(i("restriction-age",{mix:"stream-inserts__horizontal-card-badge",restrictionAge:o.restriction_age})),o.channel&&h.push(i("stream-inserts__horizontal-card-badge",{mods:{channel:"yes"},bgColor:home.getAttributes({style:o.channel.main_color?"background-color: "+o.channel.main_color:""}),badge:o.channel.title})),o.deep_hd&&(d=i("stream-inserts__horizontal-card-dhd",{firstLetter:"dHD"[0],text:"dHD".slice(1)})),c||!b&&!d||m.push(i("stream-inserts__horizontal-card-badge",{badge:(b?home.formatDuration(b):"")+(b&&d?"&nbsp;":"")+d})),n=s.title||i("stream-meta",{release_year:o.release_year,genres:o.genres,blogger:o.blogger,lightRecent:!0});var M,C,T,S,P,I=!o.channel&&o.blogger,B=l&&I;if(B){var O=I.title?i("stream-inserts__horizontal-card-owner",{avatar:i("stream-inserts__horizontal-card-avatar",{attrs:I.avatar?{style:"background-image:url("+I.avatar+")"+(I.main_color?";background-color:"+I.main_color:"")}:{},mods:{channel:o.channel?"yes":""}}),author:I.title}):"";n=i("stream-time",{program:o,lightRecent:!0}),I.avatar&&(I.avatar=home.getVideoThumbUrl({url:I.avatar,size:"112x112",block:"stream-inserts-card",retinaScale:1})),B&&I.id&&(M=i("stream-url",{fromBlock:_,streamPublisher:I.id,streamActive:"blogger",frontendVhReqId:o.frontendVhReqId,recommenderReqId:o.recommenderReqId}),C=i("stream-url",{fromBlock:_,streamId:o.content_id,frontendVhReqId:o.frontendVhReqId,recommenderReqId:o.recommenderReqId})),P=i("home-link",{content:O,href:M,stat:t.stat.getClientCounter(f,!1,{content_id:I.id,carousel_id:g})})}var D=i("stream-inserts__horizontal-card-text",{title:o.title,titleMix:n?"":" i-multiline-overflow",subtitle:n?i("stream-inserts__horizontal-card-subtitle",{text:n}):""}),j=i("stream-inserts__horizontal-card-image",{thumbMix:k,bgColorStyle:v,thumb:home.getAttributes({"data-image":p}),poster:c||"",badgesTop:h.join(""),badgesBottom:m.join("")});return T=l?i("home-link",{content:D,href:C,stat:t.stat.getClientCounter(f,!1,{content_id:o.content_id,carousel_id:g}),mix:"stream-inserts__horizontal-card-text-link"}):D,S=l?i("home-link",{content:j,href:C,stat:t.stat.getClientCounter(f,!1,{content_id:o.content_id,carousel_id:g})}):j,i("stream-inserts__horizontal-card-layout",{mix:w,attrs:y,mods:{poster:c?"yes":undefined,subtitle:n?"yes":"no","play-preview":E?"yes":"no",small:e.isSmall?"yes":"no",large:e.isLarge?"yes":"no","with-avatar":l?"yes":"no"},owner:P,text:T,image:S})})),o("stream-inserts__horizontal-card-text",(function(e,t,i){var n;return'<div class="stream-inserts__horizontal-card-text"><div class="stream-inserts__horizontal-card-title '+(e.titleMix!==n?e.titleMix:"")+'">'+(e.title!==n?e.title:"")+"</div>"+(e.subtitle!==n?e.subtitle:"")+"</div>"})),o("stream-inserts__horizontal-card-image",(function(e,t,i){var n;return'<div class="stream-inserts__horizontal-card-image '+(e.thumbMix!==n?e.thumbMix:"")+'" '+(e.thumb!==n?e.thumb:"")+" "+(e.bgColorStyle!==n?e.bgColorStyle:"")+">"+(e.poster!==n?e.poster:"")+'<div class="stream-inserts__horizontal-card-badges-top">'+(e.badgesTop!==n?e.badgesTop:"")+'</div><div class="stream-inserts__horizontal-card-badges-bottom">'+(e.badgesBottom!==n?e.badgesBottom:"")+"</div></div>"})),o("stream-inserts__horizontal-card-avatar",(function(e,t,i){return'<div class="'+home.parseRules.bem(e,t,"stream-inserts__horizontal-card-avatar.class")+'" '+home.parseRules.bem(e,t,"attrs")+"></div>"})),o("stream-inserts__horizontal-card-owner",(function(e,t,i){var n;return'<div class="stream-inserts__horizontal-card-owner">'+(e.avatar!==n?e.avatar:"")+'<div class="stream-inserts__horizontal-card-author">'+(e.author!==n?e.author:"")+"</div></div>"})),o("stream-inserts__horizontal-card-dhd",(function(e,t,i){var n;return'<span class="stream-inserts__horizontal-card-dhd"><span class="stream-inserts__horizontal-card-light">'+(e.firstLetter!==n?e.firstLetter:"")+"</span>"+(e.text!==n?e.text:"")+"</span>"})),o("stream-inserts__horizontal-card-badge",(function(e,t,i){var n;return'<div class="'+home.parseRules.bem(e,t,"stream-inserts__horizontal-card-badge.class")+'" '+(e.bgColor!==n?e.bgColor:"")+" >"+(e.badge!==n?e.badge:"")+"</div>"})),o("stream-inserts__horizontal-card-poster",(function(e,t,i){var n;return'<div class="'+home.parseRules.bem(e,t,"stream-inserts__horizontal-card-poster.class")+" "+(e.thumbMix!==n?e.thumbMix:"")+'" '+(e.bgColorStyle!==n?e.bgColorStyle:"")+" "+(e.poster!==n?e.poster:"")+">"+(e.rating!==n?e.rating:"")+"</div>"})),o("stream-inserts__horizontal-card-dummy-owner",(function(e,t,i){return'<div class="stream-inserts__horizontal-card-owner"></div>'})),o("stream-inserts__horizontal-card-dummy",(function(e,t,i){return'<div class="'+home.parseRules.bem(e,t,"stream-inserts__horizontal-card.class")+'"><div class="stream-inserts__horizontal-card-image"></div>'+(void 0!==e.dymmyOwner?e.dymmyOwner:"")+'<div class="stream-inserts__horizontal-card-text"></div></div>'})),o("stream-inserts__horizontal-card-subtitle",(function(e,t,i){return'<div class="stream-inserts__horizontal-card-subtitle">'+(void 0!==e.text?e.text:"")+"</div>"})),o("stream-inserts__horizontal-card-layout",(function(e,t,i){var n;return'<div class="'+home.parseRules.bem(e,t,"stream-inserts__horizontal-card.class")+'" '+home.parseRules.bem(e,t,"attrs")+">"+(e.image!==n?e.image:"")+(e.owner!==n?e.owner:"")+(e.text!==n?e.text:"")+"</div>"})),o("restriction-age",(function(e,t,i){var n=e.restrictionAge;return n?(n+="+",i("restriction-age__tmpl",{mix:e.mix,text:n,mods:e.mods,label:" : "+n})):""})),o("restriction-age__tmpl",(function(e,t,i){var n;return'<span class="'+home.parseRules.bem(e,t,"restriction-age.class")+'" aria-hidden="true">'+(e.text!==n?e.text:"")+'</span><span class="a11y-hidden">'+(e.label!==n?e.label:"")+"</span>"})),o("stream-thumbnail__src",(function(e,t,i){var n=e.thumbnail;if(!n)return"";var o=i("stream-thumbnail__sizes",e);return n=home.getVideoThumbUrl({url:n,size:o.byRatios,block:"stream-thumbnail",retinaScale:i("retina-scale")})})),o("stream-thumbnail__sizes",(function(e){var t={"extra-small":"156x88","small-16x9":"200x112",small:"200x150",s282x159:"282x159",medium:"400x300",large:"936x524"};return{byRatios:t[e.size&&t[e.size]?e.size:"small"]}})),o("stream-thumbnail",(function(e,t,i){if(e.thumbnail){var n=["background-image:url("+i("stream-thumbnail__src",e)+")"];if(e.passSizeInAttr){var o=i("stream-thumbnail__sizes",e).byRatios.split("x");n.push("width:"+o[0]+"px","height:"+o[1]+"px")}return n.join(";")}})),o("stream-meta__upperCase",(function(e){return e.text[0]?e.text[0].toUpperCase()+e.text.substring(1):(home.error.logError({block:"stream-meta",message:"stream-meta text is undefined",method:"__upperCase",meta:{type:e.type}}),"")})),o("stream-meta",(function(e,t,i){var n=[],o=String((new Date).getFullYear())===e.release_year;return e.release_year&&(o?n.push(i("stream-meta-badge",{year:e.release_year,lightRecent:e.lightRecent})):n.push(e.release_year)),e.blogger&&e.blogger.title&&n.push(e.blogger.title),e.onto_category&&n.push(i("stream-meta__upperCase",{text:t.l10n("stream.card.category."+e.onto_category),type:"onto_category"})),e.genres&&e.genres.length&&n.push(i("stream-meta__upperCase",{text:e.genres.join(", "),type:"genres"})),e.restriction&&n.push(e.restriction+"+"),n.length?n.join(" &middot; "):""})),o("stream-meta-badge",(function(e,t,i){var n=[];return e.live?n.push(i("stream-meta-badge__item",{content:" ",mods:{live:"yes"}})):e.nowPlaying?n.push(i("stream-meta-badge__item",{content:"",mods:{playing:"yes"}})):e.duration&&n.push(i("stream-meta-badge__item",{content:home.formatDuration(e.duration)})),e.dHD?n.push(i("stream-meta-badge__item",{mods:{icon:"dhd"}})):e.fullHD&&n.push(i("stream-meta-badge__item",{content:"FullHD"})),e.year?i("stream-meta-badge__html",{mods:{recent:"yes","light-recent":e.lightRecent?"yes":"no"},content:i("stream-meta-badge__item",{content:e.year})}):n.length?i("stream-meta-badge__html",{mix:e.mix,content:n.join(" ")}):""})),o("stream-meta-badge__item",(function(e,t,i){return'<span class="'+home.parseRules.bem(e,t,"stream-meta-badge__item.class")+'">'+(void 0!==e.content?e.content:"")+"</span>"})),o("stream-meta-badge__html",(function(e,t,i){return'<div class="'+home.parseRules.bem(e,t,"stream-meta-badge.class")+'">'+(void 0!==e.content?e.content:"")+"</div>"})),o("stream-time__relative",(function(e,t){var i=Math.ceil(e.delta/60);return i>59?home.view("stream-time__string",{program:{start_time:e.time},dayString:e.dayString,dateTemplate:e.dateTemplate,mods:{"short-preposition":"yes",relative:"yes"}}).toLowerCase():" "+(1!==i?i+" ":"")+home.decline(i,["","",""])})),o("stream-time__string",(function(e,t,i){var n,o,s,r,a,c=e.program,l=1e3*(c.start?c.start():c.start_time),u=1e3*(c.end?c.end():c.end_time),d=t.Timestamp?new Date(1e3*t.Timestamp):home.now(),h=d.getTime(),m=e.mods&&"yes"===e.mods.short,p=e.mods&&"yes"===e.mods.relative,f=e.mods&&"yes"===e.mods.time;if(!l)return"";if(h>l&&h<u)return"  ";function _(e,t){return e.getYear()===t.getYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}return e.dateTemplate?a=e.dateTemplate:m?(l=1e3*(c.release_date_ut||c.start_time),a="%day% %time%",f||(a=a.replace(" %time%",""))):a=p?"%day%  %time%":"  %day% %time%",864e5,n=new Date(l),e.dayString?s=e.dayString:p&&_(d,n)?s="":p&&_(d,new Date(l+864e5))?s="":p&&_(d,new Date(l-864e5))?s="":(o=n.getMonth()+1,s=n.getDate()+" "+t.l10n("spok_yes.month_accus."+o)),r=a.replace("%day%",s).replace("%time%",i("stream-time__time",c)),home.capitalize(r)})),o("stream-time",(function(e,t,i){function n(e,t){return e.getYear()===t.getYear()}function o(e,t){return n(e,t)&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}var s=e.program||{},r=s.start&&s.start()||s.start_time||s.release_date_ut||s.update_time,a=t.Timestamp?new Date(1e3*t.Timestamp):home.now();return r?function(s,r){var a=s.getTime(),c=new Date(r);return r<=a?function(s,r,a){var c;if(o(r,a)){var l=r.getHours()-a.getHours()||1;c=l<10&&l>=0?l+" "+home.decline(l,["","",""]):""}else o(r,new Date(s+864e5))&&(c="");if(c){var u=home.capitalize(c);return e.noBadge?u:i("stream-meta-badge",{lightRecent:e.lightRecent,year:u})}return a.getDate()+" "+t.l10n("spok_yes.month_accus."+(a.getMonth()+1))+(n(r,a)?"":" "+a.getFullYear())}(r,s,c):function(e,t){var i=t.getDate(),n=t.getMonth()+1,s=String(t.getFullYear()).slice(2),r=t.getHours(),a=t.getMinutes(),c=[i<10?"0"+i:i,n<10?"0"+n:n,s].join("."),l=(o(e,t)?[r<10?"0"+r:r,a<10?"0"+a:a]:[]).join(":"),u=[];return u.push(c),l&&u.push(l),u.join(" ")}(s,c)}(a,1e3*r):""})),o("stream-time__day",(function(e){return new Date(e.date).getDate()})),o("stream-time__month",(function(e,t){var i=e.mods||{},n=new Date(e.date).getMonth()+1;return i.min?t.l10n("stream.month.short."+n):t.l10n("spok_yes.month_accus."+n)})),o("stream-time__weekday",(function(e,t){return{0:"",1:"",2:"",3:"",4:"",5:"",6:""}[new Date(1e3*e.start_time).getDay()]})),o("stream-time__time",(function(e){var t,i,n,o=e.start?e.start():e.start_time;if(!o&&e.release_date_ut&&(o=e.release_date_ut),o)return((i=(t=new Date(1e3*o)).getHours())<10?"0"+i:i)+":"+((n=t.getMinutes())<10?"0"+n:n)})),o("stream-duration",(function(e){var t=e.item||{},i=t.start?t.start():t.start_time,n=t.end?t.end():t.end_time,o=t.duration;return t.release_date_ut&&(i=t.release_date_ut),i&&n&&!o&&(o=n-i),o})),o("stream-inserts-loader",(function(e,t,i){var n,o="horizontal"===e.params.type,s=[],r=o?4:8,a=e.params.carouselId,c=e.params.title,l=i("stream-inserts__categories-to-insert-name-map");for(n=0;n<r;++n)s.push(i("stream-inserts__item",{dummy:!0,type:e.params.type}));return i("media-service",{block:"stream-inserts",rootMod:"stream-inserts stream-inserts-loader i-bem media-grid__stream-inserts-loader media-grid__"+l[a]+(o?" stream-inserts_type_horizontal":""),title:c,titleIcon:i("media-service__title-icon-url",{layoutName:e.params.layoutName}),titleAttrs:{tabindex:0},content:i("stream-inserts__content",{dummyItems:s.join("")}),attrs:{role:"complementary","aria-label":c,"data-bem":home.getBEMParams({"stream-inserts-loader":e.params})}})})),o("edadeal__retailer-list",(function(e,t,i){var n="edadeal.retailer."+e.id,o=i("new-tab-links__check")?"_blank":"";return e.retailers.map((function(e){return i("home-link",{stat:t.stat.getClientCounter(n),href:e.url,target:o,mix:"edadeal__retailer media-service__bg media-service__shadow media-service__item imageloader__card",mods:{hover:"inherit"},attrs:{role:"listitem"},content:i("edadeal__retailer",{title:e.title,logo:e.logo,distance:e.distance&&i("dist",{dist:e.distance}),discount:e.discount})})})).join("")})),o("edadeal__panel",(function(e,t,i){var n=e.retailers?i("edadeal__retailer-list",e):"";return i("arrowed-list_theme_media",{mix:"edadeal__list-wrapper media-service__list-wrapper imageloader",wrapMix:"edadeal__wrap media-service__wrap imageloader__scroller",listMix:"edadeal__list media-service__list"+(e.distance?"":" edadeal__list_distance_no"),content:n,mods:{theme:"media"},js:{"arrowed-list":{counter:"edadeal"},imageloader:{}}})})),o("edadeal__content",(function(e,t,i){var n=e.defaultTabId,o=e.data[n],s=e.groups,r=t.zenInsert,a="edadeal_"+home.rnd().substr(0,5),c=s.length>1&&s.map((function(e){var t=e["default"],n="edadeal.tab.select."+e.id;return i("mix-tabber__tab",{mods:{selected:t?"yes":"no"},mix:home.getBEMClassname("edadeal__tab",{mods:{selected:t?"yes":"no"}}),content:e.title,attrs:{tabindex:t?"0":"-1","aria-selected":t?"true":"false","aria-controls":t?a+"_panel_"+e.id:undefined,"data-key":e.id,"data-stat-select":n,id:a+"_tab_"+e.id}})})).join("")||"";return i("media-service",{block:"edadeal",rootMod:home.getBEMClassname("edadeal",e)+" i-bem media-grid__edadeal",mods:{"has-carousel":"yes",tabs:c.length>1?"yes":undefined},href:e.url,target:i("new-tab-links__check")?"_blank":"",title:e.title,titleMix:"edadeal-control__link home-link_pseudo_yes",titleStat:t.stat.getClientCounter("edadeal.title.link"),tabs:c,content:i("edadeal__layout",{panel:i("mix-tabber__panel",{block:"edadeal",id:a,key:n,mix:" media-service__panel",attrs:{"aria-labelledby":a+"_tab_"+o.id},content:i("edadeal__panel",{id:o.id,distance:o.hasGeolocation,title:o.title,retailers:o.retailers})})}),attrs:{role:"complementary","aria-label":"  ","data-bem":home.getBEMParams({edadeal:{live:!r,selectedKey:n}})}})})),o("edadeal__client-view",(function(e,t,i){var n=home.getData("edadeal.data");if(n)return n.params=e&&e.params,i("edadeal__content",n)})),o("edadeal__retailer",(function(e,t,i){var n;return'<div class="edadeal__logo-wrapper"><div class="edadeal__logo media-service__image imageloader__image" data-image="'+(e.logo!==n?e.logo:"")+'"></div></div><div class="edadeal__retailer-title i-multiline-overflow">'+(e.title!==n?e.title:"")+'</div><div class="edadeal__footer"><div class="edadeal__discount"><span class="edadeal__discount-text"> '+(e.discount!==n?e.discount:"")+'%</span></div><div class="edadeal__distance">'+(e.distance!==n?e.distance:"")+"</div></div>"})),o("edadeal__layout",(function(e,t,i){return'<div class="media-service__panels edadeal__panels">'+(void 0!==e.panel?e.panel:"")+"</div>"})),o("scrollbar-hider",(function(e,t,i){return'<div class="scrollbar-hider"><div class="scrollbar-hider__inner"></div></div>'})),o("dist",(function(e,t){var i=e.dist,n=e.theme===undefined?"normal":"";return i>949?(i/=1e3,i+=1e-6,i=home.stringf("%s&nbsp;",i.toFixed(1))):(i<100&&(i=100),i=home.stringf("%s&nbsp;",100*Math.round(i/100))),'<span class="dist'+(e.mod?" "+e.mod:"")+("normal"===n?" dist_theme_normal":"")+'">'+i+"</span>"})),o("widgets-list__title",(function(e,t){return" "})),o("widgets-list__content",(function(e,t,i){var n,o,s="widgets-list",r=t.zenInsert;return e.mods={many:e.list.length>3?"yes":"no",promo:e.promo?"yes":undefined},n=e.list.map((function(e){return i("widgets-list__item",{html:i("scrollbar",{content:e})})})),e.services&&n.push(i("widgets-list__services",{list:e.services,wide:e.services.length>6})),o=n.length<=3?i("widgets-list__no-carousel",{content:n.join("")}):i("arrowed-list_theme_media",{mix:s+"__list-wrapper media-service__list-wrapper",wrapMix:s+"__wrap media-service__wrap",listMix:s+"__list media-service__list",content:n.join(""),mods:{theme:"media"},js:{"arrowed-list":{counter:"widgets_list"}}}),i("media-service",{block:"widgets-list",rootMod:home.getBEMClassname("widgets-list",e)+" i-bem media-grid__widgets-list",title:i("widgets-list__title",e),titleStat:t.stat.getClientCounter("widgets_list.title"),mods:{"has-carousel":"yes"},before:e.promo&&i("widgets-list__promo",e.promo)||"",content:i("widgets-list__list",{content:o}),attrs:{role:"complementary","aria-label":" ","data-bem":home.getBEMParams({"widgets-list":{live:!r&&!e.promo,promo:e.promo&&{show_url:e.promo.show_url,close_url:e.promo.close_url}}})}})})),o("widgets-list__client-view",(function(e,t,i){var n=home.getData("widgets-list.data");if(n)return i("widgets-list__content",n)})),o("widgets-list__item",(function(e,t,i){return'<div class="widgets-list__item">'+(void 0!==e.html?e.html:"")+"</div>"})),o("widgets-list__no-carousel",(function(e,t,i){return'<div class="widgets-list__no-carousel media-service__wrap">'+(void 0!==e.content?e.content:"")+"</div>"})),o("widgets-list__list",(function(e,t,i){return'<div class="media-service__panels widgets-list__panels"><div class="media-service__panel widgets-list__panel">'+(void 0!==e.content?e.content:"")+"</div></div>"})),o("scrollbar",(function(e,t,i){return i("scrollbar__html",{mods:e.mods,mix:e.mix,js:{scrollbar:e.js||{}},content:e.content})})),o("scrollbar__html",(function(e,t,i){return'<div class="'+home.parseRules.bem(e,t,"scrollbar.class")+' i-bem" data-bem="'+home.parseRules.bem(e,t,"js")+'"><div class="scrollbar__scrollable"><div class="scrollbar__inner">'+(void 0!==e.content?e.content:"")+'</div></div><div class="scrollbar__track"><div class="scrollbar__thumb"></div></div></div>'})),o("widgets-list__promo",(function(e,t,i){return'<div class="widgets-list__promo"><div class="widgets-list__promo-title">     </div><div class="widgets-list__promo-text">-                 ,     .</div><div class="widgets-list__promo-image" role="img" aria-hidden="true"></div><div class="widgets-list__promo-close" role="button" tabindex="0" title=""></div></div>'})),o("widgets-list__services-item",(function(e,t,i){if(!e)return i("widgets-list__services-item-empty");var n="widgets_list.services."+e.id;return i("widgets-list__services-item-layout",{icon:i("home-link",{content:"",href:e.url,stat:t.stat.getClientCounter(n),mix:"widgets-list__services-icon widgets-list__services-icon_id_"+e.id,attrs:{"aria-hidden":"true"}}),title:i("home-link",{content:e.title,href:e.url,stat:t.stat.getClientCounter(n),mix:"home-link_black_yes widgets-list__services-title"}),subtitle:i("home-link",{content:home.capitalize(e.subtitle.text),href:e.subtitle.url,stat:t.stat.getClientCounter(n),mix:"home-link_gray_yes widgets-list__services-subtitle"})})})),o("widgets-list__services",(function(e,t,i){var n,o,s="",r=[];return e.list.forEach((function(e){e.icon&&e.icon_svg?s+=".widgets-list__services-icon_id_"+e.id+"{background-image:url("+e.icon_svg+");}":s+=".widgets-list__services-icon_id_"+e.id+"{background-image:url("+(e.icon_svg||e.icon)+");}"})),r=[0],e.wide?(o=Math.ceil(e.list.length/2),r.push(1)):o=e.list.length,r=r.map((function(t){n="";for(var s=0;s<o;++s)n+=i("widgets-list__services-item",e.list[s+t*o]);return i("widgets-list__services-col",{cells:n})})),i("widgets-list__services-layout",{mods:{wide:e.wide?"yes":undefined},style:s,content:i("scrollbar",{content:i("widgets-list__services-inner",{title:i("home-link",{href:t.ServicesAllUrl,mods:{blue:"yes"},stat:t.stat.getClientCounter("widgets_list.services.title"),content:""}),cols:r.join("")})})})})),o("widgets-list__services-item-empty",(function(e,t,i){return'<div class="widgets-list__services-item"></div>'})),o("widgets-list__services-item-layout",(function(e,t,i){var n;return'<div class="widgets-list__services-item">'+(e.icon!==n?e.icon:"")+'<div class="widgets-list__services-texts">'+(e.title!==n?e.title:"")+(e.subtitle!==n?e.subtitle:"")+"</div></div>"})),o("widgets-list__services-col",(function(e,t,i){return'<div class="widgets-list__services-col">'+(void 0!==e.cells?e.cells:"")+"</div>"})),o("widgets-list__services-inner",(function(e,t,i){var n;return'<h1 class="widgets-list__services-header">'+(e.title!==n?e.title:"")+'</h1><div class="widgets-list__services-table">'+(e.cols!==n?e.cols:"")+"</div>"})),o("widgets-list__services-layout",(function(e,t,i){var n;return'<div class="'+home.parseRules.bem(e,t,"widgets-list__services-layout.class")+'"><style>'+(e.style!==n?e.style:"")+"</style>"+(e.content!==n?e.content:"")+"</div>"})),o("geo-collections__panel",(function(e,t,i){var n="geo-collections",o="";return"dummy"===e.id?o=e.items:e.items&&(o=i("geo-collections-items",e)),i("arrowed-list_theme_media",{mix:n+"__list-wrapper media-service__list-wrapper imageloader",wrapMix:n+"__wrap media-service__wrap imageloader__scroller",listMix:n+"__list media-service__list",content:o,mods:{theme:"media"},js:{"arrowed-list":{counter:"geo_collections"},imageloader:{}}})})),o("geo-collections__title",(function(e,t){return"   "})),o("geo-collections",(function(e,t,i){var n,o="geo-collections_"+home.rnd().substr(0,5),s={};return e.tabs.forEach((function(t){var i=home.deepExtend({},t);i.collections=i.collectionsItems.map((function(t){return home.deepExtend({key:t},e.collections[t])})),s[t.key]=i})),n=s[e.tabs[0].key],i("media-service",{block:"geo-collections",rootMod:home.getBEMClassname("geo-collections",e)+" i-bem media-grid__collections",mods:{"has-carousel":"yes",tabs:e.tabs.length>1?"yes":undefined},href:e.title.url,title:i("geo-collections__title"),target:i("new-tab-links__check")?"_blank":"",titleAttrs:{tabindex:0},titleStat:t.stat.getClientCounter("geo_collections.title"),tabs:e.tabs.map((function(e,t){var n=0===t;return i("mix-tabber__tab",{mods:{selected:n?"yes":"no"},mix:home.getBEMClassname("geo-collections__tab",{mods:{selected:n?"yes":"no"}}),content:e.title,attrs:{tabindex:n?"0":"-1","aria-selected":n?"true":"false","aria-controls":n?o+"_panel_"+e.key:undefined,"data-key":e.key,"data-stat-select":"geo_collections.tab.select."+e.key,id:o+"_tab_"+e.key}})})).join(""),content:i("geo-collections__layout",{panel:i("mix-tabber__panel",{block:"geo-collections",id:o,key:n.key,mix:" media-service__panel",attrs:{"aria-labelledby":o+"_tab_"+n.key},content:i("geo-collections__panel",{id:n.key,items:n.collections})})}),attrs:{role:"complementary","aria-label":"   ","data-bem":home.getBEMParams({"geo-collections":{data:s,live:!1,uniqId:o}})}})})),o("geo-collections__client-view",(function(e,t,i){var n=home.getData("geo-collections.data");if(n)return n.params=e&&e.params,i("geo-collections-loader",n)})),o("geo-collections__item-partner",(function(e,t,i){var n;return'<div class="geo-collections__item-partner"><span class="geo-collections__item-partner-icon media-service__image imageloader__image" data-image="'+(e.icon!==n?e.icon:"")+'"><span class="geo-collections__item-partner-icon-placeholder"></span></span><span class="geo-collections__item-partner-name">'+(e.name!==n?e.name:"")+"</span></div>"})),o("geo-collections__item_dummy",(function(e,t,i){return'<div class="geo-collections__item geo-collections__item_dummy_yes media-service__shadow"><div class="geo-collections__item-header"></div><div class="geo-collections__item-content geo-collections__item-content_dummy"><div class="geo-collections__item-placeholder"></div><div class="geo-collections__item-placeholder"></div><div class="geo-collections__item-placeholder geo-collections__item-placeholder_source"></div></div></div>'})),o("geo-collections__item",(function(e,t,i){var n;return'<div class="geo-collections__item-header"><div class="geo-collections__item-img media-service__image imageloader__image" data-image="'+(e.img!==n?e.img:"")+'"></div><span class="geo-collections__item-category">'+(e.category!==n?e.category:"")+'</span></div><div class="geo-collections__item-content"><div class="geo-collections__item-title i-multiline-overflow">'+(e.title!==n?e.title:"")+"</div>"+(e.partner!==n?e.partner:"")+"</div>"})),o("geo-collections__layout",(function(e,t,i){return'<div class="media-service__panels geo-collections__panels">'+(void 0!==e.panel?e.panel:"")+"</div>"})),o("geo-collections-items",(function(e,t,i){var n="geo-collections__item imageloader__card"+i("geo-collections-items__mix"),o=i("new-tab-links__check")?"_blank":"";return e.items.map((function(s,r){return i("home-link",{stat:t.stat.getAttr("geo_collections.item."+e.id+"."+r),customParams:{id:s.key},href:s.url,target:o,mix:n,mods:{hover:"inherit"},content:i("geo-collections__item",{img:home.stringf(s.image.urlTemplate,"L"),title:s.title,category:s.rubric,partner:i("geo-collections__item-partner",{name:s.partner.title,icon:home.stringf(s.partner.icon.urlTemplate,"XXXS")})})})})).join("")})),o("geo-collections-loader",(function(e,t,i){var n="geo-collections_"+home.rnd().substr(0,5),o=Array(5).join(i("mix-tabber__tab",{mix:home.getBEMClassname("geo-collections__tab",{mods:{dummy:"yes"}}),content:"&nbsp;",stat:""})),s=Array(5).join(i("geo-collections__item_dummy",{}));return i("media-service",{block:"geo-collections",rootMod:home.getBEMClassname("geo-collections-loader",{mods:{state:"loading"}})+" i-bem media-grid__geo-collections",title:"   ",titleAttrs:{tabindex:0},mods:{"has-carousel":"yes",tabs:"yes"},tabs:o,content:i("geo-collections__layout",{panel:i("mix-tabber__panel",{block:"geo-collections",id:n,key:"dummy",mix:" media-service__panel",attrs:{"aria-labelledby":n+"_tab_dummy"},content:i("geo-collections__panel",{mix:"geo-collections-loader__panel",id:"dummy",items:s})})}),attrs:{role:"complementary","aria-label":"   ","data-bem":home.getBEMParams({"geo-collections-loader":{url:e.url}})}})})),o("geo-collections-items__mix",(function(){return" media-service__item media-service__shadow"})),o("tutor-card",(function(e,t,i){var n=e.mods||{},o=e.mix||"",s=i("tutor-card__layout",{title:e.title,text:e.text.replace("<br>"," <br>"),innerMix:e.innerMix||"",imageMix:e.imageMix||"",imageAttrs:e.imageAttrs||{}});return n.black="yes",i("home-link",{href:e.href,stat:e.stat||"",mods:n,mix:"tutor-card "+o,content:s})})),o("tutor-card__layout",(function(e,t,i){var n;return'<span class="tutor-card__inner '+(e.innerMix!==n?e.innerMix:"")+'"><span class="tutor-card__image-wrapper"><span class="tutor-card__image '+(e.imageMix!==n?e.imageMix:"")+'" '+home.parseRules.bem(e,t,"imageAttrs.attrs")+'></span></span><span class="tutor-card__content"><span class="tutor-card__title i-multiline-overflow">'+(e.title!==n?e.title:"")+'</span><span class="tutor-card__text i-multiline-overflow">'+(e.text!==n?e.text:"")+"</span></span></span>"})),o("tutor__tabs",(function(e,t,i){return(e.tabs||[]).map((function(t,n){var o=n===e.defaultTab;return i("mix-tabber__tab",{mix:home.getBEMClassname("tutor__tab",{mods:{selected:o?"yes":"no"}}),mods:{selected:o?"yes":"no"},content:t.title,attrs:{tabindex:o?"0":"-1","aria-selected":o?"true":"false","aria-controls":o?"tutor_panel_"+n:undefined,"data-key":n,id:"tutor_tab_"+n,"data-stat-select":"tutor.tab.select."+n}})})).join("")})),o("tutor__panel",(function(e,t,i){var n=(e.cards||[]).map((function(e,n){var o=e.icons||[];return i("tutor-card",{title:e.title,text:e.text,href:e.url,mix:"tutor__card media-service__item imageloader__card",innerMix:"media-service__shadow",mods:{hover:"inherit"},stat:t.stat.getClientCounter("tutor.link."+n),imageMix:"media-service__image imageloader__image",imageAttrs:{"data-image":home.getBEMParams({1:o[0],2:o[2]})}})})).join("");return i("arrowed-list_theme_media",{mix:"tutor__list-wrapper media-service__list-wrapper imageloader",wrapMix:"tutor__wrap media-service__wrap imageloader__scroller",listMix:"tutor__list media-service__list",mods:{theme:"media"},js:{"arrowed-list":{counter:"tutor"},imageloader:{}},content:n})})),o("tutor__content",(function(e,t,i){var n=t.zenInsert,o=e.tabs.map((function(e,t){return i("mix-tabber__panel",{block:"tutor",id:"tutor",key:t,mix:" media-service__panel",content:i("tutor__panel",{key:t,cards:e.cards}),attrs:{style:0===t?"":"display: none;","aria-labelledby":"tutor_tab_"+t}})})).join("");return i("media-service",{block:"tutor",rootMod:"tutor media-grid__tutor i-bem",href:e.href,title:e.title,titleStat:t.stat.getClientCounter("tutor.title"),mods:{"has-carousel":"yes",tabs:e.tabs.length>1?"yes":undefined},tabs:i("tutor__tabs",{tabs:e.tabs,defaultTab:0}),content:i("tutor__layout",{panels:o}),attrs:{role:"complementary","aria-label":e.title,"data-bem":home.getBEMParams({tutor:{live:!n,uniqId:"tutor",selectedKey:0}})}})})),o("tutor__title",(function(e,t){return t.Tutor.title_text})),o("tutor__client-view",(function(e,t,i){var n=home.getData("tutor.data");return n&&i("tutor__content",n)})),o("tutor__layout",(function(e,t,i){return'<div class="media-service__panels tutor__panels">'+(void 0!==e.panels?e.panels:"")+"</div>"})),o("stream-inserts-platform__get-personal",(function(e){for(var t,i=e.channels||[],n=0;n<i.length;++n)if(i[n].isPersonal){t=i[n];break}return t})),o("stream-inserts-platform__dummy",(function(e,t,i){var n,o="stream-inserts-platform",s=[],r=e.redesignPlatform,a=e.redesignPlatformAvatar,c=e.largeThumbsPlatform||2,l="poster"===e.type?c+1:2*c+1;for(n=0;n<8;++n){var u=r&&!(n%l),d=r&&"poster"===e.type;!r||u||d?s.push(i("stream-inserts__item",{dummy:!0,type:u?"horizontal":e.type,fromBlock:o,itemMix:o+"__item",isLargeHorizontal:u,isLargePoster:r,redesignPlatformAvatar:a})):(s.push(i("stream-inserts__column",{items:[{},{}],type:e.type,dummy:!0,redesignPlatformAvatar:a})),n++)}return s.join("")})),o("stream-inserts-platform__panel",(function(e,t,i){var n=-1!==["CATEG_FILM","CATEG_SERIES","CATEG_ANIM_FILM","CATEG_ANIM_SERIES"].indexOf(e.carouselId)?"poster":"horizontal",o=i("stream-inserts-platform__groups-to-insert-name-map",e.groups);if(e.defaultPanel&&!e.redesignPlatform)return i("stream-inserts-platform__panel-default",e);var s="stream-inserts-platform",r=e.statRoot,a=r+"."+i("stream-inserts-platform__stat-root",e.carouselId)+".item",c=e.set?i("stream-inserts__item-list",{type:e.redesignPlatform?n:"horizontal",counter:a,carousel_id:e.carouselId,fromBlock:"stream_inserts_platform",itemMix:s+"__item",set:e.set,groups:o,allowVideoPreview:e.allowVideoPreview,redesignPlatform:e.redesignPlatform,largeThumbsPlatform:e.largeThumbsPlatform,redesignPlatformAvatar:e.redesignPlatformAvatar,delayVideoPreview:e.delayVideoPreview,channelEpisodes:e.channelEpisodes}):i("stream-inserts-platform__dummy",{carouselId:e.carouselId,type:e.redesignPlatform?n:"horizontal",redesignPlatform:e.redesignPlatform,largeThumbsPlatform:e.largeThumbsPlatform,redesignPlatformAvatar:e.redesignPlatformAvatar});return i("arrowed-list_theme_media",{mix:s+"__list-wrapper media-service__list-wrapper imageloader "+(e.redesignPlatform?" imageloader_different_yes":""),wrapMix:s+"__wrap media-service__wrap imageloader__scroller",listMix:s+"__list media-service__list stream-inserts",content:c,mods:{theme:"media","arrow-position":"weighted"},js:{"arrowed-list":{counter:r},imageloader:{}}})})),o("stream-inserts-platform__panel-default",(function(e,t,i){var n="stream-inserts-platform";return e.set&&e.channels?i("stream-inserts-mix",{dataCenter:e.set.slice(0,4),dataRight:e.channels.slice(1,4),dataLeft:e.channels[0],withIcons:e.withIcons,allowVideoPreview:e.allowVideoPreview,redesignPlatformAvatar:e.redesignPlatformAvatar,allowFirstVideoPreview:e.allowFirstVideoPreview,delayVideoPreview:e.delayVideoPreview,mix:n+"__wrap media-service__wrap",itemMix:n+"__item media-service__item",block:"stream_inserts_platform",statRoot:e.statRoot,counter:".default"}):i("stream-inserts-mix__dummy",{mix:n+"__wrap media-service__wrap",itemMix:n+"__item media-service__item"})})),o("stream-inserts-platform__content",(function(e,t,i){var n,o=e.retryButtonTheme,s=e.defaultTabId,r=e.data[s],a=e.groups,c=t.zenInsert,l="stream-inserts-platform_"+home.rnd().substr(0,5),u="stream_inserts_platform",d=e.brandingStreamBlock||"{}",h=e.isDarkMediaFooter,m="",p="";e.enablePersonalChannel&&((n=i("stream-inserts-platform__get-personal",e))||home.error({block:"stream-inserts-platform",message:"no personal channel"}));try{d=JSON.parse(d)}catch(_){home.error("Failed to parse branding_stream_block"),d={}}h||!d.img_left&&!d.img_right||(m=d.url?i("home-link",{href:home.addQueryToUrl(d.url,{from:"morda",from_block:"stream_inserts_platform_branding"}),mix:"stream-inserts-platform__illustration",attrs:{target:"_blank",style:"background-image:url("+d.img_left+")"},stat:t.stat.getAttr("stream.inserts.platform.branding")}):i("stream-inserts-platform__illustration",{img:d.img_left}),p=d.url?i("home-link",{href:home.addQueryToUrl(d.url,{from:"morda",from_block:"stream_inserts_platform_branding"}),mix:"stream-inserts-platform__illustration stream-inserts-platform__illustration_align_right",attrs:{target:"_blank",style:"background-image:url("+d.img_right+")"},stat:t.stat.getAttr("stream.inserts.platform.branding")}):i("stream-inserts-platform__illustration",{img:d.img_right,mods:{align:"right"}}));var f=e.showUploadBtn&&e.publisherUploadUrl&&i("home-link",{content:i("stream-inserts-platform__upload",e),href:home.makeUrl({path:e.publisherUploadUrl,query:{vhb_from:"main"}}),target:"_blank",stat:t.stat.getClientCounter(u+".upload"),mix:"home-link_gray_yes stream-inserts-platform__upload"})||"";return i("media-service",{block:"stream-inserts-platform",rootMod:"stream-inserts-platform i-bem"+(e.redesignPlatform?" stream-inserts-platform_type_large":""),mods:{"has-carousel":"yes",tabs:"yes"},href:i("stream-url",{fromBlock:"stream_inserts_platform_title",streamDefault:1}),target:"_blank","title-after":f,title:i("stream-inserts-platform__title"),titleAttrs:{tabindex:0},titleStat:t.stat.getClientCounter(u+".title"),tabs:a.map((function(e){var t=e["default"],n=u+".tab."+i("stream-inserts-platform__stat-root",e.carouselId);return i("mix-tabber__tab",{mods:{selected:t?"yes":"no"},mix:home.getBEMClassname("stream-inserts-platform__tab",{mods:{selected:t?"yes":"no"}}),content:e.title,attrs:{tabindex:t?"0":"-1","aria-selected":t?"true":"false","aria-controls":t?l+"_panel_"+e.id:undefined,"data-key":e.carouselId,"data-stat-select":n,id:l+"_tab_"+e.id}})})).join(""),content:i("stream-inserts-platform__layout",{panel:i("mix-tabber__panel",{block:"stream-inserts-platform",id:l,key:r.carouselId,mix:" media-service__panel",attrs:{"aria-labelledby":l+"_tab_"+r.id},content:i("stream-inserts-platform__panel",{carouselId:r.carouselId,channels:e.channels,defaultPanel:!0,statRoot:u,withIcons:e.withIcons,allowVideoPreview:e.allowVideoPreview,redesignPlatform:e.redesignPlatform,largeThumbsPlatform:e.largeThumbsPlatform,delayVideoPreview:e.delayVideoPreview,redesignPlatformAvatar:e.redesignPlatformAvatar})}),leftIllustration:m,rightIllustration:p}),attrs:{role:"complementary","aria-label":e.title,"data-bem":home.getBEMParams({"stream-inserts-platform":{promoExp:e.promoExp,disableAutoplayExp:e.disableAutoplayExp,enablePersonalChannel:e.enablePersonalChannel,selectedTab:s,defaultCarouselId:r.carouselId,retryButtonTheme:o,live:!c,uniqId:l,cardsLimit:20,personalChannel:n?{content_type_name:"channel",content_id:n.content_id,title:n.title,main_color:n.main_color}:{}}})}})})),o("stream-inserts-platform__title",(function(e,t){return""})),o("stream-inserts-platform__stat-root",(function(e,t,i){return(home.getData?home.getData("stream-inserts-platform.data"):i("stream-inserts-platform__data")).groups.filter((function(t){return t.carouselId===e}))[0].category})),o("stream-inserts-platform__groups-to-insert-name-map",(function(e){var t={};return e&&e.forEach((function(e){t[e.carouselId]=e.category})),t})),o("stream-inserts-platform__client-view",(function(e,t,i){var n=home.getData("stream-inserts-platform.data");if(n)return i("stream-inserts-platform__content",n)})),o("stream-inserts-platform__illustration",(function(e,t,i){return'<div class="'+home.parseRules.bem(e,t,"stream-inserts-platform__illustration.class")+'" style="background-image: url('+(void 0!==e.img?e.img:"")+')"></div>'})),o("stream-inserts-platform__upload",(function(e,t,i){return'<span class="stream-inserts-platform__upload-icon"><svg class="stream-inserts-platform__upload-icon-svg" width="16" height="12"><path fill-rule="evenodd" d="M11 5.44V6.55L14 8.65869V3.34131L11 5.44ZM9 2H2V10H9V2ZM11 9V10.5C11 10.7881 10.9188 11.0573 10.7779 11.2859C10.5138 11.7144 10.0403 12 9.5 12H1.5C0.671573 12 0 11.3284 0 10.5V1.5C0 0.671573 0.671573 0 1.5 0H9.5C10.0403 0 10.5138 0.285642 10.7779 0.714148C10.9188 0.942682 11 1.21185 11 1.5V3L14.4265 0.601425C15.0893 0.137481 16 0.611633 16 1.42066V10.5793C16 11.3884 15.0893 11.8625 14.4265 11.3986L11 9Z"/></svg></span> '})),o("stream-inserts-platform__layout",(function(e,t,i){var n;return'<div class="media-service__panels stream-inserts-platform__panels">'+(e.leftIllustration!==n?e.leftIllustration:"")+(e.rightIllustration!==n?e.rightIllustration:"")+(e.panel!==n?e.panel:"")+"</div>"})),o("stream-inserts-mix__item",(function(e,t,i){var n=e.item,o=e.block||"stream-inserts-mix",s=e.fromBlock||o,r=e.size,a=e.mix?e.mix+" ":"",c=n.channelSettings||{},l=n.title,u=n.current&&n.current.HHMM?n.current.HHMM+" &middot; ":"",d="",h=n.thumbnail,m=e.statRoot+".item"+(e.counter||""),p=e.playerContainer,f=e.js||{},_=e.allowVideoPreview&&n.ya_video_preview,g=e.delayVideoPreview,v="",b="object"==typeof Ya?Ya.streamCms&&Ya.streamCms.settings||{}:home.getData?home.getData("stream.settings"):i("stream-settings");return m=home.transliterate(m.toLowerCase()).replace(/,/g,"").replace(/\s/g,"_"),a+=home.getBEMClassname("stream-inserts-mix__item",{mods:{size:r,preview:_?"yes":"",personal:n.isPersonal?"yes":""},mix:[{block:"media-service",elem:"bg"}]}),_&&!b.videoPreviewDisabled&&(f["thumb-preview"]={preview:{url:n.ya_video_preview},loop:"l"===e.size},v="thumb-preview thumb-preview_video",g&&(v+=" thumb-preview_delay")),d=n.current?u+(n.current.title||n.current.subtitle):c.title||i("stream-meta",{release_year:n.release_year,genres:n.genres}),n.current&&e.currentProgramThumbnail&&(h=n.current.thumbnail||h),i("home-link",{href:i("stream-url",{streamChannel:n.channel_id,fromBlock:s+"_item",streamId:n.content_id}),mods:{hover:"inherit"},target:"_blank",mix:a,stat:t.stat.getClientCounter(m,!1,{content_id:n.content_id}),content:i("stream-inserts-mix__item-layout",{js:f,mix:v,thumbnail:{"data-image":i("stream-thumbnail__src",{thumbnail:h})},title:home.prepareSpaces(l),subtitle:home.prepareSpaces(d),subtitleMix:e.subtitleMix||"",playerContainer:p})})})),o("stream-inserts-mix__item-dummy",(function(e,t,i){var n=e.mix?e.mix+" ":"";return i("home-link",{mods:{hover:"inherit"},mix:(n+=home.getBEMClassname("stream-inserts-mix__item",{mods:{size:e.size},mix:[{block:"media-service",elem:"bg"}]}))+" stream-inserts-mix_dummy_yes",content:i("stream-inserts-mix__item-layout",{})})})),o("stream-inserts-mix__dummy",(function(e,t,i){return i("stream-inserts-mix-layout",{mix:"stream-inserts-mix__wrap "+(e.mix||""),dataLeft:i("stream-inserts-mix__item-dummy",{mix:e.itemMix,size:"l"}),dataCenter:[1,2,3,4].map((function(){return i("stream-inserts-mix__item-dummy",{mix:e.itemMix,size:"m"})})).join(""),dataRight:[1,2,3].map((function(){return i("stream-inserts-mix__item-dummy",{mix:e.itemMix,size:"s"})})).join("")})})),o("stream-inserts-mix__player-content",(function(e,t,i){return i("stream-inserts-mix__player")+i("stream-inserts-mix__spinner")})),o("stream-inserts-mix",(function(e,t,i){var n=e.dataLeft.content_id;return i("stream-inserts-mix-layout",{js:{imageloader:{},"stream-inserts-mix":{autoplayId:n,isPersonal:e.dataLeft.isPersonal}},mods:{"play-icon":e.withIcons?"yes":"","play-preview":e.allowVideoPreview?"yes":""},mix:"stream-inserts-mix__wrap imageloader imageloader_scroll_no i-bem "+(e.mix||""),dataLeft:i("stream-inserts-mix__item",{item:e.dataLeft,mix:e.itemMix+" stream-inserts-mix__main-item",size:"l",block:e.block,fromBlock:e.fromBlock,statRoot:e.statRoot,counter:e.counter+".left",currentProgramThumbnail:!0,subtitleMix:"stream-inserts-mix__main-item-subtitle",playerContainer:n?i("stream-inserts-mix__player-content",{}):"",allowVideoPreview:e.allowVideoPreview}),dataCenter:e.dataCenter.map((function(t,n){return i("stream-inserts-mix__item",{item:t,mix:e.itemMix,size:"m",block:e.block,fromBlock:e.fromBlock,statRoot:e.statRoot,counter:e.counter+".center."+n,allowVideoPreview:e.allowVideoPreview&&!e.allowFirstVideoPreview,delayVideoPreview:e.delayVideoPreview})})).join(""),dataRight:e.dataRight.map((function(t,n){return i("stream-inserts-mix__item",{item:t,mix:e.itemMix,size:"s",block:e.block,fromBlock:e.fromBlock,statRoot:e.statRoot,counter:e.counter+".right."+n,allowVideoPreview:e.allowVideoPreview&&!e.allowFirstVideoPreview,delayVideoPreview:e.delayVideoPreview})})).join("")})})),o("stream-inserts-mix__player-iframe",(function(e,t,i){return'<iframe class="stream-inserts-mix__player-iframe" src="'+(void 0!==e.src?e.src:"")+'" allow="autoplay; encrypted-media" allowfullscreen></iframe>'})),o("stream-inserts-mix__spinner",(function(e,t,i){return'<div class="spin2 stream-inserts-mix__spinner spin2_progress_yes spin2_size_l spin2_tone_default spin2_view_default i-bem"></div>'})),o("stream-inserts-mix__player",(function(e,t,i){return'<div class="stream-inserts-mix__player"></div>'})),o("stream-inserts-mix__item-layout",(function(e,t,i){var n;return'<div class="media-service__stream-inserts-mix stream-inserts-mix__item-wrap i-bem '+home.parseRules.bem(e,t,"stream-inserts-mix__item-layout.class")+'" '+home.parseRules.bem(e,t,"attrs")+' data-bem="'+home.parseRules.bem(e,t,"js")+'"><div class="media-service__title stream-inserts-mix__title i-multiline-overflow">'+(e.title!==n?e.title:"")+'</div><div class="media-service__title stream-inserts-mix__subtitle i-multiline-overflow '+(e.subtitleMix!==n?e.subtitleMix:"")+'">'+(e.subtitle!==n?e.subtitle:"")+'</div><div class="media-service__image stream-inserts-mix__thumbnail imageloader__image thumb-preview__target" '+home.parseRules.bem(e,t,"thumbnail.attrs")+'></div><div class="stream-inserts-mix__play-icon"></div>'+(e.playerContainer!==n?e.playerContainer:"")+"</div>"})),o("stream-inserts-mix-layout",(function(e,t,i){var n;return'<div class="'+home.parseRules.bem(e,t,"stream-inserts-mix.class")+'" '+home.parseRules.bem(e,t,"attrs")+' data-bem="'+home.parseRules.bem(e,t,"js")+'"><div class="stream-inserts-mix__left">'+(e.dataLeft!==n?e.dataLeft:"")+'</div><div class="stream-inserts-mix__center">'+(e.dataCenter!==n?e.dataCenter:"")+'</div><div class="stream-inserts-mix__right">'+(e.dataRight!==n?e.dataRight:"")+"</div></div>"})),o("divjson-block__client-view",(function(e,t,i){var n=home.getData("divjson-block."+e.params.layoutName);if(n)return i("divjson-block",n)})),o("divjson-block",(function(e,t,i){return i("media-service",{block:"divjson-block",rootMod:"divjson-block i-bem mix-tabber_theme_media"+(e.test?" divjson-block_test_yes":""),mods:{"has-carousel":"yes",tabs:e.tabs?"yes":undefined},title:e.title,titleIcon:i("media-service__title-icon-url",{layoutName:e.layoutName}),attrs:{role:"complementary","aria-label":e.title,"data-bem":home.getBEMParams({"divjson-block":{api:home.addQueryToUrl(e.api,{theme:e.theme}),layoutName:e.layoutName}}),style:e.blockHeight?"height:"+e.blockHeight+"px":""},tabs:e.tabs?i("div",{mix:"divjson-block__dummy-tabs",content:i("dummy-cards__tabs")}):"",content:i("dummy-cards",{width:e.cardWidth,height:e.cardHeight})})})),o("dummy-cards__tabs",(function(e,t,i){return new Array(5).join(i("mix-tabber__tab",{mods:{dummy:"yes"},content:"&nbsp;"}))})),o("dummy-cards__layout",(function(e,t,i){return'<div class="dummy-cards">'+(void 0!==e.content?e.content:"")+"</div>"})),o.cached("dummy-cards__consts",(function(){return{targetWidth:700,space:12,defaultHeight:180}})),o("dummy-cards",(function(e,t,i){var n=i("dummy-cards__consts"),o=0;function s(e){return(e/13).toFixed(4)+"em"}for(var r=[];o<n.targetWidth;)r.push(i("div",{mix:"dummy-cards__card",attrs:{style:home.makeStyle({width:s(e.width),height:s(e.height||n.defaultHeight),"margin-right":s(n.space)})}})),o+=e.width;return i("dummy-cards__layout",{content:r.join("")})})),o("divjson__text",(function(e,t,i){if(e.text){return i("divjson__text-layout",{mods:{style:(e.style||"").replace(/_/g,"-")},mix:[e.mix,e.maxLines&&"divjson__text_clamped_yes i-multiline-overflow"].filter(Boolean).join(" "),text:home.divjsonUtils.processText(e.text||""),attrs:{style:e.maxLines?home.makeStyle({"-webkit-line-clamp":e.maxLines,"max-height":({numbers_s:1.1,numbers_m:1.15,numbers_l:1,title_m:1.1,title_l:1.2,button:1.15,card_header:1.45}[e.style]||1.25)*e.maxLines+"em"}):undefined,"data-lines":e.maxLines}})}})),o("divjson__base",(function(e,t,i){return i("divjson__clickable",{defaultTag:"div",action:e.action,block:e.block,stack:e.stack,attrs:{style:home.makeStyle(e.style),"data-bem":e.js?home.getBEMParams(e.js):undefined,id:e.id},mix:[e.mix,home.getBEMClassname("divjson__block",{mods:{"padding-side":e.padding_modifier?e.padding_modifier.position||"left":undefined,"padding-size":e.padding_modifier&&e.padding_modifier.size?e.padding_modifier.size:undefined}})].filter(Boolean).join(" "),content:e.content})})),o("divjson__clickable",(function(e,t,i){var n=e.action&&!e.stack.some((function(t,i){return i<e.stack.length-1&&t.hasAction}))&&e.action.url,o=n&&0===n.indexOf("div-action://set_state?state_id="),s=n&&!o?n:undefined,r=o&&n.slice("div-action://set_state?state_id=".length),a=s&&i("new-tab-links__check"),c=home.deepExtend({href:s,"data-set-state":r||undefined,tabindex:r?"0":undefined},e.attrs||{});return a&&(c.target="_blank",c.rel="noopener"),i("divjson__clickable-layout",{tag:s?"a":e.defaultTag||"div",stat:n&&e.action.log_id?t.stat.getAttr(e.block+"."+e.action.log_id.replace(/^([^(]+)\//g,"$1.")):"",attrs:c,mix:[e.mix||"",o&&"divjson__state-setter"].filter(Boolean).join(" "),content:e.content})})),o("divjson__block",(function(e,t,i){var n;if(n={"div-title-block":"divjson-title","div-separator-block":"divjson-separator","div-universal-block":"divjson-universal","div-image-block":"divjson-image","div-table-block":"divjson-table","div-buttons-block":"divjson-buttons","div-footer-block":"divjson-footer","div-traffic-block":"divjson-traffic","div-gallery-block":"divjson-gallery","div-tabs-block":"divjson-tabs","div-container-block":"divjson-container"}[e.json.type])return i(n,e)})),o("divjson",(function(e,t,i){var n=e.json,o="divjson_"+home.rnd().substr(0,5),s="";e.id=o,n.background&&n.background.length&&i("divjson__supports-bg")&&(s="background-image:"+i("divjson-background",n.background));var r=i("divjson__blocks",{blocks:n.states[0].blocks,block:e.block}),a=n.states.map((function(e){return e.state_id}));return a.length>1&&(r=i("div",{mix:"divjson__panels",content:i("mix-tabber__panel",{block:"divjson",id:o,key:a[0],content:r})})),i("divjson__layout",{content:r,attrs:{style:s},js:{divjson:{keys:a,data:Object.keys(n.states).slice(1).reduce((function(e,t){return e[a[t]]={blocks:n.states[t].blocks},e}),{}),id:o,selectedKey:a[0],baseData:{block:e.block}}}})})),o("divjson__text-layout",(function(e,t,i){return'<div class="'+home.parseRules.bem(e,t,"divjson__text.class")+'"'+home.parseRules.bem(e,t,"attrs")+">"+(void 0!==e.text?e.text:"")+"</div>"})),o("divjson__clickable-layout",(function(e,t,i){var n;return"<"+(e.tag!==n?e.tag:"")+' class="'+(e.mix!==n?e.mix:"")+'"'+home.parseRules.bem(e,t,"attrs")+(e.stat!==n?e.stat:"")+">"+(e.content!==n?e.content:"")+"</"+(e.tag!==n?e.tag:"")+">"})),o("divjson__layout",(function(e,t,i){return'<div class="divjson i-bem"'+home.parseRules.bem(e,t,"attrs")+' data-bem="'+home.parseRules.bem(e,t,"js")+'">'+(void 0!==e.content?e.content:"")+"</div>"})),o("divjson__supports-bg",(function(){return!1})),o("divjson__base",(function r(e,t,i){return e.stack.slice(0,e.stack.length-1).some((function(e){return"div-container-block"!==e.type&&"div-tabs-block"!==e.type}))||(e.mix=[e.mix,"divjson__block_toplevel_yes"].filter(Boolean).join(" ")),i(r.base,e)})),o("divjson__blocks",(function(e,t,i){var n="",o="",s=[],r=!1;return e.blocks.forEach((function(t){"div-separator-block"===t.type?r&&s.push(t):"div-title-block"!==t.type||n?"div-footer-block"===t.type?o=home.divjsonUtils.jsonWrap(i,"divjson__block",e,{json:t}):(r=!0,s.push(t)):n=home.divjsonUtils.jsonWrap(i,"divjson__block",e,{json:t})})),i("divjson__block-layout",{header:n,headerAfter:o,content:s.map((function(t){return home.divjsonUtils.jsonWrap(i,"divjson__block",e,{json:t})})).join("")})})),o("divjson__block-layout",(function(e,t,i){var n;return'<div class="media-service__header">'+(e.header!==n?e.header:"")+(e.headerAfter!==n?e.headerAfter:"")+'</div><div class="media-service__content divjson__content">'+(e.content!==n?e.content:"")+"</div>"})),o("divjson-background__image",(function(e){return'url("'+e.image_url+'")'})),o("divjson-background__gradient",(function(e){return"linear-gradient(to bottom,"+home.divjsonUtils.convertColor(e.start_color)+", "+home.divjsonUtils.convertColor(e.end_color)+")"})),o("divjson-background__solid",(function(e){var t=home.divjsonUtils.convertColor(e.color);return"linear-gradient(to bottom,"+t+","+t+")"})),o("divjson-background",(function(e,t,i){return e.map((function(e){var t;return"div-solid-background"===e.type?t="divjson-background__solid":"div-gradient-background"===e.type?t="divjson-background__gradient":"div-image-background"===e.type&&(t="divjson-background__image"),i(t,e)})).reverse().join(",")+";"})),o("divjson-title",(function(e,t,i){var n=e.json,o="",s="divjson__clickable media-service__title-text",r=i("media-service__title-icon-url",{layoutName:e.block});return r&&(o=i("div",{mix:"media-service__title-icon",attrs:{style:home.makeStyle({"background-image":"url("+r+")"})}}),s+=" media-service__title-text_icon_yes"),i("divjson__base",{block:e.block,stack:e.stack,padding_modifier:n.padding_modifier,mix:"divjson-title",content:i("media-service__header",{titleMods:{mix:"divjson-title__header"},title:i("divjson__clickable",{block:e.block,action:n.action,stack:e.stack,mix:s,content:o+i("divjson__text",{text:n.text})})})})})),o("divjson-separator",(function(e,t,i){var n=e.json;return i("divjson__base",{block:e.block,action:n.action,stack:e.stack,padding_modifier:n.padding_modifier,mix:"divjson-separator divjson-separator_size_"+(n.size||"xs").replace("_","-")+(n.has_delimiter?" divjson-separator_delimiter":""),style:{"border-color":home.divjsonUtils.convertColor(n.delimiter_color||"#14000000"),"flex-grow":"match_parent"===n.size?n.weight||1:undefined}})})),o("divjson-image-element",(function(e,t,i){var n=e.json;if(!n.image_url)return"";var o=e.stack.some((function(e){return"div-gallery-block"===e.type})),s={},r=!!e.size;if(r){var a={xs:16,s:18,m:20,l:24,xl:36,xxl:40}[e.size||"m"];s.width=home.divjsonUtils.convertPXToEM((n.ratio||1)*a),s.height=home.divjsonUtils.convertPXToEM(a)}else s["padding-bottom"]=(100/(n.ratio||1)).toFixed(2)+"%";return s["background-image"]=o?undefined:'url("'+n.image_url+'")',i("div",{mix:home.getBEMClassname("divjson-image-element",{mix:[e.mix,o&&"imageloader__image"].filter(Boolean).join(" "),mods:{subtype:"block"===e.subtype||r?"centered":undefined,"full-width":r?undefined:"yes"}}),attrs:{"data-image":o?n.image_url:undefined,style:home.makeStyle(s)}})})),o("divjson-date-element",(function(e,t,i){var n=e.json;return i("divjson-date-element__layout",{day:home.htmlFilter(n.date_day),month:home.htmlFilter(n.date_month)})})),o("divjson-date-element__layout",(function(e,t,i){var n;return'<div class="divjson-date-element"><div class="divjson-date-element__day">'+(e.day!==n?e.day:"")+'</div><div class="divjson-date-element__month">'+(e.month!==n?e.month:"")+"</div></div>"})),o("divjson-universal",(function(e,t,i){var n=e.json,o="",s="",r="";return n.side_element&&("div-image-element"===n.side_element.element.type?r=home.divjsonUtils.jsonWrap(i,"divjson-image-element",e,{json:n.side_element.element,mix:n.side_element.size?"divjson-universal__element-image_size_"+n.side_element.size:""}):"date_element"===n.side_element.element.type&&(r=i("divjson-date-element",{json:n.side_element.element}))),r&&(r=i("div",{mix:home.getBEMClassname("divjson-universal__element",{mods:{size:n.side_element.size}}),content:r}),"right"===n.side_element.position?s=r:o=r),i("divjson__base",{block:e.block,action:n.action,stack:e.stack,padding_modifier:n.padding_modifier,mix:home.getBEMClassname("divjson-universal",{mods:{title:n.title?"yes":undefined,text:n.text?"yes":undefined}}),content:i("divjson-universal__layout",{left:o,right:s,title:i("divjson__text",{mix:"divjson-universal__title",text:n.title,style:n.title_style||"title_m",maxLines:n.title_max_lines}),text:i("divjson__text",{mix:"divjson-universal__text",text:n.text,style:n.text_style||"text_s",maxLines:n.text_max_lines})})})})),o("divjson-universal__layout",(function(e,t,i){var n;return(e.left!==n?e.left:"")+'<div class="divjson-universal__main">'+(e.title!==n?e.title:"")+(e.text!==n?e.text:"")+"</div>"+(e.right!==n?e.right:"")})),o("divjson-container",(function(e,t,i){var n=e.json,o={},s={direction:n.direction||"vertical",valign:n.alignment_vertical||"top",halign:n.alignment_horizontal||"left",style:n.frame&&n.frame.style?n.frame&&n.frame.style:undefined};return n.width&&("numeric"===n.width.type?o.width=home.divjsonUtils.convertPXToEM(n.width.value):"predefined"===n.width.type&&"match_parent"===n.width.value?s.width="match-parent":"predefined"===n.width.type&&"wrap_content"===n.width.value&&(s.width="wrap-content")),n.height&&("numeric"===n.height.type?o.height=home.divjsonUtils.convertPXToEM(n.height.value):"predefined"===n.height.type&&"match_parent"===n.height.value&&(s.height="match-parent")),n.background&&n.background.length&&(o["background-image"]=i("divjson-background",n.background)),n.frame&&"border"===n.frame.style&&n.frame.color&&(o["border-color"]=home.divjsonUtils.convertColor(n.frame.color)),i("divjson__base",{block:e.block,action:n.action,stack:e.stack,mix:home.getBEMClassname("divjson-container",{mix:i("divjson-container__mix",e),mods:s}),style:o,content:n.children.map((function(t){return home.divjsonUtils.jsonWrap(i,"divjson__block",e,{json:t})})).join("")})})),o("divjson-container__mix",(function(e){var t=e.json,i=[];return t.frame&&"shadow"===t.frame.style&&i.push("media-service__shadow"),t.frame&&t.frame.adaptive_bg&&i.push("divjson-container_adaptive-bg_yes"),i.join(" ")})),o("divjson-image",(function(e,t,i){var n=e.json;return i("div",{mix:"divjson-image",content:home.divjsonUtils.jsonWrap(i,"divjson-image-element",e,{json:n.image,subtype:"block"})})})),o("divjson-table",(function(e,t,i){for(var n=e.json,o=1,s=0;s<n.rows.length;++s)if("row_element"===n.rows[s].type){o=n.rows[s].cells.length;break}for(var r=n.columns||[];r.length<o;)r.push({});var a=r.some((function(e){return!!e.weight})),c=r.some((function(e){return!e.weight})),l=n.rows.map((function(t){var n;if("row_element"===t.type)n=t.cells.map((function(n,o){var s=r[o],a="",c="";n.text&&(a=i("divjson__text",{mix:"divjson-table__cell-text",style:n.text_style||"text_m",text:n.text})),n.image&&(c=i("div",{mix:"divjson-table__cell-image",content:home.divjsonUtils.jsonWrap(i,"divjson-image-element",e,{json:n.image,size:n.text?"m":n.image_size||"m"})}));var l=[];return a&&l.push(a),c&&("right"===n.image_position?l.push(c):l.unshift(c)),i("divjson-table__cell",{mods:{left:s.left_padding||"xs",right:s.right_padding||"xs",top:t.top_padding||"zero",bottom:t.bottom_padding||"xxs",valign:n.vertical_alignment||"center",halign:n.horizontal_alignment||"left"},content:l.join("")})})).join("");else{var s=r[0],a=r[r.length-1];n=i("divjson-table__cell",{mods:{separator:"yes",left:s.left_padding||"xs",right:a.right_padding||"xs"},attrs:{colspan:o,style:home.makeStyle({"border-color":home.divjsonUtils.convertColor(t.color||"#14000000")})},content:i("div",{mix:"divjson-table__cell-separator"})})}return i("divjson-table__row",{cells:n})})).join(""),u=r.reduce((function(e,t){return e+(t.weight||0)}),0)||r.length,d=i("divjson-table__colgroup",{cols:r.map((function(e){return i("divjson-table__col",{width:(100*(e.weight||0)/u).toFixed(2)+"%"})})).join("")});return i("divjson__base",{block:e.block,action:n.action,stack:e.stack,padding_modifier:n.padding_modifier,mix:"i-bem "+home.getBEMClassname("divjson-table",{mods:{"full-width":a?"yes":undefined,fixed:c?undefined:"yes"}}),content:i("divjson-table__layout",{colgroup:d,rows:l}),js:{"divjson-table":{}}})})),o("divjson-table__col",(function(e,t,i){return'<col width="'+(void 0!==e.width?e.width:"")+'">'})),o("divjson-table__colgroup",(function(e,t,i){return"<colgroup>"+(void 0!==e.cols?e.cols:"")+"</colgroup>"})),o("divjson-table__row",(function(e,t,i){return"<tr>"+(void 0!==e.cells?e.cells:"")+"</tr>"})),o("divjson-table__cell",(function(e,t,i){return'<td class="'+home.parseRules.bem(e,t,"divjson-table__cell.class")+'"'+home.parseRules.bem(e,t,"attrs")+">"+(void 0!==e.content?e.content:"")+"</td>"})),o("divjson-table__layout",(function(e,t,i){var n;return'<div class="divjson-table__sizer"></div><table class="divjson-table__table">'+(e.colgroup!==n?e.colgroup:"")+(e.rows!==n?e.rows:"")+"</table>"})),o("divjson-buttons__button",(function(e,t,i){var n=e.json;return i("divjson__clickable",{action:n.action,block:e.block,stack:e.stack,attrs:{style:home.makeStyle({"background-color":home.divjsonUtils.convertColor(n.background_color||"#edf0f2")})},mix:home.getBEMClassname("divjson-buttons__button",{mods:{text:n.text?"yes":undefined,image:n.image?"yes":undefined}}),content:(n.image?i("div",{mix:"divjson-buttons__image",content:home.divjsonUtils.jsonWrap(i,"divjson-image-element",e,{json:n.image})}):"")+(n.text?i("div",{mix:"divjson-buttons__text",content:home.divjsonUtils.processText(n.text)}):"")})})),o("divjson-buttons",(function(e,t,i){var n=e.json;return i("divjson__base",{block:e.block,action:n.action,stack:e.stack,padding_modifier:n.padding_modifier,mix:home.getBEMClassname("divjson-buttons",{mods:{alignment:n.alignment||"left",fullwidth:n.is_fullwidth?"yes":undefined}}),content:n.items.map((function(t){return home.divjsonUtils.jsonWrap(i,"divjson-buttons__button",e,{json:t})})).join("")})})),o("divjson-footer",(function(e,t,i){var n=e.json;return i("divjson__base",{block:e.block,action:n.action,stack:e.stack,padding_modifier:n.padding_modifier,mix:"divjson-footer",content:(n.image?i("div",{mix:"divjson-footer__image",content:home.divjsonUtils.jsonWrap(i,"divjson-image-element",e,{json:n.image})}):"")+i("divjson__text",{mix:"divjson-footer__text",text:n.text,style:n.text_style||"button"})})})),o("divjson-traffic",(function(e,t,i){var n=e.json;return i("divjson__base",{block:e.block,action:n.action,stack:e.stack,padding_modifier:n.padding_modifier,mix:home.getBEMClassname("divjson-traffic",{mods:{align:n.alignment||"left"}}),content:n.items.map((function(e){return i("divjson-traffic__item",{scoreAttrs:{style:home.makeStyle({"border-color":home.divjsonUtils.convertColor(e.color||"#ffedf0f2")})},score:e.score,text:home.divjsonUtils.processText(e.text)})})).join("")})})),o("divjson-traffic__item",(function(e,t,i){var n;return'<div class="divjson-traffic__element"><div class="divjson-traffic__element-score"'+home.parseRules.bem(e,t,"scoreAttrs.attrs")+">"+(e.score!==n?e.score:"")+'</div><div class="divjson-traffic__element-text">'+(e.text!==n?e.text:"")+"</div></div>"})),o("divjson-gallery",(function(e,t,i){var n=e.json,o=i("divjson-gallery__default-item-padding"),s=n.items.map((function(t,s){var r;return s===n.items.length-1?n.tail&&(r=o):r=n.padding_between_items&&n.padding_between_items.value||o,i("divjson-gallery__item",{attrs:{style:home.makeStyle({"margin-right":r?home.divjsonUtils.convertPXToEM(r):undefined})},content:home.divjsonUtils.jsonWrap(i,"divjson-container",e,{json:t})})})).join("");if(n.tail){var r="";r=n.tail.icon.image_url?i("divjson-gallery__tail-image",{image:n.tail.icon.image_url}):i("divjson-gallery__tail-arrow",{attrs:{style:home.makeStyle({"border-color":home.divjsonUtils.convertColor(n.tail.icon.border_color||"#f2f2f2"),"background-color":home.divjsonUtils.convertColor(n.tail.icon.fill_color||"#f2f2f2")})},svgAttrs:{fill:home.divjsonUtils.convertColor(n.tail.icon.icon_color||"#808080")}}),s+=i("divjson__clickable",{defaultTag:"div",block:e.block,action:n.tail.action,stack:e.stack,mix:"divjson-gallery__item divjson-gallery__tail imageloader__column imageloader__card",content:r+i("divjson__text",{mix:"divjson-gallery__tail-text",text:n.tail.text||"",style:n.tail.text_style||"text_m"})})}return i("divjson__base",{block:e.block,action:n.action,stack:e.stack,mix:i("divjson-gallery__mix")+" "+home.getBEMClassname("divjson-gallery",{mods:{"padding-side":n.padding_modifier?n.padding_modifier.position||"left":undefined,"padding-size":n.padding_modifier&&n.padding_modifier.size?n.padding_modifier.size:undefined}}),js:i("divjson-gallery__js",e),style:{"padding-top":n.padding_top?home.divjsonUtils.convertPXToEM(n.padding_top.value):undefined,"padding-bottom":n.padding_bottom?home.divjsonUtils.convertPXToEM(n.padding_bottom.value):undefined},content:i("divjson-gallery__content",{items:s})})})),o("divjson-gallery__tail-arrow",(function(e,t,i){return'<div class="divjson-gallery__tail-icon divjson-gallery__tail-icon_arrow"'+home.parseRules.bem(e,t,"attrs")+'><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"'+home.parseRules.bem(e,t,"svgAttrs.attrs")+'><g fill-rule="evenodd"><path d="M4 13h12.17l-5.59 5.59L12 20l8-8-8-8-1.41 1.41L16.17 11H4z" /><path fill-opacity=".01" d="M24 24H0V0h24z" /></g></svg></div>'})),o("divjson-gallery__tail-image",(function(e,t,i){return'<div class="divjson-gallery__tail-icon divjson-gallery__tail-icon_image" style="background-image:url(&quot;'+(void 0!==e.image?e.image:"")+'&quot;);"></div>'})),o("divjson-gallery__item",(function(e,t,i){return'<div class="divjson-gallery__item imageloader__column imageloader__card"'+home.parseRules.bem(e,t,"attrs")+">"+(void 0!==e.content?e.content:"")+"</div>"})),o.cached("divjson-gallery__default-item-padding",(function(){return 16})),o("divjson-gallery__js",(function(e){return{imageloader:{},"arrowed-list":{counter:e.block}}})),o("divjson-gallery__mix",(function(){return"media-service__list-wrapper arrowed-list arrowed-list_theme_media imageloader i-bem imageloader_different_yes"})),o("divjson-gallery__content",(function(e,t,i){return i("arrowed-list__content_theme_media",{wrapMix:"imageloader__scroller media-service__wrap",listMix:"media-service__list divjson-gallery__list",content:i("div",{mix:"divjson-gallery__items-wrapper arrowed-list__items-wrapper",content:e.items})})})),o("divjson-tabs__style",(function(){return""})),o("divjson-tabs__mix",(function(){return""})),o("divjson-tabs",(function(e,t,i){var n=e.json,o="divjson-tabs-"+home.rnd().substr(0,5),s=i("divjson-tabs__style",{id:o,json:n})||"";return i("divjson__base",{block:e.block,stack:e.stack,mix:"divjson-tabs i-bem "+i("divjson-tabs__mix",e),id:o,js:{"divjson-tabs":{uniqId:o,baseData:{block:e.block,stack:e.stack},data:Object.keys(n.items).slice(1).reduce((function(e,t){return e[t]=n.items[t].content,e}),{})}},content:s+i("divjson-tabs__layout",{json:n,tabs:n.items.length>1?i("divjson-tabs__tabs-layout",{content:n.items.map((function(t,n){var s=0===n,r=t.title.action;return i("mix-tabber__tab",{href:r?r.url:undefined,mods:{selected:s?"yes":"no"},mix:home.getBEMClassname("divjson-tabs__tab",{mods:{selected:s?"yes":"no"}}),content:home.capitalize(t.title.text.toLowerCase()),attrs:{tabindex:s?"0":"-1","aria-selected":s?"true":"false","aria-controls":s?o+"_panel_"+n:undefined,"data-key":n,"data-stat-link":r?e.block+"."+r.log_id.replace(/\//g,".")+".link."+n:undefined,"data-stat-select":r?e.block+"."+r.log_id.replace(/\//g,".")+".select."+n:e.block+".tab.select."+n,id:o+"_tab_"+n}})})).join("")}):"",panels:i("mix-tabber__panel",{block:"divjson-tabs",id:o,key:"0",mix:i("divjson-tabs__panel-mix"),attrs:{"aria-labelledby":o+"_tab_0"},content:home.divjsonUtils.jsonWrap(i,"divjson-container",e,{json:n.items[0].content})})})})})),o("divjson-tabs__panel-mix",(function(){return" media-service__panel"})),o("divjson-tabs",(function a(e,t,i){return e.json.items.forEach((function(e){e.title.action=null})),i(a.base,e)})),o("divjson-tabs__tabs-layout",(function(e,t,i){return'<div class="divjson-tabs__tabs">'+(void 0!==e.content?e.content:"")+"</div>"})),o("divjson-tabs__layout",(function(e,t,i){var n;return(e.tabs!==n?e.tabs:"")+'<div class="divjson-tabs__panels media-service__panels">'+(e.panels!==n?e.panels:"")+"</div>"})),o("divjson2-block__client-view",(function(e,t,i){var n=home.getData("divjson2-block."+e.params.layoutName);if(n)return i("divjson2-block",n)})),o("divjson2-block",(function(e,t,i){return i("media-service",{block:"divjson2-block",rootMod:"divjson2-block i-bem mix-tabber_theme_"+(i("media-service__inline-tabs")?"inline-media":"media")+(e.test?" divjson2-block_test_yes":""),mods:{"has-carousel":"yes",tabs:e.tabs?"yes":undefined,dummy:"yes"},title:e.title,titleIcon:i("media-service__title-icon-url",{layoutName:e.layoutName}),attrs:{role:"complementary","aria-label":e.title,"data-bem":home.getBEMParams({"divjson2-block":{api:e.api&&"1"!==e.api?home.addQueryToUrl(e.api,{theme:e.theme,platform:"desktop"}):"",titleIcon:i("media-service__title-icon-url",{layoutName:e.layoutName}),layoutName:e.layoutName}}),style:e.blockHeight?"height:"+e.blockHeight+"px":""},tabs:e.tabs?i("div",{mix:"divjson2-block__dummy-tabs",content:i("dummy-cards__tabs")}):"",content:i("dummy-cards",{width:e.cardWidth,height:e.cardHeight})})})),o("divjson2__log",(function(e,t){if(e){var i=t.options&&t.options.disable_divjson2_warn||t.disable_divjson2_warn;"warn"===e.level&&i||home.error(e)}})),o("divjson2__base",(function(e,t,i){var n=e.json,o=home.divjsonUtils.convertPXToEM,s={},r={},a="",c=e.style||{},l=e.attrs||{};if(n.border&&(n.border.has_shadow&&(r.shadow="yes"),n.border.stroke&&(c.border=o(n.border.stroke.width||1)+" solid "+home.divjsonUtils.convertColor(n.border.stroke.color)),n.border.corner_radius&&(r.radius="yes",c["border-radius"]=o(n.border.corner_radius))),n.width?"fixed"===n.width.type?c.width=o(n.width.value):"match_parent"===n.width.type?s.width="parent":"wrap_content"===n.width.type&&(s.width="content"):s.width="parent",n.height?"fixed"===n.height.type?c.height=o(n.height.value):"match_parent"===n.height.type?s.height="parent":"wrap_content"===n.height.type&&(s.height="content"):s.height="content",n.background){var u=i("divjson2-background",n.background);c["background-image"]=u.image,c["background-size"]=u.size,c["background-position"]=u.pos,c["background-repeat"]="no-repeat",e.inGallery&&n.background.some((function(e){return"image"===e.type}))&&(a+=" imageloader__image imageloader__image_loaded_no")}n.paddings&&(c.padding=o(n.paddings.top||0)+" "+o(!e.skipHorizontalPadding&&n.paddings.right||0)+" "+o(n.paddings.bottom||0)+" "+o(!e.skipHorizontalPadding&&n.paddings.left||0)),n.alpha&&(c.opacity=Number(n.alpha)),s["valign-self"]=home.htmlFilter(n.alignment_vertical||"default"),s["halign-self"]=home.htmlFilter(n.alignment_horizontal||"default"),l.style=home.makeStyle(c),l.id=e.id,e.js&&(l["data-bem"]=home.getBEMParams(e.js),a+=" i-bem");var d=e.containerStyle||{};return n.margins&&(d.padding=o(n.margins.top||0)+" "+o(n.margins.right||0)+" "+o(n.margins.bottom||0)+" "+o(n.margins.left||0)),i("div",{mix:home.getBEMClassname("divjson2__block",{mods:s,mix:e.containerMix}),attrs:{style:home.makeStyle(d)},content:i("divjson2__clickable",{json:n,layoutName:e.layoutName,stack:e.stack,mix:home.getBEMClassname("divjson2__block-inner",{mods:r,mix:[e.mix,a].filter(Boolean).join(" ")}),defaultTag:"div",action:n.action,hasParentAction:e.hasParentAction,hasCurrentAction:e.hasCurrentAction,inPreciseGallery:e.inPreciseGallery,attrs:l,content:e.content})})})),o("divjson2__clickable",(function(e,t,i){var n=e.action&&!e.hasParentAction&&e.action.url,o=n&&0===n.indexOf("div-action://set_state?state_id="),s=n&&!o?n:undefined,r=o&&n.slice("div-action://set_state?state_id=".length),a=s&&i("new-tab-links__check"),c=home.deepExtend({href:s,"data-set-state":r||undefined,tabindex:r?"0":undefined},e.attrs||{});if((a||e.action&&"_blank"===e.action.target)&&(c.target="_blank",c.rel="noopener"),e.json&&(e.json.visibility_action||e.json.visibility_actions)){var l=e.json.visibility_actions||[e.json.visibility_action];c["data-bem"]=home.getBEMParams({"divjson2-visibility":{layoutName:e.layoutName,actions:l.map((function(e){return{log:e.log_id?e.log_id.replace(/\/(?=[^)]+($|\())/g,"."):undefined,url:e.url,percent:e.visibility_percentage,duration:e.visibility_duration}}))}})}return i("divjson2__clickable-layout",{tag:s?"a":e.defaultTag||"div",stat:n&&e.action.log_id?t.stat.getAttr(e.layoutName+"."+e.action.log_id.replace(/\/(?=[^)]+($|\())/g,"."),null,{customParams:e.action.payload,precise:!!e.inPreciseGallery}):"",attrs:c,mix:[e.mix||"",o&&"divjson2__state-setter",(n||o)&&"divjson2__clickable",(n||o)&&i("divjson2__clickable-mix",e.action),c["data-bem"]&&"i-bem"].filter(Boolean).join(" "),content:e.content})})),o("divjson2__apply-template",(function(e,t,i){var n,o=e.json,s=e.templates[o.type],r=e.context||{},a={};for(n in r)r.hasOwnProperty(n)&&(a[n]=r[n]);for(n in o)"type"!==n&&"__proto__"!==n&&o.hasOwnProperty(n)&&(a[n]=o[n]);function c(e){var t=typeof e;return"string"===t||"number"===t||"boolean"===t||"undefined"===t||null===e?e:home.deepExtend(Array.isArray(e)?[]:{},e)}var l=function u(t,n){var s=Object.keys(n).filter((function(e){return"__proto__"!==e})),r=s.filter((function(e){return"$"!==e.charAt(0)})),l=s.filter((function(e){return"$"===e.charAt(0)}));function d(s){for(var r=0;r<s.length;++r){var l=s[r],d=n[l];if("$"===l.charAt(0)){var h=a[d];if(h!==undefined){var m=l.substr(1);t[m]=c(h)}else i("divjson2__log",{block:"divjson2-block",message:"Missing template field",level:"warn",source:e.layoutName,meta:{key:l,template:o.type}})}else"object"==typeof d&&null!==d?(t[l]=Array.isArray(d)?[]:{},u(t[l],d)):t[l]=c(d)}}return d(r),d(l),t}({},s);for(n in o)"type"!==n&&"__proto__"!==n&&o.hasOwnProperty(n)&&(l[n]=c(o[n]));return{json:l,context:a}})),o("divjson2__apply-templates",(function(e,t,i){for(var n=e.json,o=e.templates,s=e.context;n.type in o;){var r=i("divjson2__apply-template",{json:n,templates:o,context:s,layoutName:e.layoutName});n=r.json,s=r.context}return{json:n,context:s}})),o("divjson2__block",(function(e,t,i){var n,o=e.json,s=e.templates,r=e.context,a=i("divjson2__apply-templates",{json:o,templates:s,context:r,layoutName:e.layoutName});o=a.json,r=a.context;var c=i("divjson2__type-map"),l=i("divjson2__hardcoded-templates")||{};return(n=c[o.type])?home.divjsonUtils.json2Wrap(i,n,e,{json:o,context:r}):o.type in l?home.divjsonUtils.json2Wrap(i,l[o.type],e,{json:o,context:r}):void i("divjson2__log",{block:"divjson2-block",message:"Unknown element type",source:e.layoutName,meta:{type:o.type}})})),o.cached("divjson2__type-map",(function(){return{container:"divjson2-container",gallery:"divjson2-gallery",gif:"divjson2-image",grid:"divjson2-grid",image:"divjson2-image",separator:"divjson2-separator",tabs:"divjson2-tabs",text:"divjson2-text"}})),o("divjson2",(function(e,t,i){var n=e.json,o=n.card,s=n.templates||{},r="divjson_"+home.rnd().substr(0,5),a=i("divjson2__block",{layoutName:e.layoutName,titleIcon:e.titleIcon,templates:s,context:{},json:o.states[0].div}),c=o.states.map((function(e){return String(e.state_id)}));return c.length>1&&(a=i("div",{mix:"divjson2__panels",content:i("mix-tabber__panel",{block:"divjson2",id:r,key:c[0],content:a})})),i("divjson2__layout",{content:a,js:{divjson2:{keys:c,data:o.states.slice(1).reduce((function(e,t){return e[t.state_id]=t.div,e}),{}),id:r,selectedKey:c[0],baseData:{layoutName:e.layoutName},templates:s}}})})),o("divjson2__check",(function(e,t,i){if(!e||!e.json)return"Missing object";var n,o=e.json,s=o.card,r=o.templates||{};if(!s)return"Missing card";if(!s.states)return"Missing states";var a=i("divjson2__type-map");function c(e){var t;if("tabs"===e.type&&Array.isArray(e.items))for(var i=0;i<e.items.length;++i)if(t=c(e.items[i].div))return t;if(e.type&&"home:"!==e.type.substr(0,5)&&!(e.type in r)&&!(e.type in a))return'Unknown type "'+e.type+'"';if(Array.isArray(e.items))for(var n=0;n<e.items.length;++n)if(t=c(e.items[n]))return t;return""}for(var l in r)if(r.hasOwnProperty(l)){if(0===l.indexOf("home:"))return'Reserved template name "'+l+'"';if(n=c(r[l]))return n;if(l in a)return'Template name collision "'+l+'"'}for(var u=0;u<s.states.length;++u)if(n=c(s.states[u].div))return n;return"ok"})),o("divjson2__clickable-layout",(function(e,t,i){var n;return"<"+(e.tag!==n?e.tag:"")+' class="'+(e.mix!==n?e.mix:"")+'"'+home.parseRules.bem(e,t,"attrs")+(e.stat!==n?e.stat:"")+">"+(e.content!==n?e.content:"")+"</"+(e.tag!==n?e.tag:"")+">"})),o("divjson2__layout",(function(e,t,i){return'<div class="divjson2 i-bem"'+home.parseRules.bem(e,t,"attrs")+' data-bem="'+home.parseRules.bem(e,t,"js")+'">'+(void 0!==e.content?e.content:"")+"</div>"})),o("divjson2__find-tabs",(function(e,t,i){return function n(t,o,s){var r=i("divjson2__apply-templates",{json:t,templates:o,context:s,layoutName:e.layoutName});if(t=r.json,s=r.context,"tabs"===t.type)return{json:t,context:s};if(("container"===t.type||"grid"===t.type)&&Array.isArray(t.items))for(var a=0;a<t.items.length;++a){var c=n(t.items[a],o,s);if(c)return c}return null}(e.json,e.templates,e.context)})),o("divjson2__clickable-mix",(function(e){return e.hover&&"translate"===e.hover.type?"divjson2__clickable_translate_yes":"divjson2__clickable_opacity_yes"})),o("divjson2__template-block",(function(e,t,i){var n,o,s,r,a,c=e.json.div;if(i("media-service__inline-tabs")){var l=i("divjson2__find-tabs",{json:c,templates:e.templates,context:e.context});l&&(o=l.json,s=l.context),o&&(r="divjson2-tabs-"+home.rnd().substr(0,5),o.id=r,n=i("div",{mix:"media-service__tabs",content:i("divjson2-tabs__labels",{layoutName:e.layoutName,json:o,id:r})}),a=i("divjson2-tabs__selected-index",o))}return i("div",{mix:"divjson2-block__block-wrapper"+(n?" i-bem divjson2-tabs":""),attrs:{"data-bem":o?home.getBEMParams({"divjson2-tabs":{uniqId:r,baseData:{layoutName:e.layoutName,stack:[],context:s},data:Object.keys(o.items).reduce((function(e,t,i){return i!==a&&(e[t]=o.items[t].div),e}),{})}}):null},content:i("div",{mix:"media-service__header",content:i("media-service__header",{title:i("media-service__title",{block:"divjson2-block",href:e.json.title_link&&home.htmlFilter(e.json.title_link)||"",title:home.htmlFilter(e.json.title||""),titleStat:t.stat.getClientCounter(e.layoutName+".title"),titleIcon:home.htmlFilter(e.json.title_icon||e.titleIcon||""),target:e.json.target&&home.htmlFilter(e.json.target)||undefined})})+(n||(e.json.title_after?i("home-link",{content:home.htmlFilter(e.json.title_after),href:e.json.title_after_link&&home.htmlFilter(e.json.title_after_link)||"",target:i("new-tab-links__check")?"_blank":"",stat:t.stat.getClientCounter(e.layoutName+".title_action"),mix:"home-link_gray_yes divjson2-block__titler-after"}):""))})+i("div",{mix:"divjson2-block__content",content:i("divjson2__block",home.divjsonUtils.json2MergeData(e,{json:c}))})})})),o.cached("divjson2__hardcoded-templates",(function(){return{"home:block":"divjson2__template-block"}})),o("divjson2__block-layout",(function(e,t,i){var n;return'<div class="media-service__header">'+(e.header!==n?e.header:"")+(e.headerAfter!==n?e.headerAfter:"")+'</div><div class="media-service__content divjson2__content">'+(e.content!==n?e.content:"")+"</div>"})),o("divjson2-container",(function(e,t,i){var n=e.json;if(Array.isArray(n.items)&&n.items.length){var o=e.style||{},s={};s.valign=home.htmlFilter(n.content_alignment_vertical||"top"),s.halign=home.htmlFilter(n.content_alignment_horizontal||"left");var r="vertical";"horizontal"!==n.orientation&&"overlap"!==n.orientation||(r=n.orientation),s.orientation=r;var a=n.items.map((function(t){var n=t,o=e.templates,s=e.context,r=i("divjson2__apply-templates",{json:n,templates:o,context:s,layoutName:e.layoutName});return{item:n=r.json,context:s=r.context}})),c=a.map((function(t){return i("divjson2__block",home.divjsonUtils.json2MergeData(e,{context:t.context,json:t.item}))})).join("");if(c){if("overlap"!==r){var l="vertical"===r?"height":"width",u=a.map((function(e){if(e.item[l]){if("match_parent"===e.item[l].type)return(Number(e.item[l].weight)||1)+"fr"}else if("width"===l)return"1fr";return"auto"})).join(" ");o["vertical"===r?"grid-template-rows":"grid-template-columns"]=u;var d=!1,h=!1;a.forEach((function(e){!e.item.width||"wrap_content"!==e.item.width.type&&"fixed"!==e.item.width.type||(d=!0),e.item.height&&"wrap_content"!==e.item.height.type&&"fixed"!==e.item.height.type||(h=!0)})),s["has-width-content"]=d?"yes":undefined,s["has-height-content"]=h?"yes":undefined}return i("divjson2__base",home.divjsonUtils.json2MergeData(e,{json:n,style:o,mix:home.getBEMClassname("divjson2-container",{mods:s}),content:c},!0))}}else i("divjson2__log",{block:"divjson2-block",message:"Missing divjson2-container items",level:"warn",source:e.layoutName})})),o("divjson2-text__range",(function(e,t,i){var n=home.divjsonUtils.convertPXToEM,o=e.textStyles,s={},r={},a=Number(o.font_size)||12,c=1.25;return s["font-size"]=n(20*a/e.rootFontSize),o.line_height&&(c=Number(o.line_height)/a,s["line-height"]=c),o.letter_spacing&&(s["letter-spacing"]=n(o.letter_spacing)),"medium"!==o.font_weight&&"bold"!==o.font_weight&&"regular"!==o.font_weight||("medium"===o.font_weight?s["font-weight"]=500:"bold"===o.font_weight?s["font-weight"]="bold":s["font-weight"]=400),o.text_color&&(s.color=home.divjsonUtils.convertColor(o.text_color)),(o.underline||o.strike)&&("single"===o.underline&&"single"===o.strike?r.decoration="both":"single"===o.underline?r.decoration="underline":"single"===o.strike?r.decoration="strike":r.decoration="none"),o.underline&&(r.underline=o.underline),o.strike&&(r.strike=o.strike),i("span",{mix:home.getBEMClassname("divjson2-text__range",{mods:r,mix:e.rangeMix||""}),content:e.content,attrs:{style:home.makeStyle(s)}})})),o("divjson2-text",(function(e,t,i){var n=e.json;if(n.text){var o,s={},r=e.style||{},a={},c=Number(n.font_size)||12;r["font-size"]=home.divjsonUtils.convertPXToEM(c);var l=1.25,u="";if(n.line_height&&(l=Number(n.line_height)/c,r["line-height"]=l),1===n.max_lines)s.clamped="singleline";else if(n.max_lines){var d=Number(n.max_lines);r["max-height"]=d*l+"em",n.ranges||n.images||(r["-webkit-line-clamp"]=d,a["data-lines"]=d,s.clamped="multiline",u="i-multiline-overflow",o={})}var h=!n.ranges||n.ranges.length<=1&&0===n.ranges[0].start&&n.ranges[0].end>=n.text.length,m=!!n.text_color!=!!(n.ranges&&n.ranges[0]&&n.ranges[0].text_color);n.max_lines&&h&&m&&(r.color=home.divjsonUtils.convertColor(n.text_color||n.ranges&&n.ranges[0]&&n.ranges[0].text_color)),n.text_alignment_horizontal&&(s["text-halign"]=home.htmlFilter(n.text_alignment_horizontal)),n.text_alignment_vertical&&(s["text-valign"]=home.htmlFilter(n.text_alignment_vertical)),n.truncate&&("none"===n.truncate?s.truncate="none":"marquee"===n.truncate&&1===n.max_lines&&(s.marquee="yes",(o=o||{}).marqueeDelay=Number(n.marquee_animation&&n.marquee_animation.start_delay||0),n.marquee_animation&&n.marquee_animation.repeat&&"fixed"===n.marquee_animation.repeat.type?o.marqueeRepeat=Number(n.marquee_animation.repeat.value):o.marqueeRepeat=-1));var p=n.text;if(Array.isArray(n.ranges)&&n.ranges.length||Array.isArray(n.images)&&n.images.length){var f=n.ranges||[{start:0,end:p.length}],_=n.images||[],g=0,v=[],b="",y=[];f.forEach((function(e){y.push({index:e.start,range:e,type:"rangeStart",isStart:!0}),y.push({index:e.end,range:e,type:"rangeEnd"})})),_.forEach((function(e,t){e.start<=p.length&&y.push({index:e.start,image:e,type:"image",arrayIndex:t})})),y.sort((function(e,t){return e.index===t.index?e.type!==t.type?"image"===e.type?-1:"image"===t.type?1:e.type<t.type:"image"===e.type&&"image"===t.type?t.arrayIndex-e.arrayIndex:"rangeStart"===e.type&&"rangeStart"===t.type?e.range.end-t.range.end:"rangeStart"===e.type?1:"rangeStart"===t.type?-1:e.range.start-t.range.start:e.index-t.index})),y.forEach((function(e){var t=e.range,o=e.index;if(o>g){var s=home.deepExtend({},n);v.forEach((function(e){s=home.deepExtend(s,e)})),b+=i("divjson2-text__range",{content:home.htmlFilter(p.substring(g,o)),rootFontSize:c,textStyles:s,rangeMix:u})}if("rangeStart"===e.type)v.push(t);else if("rangeEnd"===e.type)v=v.filter((function(t){return t!==e.range}));else{var r=home.deepExtend({},n);v.forEach((function(e){r=home.deepExtend(r,e)}));var a=home.divjsonUtils.convertPXToEM(20*(e.image.width&&e.image.width.value||20)/(r.font_size||12)),l=home.divjsonUtils.convertPXToEM(20*(e.image.height&&e.image.height.value||20)/(r.font_size||12));b+=i("divjson2-text__range",{content:i("span",{mix:"divjson2-text__image",attrs:{style:home.makeStyle({"background-image":'url("'+home.htmlFilter(e.image.url)+'")',width:a,height:l,"margin-top":n.line_height?"-"+l:undefined,"margin-bottom":n.line_height?"-"+l:undefined})}}),rootFontSize:c,textStyles:r,rangeMix:u})}g=o})),g<p.length&&(b+=i("divjson2-text__range",{content:home.htmlFilter(p.substring(g)),rootFontSize:c,textStyles:home.deepExtend({},n),rangeMix:u})),p=b}else p=i("divjson2-text__range",{content:home.htmlFilter(p),rootFontSize:c,textStyles:n,rangeMix:u});return i("divjson2__base",home.divjsonUtils.json2MergeData(e,{json:n,attrs:a,js:o?{"divjson2-text":o}:undefined,mix:home.getBEMClassname("divjson2-text",{mods:s}),content:i("div",{mix:"divjson2-text__inner",attrs:{style:home.makeStyle(r)},content:p})},!0))}i("divjson2__log",{block:"divjson2-block",message:"Missing divjson2-text text",level:"warn",source:e.layoutName})})),o("divjson2-image",(function(e,t,i){var n=e.json;if(n.image_url||n.gif_url){var o=e.inGallery,s=e.style||{};return s["background-color"]=home.divjsonUtils.convertColor(n.placeholder_color||"#14000000"),s["background-size"]=i("divjson2-background__image-size",n),s["background-position"]=i("divjson2-background__image-pos",n),i("divjson2__base",o?home.divjsonUtils.json2MergeData(e,{json:n,mix:"divjson2-image",content:i("div",{mix:"divjson2-image__image imageloader__image",attrs:{"data-image":n.image_url||n.gif_url,style:home.makeStyle(s)}})},!0):home.divjsonUtils.json2MergeData(e,{json:n,mix:"divjson2-image",js:{"divjson2-image":{image:n.image_url||n.gif_url}},content:i("div",{mix:"divjson2-image__image",attrs:{style:home.makeStyle(s)}})},!0))}i("divjson2__log",{block:"divjson2-block",message:"Missing divjson2-image url",level:"warn",source:e.layoutName,meta:{type:n.type}})})),o("divjson2-background__image-pos",(function(e){return("left"===e.content_alignment_horizontal?"0%":"right"===e.content_alignment_horizontal?"100%":"50%")+" "+("top"===e.content_alignment_vertical?"0%":"bottom"===e.content_alignment_vertical?"100%":"50%")})),o("divjson2-background__image-size",(function(e){return"fill"!==e.scale&&e.scale?"fit"===e.scale?"contain":void 0:"cover"})),o("divjson2-background__image",(function(e,t,i){return{size:i("divjson2-background__image-size",e),pos:i("divjson2-background__image-pos",e),image:'url("'+home.htmlFilter(e.image_url)+'")'}})),o("divjson2-background__gradient",(function(e){return{image:"linear-gradient("+(90-Number(e.angle))+"deg,"+e.colors.map((function(e){return home.divjsonUtils.convertColor(e)})).join(",")+")"}})),o("divjson2-background__solid",(function(e){var t=home.divjsonUtils.convertColor(e.color||"transparent");return{image:"linear-gradient(to bottom,"+t+","+t+")"}})),o("divjson2-background",(function(e,t,i){var n=e.map((function(e){var t;return"solid"===e.type?t="divjson2-background__solid":"gradient"===e.type?t="divjson2-background__gradient":"image"===e.type&&(t="divjson2-background__image"),i(t,e)})).reverse().reduce((function(e,t){return e.image.push(t.image),e.size.push(t.size||"auto"),e.pos.push(t.pos||"50% 50%"),e}),{image:[],size:[],pos:[]});return{image:n.image.join(","),size:n.size.join(","),pos:n.pos.join(",")}})),o("divjson2-separator",(function(e,t,i){var n=e.json,o=e.style||{},s=n.delimiter_style&&"vertical"===n.delimiter_style.orientation?"vertical":"horizontal",r=!0;return n.delimiter_style&&n.delimiter_style.color&&("transparent"===n.delimiter_style.color||9===n.delimiter_style.color.length&&0===n.delimiter_style.color.indexOf("#00"))&&(r=!1),i("divjson2__base",home.divjsonUtils.json2MergeData(e,{json:n,style:o,mix:"divjson2-separator",content:r?i("div",{attrs:{style:home.makeStyle({background:home.divjsonUtils.convertColor(n.delimiter_style&&n.delimiter_style.color||"#14000000"),width:"horizontal"===s?"100%":home.divjsonUtils.convertPXToEM(1),height:"horizontal"===s?home.divjsonUtils.convertPXToEM(1):"100%"})}}):""},!0))})),o("divjson2-grid",(function(e,t,i){function n(e,t,i){var n,o=0,s=0,r=[];if(e.every(Boolean))for(s=e.reduce((function(e,t){return e+t}),0),n=0;n<i;++n)if(t[n]){var a=t[n]/e[n]*s;a>o&&(o=a)}for(n=0;n<i;++n)o?r[n]="minmax("+home.divjsonUtils.convertPXToEM(o*e[n]/s)+","+e[n]+"fr)":e[n]?r[n]=e[n]+"fr":r[n]="auto";return r.join(" ")}var o=e.json;if(Array.isArray(o.items)&&o.items.length){var s=e.style||{},r={};r.valign=home.htmlFilter(o.content_alignment_vertical||"top"),r.halign=home.htmlFilter(o.content_alignment_horizontal||"left");for(var a={},c=[],l=0,u=0,d=Number(o.column_count)||1,h=[],m=[],p=[],f=[],_=0;_<o.items.length;++_){var g=o.items[_],v=e.templates,b=e.context,y=i("divjson2__apply-templates",{json:g,templates:v,context:b,layoutName:e.layoutName});g=y.json,b=y.context;var w=Number(g.column_span)||1,k=Number(g.row_span)||1;c.push(i("divjson2__block",home.divjsonUtils.json2MergeData(e,{context:b,json:g,containerStyle:{"grid-area":u+1+"/"+(l+1)+"/span "+k+"/span "+w}})));for(var E=g.width&&"match_parent"===g.width.type&&g.width.weight?Number(g.width.weight)/w:0,x=g.height&&"match_parent"===g.height.type&&g.height.weight?Number(g.height.weight)/k:0,M=1===w&&g.width&&"fixed"===g.width.type&&g.width.value?Number(g.width.value)/w:0,C=1===k&&g.height&&"fixed"===g.height.type&&g.height.value?Number(g.height.value)/k:0,T=l;T<l+w;++T)for(var S=u;S<u+k;++S){if(a[T+"_"+S])return;a[T+"_"+S]=!0,(!h[T]||h[T]<E)&&(h[T]=E),(!m[S]||m[S]<E)&&(m[S]=x),(!p[T]||p[T]<M)&&(p[T]=M),(!f[S]||f[S]<C)&&(f[S]=C)}do{++l>=d&&(l=0,++u)}while(a[l+"_"+u])}if(0===l)return s["grid-template-columns"]=n(h,p,d),s["grid-template-rows"]=n(m,f,u),i("divjson2__base",home.divjsonUtils.json2MergeData(e,{json:o,style:s,mix:home.getBEMClassname("divjson2-grid",{mods:r}),content:c.join("")},!0));i("divjson2__log",{block:"divjson2-block",message:"Mismatching divjson2-grid rows/columns",level:"warn",source:e.layoutName})}else i("divjson2__log",{block:"divjson2-block",message:"Missing divjson2-grid items",level:"warn",source:e.layoutName})})),o("divjson2-gallery",(function(e,t,i){var n=e.json;if(Array.isArray(n.items)&&n.items.length){var o=n.items.map((function(t){return i("divjson2__block",home.divjsonUtils.json2MergeData(e,{json:t,containerMix:"imageloader__column imageloader__card"}))})).join("");if(o){var s=e.style||{},r={};r.align=home.htmlFilter(n.cross_content_alignment||"start"),r["height-ref"]=n.height&&"wrap_content"!==n.height.type?"parent":"content";var a=n.items.map((function(){return"auto"})).join(" ");return s["grid-template-columns"]=a,s["grid-gap"]=home.divjsonUtils.convertPXToEM(n.item_spacing||i("divjson2-gallery__default-item-padding")),n.paddings&&(s.padding=i("divjson2-gallery__horizontal-padding",n)||undefined),i("divjson2__base",home.divjsonUtils.json2MergeData(e,{json:n,skipHorizontalPadding:!0,mix:home.getBEMClassname("divjson2-gallery",{mods:r}),js:i("divjson2-gallery__js",{layoutName:e.layoutName}),content:i("divjson2-gallery__layout",{json:n,mix:home.getBEMClassname("imageloader",{mods:{different:"yes",tracking:n.precise_logging?"yes":""}}),layoutName:e.layoutName,content:i("divjson2-gallery__content",{attrs:{style:home.makeStyle(s)},items:o})})},!0))}}else i("divjson2__log",{block:"divjson2-block",message:"Missing divjson2-gallery items",level:"warn",source:e.layoutName})})),o.cached("divjson2-gallery__default-item-padding",(function(){return 16})),o("divjson2-gallery__horizontal-padding",(function(){return""})),o("divjson2-gallery__mix",(function(e){return"weighted"===e.json.arrow_position?" arrowed-list_arrow-position_weighted":""})),o("divjson2-gallery__content",(function(e,t,i){return i("arrowed-list__content_theme_media",{wrapMix:"divjson2-gallery__scroller imageloader__scroller",listMix:"media-service__list divjson2-gallery__items",content:e.items,attrs:e.attrs})})),o("divjson2-gallery__layout",(function(e,t,i){var n,o;return'<div class="divjson2-gallery__inner media-service__list-wrapper arrowed-list arrowed-list_theme_media i-bem '+(e.mix!==o?e.mix:"")+(((n=i("divjson2-gallery__mix",e))!==o?n:"")+'" data-bem="{&quot;imageloader&quot;:{},&quot;arrowed-list&quot;:{&quot;counter&quot;:&quot;')+(e.layoutName!==o?e.layoutName:"")+'&quot;}}"><div class="scroller__hider divjson2-gallery__wrapper">'+(e.content!==o?e.content:"")+"</div></div>"})),o("divjson2-tabs__selected-index",(function(e){var t=Number(e.selected_tab)||0;return t>=e.items.length&&(t=e.items.length-1),t<0&&(t=0),t})),o("divjson2-tabs__labels",(function(e,t,i){var n=e.json,o=e.id,s=i("divjson2-tabs__selected-index",n),r=i("divjson2-tabs__has-label-action");return n.items.map((function(t,n){var a,c=n===s;r&&(a=t.title_click_action);var l=a&&a.log_id?a.log_id.replace(/\//g,"."):n;return i("mix-tabber__tab",{href:a?a.url:undefined,mods:{selected:c?"yes":"no"},mix:home.getBEMClassname("divjson2-tabs__tab",{mods:{selected:c?"yes":"no"}}),content:home.htmlFilter(t.title),attrs:{tabindex:c?"0":"-1","aria-selected":c?"true":"false","aria-controls":c?o+"_panel_"+n:undefined,"data-key":n,"data-stat-link":a?e.layoutName+".tab.link."+l:undefined,"data-stat-select":e.layoutName+".tab.select."+l,id:o+"_tab_"+n}})})).join("")})),o("divjson2-tabs",(function(e,t,i){var n=e.json;if(Array.isArray(n.items)&&n.items.length){var o=e.style||{},s=n.id||"divjson2-tabs-"+home.rnd().substr(0,5),r=i("divjson2-tabs__selected-index",n),a=i("divjson2-tabs__label-style",{id:s,json:n}),c=i("media-service__inline-tabs")&&e.stack.some((function(e){return"divjson2__template-block"===e}));return i("divjson2__base",home.divjsonUtils.json2MergeData(e,{id:s,js:c?null:{"divjson2-tabs":{uniqId:s,baseData:{layoutName:e.layoutName,stack:e.stack,context:e.context},data:Object.keys(n.items).reduce((function(e,t,i){return i!==r&&(e[t]=n.items[t].div),e}),{}),swipe:i("divjson2-tabs__swipe-js",{json:n})}},json:n,style:o,mix:home.getBEMClassname("divjson2-tabs",{mods:{},mix:i("divjson2-tabs__mix",e)}),content:a+i("divjson2-tabs__layout",{json:n,tabs:c?"":i("div",{mix:"divjson2-tabs__tabs",content:i("divjson2-tabs__labels",{json:n,id:s,layoutName:e.layoutName})}),panels:i("mix-tabber__panel",{block:"divjson2-tabs",id:s,key:r,attrs:{"aria-labelledby":s+"_tab_"+r},content:i("divjson2__block",home.divjsonUtils.json2MergeData(e,{json:n.items[r].div},!0))})})},!0))}i("divjson2__log",{block:"divjson2-block",message:"Missing divjson2-tabs items",level:"warn",source:e.layoutName})})),o("divjson2-tabs__layout",(function(e,t,i){var n;return(e.tabs!==n?e.tabs:"")+'<div class="divjson2-tabs__panels">'+(e.panels!==n?e.panels:"")+"</div>"})),o("divjson2-tabs__has-label-action",(function(){return!1})),o("banner-inserts__content",(function(e,t,i){var n=e.borderColor,o=e.href,s=e.isInsert,r=e.stat,a=i("banner-inserts__image",{url:e.image,attrs:{style:"border-color: "+n}})+i("banner-inserts__show-url",{showUrl:e.showUrl});return a=i("home-link",{mix:"banner-inserts__link",href:o,content:a,stat:r,target:"_blank"}),i("banner-inserts",{rootMod:"imageloader imageloader_scroll_no i-bem",content:a,attrs:{"data-bem":home.getBEMParams({imageloader:{},"banner-inserts":{live:!s}})}})})),o("banner-inserts__client-view",(function(e,t,i){var n=home.getData("banner-inserts.data");if(n)return i("banner-inserts__content",n)})),o("banner-inserts__show-url",(function(e,t,i){return'<img src="'+(void 0!==e.showUrl?e.showUrl:"")+'" aria-hidden="true" style="display: none;" />'})),o("banner-inserts__image",(function(e,t,i){return'<div class="banner-inserts__image imageloader__image imageloader__image_loaded_no" data-image="'+(void 0!==e.url?e.url:"")+'" '+home.parseRules.bem(e,t,"attrs")+"></div>"})),o("banner-inserts",(function(e,t,i){var n;return'<div class="banner-inserts '+(e.rootMod!==n?e.rootMod:"")+'" '+home.parseRules.bem(e,t,"attrs")+">"+(e.content!==n?e.content:"")+"</div>"})),o("nhl-item__icon-props",(function(e,t,i){var n=i("nhl-item__sprite-map");return e.useSprite&&e.id in n?{style:"background-position:"+n[e.id]+"% 0",mix:"nhl-item__icon_sprite_yes"}:{style:"background-image:url("+e.icon+")",mix:""}})),o.cached("nhl-item__sprite-map",(function(){var e=["80790","80791","80792","80793","80794","80796","80798","80800","80803","80805","80807","80809","80816","80818","80820","80822","80824","80826","80828","80830","80833","80835","80837","80841","80842","80843","80844","80845","80846","80847","85232"];return e.reduce((function(t,i,n){return t[i]=(100*(52*n+2)/(52*e.length-48)).toFixed(3),t}),{})})),o("nhl-item__schedule-row",(function(e,t,i){var n,o=" : ",s=" : ";if("in_progress"===e.status||"finished"===e.status){var r,a=e.teams[0].score,c=e.teams[1].score;"finished"===e.status&&("shootout"===e.m_end_status?r="":"overtime"===e.m_end_status&&(r="")),r&&(e.teams[0].winner?a+=" "+r:c+=" "+r),o=a+" : "+c}else"not_started"===e.status&&e.start&&(o=s=e.start);return"not_started"===e.status?n="notstarted":"in_progress"===e.status?n="inprogress":"finished"===e.status&&(n="finished"),i("home-link",{href:e.url,stat:t.stat.getAttr("nhl.item.schedule_match"),mix:"nhl-item__table-row nhl-item__schedule-row"+(n?" nhl-item__schedule-row_status_"+n:""),content:i("nhl-item__schedule-row-layout",{name0:e.teams[0].name,icon0:i("nhl-item__icon-props",{useSprite:e.useSprite,id:e.teams[0].id,icon:e.teams[0].icon}),name1:e.teams[1].name,icon1:i("nhl-item__icon-props",{useSprite:e.useSprite,id:e.teams[1].id,icon:e.teams[1].icon}),score:o,hiddenScore:s})})})),o("nhl-item_schedule",(function(e,t,i){var n=i("nhl-item__table-limit")||5;return i("nhl-item__layout_schedule",{mix:"imageloader__card imageloader__column "+i("nhl-item__mix"),mods:{schedule:"yes"},title:e.title,events:e.events.slice(0,n).map((function(t){return t.useSprite=e.useSprite,i("nhl-item__schedule-row",t)})).join(""),button:i("button2",{mods:{theme:"normal",size:e.isTouch?"touch":"nhl",view:"default",tone:e.isDark?"dark2":"default"},url:e.button_url,stat:t.stat.getAttr("nhl.item.schedule"),content:e.button_text,mix:"nhl-item__table-button"})})})),o("nhl-item_news",(function(e,t,i){return i("home-link",{href:e.url,stat:t.stat.getAttr("nhl.item.news"),target:e.linkTarget,mix:"nhl-item i-bem nhl-item_news_yes imageloader__card imageloader__column "+i("nhl-item__mix"),attrs:{"data-bem":home.getBEMParams({"nhl-item":{}})},content:i(e.img?"nhl-item__layout_news":"nhl-item__layout_news-text",e)})})),o("nhl-item__table-row",(function(e,t,i){return e.icon=i("nhl-item__icon-props",e),i("home-link",{href:e.url,stat:t.stat.getAttr("nhl.item.team"),mix:"nhl-item__table-row",content:i("nhl-item__table-row-layout",e)})})),o("nhl-item_table",(function(e,t,i){var n=i("nhl-item__table-limit")||5;return i("nhl-item__layout_table",{mix:"imageloader__card imageloader__column "+i("nhl-item__mix"),mods:{table:"yes"},teams:e.teams.slice(0,n).map((function(t){return t.useSprite=e.useSprite,i("nhl-item__table-row",t)})).join(""),button:i("button2",{mods:{theme:"normal",size:e.isTouch?"touch":"nhl",view:"default",tone:e.isDark?"dark2":"default"},url:e.table_url,stat:t.stat.getAttr("nhl.item.table"),content:"  ",mix:"nhl-item__table-button"})})})),o("nhl-item",(function(e,t,i){if("table"===e.type)return i("nhl-item_table",e);if("news"===e.type)return i("nhl-item_news",e);if("schedule"===e.type)return i("nhl-item_schedule",e);var n,o,s,r,a,c=!!e.content_id;if(c&&(e.is_vod?n="":"in_progress"===e.status?n=" ":"finished"===e.status&&(n=" ")),e.teams&&"not_started"!==e.status){var l;if("in_progress"!==e.status&&"finished"!==e.status||(o=e.teams[0].result,s=e.teams[1].result),"finished"===e.status)"shootout"===e.m_end_status?l="":"overtime"===e.m_end_status&&(l=""),l&&(e.teams[0].winner?o+=" "+l:s+=" "+l);r=i("nhl-item__icon-props",{useSprite:e.useSprite,id:e.teams[0].id,icon:e.teams[0].icon}),a=i("nhl-item__icon-props",{useSprite:e.useSprite,id:e.teams[1].id,icon:e.teams[1].icon})}return i("home-link",{mix:home.getBEMClassname("nhl-item",{mods:{stream:c?"yes":""},mix:"i-bem imageloader__card imageloader__column "+i("nhl-item__mix")}),href:e.url,stat:t.stat.getAttr("nhl.match.link"),target:e.linkTarget,attrs:{"data-bem":home.getBEMParams({"nhl-item":{}})},content:i("nhl-item__layout",{topBadge:n?i("nhl-item__top-badge",{mods:{live:"in_progress"===e.status?"yes":""},mix:"nhl-item__badge",content:n}):"",push:"not_started"===e.status&&e.push&&t.pushSupported?i("promo-pusher-button_theme_nhl",{mods:{theme:"nhl"},mix:"nhl-item__push",text:"",js:{"promo-pusher-button":{counter:"nhl.match.sup",tags:[{name:e.push.tag,value:e.push.value,expiryDate:e.push.expire}],subscribedText:" "}}}):"",play:c?i("nhl-item__play"):"",teams:e.teams&&"not_started"!==e.status?i("nhl-item__teams",{bg0:e.teams[0].bg,bg1:e.teams[1].bg,icon0:r,icon1:a,text0:o!==undefined?i("div",{mix:"nhl-item__team-text",content:o}):"",text1:s!==undefined?i("div",{mix:"nhl-item__team-text",content:s}):""}):"",bottomBadge:e.duration?i("div",{mix:"nhl-item__badge nhl-item__bottom-badge",content:e.duration}):"",img:e.img,text:e.teams?e.teams[0].name+"  "+e.teams[1].name:e.text,textMods:{mods:{long:e.is_vod?"yes":""},mix:e.is_vod?"i-multiline-overflow":""},status:e.status_name})})})),o("nhl-item__schedule-row-layout",(function(e,t,i){var n,o;return'<span class="nhl-item__table-cell nhl-item__table-cell_team"><span class="nhl-item__schedule-name-wrapper" title="'+(e.name0!==o?e.name0:"")+'"><span class="nhl-item__table-icon nhl-item__table-icon_left nhl-item__icon nhl-item__icon_size_s '+((n=e.icon0)&&(n=n.mix),(n!==o?n:"")+'" style="')+((n=e.icon0)&&(n=n.style),(n!==o?n:"")+'"></span><span class="nhl-item__schedule-name">')+(e.name0!==o?e.name0:"")+'</span></span></span><span class="nhl-item__table-cell nhl-item__table-cell_score"><div class="nhl-item__schedule-score">'+(e.score!==o?e.score:"")+'</div><div class="nhl-item__schedule-score-placeholder">'+(e.hiddenScore!==o?e.hiddenScore:"")+'</div></span><span class="nhl-item__table-cell nhl-item__table-cell_team nhl-item__table-cell_team-right"><span class="nhl-item__schedule-name-wrapper" title="'+(e.name1!==o?e.name1:"")+'"><span class="nhl-item__schedule-name">'+(e.name1!==o?e.name1:"")+'</span><span class="nhl-item__table-icon nhl-item__table-icon_right nhl-item__icon nhl-item__icon_size_s '+((n=e.icon1)&&(n=n.mix),(n!==o?n:"")+'" style="')+((n=e.icon1)&&(n=n.style),(n!==o?n:"")+'"></span></span></span>')})),o("nhl-item__layout_schedule",(function(e,t,i){var n;return'<div class="'+home.parseRules.bem(e,t,"nhl-item.class")+'"><div class="nhl-item__schedule-title">'+(e.title!==n?e.title:"")+'</div><div class="nhl-item__table nhl-item__table_schedule_yes"><tbody>'+(e.events!==n?e.events:"")+"</tbody></div>"+(e.button!==n?e.button:"")+"</div>"})),o("nhl-item_dummy",(function(e,t,i){var n;return'<div class="nhl-item nhl-item_dummy '+((void 0!==(n=i("nhl-item__mix",e))?n:"")+'"></div>')})),o("nhl-item__layout_news-text",(function(e,t,i){var n;return'<div class="nhl-item__news-text nhl-item__news-text_title_yes i-multiline-overflow">'+(e.text!==n?e.text:"")+'</div><div class="nhl-item__news-subtext i-multiline-overflow">'+(e.subtext!==n?e.subtext:"")+"</div>"})),o("nhl-item__layout_news",(function(e,t,i){var n;return'<div class="nhl-item__news-image imageloader__image imageloader__image_loaded_no" data-image="'+(e.img!==n?e.img:"")+'"></div><div class="nhl-item__news-text i-multiline-overflow">'+(e.text!==n?e.text:"")+"</div>"})),o("nhl-item__table-row-layout",(function(e,t,i){var n,o;return'<span class="nhl-item__table-cell nhl-item__table-cell_name"><span class="nhl-item__table-icon nhl-item__table-icon_left nhl-item__icon nhl-item__icon_size_s '+((n=e.icon)&&(n=n.mix),(n!==o?n:"")+'" style="')+((n=e.icon)&&(n=n.style),(n!==o?n:"")+'"></span>')+(e.name!==o?e.name:"")+'</span><span class="nhl-item__table-cell nhl-item__table-cell_num">'+(e.score!==o?e.score:"")+'</span><span class="nhl-item__table-cell nhl-item__table-cell_num">'+(e.games!==o?e.games:"")+"</span>"})),o("nhl-item__layout_table",(function(e,t,i){var n;return'<div class="'+home.parseRules.bem(e,t,"nhl-item.class")+'"><div class="nhl-item__table"><div class="nhl-item__table-row"><span class="nhl-item__table-cell_head nhl-item__table-cell nhl-item__table-cell_name"> </span><span class="nhl-item__table-cell_head nhl-item__table-cell nhl-item__table-cell_num"></span><span class="nhl-item__table-cell_head nhl-item__table-cell nhl-item__table-cell_num"></span></div>'+(e.teams!==n?e.teams:"")+"</div>"+(e.button!==n?e.button:"")+"</div>"})),o("nhl-item__teams",(function(e,t,i){var n,o;return'<div class="nhl-item__teams" style="background:'+(e.bg0!==o?e.bg0:"")+'"><div class="nhl-item__team"><div class="nhl-item__icon '+((n=e.icon0)&&(n=n.mix),(n!==o?n:"")+'" style="')+((n=e.icon0)&&(n=n.style),(n!==o?n:"")+'"></div>')+(e.text0!==o?e.text0:"")+'</div><div class="nhl-item__team" style="background:linear-gradient(110deg,transparent,transparent 12px,'+(e.bg1!==o?e.bg1:"")+" 12.5px,"+(e.bg1!==o?e.bg1:"")+')">'+(e.text1!==o?e.text1:"")+'<div class="nhl-item__icon '+((n=e.icon1)&&(n=n.mix),(n!==o?n:"")+'" style="')+((n=e.icon1)&&(n=n.style),(n!==o?n:"")+'"></div></div></div>')})),o("nhl-item__play",(function(e,t,i){return'<div class="nhl-item__play"></div>'})),o("nhl-item__top-badge",(function(e,t,i){return'<div class="'+home.parseRules.bem(e,t,"nhl-item__top-badge.class")+'">'+(void 0!==e.content?e.content:"")+"</div>"})),o("nhl-item__layout",(function(e,t,i){var n;return'<div class="nhl-item__top imageloader__image imageloader__image_loaded_no" data-image="'+(e.img!==n?e.img:"")+'">'+(e.topBadge!==n?e.topBadge:"")+(e.push!==n?e.push:"")+(e.play!==n?e.play:"")+(e.teams!==n?e.teams:"")+(e.bottomBadge!==n?e.bottomBadge:"")+'</div><div class="nhl-item__bottom"><div class="'+home.parseRules.bem(e,t,"textMods.nhl-item__text.class")+'">'+(e.text!==n?e.text:"")+'</div><div class="nhl-item__status">'+(e.status!==n?e.status:"")+"</div></div>"})),o("nhl-item__mix",(function(){return"media-service__shadow home-link_hover_inherit"})),o("sup-notice__default-ok-text",(function(e,t){return" "})),o("sup-notice_type_default",(function(e,t,i){return i("sup-notice__layout_type_default",{ok:i("button2",{mods:{theme:"action",size:"n",view:"default",tone:"default"},mix:"sup-notice__ok sup-notice__ok_type_default",content:i("sup-notice__default-ok-text")}),cancel:i("button2",{mods:{theme:"normal",size:"n",view:"default",tone:"default"},mix:"sup-notice__cancel sup-notice__cancel_type_default",content:", "})})})),o("sup-notice__layout_type_default",(function(e,t,i){var n;return'<div class="sup-notice sup-notice_type_default sup-notice_hidden_yes i-bem"><div class="sup-notice__title">  </div><div class="sup-notice__text">     ,    .<br>     .      .</div><div class="sup-notice__buttons">'+(e.ok!==n?e.ok:"")+(e.cancel!==n?e.cancel:"")+"</div></div>"})),o("sup-notice_type_popup",(function(e,t,i){return i("sup-notice__layout_type_popup",{ok:i("button2",{mods:{theme:"action2",size:"n",view:"default"},mix:"sup-notice__ok sup-notice__ok_type_default",content:""}),cancel:i("button2",{mods:{theme:"clear",size:"n",view:"default"},mix:"sup-notice__cancel sup-notice__cancel_type_default",content:", "})})})),o("sup-notice__layout_type_popup",(function(e,t,i){var n;return'<div class="sup-notice sup-notice_type_popup sup-notice_hidden_yes i-bem"><div class="sup-notice__text">      .</div><div class="sup-notice__buttons">'+(e.cancel!==n?e.cancel:"")+(e.ok!==n?e.ok:"")+"</div></div>"})),o("promo-pusher-button__text",(function(e){if(e.text)return'<div class="promo-pusher-button__text">'+e.text+"</div>"})),o("promo-pusher-button",(function(e,t,i){var n,o;return'<div class="'+home.parseRules.bem(e,t,"promo-pusher-button.class")+" "+(e.initClass!==o?e.initClass:"")+'" data-bem="'+home.parseRules.bem(e,t,"js")+'" title=""><svg class="promo-pusher-button__icon" width="100%" height="100%" viewBox="0 0 18 18"><g fill="none"><path class="promo-pusher-button__base" d="M2.5 14h13v-.382l-2-1V12l.002-3.938c-.152-2.44-1.12-4.02-3.262-4.596l-.74-.2V2h-1v1.267l-.74.199C5.669 4.028 4.658 5.66 4.5 8v4.618l-2 1V14z" stroke="#FFF" stroke-width="2"/><path class="promo-pusher-button__base" d="M9 17c.986 0 1.5-.514 1.5-1.5V15h-3v.5c0 .986.514 1.5 1.5 1.5z" fill="#FFF"/><path class="promo-pusher-button__path" d="M2.5 14h13v-.382l-2-1V12l.002-3.938c-.152-2.44-1.12-4.02-3.262-4.596l-.74-.2V2h-1v1.267l-.74.199C5.669 4.028 4.658 5.66 4.5 8v4.618l-2 1V14z" stroke="#FFF" stroke-width="2"/></g></svg><div class="promo-pusher-button__icon-active"></div>'+(((n=i("promo-pusher-button__text",e))!==o?n:"")+"</div>")})),o("promo-pusher-button_theme_nhl",(function(e,t,i){var n;return'<div class="'+home.parseRules.bem(e,t,"promo-pusher-button.class")+' i-bem" data-bem="'+home.parseRules.bem(e,t,"js")+'" title=""><svg class="promo-pusher-button__icon" viewBox="0 0 16 16"><path d="M8 16a2.5 2.5 0 0 0 2.5-2.5h-5A2.5 2.5 0 0 0 8 16z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 1a1 1 0 0 1 2 0v.609a4.635 4.635 0 0 1 3.596 3.945l.49 3.896a3.554 3.554 0 0 0 1.119 2.17l.353.325c.36.332.47.856.272 1.305-.2.456-.652.75-1.15.75H2.32a1.26 1.26 0 0 1-1.152-.75 1.145 1.145 0 0 1 .272-1.306l.353-.324A3.554 3.554 0 0 0 2.91 9.45l.49-3.896A4.635 4.635 0 0 1 7 1.608V1zm4.102 8.7c.104.825.548 1.8 1.048 2.3h-8.3c.5-.5.941-1.475 1.045-2.3l.49-3.896a2.633 2.633 0 0 1 5.226 0l.491 3.896z" fill="#fff"/></svg><div class="promo-pusher-button__icon-progress"></div><div class="promo-pusher-button__icon-active"></div>'+((void 0!==(n=i("promo-pusher-button__text",e))?n:"")+"</div>")})),o("nhl__auth-promo-popup",(function(e,t,i){return i("tooltip",{mods:{size:e.size||"m",view:"classic",tone:"default",theme:"promo","promo-color":"blue",autoclosable:"yes"},popupMods:e.popupMods,js:{to:[e.direction||"bottom-center"],tailOffset:30,secondaryOffset:-30},content:i("nhl__auth-promo-popup-layout",{cancel:i("button2",{mods:{view:"classic",tone:"default",size:"m",theme:"clear"},content:""}),ok:i("button2",{mods:{view:"classic",tone:"default",size:"m",theme:"action"},content:"",url:e.authUrl,stat:t.stat.getAttr("nhl.auth_promo.ok")})})})})),o("nhl__title",(function(e,t){return".  2019/2020"})),o("nhl__panel",(function(e,t,i){var n,o=i("new-tab-links__check")?"_blank":"";return n=e.dummy?new Array(5).join(i("nhl-item_dummy",{})):e.items.map((function(t){return t.linkTarget=o,t.isDark=e.isDark,t.useSprite=e.useSprite,i("nhl-item",t)})).join(""),i("arrowed-list_theme_media",{mix:"nhl__list-wrapper media-service__list-wrapper imageloader imageloader_different_yes",wrapMix:"nhl__wrap media-service__wrap imageloader__scroller",listMix:"nhl__list media-service__list",content:n,mods:{theme:"media"},js:{"arrowed-list":{counter:"nhl"},imageloader:{}}})})),o("nhl__content",(function(e,t,i){var n=e.tabs[0].id,o={live:!t.zenInsert,data:{},isDark:e.isDark,useSprite:e.useSprite,query:e.query,retryButtonTheme:e.retryButtonTheme};o.data[n]={items:e[n],isDark:e.isDark,useSprite:e.useSprite};var s="hideSpoilers"in e&&e.hideSpoilersUrl;return s&&(o.showSpoilers=e.showSpoilersUrl,o.hideSpoilers=e.hideSpoilersUrl,o.logged=e.logged,o.authUrl=e.authUrl,o.autoscroll=e.autoscroll),i("media-service",{block:"nhl",rootMod:home.getBEMClassname("nhl",{mods:{dark:e.isDark?"yes":"","hide-score":s&&e.hideSpoilers?"yes":""}})+" i-bem",mods:{"has-carousel":"yes",tabs:"yes"},href:e.url,title:i("nhl__title"),target:i("new-tab-links__check")?"_blank":"",titleStat:t.stat.getClientCounter("nhl.title",!1,{rtxreqid:e.rtxreqid}),"title-after":t.inline_tabs?"":i("home-link",{href:e.url,mix:"nhl__logo",stat:t.stat.getAttr("nhl.logo")}),tabs:e.tabs.map((function(t,n){var o=0===n;return i("mix-tabber__tab",{mods:{selected:o?"yes":"no"},mix:home.getBEMClassname("nhl__tab",{mods:{selected:o?"yes":"no",last:n===e.tabs.length-1?"yes":""}}),content:t.title,attrs:{tabindex:o?"0":"-1","aria-selected":o?"true":"false","aria-controls":o?"nhl_panel_"+t.id:undefined,"data-key":t.id,"data-stat-select":"nhl.tab.select."+t.id,id:"nhl_tab_"+t.id}})})).join("")+(s?i("tumbler",{mix:"nhl__score-tumbler",mods:{size:"n",theme:"normal",view:"default",tone:e.isDark?"dark2":"",checked:e.hideSpoilers?"yes":"","pseudo-disabled":e.logged?"":"yes"},content:[{side:"left",content:" "}]}):""),content:i("nhl__layout",{panel:i("mix-tabber__panel",{block:"nhl",id:"nhl",key:n,mix:" media-service__panel",attrs:{"aria-labelledby":"nhl_tab_"+n},content:i("nhl__panel",o.data[n])})}),attrs:{role:"complementary","aria-label":i("nhl__title"),"data-bem":home.getBEMParams({nhl:o})}})})),o("nhl__client-view",(function(e,t,i){var n=home.getData("nhl.data");if(n)return i("nhl-loader",n)})),o("nhl__auth-promo-popup-layout",(function(e,t,i){var n;return'<div class="tooltip__close" title=""></div><div class="tooltip__description">  ,  &nbsp;  </div><div class="tooltip__buttons">'+(e.cancel!==n?e.cancel:"")+(e.ok!==n?e.ok:"")+"</div>"})),o("nhl__layout",(function(e,t,i){return'<div class="media-service__panels nhl__panels">'+(void 0!==e.panel?e.panel:"")+"</div>"})),o("nhl-loader",(function(e,t,i){var n={content:"api_data_big",lang:e.locale};return t.TestingInstance&&t.Getargshash&&(n.date=t.Getargshash.date,n.time=t.Getargshash.time),i("media-service",{block:"news-inserts",rootMod:home.getBEMClassname("nhl",{mods:{state:"loading",dark:e.isDark?"yes":""}})+" i-bem",mods:{"has-carousel":"yes",tabs:"yes"},title:".  2019/2020",tabs:i("dummy-cards__tabs"),content:i("nhl__layout",{panel:i("mix-tabber__panel",{block:"nhl",id:"nhl",key:"dummy",mix:" media-service__panel",attrs:{"aria-labelledby":"nhl_tab_dummy"},content:i("nhl__panel",{dummy:!0})})}),attrs:{role:"complementary","aria-label":".  2019/2020","data-bem":home.getBEMParams({"nhl-loader":{isDark:e.isDark,url:home.makeUrl({path:"/portal/hockey/main/",query:n}),query:n,hide_spoilers:e.hide_spoilers,hide_spoilers_url:e.hide_spoilers_url,show_spoilers_url:e.show_spoilers_url,retryButtonTheme:e.retryButtonTheme,useSprite:e.useSprite,logged:e.logged,authUrl:e.authUrl,autoscroll:e.autoscroll}})}})})),o("stream-top__content",(function(e,t,i){var n="";return n=e.fake?Array(5).join(i("stream-top-item_dummy",{isDark:e.isDark})):e.items.map((function(t,n){return i("stream-top-item",{isDark:e.isDark,counter:"stream_top.item."+(n+1),fromBlock:"stream_top_item",item:t,titleMix:"stream-top__item-title",allowVideoPreview:e.allowVideoPreview&&t.ya_video_preview,withReasons:e.withReasons})})).join(""),i("arrowed-list_theme_media",{mix:"stream-top__list-wrapper media-service__list-wrapper i-bem imageloader imageloader_different_yes",wrapMix:"stream-top__wrap media-service__wrap imageloader__scroller",listMix:"stream-top__list media-service__list",content:n,mods:{theme:"media"},js:{"arrowed-list":{counter:"stream-top"},imageloader:{}}})})),o("stream-top__title",(function(e,t){return"   "})),o("stream-top__block",(function(e,t,i){var n=i("stream-top__title");return i("media-service",{block:"stream-top",rootMod:(e.fake?"stream-top-loader":"stream-top")+" i-bem",title:n,titleIcon:i("media-service__title-icon-url",{layoutName:e.layoutName}),mods:{"has-carousel":"yes"},href:i("stream-url",{fromBlock:"stream_top_title",streamActive:"storefront"}),titleStat:t.stat.getClientCounter("stream_top.title"),content:i("stream-top__content",e),target:"_blank",attrs:{role:"complementary","aria-label":n,"data-bem":home.getBEMParams({"stream-top-loader":e.fake?{isDark:e.isDark,allowVideoPreview:e.allowVideoPreview,withReasons:e.withReasons}:undefined,"stream-top":e.fake?undefined:{live:!1}})}})})),o("stream-top__client-view",(function(e,t,i){var n=home.getData("stream-top.data");if(n)return i("stream-top__block",{isDark:n.isDark,allowVideoPreview:n.allowVideoPreview,withReasons:n.withReasons,fake:!0})})),o("stream-top-item_dummy",(function(e,t,i){return i("stream-top-item__layout",{mods:{dummy:"yes",dark:e.isDark?"yes":undefined},content:i("home-link",{mix:"stream-top-item__link",content:i("stream-top-item__content",{title:""})})})})),o("stream-top-item",(function(e,t,i){var n,o,s=e.item||{},r=s.blogger||s.theme,a=r&&r.avatar,c=i("retina-scale"),l="",u=e.withReasons&&s.top_reasons?s.top_reasons.slice(0,3):[],d=[],h=[];return r&&(n=a?home.getVideoThumbUrl({url:a,size:"112x112",block:"stream-top-item",retinaScale:c}):""),e.withReasons?(u.map((function(e,n){var o="https://yastatic.net/s3/home/stream/top-reasons/"+e+(0===n?".png":"_crop.png");d.push(i("stream-top-item__reason-icon",{attrs:{style:"background-image:url("+o+")"}})),h.push(t.l10n("stream.top_reason."+e))})),l=i("stream-top-item__reasons",{text:home.capitalize(h.join(", ")),icons:d.join("")})):l=i("stream-top-item__time",{time:i("stream-time",{program:s,noBadge:!0})}),o=i("stream-top-item__content",{title:s.title,titleMix:e.titleMix,mix:"imageloader__image imageloader__image_loaded_no"+(e.allowVideoPreview?" thumb-preview__target":""),img:s.thumbnail?home.getVideoThumbUrl({url:s.thumbnail,size:"200x150",block:"stream-top-item",retinaScale:c}):"",owner:r?i("stream-top-item__owner",{avatar:i("stream-top-item__avatar",{attrs:{style:n?"background-image:url("+n+")":""}}),author:r.title}):"",bottom:l,badge:s.top_position?i("stream-top-item__badge",{topValue:e.withReasons?s.top_position:" "+s.top_position}):""}),i("stream-top-item__layout",{js:e.allowVideoPreview?{"thumb-preview":{preview:{url:s.ya_video_preview}}}:{},mods:{dark:e.isDark?"yes":undefined,withReasons:e.withReasons?"yes":undefined},mix:"imageloader__column "+(e.mix||"")+(e.allowVideoPreview?" thumb-preview thumb-preview_video i-bem":""),content:i("home-link",{mix:"stream-top-item__link imageloader__card",content:o,href:i("stream-url",{fromBlock:e.fromBlock,streamId:s.content_id}),target:"_blank",stat:t.stat.getClientCounter(e.counter)})})})),o("stream-top-item__badge",(function(e,t,i){return'<div class="stream-top-item__badge">'+(void 0!==e.topValue?e.topValue:"")+"</div>"})),o("stream-top-item__avatar",(function(e,t,i){return'<div class="'+home.parseRules.bem(e,t,"stream-top-item__avatar.class")+' imageloader__image imageloader__image_loaded_no" '+home.parseRules.bem(e,t,"attrs")+"></div>"})),o("stream-top-item__owner",(function(e,t,i){var n;return'<div class="stream-top-item__owner">'+(e.avatar!==n?e.avatar:"")+'<div class="stream-top-item__author">'+(e.author!==n?e.author:"")+"</div></div>"})),o("stream-top-item__reason-icon",(function(e,t,i){return'<div class="'+home.parseRules.bem(e,t,"stream-top-item__reason-icon.class")+'" '+home.parseRules.bem(e,t,"attrs")+"></div>"})),o("stream-top-item__reasons",(function(e,t,i){var n;return'<div class="stream-top-item__reasons"><div class="stream-top-item__reasons-icons">'+(e.icons!==n?e.icons:"")+'</div><div class="stream-top-item__reasons-text i-multiline-overflow">'+(e.text!==n?e.text:"")+"</div></div>"})),o("stream-top-item__time",(function(e,t,i){return'<div class="stream-top-item__time">'+(void 0!==e.time?e.time:"")+"</div>"})),o("stream-top-item__content",(function(e,t,i){var n;return'<span class="stream-top-item__image '+(e.mix!==n?e.mix:"")+'" data-image="'+(e.img!==n?e.img:"")+'"><div class="stream-top-item__play"></div></span><div class="stream-top-item__info">'+(e.owner!==n?e.owner:"")+(e.badge!==n?e.badge:"")+'<span class="'+(e.titleMix!==n?e.titleMix:"")+' stream-top-item__title i-multiline-overflow">'+(e.title!==n?e.title:"")+"</span>"+(e.bottom!==n?e.bottom:"")+"</div>"})),o("stream-top-item__layout",(function(e,t,i){return'<div class="'+home.parseRules.bem(e,t,"stream-top-item.class")+'" data-bem="'+home.parseRules.bem(e,t,"js")+'">'+(void 0!==e.content?e.content:"")+"</div>"}))}();if(window.Ya&&Ya.Rum){Ya.Rum.sendTimeMark("2095.1428");}